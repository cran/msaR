<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Zach Charlop-Powers" />

<meta name="date" content="2016-12-05" />

<title>Using msaR</title>

<script src="data:application/x-javascript;base64,KGZ1bmN0aW9uKCkgewogIC8vIElmIHdpbmRvdy5IVE1MV2lkZ2V0cyBpcyBhbHJlYWR5IGRlZmluZWQsIHRoZW4gdXNlIGl0OyBvdGhlcndpc2UgY3JlYXRlIGEKICAvLyBuZXcgb2JqZWN0LiBUaGlzIGFsbG93cyBwcmVjZWRpbmcgY29kZSB0byBzZXQgb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUKICAvLyBpbml0aWFsaXphdGlvbiBwcm9jZXNzICh0aG91Z2ggbm9uZSBjdXJyZW50bHkgZXhpc3QpLgogIHdpbmRvdy5IVE1MV2lkZ2V0cyA9IHdpbmRvdy5IVE1MV2lkZ2V0cyB8fCB7fTsKCiAgLy8gU2VlIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gYSB2aWV3ZXIgcGFuZS4gSWYgbm90LCB3ZSdyZSBpbiBhIHdlYiBicm93c2VyLgogIHZhciB2aWV3ZXJNb2RlID0gd2luZG93LkhUTUxXaWRnZXRzLnZpZXdlck1vZGUgPQogICAgICAvXGJ2aWV3ZXJfcGFuZT0xXGIvLnRlc3Qod2luZG93LmxvY2F0aW9uKTsKCiAgLy8gU2VlIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gU2hpbnkgbW9kZS4gSWYgbm90LCBpdCdzIGEgc3RhdGljIGRvY3VtZW50LgogIC8vIE5vdGUgdGhhdCBzdGF0aWMgd2lkZ2V0cyBjYW4gYXBwZWFyIGluIGJvdGggU2hpbnkgYW5kIHN0YXRpYyBtb2RlcywgYnV0CiAgLy8gb2J2aW91c2x5LCBTaGlueSB3aWRnZXRzIGNhbiBvbmx5IGFwcGVhciBpbiBTaGlueSBhcHBzL2RvY3VtZW50cy4KICB2YXIgc2hpbnlNb2RlID0gd2luZG93LkhUTUxXaWRnZXRzLnNoaW55TW9kZSA9CiAgICAgIHR5cGVvZih3aW5kb3cuU2hpbnkpICE9PSAidW5kZWZpbmVkIiAmJiAhIXdpbmRvdy5TaGlueS5vdXRwdXRCaW5kaW5nczsKCiAgLy8gV2UgY2FuJ3QgY291bnQgb24galF1ZXJ5IGJlaW5nIGF2YWlsYWJsZSwgc28gd2UgaW1wbGVtZW50IG91ciBvd24KICAvLyB2ZXJzaW9uIGlmIG5lY2Vzc2FyeS4KICBmdW5jdGlvbiBxdWVyeVNlbGVjdG9yQWxsKHNjb3BlLCBzZWxlY3RvcikgewogICAgaWYgKHR5cGVvZihqUXVlcnkpICE9PSAidW5kZWZpbmVkIiAmJiBzY29wZSBpbnN0YW5jZW9mIGpRdWVyeSkgewogICAgICByZXR1cm4gc2NvcGUuZmluZChzZWxlY3Rvcik7CiAgICB9CiAgICBpZiAoc2NvcGUucXVlcnlTZWxlY3RvckFsbCkgewogICAgICByZXR1cm4gc2NvcGUucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBhc0FycmF5KHZhbHVlKSB7CiAgICBpZiAodmFsdWUgPT09IG51bGwpCiAgICAgIHJldHVybiBbXTsKICAgIGlmICgkLmlzQXJyYXkodmFsdWUpKQogICAgICByZXR1cm4gdmFsdWU7CiAgICByZXR1cm4gW3ZhbHVlXTsKICB9CgogIC8vIEltcGxlbWVudCBqUXVlcnkncyBleHRlbmQKICBmdW5jdGlvbiBleHRlbmQodGFyZ2V0IC8qLCAuLi4gKi8pIHsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDEpIHsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07CiAgICAgIGZvciAodmFyIHByb3AgaW4gc291cmNlKSB7CiAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgewogICAgICAgICAgdGFyZ2V0W3Byb3BdID0gc291cmNlW3Byb3BdOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHRhcmdldDsKICB9CgogIC8vIElFOCBkb2Vzbid0IHN1cHBvcnQgQXJyYXkuZm9yRWFjaC4KICBmdW5jdGlvbiBmb3JFYWNoKHZhbHVlcywgY2FsbGJhY2ssIHRoaXNBcmcpIHsKICAgIGlmICh2YWx1ZXMuZm9yRWFjaCkgewogICAgICB2YWx1ZXMuZm9yRWFjaChjYWxsYmFjaywgdGhpc0FyZyk7CiAgICB9IGVsc2UgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgdmFsdWVzW2ldLCBpLCB2YWx1ZXMpOwogICAgICB9CiAgICB9CiAgfQoKICAvLyBSZXBsYWNlcyB0aGUgc3BlY2lmaWVkIG1ldGhvZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgZnVuY1NvdXJjZS4KICAvLwogIC8vIE5vdGUgdGhhdCBmdW5jU291cmNlIHNob3VsZCBub3QgQkUgdGhlIG5ldyBtZXRob2QsIGl0IHNob3VsZCBiZSBhIGZ1bmN0aW9uCiAgLy8gdGhhdCBSRVRVUk5TIHRoZSBuZXcgbWV0aG9kLiBmdW5jU291cmNlIHJlY2VpdmVzIGEgc2luZ2xlIGFyZ3VtZW50IHRoYXQgaXMKICAvLyB0aGUgb3ZlcnJpZGRlbiBtZXRob2QsIGl0IGNhbiBiZSBjYWxsZWQgZnJvbSB0aGUgbmV3IG1ldGhvZC4gVGhlIG92ZXJyaWRkZW4KICAvLyBtZXRob2QgY2FuIGJlIGNhbGxlZCBsaWtlIGEgcmVndWxhciBmdW5jdGlvbiwgaXQgaGFzIHRoZSB0YXJnZXQgcGVybWFuZW50bHkKICAvLyBib3VuZCB0byBpdCBzbyAidGhpcyIgd2lsbCB3b3JrIGNvcnJlY3RseS4KICBmdW5jdGlvbiBvdmVycmlkZU1ldGhvZCh0YXJnZXQsIG1ldGhvZE5hbWUsIGZ1bmNTb3VyY2UpIHsKICAgIHZhciBzdXBlckZ1bmMgPSB0YXJnZXRbbWV0aG9kTmFtZV0gfHwgZnVuY3Rpb24oKSB7fTsKICAgIHZhciBzdXBlckZ1bmNCb3VuZCA9IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gc3VwZXJGdW5jLmFwcGx5KHRhcmdldCwgYXJndW1lbnRzKTsKICAgIH07CiAgICB0YXJnZXRbbWV0aG9kTmFtZV0gPSBmdW5jU291cmNlKHN1cGVyRnVuY0JvdW5kKTsKICB9CgogIC8vIEFkZCBhIG1ldGhvZCB0byBkZWxlZ2F0b3IgdGhhdCwgd2hlbiBpbnZva2VkLCBjYWxscwogIC8vIGRlbGVnYXRlZS5tZXRob2ROYW1lLiBJZiB0aGVyZSBpcyBubyBzdWNoIG1ldGhvZCBvbgogIC8vIHRoZSBkZWxlZ2F0ZWUsIGJ1dCB0aGVyZSB3YXMgb25lIG9uIGRlbGVnYXRvciBiZWZvcmUKICAvLyBkZWxlZ2F0ZU1ldGhvZCB3YXMgY2FsbGVkLCB0aGVuIHRoZSBvcmlnaW5hbCB2ZXJzaW9uCiAgLy8gaXMgaW52b2tlZCBpbnN0ZWFkLgogIC8vIEZvciBleGFtcGxlOgogIC8vCiAgLy8gdmFyIGEgPSB7CiAgLy8gICBtZXRob2QxOiBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ2ExJyk7IH0KICAvLyAgIG1ldGhvZDI6IGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygnYTInKTsgfQogIC8vIH07CiAgLy8gdmFyIGIgPSB7CiAgLy8gICBtZXRob2QxOiBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ2IxJyk7IH0KICAvLyB9OwogIC8vIGRlbGVnYXRlTWV0aG9kKGEsIGIsICJtZXRob2QxIik7CiAgLy8gZGVsZWdhdGVNZXRob2QoYSwgYiwgIm1ldGhvZDIiKTsKICAvLyBhLm1ldGhvZDEoKTsKICAvLyBhLm1ldGhvZDIoKTsKICAvLwogIC8vIFRoZSBvdXRwdXQgd291bGQgYmUgImIxIiwgImEyIi4KICBmdW5jdGlvbiBkZWxlZ2F0ZU1ldGhvZChkZWxlZ2F0b3IsIGRlbGVnYXRlZSwgbWV0aG9kTmFtZSkgewogICAgdmFyIGluaGVyaXRlZCA9IGRlbGVnYXRvclttZXRob2ROYW1lXTsKICAgIGRlbGVnYXRvclttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgdGFyZ2V0ID0gZGVsZWdhdGVlOwogICAgICB2YXIgbWV0aG9kID0gZGVsZWdhdGVlW21ldGhvZE5hbWVdOwoKICAgICAgLy8gVGhlIG1ldGhvZCBkb2Vzbid0IGV4aXN0IG9uIHRoZSBkZWxlZ2F0ZWUuIEluc3RlYWQsCiAgICAgIC8vIGNhbGwgdGhlIG1ldGhvZCBvbiB0aGUgZGVsZWdhdG9yLCBpZiBpdCBleGlzdHMuCiAgICAgIGlmICghbWV0aG9kKSB7CiAgICAgICAgdGFyZ2V0ID0gZGVsZWdhdG9yOwogICAgICAgIG1ldGhvZCA9IGluaGVyaXRlZDsKICAgICAgfQoKICAgICAgaWYgKG1ldGhvZCkgewogICAgICAgIHJldHVybiBtZXRob2QuYXBwbHkodGFyZ2V0LCBhcmd1bWVudHMpOwogICAgICB9CiAgICB9OwogIH0KCiAgLy8gSW1wbGVtZW50IGEgdmFndWUgZmFjc2ltaWxpZSBvZiBqUXVlcnkncyBkYXRhIG1ldGhvZAogIGZ1bmN0aW9uIGVsZW1lbnREYXRhKGVsLCBuYW1lLCB2YWx1ZSkgewogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMikgewogICAgICByZXR1cm4gZWxbImh0bWx3aWRnZXRfZGF0YV8iICsgbmFtZV07CiAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMykgewogICAgICBlbFsiaHRtbHdpZGdldF9kYXRhXyIgKyBuYW1lXSA9IHZhbHVlOwogICAgICByZXR1cm4gZWw7CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIldyb25nIG51bWJlciBvZiBhcmd1bWVudHMgZm9yIGVsZW1lbnREYXRhOiAiICsKICAgICAgICBhcmd1bWVudHMubGVuZ3RoKTsKICAgIH0KICB9CgogIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzQ0NjE3MC9lc2NhcGUtc3RyaW5nLWZvci11c2UtaW4tamF2YXNjcmlwdC1yZWdleAogIGZ1bmN0aW9uIGVzY2FwZVJlZ0V4cChzdHIpIHsKICAgIHJldHVybiBzdHIucmVwbGFjZSgvW1wtXFtcXVwvXHtcfVwoXClcKlwrXD9cLlxcXF5cJFx8XS9nLCAiXFwkJiIpOwogIH0KCiAgZnVuY3Rpb24gaGFzQ2xhc3MoZWwsIGNsYXNzTmFtZSkgewogICAgdmFyIHJlID0gbmV3IFJlZ0V4cCgiXFxiIiArIGVzY2FwZVJlZ0V4cChjbGFzc05hbWUpICsgIlxcYiIpOwogICAgcmV0dXJuIHJlLnRlc3QoZWwuY2xhc3NOYW1lKTsKICB9CgogIC8vIGVsZW1lbnRzIC0gYXJyYXkgKG9yIGFycmF5LWxpa2Ugb2JqZWN0KSBvZiBIVE1MIGVsZW1lbnRzCiAgLy8gY2xhc3NOYW1lIC0gY2xhc3MgbmFtZSB0byB0ZXN0IGZvcgogIC8vIGluY2x1ZGUgLSBpZiB0cnVlLCBvbmx5IHJldHVybiBlbGVtZW50cyB3aXRoIGdpdmVuIGNsYXNzTmFtZTsKICAvLyAgIGlmIGZhbHNlLCBvbmx5IHJldHVybiBlbGVtZW50cyAqd2l0aG91dCogZ2l2ZW4gY2xhc3NOYW1lCiAgZnVuY3Rpb24gZmlsdGVyQnlDbGFzcyhlbGVtZW50cywgY2xhc3NOYW1lLCBpbmNsdWRlKSB7CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykgewogICAgICBpZiAoaGFzQ2xhc3MoZWxlbWVudHNbaV0sIGNsYXNzTmFtZSkgPT0gaW5jbHVkZSkKICAgICAgICByZXN1bHRzLnB1c2goZWxlbWVudHNbaV0pOwogICAgfQogICAgcmV0dXJuIHJlc3VsdHM7CiAgfQoKICBmdW5jdGlvbiBvbihvYmosIGV2ZW50TmFtZSwgZnVuYykgewogICAgaWYgKG9iai5hZGRFdmVudExpc3RlbmVyKSB7CiAgICAgIG9iai5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgZnVuYywgZmFsc2UpOwogICAgfSBlbHNlIGlmIChvYmouYXR0YWNoRXZlbnQpIHsKICAgICAgb2JqLmF0dGFjaEV2ZW50KGV2ZW50TmFtZSwgZnVuYyk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBvZmYob2JqLCBldmVudE5hbWUsIGZ1bmMpIHsKICAgIGlmIChvYmoucmVtb3ZlRXZlbnRMaXN0ZW5lcikKICAgICAgb2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBmdW5jLCBmYWxzZSk7CiAgICBlbHNlIGlmIChvYmouZGV0YWNoRXZlbnQpIHsKICAgICAgb2JqLmRldGFjaEV2ZW50KGV2ZW50TmFtZSwgZnVuYyk7CiAgICB9CiAgfQoKICAvLyBUcmFuc2xhdGUgYXJyYXkgb2YgdmFsdWVzIHRvIHRvcC9yaWdodC9ib3R0b20vbGVmdCwgYXMgdXN1YWwgd2l0aAogIC8vIHRoZSAicGFkZGluZyIgQ1NTIHByb3BlcnR5CiAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL3BhZGRpbmcKICBmdW5jdGlvbiB1bnBhY2tQYWRkaW5nKHZhbHVlKSB7CiAgICBpZiAodHlwZW9mKHZhbHVlKSA9PT0gIm51bWJlciIpCiAgICAgIHZhbHVlID0gW3ZhbHVlXTsKICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDEpIHsKICAgICAgcmV0dXJuIHt0b3A6IHZhbHVlWzBdLCByaWdodDogdmFsdWVbMF0sIGJvdHRvbTogdmFsdWVbMF0sIGxlZnQ6IHZhbHVlWzBdfTsKICAgIH0KICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDIpIHsKICAgICAgcmV0dXJuIHt0b3A6IHZhbHVlWzBdLCByaWdodDogdmFsdWVbMV0sIGJvdHRvbTogdmFsdWVbMF0sIGxlZnQ6IHZhbHVlWzFdfTsKICAgIH0KICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDMpIHsKICAgICAgcmV0dXJuIHt0b3A6IHZhbHVlWzBdLCByaWdodDogdmFsdWVbMV0sIGJvdHRvbTogdmFsdWVbMl0sIGxlZnQ6IHZhbHVlWzFdfTsKICAgIH0KICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDQpIHsKICAgICAgcmV0dXJuIHt0b3A6IHZhbHVlWzBdLCByaWdodDogdmFsdWVbMV0sIGJvdHRvbTogdmFsdWVbMl0sIGxlZnQ6IHZhbHVlWzNdfTsKICAgIH0KICB9CgogIC8vIENvbnZlcnQgYW4gdW5wYWNrZWQgcGFkZGluZyBvYmplY3QgdG8gYSBDU1MgdmFsdWUKICBmdW5jdGlvbiBwYWRkaW5nVG9Dc3MocGFkZGluZ09iaikgewogICAgcmV0dXJuIHBhZGRpbmdPYmoudG9wICsgInB4ICIgKyBwYWRkaW5nT2JqLnJpZ2h0ICsgInB4ICIgKyBwYWRkaW5nT2JqLmJvdHRvbSArICJweCAiICsgcGFkZGluZ09iai5sZWZ0ICsgInB4IjsKICB9CgogIC8vIE1ha2VzIGEgbnVtYmVyIHN1aXRhYmxlIGZvciBDU1MKICBmdW5jdGlvbiBweCh4KSB7CiAgICBpZiAodHlwZW9mKHgpID09PSAibnVtYmVyIikKICAgICAgcmV0dXJuIHggKyAicHgiOwogICAgZWxzZQogICAgICByZXR1cm4geDsKICB9CgogIC8vIFJldHJpZXZlcyBydW50aW1lIHdpZGdldCBzaXppbmcgaW5mb3JtYXRpb24gZm9yIGFuIGVsZW1lbnQuCiAgLy8gVGhlIHJldHVybiB2YWx1ZSBpcyBlaXRoZXIgbnVsbCwgb3IgYW4gb2JqZWN0IHdpdGggZmlsbCwgcGFkZGluZywKICAvLyBkZWZhdWx0V2lkdGgsIGRlZmF1bHRIZWlnaHQgZmllbGRzLgogIGZ1bmN0aW9uIHNpemluZ1BvbGljeShlbCkgewogICAgdmFyIHNpemluZ0VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcigic2NyaXB0W2RhdGEtZm9yPSciICsgZWwuaWQgKyAiJ11bdHlwZT0nYXBwbGljYXRpb24vaHRtbHdpZGdldC1zaXppbmcnXSIpOwogICAgaWYgKCFzaXppbmdFbCkKICAgICAgcmV0dXJuIG51bGw7CiAgICB2YXIgc3AgPSBKU09OLnBhcnNlKHNpemluZ0VsLnRleHRDb250ZW50IHx8IHNpemluZ0VsLnRleHQgfHwgInt9Iik7CiAgICBpZiAodmlld2VyTW9kZSkgewogICAgICByZXR1cm4gc3Audmlld2VyOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHNwLmJyb3dzZXI7CiAgICB9CiAgfQoKICAvLyBAcGFyYW0gdGFza3MgQXJyYXkgb2Ygc3RyaW5ncyAob3IgZmFsc3kgdmFsdWUsIGluIHdoaWNoIGNhc2Ugbm8tb3ApLgogIC8vICAgRWFjaCBlbGVtZW50IG11c3QgYmUgYSB2YWxpZCBKYXZhU2NyaXB0IGV4cHJlc3Npb24gdGhhdCB5aWVsZHMgYQogIC8vICAgZnVuY3Rpb24uIE9yLCBjYW4gYmUgYW4gYXJyYXkgb2Ygb2JqZWN0cyB3aXRoICJjb2RlIiBhbmQgImRhdGEiCiAgLy8gICBwcm9wZXJ0aWVzOyBpbiB0aGlzIGNhc2UsIHRoZSAiY29kZSIgcHJvcGVydHkgc2hvdWxkIGJlIGEgc3RyaW5nCiAgLy8gICBvZiBKUyB0aGF0J3MgYW4gZXhwciB0aGF0IHlpZWxkcyBhIGZ1bmN0aW9uLCBhbmQgImRhdGEiIHNob3VsZCBiZQogIC8vICAgYW4gb2JqZWN0IHRoYXQgd2lsbCBiZSBhZGRlZCBhcyBhbiBhZGRpdGlvbmFsIGFyZ3VtZW50IHdoZW4gdGhhdAogIC8vICAgZnVuY3Rpb24gaXMgY2FsbGVkLgogIC8vIEBwYXJhbSB0YXJnZXQgVGhlIG9iamVjdCB0aGF0IHdpbGwgYmUgInRoaXMiIGZvciBlYWNoIGZ1bmN0aW9uCiAgLy8gICBleGVjdXRpb24uCiAgLy8gQHBhcmFtIGFyZ3MgQXJyYXkgb2YgYXJndW1lbnRzIHRvIGJlIHBhc3NlZCB0byB0aGUgZnVuY3Rpb25zLiAoVGhlCiAgLy8gICBzYW1lIGFyZ3VtZW50cyB3aWxsIGJlIHBhc3NlZCB0byBhbGwgZnVuY3Rpb25zLikKICBmdW5jdGlvbiBldmFsQW5kUnVuKHRhc2tzLCB0YXJnZXQsIGFyZ3MpIHsKICAgIGlmICh0YXNrcykgewogICAgICBmb3JFYWNoKHRhc2tzLCBmdW5jdGlvbih0YXNrKSB7CiAgICAgICAgdmFyIHRoZXNlQXJncyA9IGFyZ3M7CiAgICAgICAgaWYgKHR5cGVvZih0YXNrKSA9PT0gIm9iamVjdCIpIHsKICAgICAgICAgIHRoZXNlQXJncyA9IHRoZXNlQXJncy5jb25jYXQoW3Rhc2suZGF0YV0pOwogICAgICAgICAgdGFzayA9IHRhc2suY29kZTsKICAgICAgICB9CiAgICAgICAgdmFyIHRhc2tGdW5jID0gZXZhbCgiKCIgKyB0YXNrICsgIikiKTsKICAgICAgICBpZiAodHlwZW9mKHRhc2tGdW5jKSAhPT0gImZ1bmN0aW9uIikgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJUYXNrIG11c3QgYmUgYSBmdW5jdGlvbiEgU291cmNlOlxuIiArIHRhc2spOwogICAgICAgIH0KICAgICAgICB0YXNrRnVuYy5hcHBseSh0YXJnZXQsIHRoZXNlQXJncyk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgZnVuY3Rpb24gaW5pdFNpemluZyhlbCkgewogICAgdmFyIHNpemluZyA9IHNpemluZ1BvbGljeShlbCk7CiAgICBpZiAoIXNpemluZykKICAgICAgcmV0dXJuOwoKICAgIHZhciBjZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaHRtbHdpZGdldF9jb250YWluZXIiKTsKICAgIGlmICghY2VsKQogICAgICByZXR1cm47CgogICAgaWYgKHR5cGVvZihzaXppbmcucGFkZGluZykgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUubWFyZ2luID0gIjAiOwogICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmcgPSBwYWRkaW5nVG9Dc3ModW5wYWNrUGFkZGluZyhzaXppbmcucGFkZGluZykpOwogICAgfQoKICAgIGlmIChzaXppbmcuZmlsbCkgewogICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gImhpZGRlbiI7CiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUud2lkdGggPSAiMTAwJSI7CiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuaGVpZ2h0ID0gIjEwMCUiOwogICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUud2lkdGggPSAiMTAwJSI7CiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5oZWlnaHQgPSAiMTAwJSI7CiAgICAgIGlmIChjZWwpIHsKICAgICAgICBjZWwuc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwogICAgICAgIHZhciBwYWQgPSB1bnBhY2tQYWRkaW5nKHNpemluZy5wYWRkaW5nKTsKICAgICAgICBjZWwuc3R5bGUudG9wID0gcGFkLnRvcCArICJweCI7CiAgICAgICAgY2VsLnN0eWxlLnJpZ2h0ID0gcGFkLnJpZ2h0ICsgInB4IjsKICAgICAgICBjZWwuc3R5bGUuYm90dG9tID0gcGFkLmJvdHRvbSArICJweCI7CiAgICAgICAgY2VsLnN0eWxlLmxlZnQgPSBwYWQubGVmdCArICJweCI7CiAgICAgICAgZWwuc3R5bGUud2lkdGggPSAiMTAwJSI7CiAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gIjEwMCUiOwogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGdldFdpZHRoOiBmdW5jdGlvbigpIHsgcmV0dXJuIGNlbC5vZmZzZXRXaWR0aDsgfSwKICAgICAgICBnZXRIZWlnaHQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gY2VsLm9mZnNldEhlaWdodDsgfQogICAgICB9OwoKICAgIH0gZWxzZSB7CiAgICAgIGVsLnN0eWxlLndpZHRoID0gcHgoc2l6aW5nLndpZHRoKTsKICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gcHgoc2l6aW5nLmhlaWdodCk7CgogICAgICByZXR1cm4gewogICAgICAgIGdldFdpZHRoOiBmdW5jdGlvbigpIHsgcmV0dXJuIGVsLm9mZnNldFdpZHRoOyB9LAogICAgICAgIGdldEhlaWdodDogZnVuY3Rpb24oKSB7IHJldHVybiBlbC5vZmZzZXRIZWlnaHQ7IH0KICAgICAgfTsKICAgIH0KICB9CgogIC8vIERlZmF1bHQgaW1wbGVtZW50YXRpb25zIGZvciBtZXRob2RzCiAgdmFyIGRlZmF1bHRzID0gewogICAgZmluZDogZnVuY3Rpb24oc2NvcGUpIHsKICAgICAgcmV0dXJuIHF1ZXJ5U2VsZWN0b3JBbGwoc2NvcGUsICIuIiArIHRoaXMubmFtZSk7CiAgICB9LAogICAgcmVuZGVyRXJyb3I6IGZ1bmN0aW9uKGVsLCBlcnIpIHsKICAgICAgdmFyICRlbCA9ICQoZWwpOwoKICAgICAgdGhpcy5jbGVhckVycm9yKGVsKTsKCiAgICAgIC8vIEFkZCBhbGwgdGhlc2UgZXJyb3IgY2xhc3NlcywgYXMgU2hpbnkgZG9lcwogICAgICB2YXIgZXJyQ2xhc3MgPSAic2hpbnktb3V0cHV0LWVycm9yIjsKICAgICAgaWYgKGVyci50eXBlICE9PSBudWxsKSB7CiAgICAgICAgLy8gdXNlIHRoZSBjbGFzc2VzIG9mIHRoZSBlcnJvciBjb25kaXRpb24gYXMgQ1NTIGNsYXNzIG5hbWVzCiAgICAgICAgZXJyQ2xhc3MgPSBlcnJDbGFzcyArICIgIiArICQubWFwKGFzQXJyYXkoZXJyLnR5cGUpLCBmdW5jdGlvbih0eXBlKSB7CiAgICAgICAgICByZXR1cm4gZXJyQ2xhc3MgKyAiLSIgKyB0eXBlOwogICAgICAgIH0pLmpvaW4oIiAiKTsKICAgICAgfQogICAgICBlcnJDbGFzcyA9IGVyckNsYXNzICsgIiBodG1sd2lkZ2V0cy1lcnJvciI7CgogICAgICAvLyBJcyBlbCBpbmxpbmUgb3IgYmxvY2s/IElmIGlubGluZSBvciBpbmxpbmUtYmxvY2ssIGp1c3QgZGlzcGxheTpub25lIGl0CiAgICAgIC8vIGFuZCBhZGQgYW4gaW5saW5lIGVycm9yLgogICAgICB2YXIgZGlzcGxheSA9ICRlbC5jc3MoImRpc3BsYXkiKTsKICAgICAgJGVsLmRhdGEoInJlc3RvcmUtZGlzcGxheS1tb2RlIiwgZGlzcGxheSk7CgogICAgICBpZiAoZGlzcGxheSA9PT0gImlubGluZSIgfHwgZGlzcGxheSA9PT0gImlubGluZS1ibG9jayIpIHsKICAgICAgICAkZWwuaGlkZSgpOwogICAgICAgIGlmIChlcnIubWVzc2FnZSAhPT0gIiIpIHsKICAgICAgICAgIHZhciBlcnJvclNwYW4gPSAkKCI8c3Bhbj4iKS5hZGRDbGFzcyhlcnJDbGFzcyk7CiAgICAgICAgICBlcnJvclNwYW4udGV4dChlcnIubWVzc2FnZSk7CiAgICAgICAgICAkZWwuYWZ0ZXIoZXJyb3JTcGFuKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZGlzcGxheSA9PT0gImJsb2NrIikgewogICAgICAgIC8vIElmIGJsb2NrLCBhZGQgYW4gZXJyb3IganVzdCBhZnRlciB0aGUgZWwsIHNldCB2aXNpYmlsaXR5Om5vbmUgb24gdGhlCiAgICAgICAgLy8gZWwsIGFuZCBwb3NpdGlvbiB0aGUgZXJyb3IgdG8gYmUgb24gdG9wIG9mIHRoZSBlbC4KICAgICAgICAvLyBNYXJrIGl0IHdpdGggYSB1bmlxdWUgSUQgYW5kIENTUyBjbGFzcyBzbyB3ZSBjYW4gcmVtb3ZlIGl0IGxhdGVyLgogICAgICAgICRlbC5jc3MoInZpc2liaWxpdHkiLCAiaGlkZGVuIik7CiAgICAgICAgaWYgKGVyci5tZXNzYWdlICE9PSAiIikgewogICAgICAgICAgdmFyIGVycm9yRGl2ID0gJCgiPGRpdj4iKS5hZGRDbGFzcyhlcnJDbGFzcykuY3NzKCJwb3NpdGlvbiIsICJhYnNvbHV0ZSIpCiAgICAgICAgICAgIC5jc3MoInRvcCIsIGVsLm9mZnNldFRvcCkKICAgICAgICAgICAgLmNzcygibGVmdCIsIGVsLm9mZnNldExlZnQpCiAgICAgICAgICAgIC8vIHNldHRpbmcgd2lkdGggY2FuIHB1c2ggb3V0IHRoZSBwYWdlIHNpemUsIGZvcmNpbmcgb3RoZXJ3aXNlCiAgICAgICAgICAgIC8vIHVubmVjZXNzYXJ5IHNjcm9sbGJhcnMgdG8gYXBwZWFyIGFuZCBtYWtpbmcgaXQgaW1wb3NzaWJsZSBmb3IKICAgICAgICAgICAgLy8gdGhlIGVsZW1lbnQgdG8gc2hyaW5rOyBzbyB1c2UgbWF4LXdpZHRoIGluc3RlYWQKICAgICAgICAgICAgLmNzcygibWF4V2lkdGgiLCBlbC5vZmZzZXRXaWR0aCkKICAgICAgICAgICAgLmNzcygiaGVpZ2h0IiwgZWwub2Zmc2V0SGVpZ2h0KTsKICAgICAgICAgIGVycm9yRGl2LnRleHQoZXJyLm1lc3NhZ2UpOwogICAgICAgICAgJGVsLmFmdGVyKGVycm9yRGl2KTsKCiAgICAgICAgICAvLyBSZWFsbHkgZHVtYiB3YXkgdG8ga2VlcCB0aGUgc2l6ZS9wb3NpdGlvbiBvZiB0aGUgZXJyb3IgaW4gc3luYyB3aXRoCiAgICAgICAgICAvLyB0aGUgcGFyZW50IGVsZW1lbnQgYXMgdGhlIHdpbmRvdyBpcyByZXNpemVkIG9yIHdoYXRldmVyLgogICAgICAgICAgdmFyIGludElkID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGlmICghZXJyb3JEaXZbMF0ucGFyZW50RWxlbWVudCkgewogICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50SWQpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBlcnJvckRpdgogICAgICAgICAgICAgIC5jc3MoInRvcCIsIGVsLm9mZnNldFRvcCkKICAgICAgICAgICAgICAuY3NzKCJsZWZ0IiwgZWwub2Zmc2V0TGVmdCkKICAgICAgICAgICAgICAuY3NzKCJtYXhXaWR0aCIsIGVsLm9mZnNldFdpZHRoKQogICAgICAgICAgICAgIC5jc3MoImhlaWdodCIsIGVsLm9mZnNldEhlaWdodCk7CiAgICAgICAgICB9LCA1MDApOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGNsZWFyRXJyb3I6IGZ1bmN0aW9uKGVsKSB7CiAgICAgIHZhciAkZWwgPSAkKGVsKTsKICAgICAgdmFyIGRpc3BsYXkgPSAkZWwuZGF0YSgicmVzdG9yZS1kaXNwbGF5LW1vZGUiKTsKICAgICAgJGVsLmRhdGEoInJlc3RvcmUtZGlzcGxheS1tb2RlIiwgbnVsbCk7CgogICAgICBpZiAoZGlzcGxheSA9PT0gImlubGluZSIgfHwgZGlzcGxheSA9PT0gImlubGluZS1ibG9jayIpIHsKICAgICAgICBpZiAoZGlzcGxheSkKICAgICAgICAgICRlbC5jc3MoImRpc3BsYXkiLCBkaXNwbGF5KTsKICAgICAgICAkKGVsLm5leHRTaWJsaW5nKS5maWx0ZXIoIi5odG1sd2lkZ2V0cy1lcnJvciIpLnJlbW92ZSgpOwogICAgICB9IGVsc2UgaWYgKGRpc3BsYXkgPT09ICJibG9jayIpewogICAgICAgICRlbC5jc3MoInZpc2liaWxpdHkiLCAiaW5oZXJpdCIpOwogICAgICAgICQoZWwubmV4dFNpYmxpbmcpLmZpbHRlcigiLmh0bWx3aWRnZXRzLWVycm9yIikucmVtb3ZlKCk7CiAgICAgIH0KICAgIH0sCiAgICBzaXppbmc6IHt9CiAgfTsKCiAgLy8gQ2FsbGVkIGJ5IHdpZGdldCBiaW5kaW5ncyB0byByZWdpc3RlciBhIG5ldyB0eXBlIG9mIHdpZGdldC4gVGhlIGRlZmluaXRpb24KICAvLyBvYmplY3QgY2FuIGNvbnRhaW4gdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOgogIC8vIC0gbmFtZSAocmVxdWlyZWQpIC0gQSBzdHJpbmcgaW5kaWNhdGluZyB0aGUgYmluZGluZyBuYW1lLCB3aGljaCB3aWxsIGJlCiAgLy8gICB1c2VkIGJ5IGRlZmF1bHQgYXMgdGhlIENTUyBjbGFzc25hbWUgdG8gbG9vayBmb3IuCiAgLy8gLSBpbml0aWFsaXplIChvcHRpb25hbCkgLSBBIGZ1bmN0aW9uKGVsKSB0aGF0IHdpbGwgYmUgY2FsbGVkIG9uY2UgcGVyCiAgLy8gICB3aWRnZXQgZWxlbWVudDsgaWYgYSB2YWx1ZSBpcyByZXR1cm5lZCwgaXQgd2lsbCBiZSBwYXNzZWQgYXMgdGhlIHRoaXJkCiAgLy8gICB2YWx1ZSB0byByZW5kZXJWYWx1ZS4KICAvLyAtIHJlbmRlclZhbHVlIChyZXF1aXJlZCkgLSBBIGZ1bmN0aW9uKGVsLCBkYXRhLCBpbml0VmFsdWUpIHRoYXQgd2lsbCBiZQogIC8vICAgY2FsbGVkIHdpdGggZGF0YS4gU3RhdGljIGNvbnRleHRzIHdpbGwgY2F1c2UgdGhpcyB0byBiZSBjYWxsZWQgb25jZSBwZXIKICAvLyAgIGVsZW1lbnQ7IFNoaW55IGFwcHMgd2lsbCBjYXVzZSB0aGlzIHRvIGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lcyBwZXIKICAvLyAgIGVsZW1lbnQsIGFzIHRoZSBkYXRhIGNoYW5nZXMuCiAgd2luZG93LkhUTUxXaWRnZXRzLndpZGdldCA9IGZ1bmN0aW9uKGRlZmluaXRpb24pIHsKICAgIGlmICghZGVmaW5pdGlvbi5uYW1lKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiV2lkZ2V0IG11c3QgaGF2ZSBhIG5hbWUiKTsKICAgIH0KICAgIGlmICghZGVmaW5pdGlvbi50eXBlKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiV2lkZ2V0IG11c3QgaGF2ZSBhIHR5cGUiKTsKICAgIH0KICAgIC8vIEN1cnJlbnRseSB3ZSBvbmx5IHN1cHBvcnQgb3V0cHV0IHdpZGdldHMKICAgIGlmIChkZWZpbml0aW9uLnR5cGUgIT09ICJvdXRwdXQiKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiVW5yZWNvZ25pemVkIHdpZGdldCB0eXBlICciICsgZGVmaW5pdGlvbi50eXBlICsgIiciKTsKICAgIH0KICAgIC8vIFRPRE86IFZlcmlmeSB0aGF0IC5uYW1lIGlzIGEgdmFsaWQgQ1NTIGNsYXNzbmFtZQoKICAgIC8vIFN1cHBvcnQgbmV3LXN0eWxlIGluc3RhbmNlLWJvdW5kIGRlZmluaXRpb25zLiBPbGQtc3R5bGUgY2xhc3MtYm91bmQKICAgIC8vIGRlZmluaXRpb25zIGhhdmUgb25lIHdpZGdldCAib2JqZWN0IiBwZXIgd2lkZ2V0IHBlciB0eXBlL2NsYXNzIG9mCiAgICAvLyB3aWRnZXQ7IHRoZSByZW5kZXJWYWx1ZSBhbmQgcmVzaXplIG1ldGhvZHMgb24gc3VjaCB3aWRnZXQgb2JqZWN0cwogICAgLy8gdGFrZSBlbCBhbmQgaW5zdGFuY2UgYXJndW1lbnRzLCBiZWNhdXNlIHRoZSB3aWRnZXQgb2JqZWN0IGNhbid0CiAgICAvLyBzdG9yZSB0aGVtLiBOZXctc3R5bGUgaW5zdGFuY2UtYm91bmQgZGVmaW5pdGlvbnMgaGF2ZSBvbmUgd2lkZ2V0CiAgICAvLyBvYmplY3QgcGVyIHdpZGdldCBpbnN0YW5jZTsgdGhlIGRlZmluaXRpb24gdGhhdCdzIHBhc3NlZCBpbiBkb2Vzbid0CiAgICAvLyBwcm92aWRlIHJlbmRlclZhbHVlIG9yIHJlc2l6ZSBtZXRob2RzIGF0IGFsbCwganVzdCB0aGUgc2luZ2xlIG1ldGhvZAogICAgLy8gICBmYWN0b3J5KGVsLCB3aWR0aCwgaGVpZ2h0KQogICAgLy8gd2hpY2ggcmV0dXJucyBhbiBvYmplY3QgdGhhdCBoYXMgcmVuZGVyVmFsdWUoeCkgYW5kIHJlc2l6ZSh3LCBoKS4KICAgIC8vIFRoaXMgZW5hYmxlcyBhIGZhciBtb3JlIG5hdHVyYWwgcHJvZ3JhbW1pbmcgc3R5bGUgZm9yIHRoZSB3aWRnZXQKICAgIC8vIGF1dGhvciwgd2hvIGNhbiBzdG9yZSBwZXItaW5zdGFuY2Ugc3RhdGUgdXNpbmcgZWl0aGVyIE9PLXN0eWxlCiAgICAvLyBpbnN0YW5jZSBmaWVsZHMgb3IgZnVuY3Rpb25hbC1zdHlsZSBjbG9zdXJlIHZhcmlhYmxlcyAoSSBndWVzcyB0aGlzCiAgICAvLyBpcyBpbiBjb250cmFzdCB0byB3aGF0IGNhbiBvbmx5IGJlIGNhbGxlZCBDLXN0eWxlIHBzZXVkby1PTyB3aGljaCBpcwogICAgLy8gd2hhdCB3ZSByZXF1aXJlZCBiZWZvcmUpLgogICAgaWYgKGRlZmluaXRpb24uZmFjdG9yeSkgewogICAgICBkZWZpbml0aW9uID0gY3JlYXRlTGVnYWN5RGVmaW5pdGlvbkFkYXB0ZXIoZGVmaW5pdGlvbik7CiAgICB9CgogICAgaWYgKCFkZWZpbml0aW9uLnJlbmRlclZhbHVlKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiV2lkZ2V0IG11c3QgaGF2ZSBhIHJlbmRlclZhbHVlIGZ1bmN0aW9uIik7CiAgICB9CgogICAgLy8gRm9yIHN0YXRpYyByZW5kZXJpbmcgKG5vbi1TaGlueSksIHVzZSBhIHNpbXBsZSB3aWRnZXQgcmVnaXN0cmF0aW9uCiAgICAvLyBzY2hlbWUuIFdlIGFsc28gdXNlIHRoaXMgc2NoZW1lIGZvciBTaGlueSBhcHBzL2RvY3VtZW50cyB0aGF0IGFsc28KICAgIC8vIGNvbnRhaW4gc3RhdGljIHdpZGdldHMuCiAgICB3aW5kb3cuSFRNTFdpZGdldHMud2lkZ2V0cyA9IHdpbmRvdy5IVE1MV2lkZ2V0cy53aWRnZXRzIHx8IFtdOwogICAgLy8gTWVyZ2UgZGVmYXVsdHMgaW50byB0aGUgZGVmaW5pdGlvbjsgZG9uJ3QgbXV0YXRlIHRoZSBvcmlnaW5hbCBkZWZpbml0aW9uLgogICAgdmFyIHN0YXRpY0JpbmRpbmcgPSBleHRlbmQoe30sIGRlZmF1bHRzLCBkZWZpbml0aW9uKTsKICAgIG92ZXJyaWRlTWV0aG9kKHN0YXRpY0JpbmRpbmcsICJmaW5kIiwgZnVuY3Rpb24oc3VwZXJmdW5jKSB7CiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSkgewogICAgICAgIHZhciByZXN1bHRzID0gc3VwZXJmdW5jKHNjb3BlKTsKICAgICAgICAvLyBGaWx0ZXIgb3V0IFNoaW55IG91dHB1dHMsIHdlIG9ubHkgd2FudCB0aGUgc3RhdGljIGtpbmQKICAgICAgICByZXR1cm4gZmlsdGVyQnlDbGFzcyhyZXN1bHRzLCAiaHRtbC13aWRnZXQtb3V0cHV0IiwgZmFsc2UpOwogICAgICB9OwogICAgfSk7CiAgICB3aW5kb3cuSFRNTFdpZGdldHMud2lkZ2V0cy5wdXNoKHN0YXRpY0JpbmRpbmcpOwoKICAgIGlmIChzaGlueU1vZGUpIHsKICAgICAgLy8gU2hpbnkgaXMgcnVubmluZy4gUmVnaXN0ZXIgdGhlIGRlZmluaXRpb24gd2l0aCBhbiBvdXRwdXQgYmluZGluZy4KICAgICAgLy8gVGhlIGRlZmluaXRpb24gaXRzZWxmIHdpbGwgbm90IGJlIHRoZSBvdXRwdXQgYmluZGluZywgaW5zdGVhZAogICAgICAvLyB3ZSB3aWxsIG1ha2UgYW4gb3V0cHV0IGJpbmRpbmcgb2JqZWN0IHRoYXQgZGVsZWdhdGVzIHRvIHRoZQogICAgICAvLyBkZWZpbml0aW9uLiBUaGlzIGlzIGJlY2F1c2Ugd2UgZm9vbGlzaGx5IHVzZWQgdGhlIHNhbWUgbWV0aG9kCiAgICAgIC8vIG5hbWUgKHJlbmRlclZhbHVlKSBmb3IgaHRtbHdpZGdldHMgZGVmaW5pdGlvbiBhbmQgU2hpbnkgYmluZGluZ3MKICAgICAgLy8gYnV0IHRoZXkgYWN0dWFsbHkgaGF2ZSBxdWl0ZSBkaWZmZXJlbnQgc2VtYW50aWNzICh0aGUgU2hpbnkKICAgICAgLy8gYmluZGluZ3MgcmVjZWl2ZSBkYXRhIHRoYXQgaW5jbHVkZXMgbG90cyBvZiBtZXRhZGF0YSB0aGF0IGl0CiAgICAgIC8vIHN0cmlwcyBvZmYgYmVmb3JlIGNhbGxpbmcgaHRtbHdpZGdldHMgcmVuZGVyVmFsdWUpLiBXZSBjYW4ndAogICAgICAvLyBqdXN0IGlnbm9yZSB0aGUgZGlmZmVyZW5jZSBiZWNhdXNlIGluIHNvbWUgd2lkZ2V0cyBpdCdzIGhlbHBmdWwKICAgICAgLy8gdG8gY2FsbCB0aGlzLnJlbmRlclZhbHVlKCkgZnJvbSBpbnNpZGUgb2YgcmVzaXplKCksIGFuZCBpZgogICAgICAvLyB3ZSdyZSBub3QgZGVsZWdhdGluZywgdGhlbiB0aGF0IGNhbGwgd2lsbCBnbyB0byB0aGUgU2hpbnkKICAgICAgLy8gdmVyc2lvbiBpbnN0ZWFkIG9mIHRoZSBodG1sd2lkZ2V0cyB2ZXJzaW9uLgoKICAgICAgLy8gTWVyZ2UgZGVmYXVsdHMgd2l0aCBkZWZpbml0aW9uLCB3aXRob3V0IG11dGF0aW5nIGVpdGhlci4KICAgICAgdmFyIGJpbmRpbmdEZWYgPSBleHRlbmQoe30sIGRlZmF1bHRzLCBkZWZpbml0aW9uKTsKCiAgICAgIC8vIFRoaXMgb2JqZWN0IHdpbGwgYmUgb3VyIGFjdHVhbCBTaGlueSBiaW5kaW5nLgogICAgICB2YXIgc2hpbnlCaW5kaW5nID0gbmV3IFNoaW55Lk91dHB1dEJpbmRpbmcoKTsKCiAgICAgIC8vIFdpdGggYSBmZXcgZXhjZXB0aW9ucywgd2UnbGwgd2FudCB0byBzaW1wbHkgdXNlIHRoZSBiaW5kaW5nRGVmJ3MKICAgICAgLy8gdmVyc2lvbiBvZiBtZXRob2RzIGlmIHRoZXkgYXJlIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGZhbGwgYmFjayB0bwogICAgICAvLyBTaGlueSdzIGRlZmF1bHRzLiBOT1RFOiBJZiBTaGlueSdzIG91dHB1dCBiaW5kaW5ncyBnYWluIGFkZGl0aW9uYWwKICAgICAgLy8gbWV0aG9kcyBpbiB0aGUgZnV0dXJlLCBhbmQgd2Ugd2FudCB0aGVtIHRvIGJlIG92ZXJyaWRlYWJsZSBieQogICAgICAvLyBIVE1MV2lkZ2V0IGJpbmRpbmcgZGVmaW5pdGlvbnMsIHRoZW4gd2UnbGwgbmVlZCB0byBhZGQgdGhlbSB0byB0aGlzCiAgICAgIC8vIGxpc3QuCiAgICAgIGRlbGVnYXRlTWV0aG9kKHNoaW55QmluZGluZywgYmluZGluZ0RlZiwgImdldElkIik7CiAgICAgIGRlbGVnYXRlTWV0aG9kKHNoaW55QmluZGluZywgYmluZGluZ0RlZiwgIm9uVmFsdWVDaGFuZ2UiKTsKICAgICAgZGVsZWdhdGVNZXRob2Qoc2hpbnlCaW5kaW5nLCBiaW5kaW5nRGVmLCAib25WYWx1ZUVycm9yIik7CiAgICAgIGRlbGVnYXRlTWV0aG9kKHNoaW55QmluZGluZywgYmluZGluZ0RlZiwgInJlbmRlckVycm9yIik7CiAgICAgIGRlbGVnYXRlTWV0aG9kKHNoaW55QmluZGluZywgYmluZGluZ0RlZiwgImNsZWFyRXJyb3IiKTsKICAgICAgZGVsZWdhdGVNZXRob2Qoc2hpbnlCaW5kaW5nLCBiaW5kaW5nRGVmLCAic2hvd1Byb2dyZXNzIik7CgogICAgICAvLyBUaGUgZmluZCwgcmVuZGVyVmFsdWUsIGFuZCByZXNpemUgYXJlIGhhbmRsZWQgZGlmZmVyZW50bHksIGJlY2F1c2Ugd2UKICAgICAgLy8gd2FudCB0byBhY3R1YWxseSBkZWNvcmF0ZSB0aGUgYmVoYXZpb3Igb2YgdGhlIGJpbmRpbmdEZWYgbWV0aG9kcy4KCiAgICAgIHNoaW55QmluZGluZy5maW5kID0gZnVuY3Rpb24oc2NvcGUpIHsKICAgICAgICB2YXIgcmVzdWx0cyA9IGJpbmRpbmdEZWYuZmluZChzY29wZSk7CgogICAgICAgIC8vIE9ubHkgcmV0dXJuIGVsZW1lbnRzIHRoYXQgYXJlIFNoaW55IG91dHB1dHMsIG5vdCBzdGF0aWMgb25lcwogICAgICAgIHZhciBkeW5hbWljUmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKCIuaHRtbC13aWRnZXQtb3V0cHV0Iik7CgogICAgICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB3aGF0ZXZlciBjYXVzZWQgU2hpbnkgdG8gdGhpbmsgdGhlcmUgbWlnaHQgYmUKICAgICAgICAvLyBuZXcgZHluYW1pYyBvdXRwdXRzLCBhbHNvIGNhdXNlZCB0aGVyZSB0byBiZSBuZXcgc3RhdGljIG91dHB1dHMuCiAgICAgICAgLy8gU2luY2UgdGhlcmUgbWlnaHQgYmUgbG90cyBvZiBkaWZmZXJlbnQgaHRtbHdpZGdldHMgYmluZGluZ3MsIHdlCiAgICAgICAgLy8gc2NoZWR1bGUgZXhlY3V0aW9uIGZvciBsYXRlci0tbm8gbmVlZCB0byBzdGF0aWNSZW5kZXIgbXVsdGlwbGUKICAgICAgICAvLyB0aW1lcy4KICAgICAgICBpZiAocmVzdWx0cy5sZW5ndGggIT09IGR5bmFtaWNSZXN1bHRzLmxlbmd0aCkKICAgICAgICAgIHNjaGVkdWxlU3RhdGljUmVuZGVyKCk7CgogICAgICAgIHJldHVybiBkeW5hbWljUmVzdWx0czsKICAgICAgfTsKCiAgICAgIC8vIFdyYXAgcmVuZGVyVmFsdWUgdG8gaGFuZGxlIGluaXRpYWxpemF0aW9uLCB3aGljaCB1bmZvcnR1bmF0ZWx5IGlzbid0CiAgICAgIC8vIHN1cHBvcnRlZCBuYXRpdmVseSBieSBTaGlueSBhdCB0aGUgdGltZSBvZiB0aGlzIHdyaXRpbmcuCgogICAgICBzaGlueUJpbmRpbmcucmVuZGVyVmFsdWUgPSBmdW5jdGlvbihlbCwgZGF0YSkgewogICAgICAgIC8vIFJlc29sdmUgc3RyaW5ncyBtYXJrZWQgYXMgamF2YXNjcmlwdCBsaXRlcmFscyB0byBvYmplY3RzCiAgICAgICAgaWYgKCEoZGF0YS5ldmFscyBpbnN0YW5jZW9mIEFycmF5KSkgZGF0YS5ldmFscyA9IFtkYXRhLmV2YWxzXTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgZGF0YS5ldmFscyAmJiBpIDwgZGF0YS5ldmFscy5sZW5ndGg7IGkrKykgewogICAgICAgICAgd2luZG93LkhUTUxXaWRnZXRzLmV2YWx1YXRlU3RyaW5nTWVtYmVyKGRhdGEueCwgZGF0YS5ldmFsc1tpXSk7CiAgICAgICAgfQogICAgICAgIGlmICghYmluZGluZ0RlZi5yZW5kZXJPbk51bGxWYWx1ZSkgewogICAgICAgICAgaWYgKGRhdGEueCA9PT0gbnVsbCkgewogICAgICAgICAgICBlbC5zdHlsZS52aXNpYmlsaXR5ID0gImhpZGRlbiI7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGVsLnN0eWxlLnZpc2liaWxpdHkgPSAiaW5oZXJpdCI7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghZWxlbWVudERhdGEoZWwsICJpbml0aWFsaXplZCIpKSB7CiAgICAgICAgICBpbml0U2l6aW5nKGVsKTsKCiAgICAgICAgICBlbGVtZW50RGF0YShlbCwgImluaXRpYWxpemVkIiwgdHJ1ZSk7CiAgICAgICAgICBpZiAoYmluZGluZ0RlZi5pbml0aWFsaXplKSB7CiAgICAgICAgICAgIHZhciByZXN1bHQgPSBiaW5kaW5nRGVmLmluaXRpYWxpemUoZWwsIGVsLm9mZnNldFdpZHRoLAogICAgICAgICAgICAgIGVsLm9mZnNldEhlaWdodCk7CiAgICAgICAgICAgIGVsZW1lbnREYXRhKGVsLCAiaW5pdF9yZXN1bHQiLCByZXN1bHQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBTaGlueS5yZW5kZXJEZXBlbmRlbmNpZXMoZGF0YS5kZXBzKTsKICAgICAgICBiaW5kaW5nRGVmLnJlbmRlclZhbHVlKGVsLCBkYXRhLngsIGVsZW1lbnREYXRhKGVsLCAiaW5pdF9yZXN1bHQiKSk7CiAgICAgICAgZXZhbEFuZFJ1bihkYXRhLmpzSG9va3MucmVuZGVyLCBlbGVtZW50RGF0YShlbCwgImluaXRfcmVzdWx0IiksIFtlbCwgZGF0YS54XSk7CiAgICAgIH07CgogICAgICAvLyBPbmx5IG92ZXJyaWRlIHJlc2l6ZSBpZiBiaW5kaW5nRGVmIGltcGxlbWVudHMgaXQKICAgICAgaWYgKGJpbmRpbmdEZWYucmVzaXplKSB7CiAgICAgICAgc2hpbnlCaW5kaW5nLnJlc2l6ZSA9IGZ1bmN0aW9uKGVsLCB3aWR0aCwgaGVpZ2h0KSB7CiAgICAgICAgICAvLyBTaGlueSBjYW4gY2FsbCByZXNpemUgYmVmb3JlIGluaXRpYWxpemUvcmVuZGVyVmFsdWUgaGF2ZSBiZWVuCiAgICAgICAgICAvLyBjYWxsZWQsIHdoaWNoIGRvZXNuJ3QgbWFrZSBzZW5zZSBmb3Igd2lkZ2V0cy4KICAgICAgICAgIGlmIChlbGVtZW50RGF0YShlbCwgImluaXRpYWxpemVkIikpIHsKICAgICAgICAgICAgYmluZGluZ0RlZi5yZXNpemUoZWwsIHdpZHRoLCBoZWlnaHQsIGVsZW1lbnREYXRhKGVsLCAiaW5pdF9yZXN1bHQiKSk7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgU2hpbnkub3V0cHV0QmluZGluZ3MucmVnaXN0ZXIoc2hpbnlCaW5kaW5nLCBiaW5kaW5nRGVmLm5hbWUpOwogICAgfQogIH07CgogIHZhciBzY2hlZHVsZVN0YXRpY1JlbmRlclRpbWVySWQgPSBudWxsOwogIGZ1bmN0aW9uIHNjaGVkdWxlU3RhdGljUmVuZGVyKCkgewogICAgaWYgKCFzY2hlZHVsZVN0YXRpY1JlbmRlclRpbWVySWQpIHsKICAgICAgc2NoZWR1bGVTdGF0aWNSZW5kZXJUaW1lcklkID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICBzY2hlZHVsZVN0YXRpY1JlbmRlclRpbWVySWQgPSBudWxsOwogICAgICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTsKICAgICAgfSwgMSk7CiAgICB9CiAgfQoKICAvLyBSZW5kZXIgc3RhdGljIHdpZGdldHMgYWZ0ZXIgdGhlIGRvY3VtZW50IGZpbmlzaGVzIGxvYWRpbmcKICAvLyBTdGF0aWNhbGx5IHJlbmRlciBhbGwgZWxlbWVudHMgdGhhdCBhcmUgb2YgdGhpcyB3aWRnZXQncyBjbGFzcwogIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIgPSBmdW5jdGlvbigpIHsKICAgIHZhciBiaW5kaW5ncyA9IHdpbmRvdy5IVE1MV2lkZ2V0cy53aWRnZXRzIHx8IFtdOwogICAgZm9yRWFjaChiaW5kaW5ncywgZnVuY3Rpb24oYmluZGluZykgewogICAgICB2YXIgbWF0Y2hlcyA9IGJpbmRpbmcuZmluZChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpOwogICAgICBmb3JFYWNoKG1hdGNoZXMsIGZ1bmN0aW9uKGVsKSB7CiAgICAgICAgdmFyIHNpemVPYmogPSBpbml0U2l6aW5nKGVsLCBiaW5kaW5nKTsKCiAgICAgICAgaWYgKGhhc0NsYXNzKGVsLCAiaHRtbC13aWRnZXQtc3RhdGljLWJvdW5kIikpCiAgICAgICAgICByZXR1cm47CiAgICAgICAgZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lICsgIiBodG1sLXdpZGdldC1zdGF0aWMtYm91bmQiOwoKICAgICAgICB2YXIgaW5pdFJlc3VsdDsKICAgICAgICBpZiAoYmluZGluZy5pbml0aWFsaXplKSB7CiAgICAgICAgICBpbml0UmVzdWx0ID0gYmluZGluZy5pbml0aWFsaXplKGVsLAogICAgICAgICAgICBzaXplT2JqID8gc2l6ZU9iai5nZXRXaWR0aCgpIDogZWwub2Zmc2V0V2lkdGgsCiAgICAgICAgICAgIHNpemVPYmogPyBzaXplT2JqLmdldEhlaWdodCgpIDogZWwub2Zmc2V0SGVpZ2h0CiAgICAgICAgICApOwogICAgICAgICAgZWxlbWVudERhdGEoZWwsICJpbml0X3Jlc3VsdCIsIGluaXRSZXN1bHQpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGJpbmRpbmcucmVzaXplKSB7CiAgICAgICAgICB2YXIgbGFzdFNpemUgPSB7fTsKICAgICAgICAgIHZhciByZXNpemVIYW5kbGVyID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2YXIgc2l6ZSA9IHsKICAgICAgICAgICAgICB3OiBzaXplT2JqID8gc2l6ZU9iai5nZXRXaWR0aCgpIDogZWwub2Zmc2V0V2lkdGgsCiAgICAgICAgICAgICAgaDogc2l6ZU9iaiA/IHNpemVPYmouZ2V0SGVpZ2h0KCkgOiBlbC5vZmZzZXRIZWlnaHQKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKHNpemUudyA9PT0gMCAmJiBzaXplLmggPT09IDApCiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICBpZiAoc2l6ZS53ID09PSBsYXN0U2l6ZS53ICYmIHNpemUuaCA9PT0gbGFzdFNpemUuaCkKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGxhc3RTaXplID0gc2l6ZTsKICAgICAgICAgICAgYmluZGluZy5yZXNpemUoZWwsIHNpemUudywgc2l6ZS5oLCBpbml0UmVzdWx0KTsKICAgICAgICAgIH07CgogICAgICAgICAgb24od2luZG93LCAicmVzaXplIiwgcmVzaXplSGFuZGxlcik7CgogICAgICAgICAgLy8gVGhpcyBpcyBuZWVkZWQgZm9yIGNhc2VzIHdoZXJlIHdlJ3JlIHJ1bm5pbmcgaW4gYSBTaGlueQogICAgICAgICAgLy8gYXBwLCBidXQgdGhlIHdpZGdldCBpdHNlbGYgaXMgbm90IGEgU2hpbnkgb3V0cHV0LCBidXQKICAgICAgICAgIC8vIHJhdGhlciBhIHNpbXBsZSBzdGF0aWMgd2lkZ2V0LiBPbmUgZXhhbXBsZSBvZiB0aGlzIGlzCiAgICAgICAgICAvLyBhbiBybWFya2Rvd24gZG9jdW1lbnQgdGhhdCBoYXMgcnVudGltZTpzaGlueSBhbmQgd2lkZ2V0CiAgICAgICAgICAvLyB0aGF0IGlzbid0IGluIGEgcmVuZGVyIGZ1bmN0aW9uLiBTaGlueSBvbmx5IGtub3dzIHRvCiAgICAgICAgICAvLyBjYWxsIHJlc2l6ZSBoYW5kbGVycyBmb3IgU2hpbnkgb3V0cHV0cywgbm90IGZvciBzdGF0aWMKICAgICAgICAgIC8vIHdpZGdldHMsIHNvIHdlIGRvIGl0IG91cnNlbHZlcy4KICAgICAgICAgIGlmICh3aW5kb3cualF1ZXJ5KSB7CiAgICAgICAgICAgIHdpbmRvdy5qUXVlcnkoZG9jdW1lbnQpLm9uKAogICAgICAgICAgICAgICJzaG93bi5odG1sd2lkZ2V0cyBzaG93bi5icy50YWIuaHRtbHdpZGdldHMgc2hvd24uYnMuY29sbGFwc2UuaHRtbHdpZGdldHMiLAogICAgICAgICAgICAgIHJlc2l6ZUhhbmRsZXIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgd2luZG93LmpRdWVyeShkb2N1bWVudCkub24oCiAgICAgICAgICAgICAgImhpZGRlbi5odG1sd2lkZ2V0cyBoaWRkZW4uYnMudGFiLmh0bWx3aWRnZXRzIGhpZGRlbi5icy5jb2xsYXBzZS5odG1sd2lkZ2V0cyIsCiAgICAgICAgICAgICAgcmVzaXplSGFuZGxlcgogICAgICAgICAgICApOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIFRoaXMgaXMgbmVlZGVkIGZvciB0aGUgc3BlY2lmaWMgY2FzZSBvZiBpb3NsaWRlcywgd2hpY2gKICAgICAgICAgIC8vIGZsaXBzIHNsaWRlcyBiZXR3ZWVuIGRpc3BsYXk6bm9uZSBhbmQgZGlzcGxheTpibG9jay4KICAgICAgICAgIC8vIElkZWFsbHkgd2Ugd291bGQgbm90IGhhdmUgdG8gaGF2ZSBpb3NsaWRlLXNwZWNpZmljIGNvZGUKICAgICAgICAgIC8vIGhlcmUsIGJ1dCByYXRoZXIgaGF2ZSBpb3NsaWRlcyByYWlzZSBhIGdlbmVyaWMgZXZlbnQsCiAgICAgICAgICAvLyBidXQgdGhlIHJtYXJrZG93biBwYWNrYWdlIGp1c3Qgd2VudCB0byBDUkFOIHNvIHRoZQogICAgICAgICAgLy8gd2luZG93IHRvIGdldHRpbmcgdGhhdCBmaXhlZCBtYXkgYmUgbG9uZy4KICAgICAgICAgIGlmICh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikgewogICAgICAgICAgICAvLyBJdCdzIE9LIHRvIGxpbWl0IHRoaXMgdG8gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIKICAgICAgICAgICAgLy8gYnJvd3NlcnMgYmVjYXVzZSBpb3NsaWRlcyBpdHNlbGYgb25seSBzdXBwb3J0cwogICAgICAgICAgICAvLyBzdWNoIGJyb3dzZXJzLgogICAgICAgICAgICBvbihkb2N1bWVudCwgInNsaWRlZW50ZXIiLCByZXNpemVIYW5kbGVyKTsKICAgICAgICAgICAgb24oZG9jdW1lbnQsICJzbGlkZWxlYXZlIiwgcmVzaXplSGFuZGxlcik7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgc2NyaXB0RGF0YSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoInNjcmlwdFtkYXRhLWZvcj0nIiArIGVsLmlkICsgIiddW3R5cGU9J2FwcGxpY2F0aW9uL2pzb24nXSIpOwogICAgICAgIGlmIChzY3JpcHREYXRhKSB7CiAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2Uoc2NyaXB0RGF0YS50ZXh0Q29udGVudCB8fCBzY3JpcHREYXRhLnRleHQpOwogICAgICAgICAgLy8gUmVzb2x2ZSBzdHJpbmdzIG1hcmtlZCBhcyBqYXZhc2NyaXB0IGxpdGVyYWxzIHRvIG9iamVjdHMKICAgICAgICAgIGlmICghKGRhdGEuZXZhbHMgaW5zdGFuY2VvZiBBcnJheSkpIGRhdGEuZXZhbHMgPSBbZGF0YS5ldmFsc107CiAgICAgICAgICBmb3IgKHZhciBrID0gMDsgZGF0YS5ldmFscyAmJiBrIDwgZGF0YS5ldmFscy5sZW5ndGg7IGsrKykgewogICAgICAgICAgICB3aW5kb3cuSFRNTFdpZGdldHMuZXZhbHVhdGVTdHJpbmdNZW1iZXIoZGF0YS54LCBkYXRhLmV2YWxzW2tdKTsKICAgICAgICAgIH0KICAgICAgICAgIGJpbmRpbmcucmVuZGVyVmFsdWUoZWwsIGRhdGEueCwgaW5pdFJlc3VsdCk7CiAgICAgICAgICBldmFsQW5kUnVuKGRhdGEuanNIb29rcy5yZW5kZXIsIGluaXRSZXN1bHQsIFtlbCwgZGF0YS54XSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwoKICAgIGludm9rZVBvc3RSZW5kZXJIYW5kbGVycygpOwogIH0KCiAgLy8gV2FpdCB1bnRpbCBhZnRlciB0aGUgZG9jdW1lbnQgaGFzIGxvYWRlZCB0byByZW5kZXIgdGhlIHdpZGdldHMuCiAgaWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLCBmdW5jdGlvbigpIHsKICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIGFyZ3VtZW50cy5jYWxsZWUsIGZhbHNlKTsKICAgICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpOwogICAgfSwgZmFsc2UpOwogIH0gZWxzZSBpZiAoZG9jdW1lbnQuYXR0YWNoRXZlbnQpIHsKICAgIGRvY3VtZW50LmF0dGFjaEV2ZW50KCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCBmdW5jdGlvbigpIHsKICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICJjb21wbGV0ZSIpIHsKICAgICAgICBkb2N1bWVudC5kZXRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIiwgYXJndW1lbnRzLmNhbGxlZSk7CiAgICAgICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpOwogICAgICB9CiAgICB9KTsKICB9CgoKICB3aW5kb3cuSFRNTFdpZGdldHMuZ2V0QXR0YWNobWVudFVybCA9IGZ1bmN0aW9uKGRlcG5hbWUsIGtleSkgewogICAgLy8gSWYgbm8ga2V5LCBkZWZhdWx0IHRvIHRoZSBmaXJzdCBpdGVtCiAgICBpZiAodHlwZW9mKGtleSkgPT09ICJ1bmRlZmluZWQiKQogICAgICBrZXkgPSAxOwoKICAgIHZhciBsaW5rID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVwbmFtZSArICItIiArIGtleSArICItYXR0YWNobWVudCIpOwogICAgaWYgKCFsaW5rKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiQXR0YWNobWVudCAiICsgZGVwbmFtZSArICIvIiArIGtleSArICIgbm90IGZvdW5kIGluIGRvY3VtZW50Iik7CiAgICB9CiAgICByZXR1cm4gbGluay5nZXRBdHRyaWJ1dGUoImhyZWYiKTsKICB9OwoKICB3aW5kb3cuSFRNTFdpZGdldHMuZGF0YWZyYW1lVG9EMyA9IGZ1bmN0aW9uKGRmKSB7CiAgICB2YXIgbmFtZXMgPSBbXTsKICAgIHZhciBsZW5ndGg7CiAgICBmb3IgKHZhciBuYW1lIGluIGRmKSB7CiAgICAgICAgaWYgKGRmLmhhc093blByb3BlcnR5KG5hbWUpKQogICAgICAgICAgICBuYW1lcy5wdXNoKG5hbWUpOwogICAgICAgIGlmICh0eXBlb2YoZGZbbmFtZV0pICE9PSAib2JqZWN0IiB8fCB0eXBlb2YoZGZbbmFtZV0ubGVuZ3RoKSA9PT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJBbGwgZmllbGRzIG11c3QgYmUgYXJyYXlzIik7CiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YobGVuZ3RoKSAhPT0gInVuZGVmaW5lZCIgJiYgbGVuZ3RoICE9PSBkZltuYW1lXS5sZW5ndGgpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJBbGwgZmllbGRzIG11c3QgYmUgYXJyYXlzIG9mIHRoZSBzYW1lIGxlbmd0aCIpOwogICAgICAgIH0KICAgICAgICBsZW5ndGggPSBkZltuYW1lXS5sZW5ndGg7CiAgICB9CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgdmFyIGl0ZW07CiAgICBmb3IgKHZhciByb3cgPSAwOyByb3cgPCBsZW5ndGg7IHJvdysrKSB7CiAgICAgICAgaXRlbSA9IHt9OwogICAgICAgIGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IG5hbWVzLmxlbmd0aDsgY29sKyspIHsKICAgICAgICAgICAgaXRlbVtuYW1lc1tjb2xdXSA9IGRmW25hbWVzW2NvbF1dW3Jvd107CiAgICAgICAgfQogICAgICAgIHJlc3VsdHMucHVzaChpdGVtKTsKICAgIH0KICAgIHJldHVybiByZXN1bHRzOwogIH07CgogIHdpbmRvdy5IVE1MV2lkZ2V0cy50cmFuc3Bvc2VBcnJheTJEID0gZnVuY3Rpb24oYXJyYXkpIHsKICAgICAgaWYgKGFycmF5Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIGFycmF5OwogICAgICB2YXIgbmV3QXJyYXkgPSBhcnJheVswXS5tYXAoZnVuY3Rpb24oY29sLCBpKSB7CiAgICAgICAgICByZXR1cm4gYXJyYXkubWFwKGZ1bmN0aW9uKHJvdykgewogICAgICAgICAgICAgIHJldHVybiByb3dbaV0KICAgICAgICAgIH0pCiAgICAgIH0pOwogICAgICByZXR1cm4gbmV3QXJyYXk7CiAgfTsKICAvLyBTcGxpdCB2YWx1ZSBhdCBzcGxpdENoYXIsIGJ1dCBhbGxvdyBzcGxpdENoYXIgdG8gYmUgZXNjYXBlZAogIC8vIHVzaW5nIGVzY2FwZUNoYXIuIEFueSBvdGhlciBjaGFyYWN0ZXJzIGVzY2FwZWQgYnkgZXNjYXBlQ2hhcgogIC8vIHdpbGwgYmUgaW5jbHVkZWQgYXMgdXN1YWwgKGluY2x1ZGluZyBlc2NhcGVDaGFyIGl0c2VsZikuCiAgZnVuY3Rpb24gc3BsaXRXaXRoRXNjYXBlKHZhbHVlLCBzcGxpdENoYXIsIGVzY2FwZUNoYXIpIHsKICAgIHZhciByZXN1bHRzID0gW107CiAgICB2YXIgZXNjYXBlTW9kZSA9IGZhbHNlOwogICAgdmFyIGN1cnJlbnRSZXN1bHQgPSAiIjsKICAgIGZvciAodmFyIHBvcyA9IDA7IHBvcyA8IHZhbHVlLmxlbmd0aDsgcG9zKyspIHsKICAgICAgaWYgKCFlc2NhcGVNb2RlKSB7CiAgICAgICAgaWYgKHZhbHVlW3Bvc10gPT09IHNwbGl0Q2hhcikgewogICAgICAgICAgcmVzdWx0cy5wdXNoKGN1cnJlbnRSZXN1bHQpOwogICAgICAgICAgY3VycmVudFJlc3VsdCA9ICIiOwogICAgICAgIH0gZWxzZSBpZiAodmFsdWVbcG9zXSA9PT0gZXNjYXBlQ2hhcikgewogICAgICAgICAgZXNjYXBlTW9kZSA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGN1cnJlbnRSZXN1bHQgKz0gdmFsdWVbcG9zXTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY3VycmVudFJlc3VsdCArPSB2YWx1ZVtwb3NdOwogICAgICAgIGVzY2FwZU1vZGUgPSBmYWxzZTsKICAgICAgfQogICAgfQogICAgaWYgKGN1cnJlbnRSZXN1bHQgIT09ICIiKSB7CiAgICAgIHJlc3VsdHMucHVzaChjdXJyZW50UmVzdWx0KTsKICAgIH0KICAgIHJldHVybiByZXN1bHRzOwogIH0KICAvLyBGdW5jdGlvbiBhdXRob3JlZCBieSBZaWh1aS9KSiBBbGxhaXJlCiAgd2luZG93LkhUTUxXaWRnZXRzLmV2YWx1YXRlU3RyaW5nTWVtYmVyID0gZnVuY3Rpb24obywgbWVtYmVyKSB7CiAgICB2YXIgcGFydHMgPSBzcGxpdFdpdGhFc2NhcGUobWVtYmVyLCAnLicsICdcXCcpOwogICAgZm9yICh2YXIgaSA9IDAsIGwgPSBwYXJ0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgdmFyIHBhcnQgPSBwYXJ0c1tpXTsKICAgICAgLy8gcGFydCBtYXkgYmUgYSBjaGFyYWN0ZXIgb3IgJ251bWVyaWMnIG1lbWJlciBuYW1lCiAgICAgIGlmIChvICE9PSBudWxsICYmIHR5cGVvZiBvID09PSAib2JqZWN0IiAmJiBwYXJ0IGluIG8pIHsKICAgICAgICBpZiAoaSA9PSAobCAtIDEpKSB7IC8vIGlmIHdlIGFyZSBhdCB0aGUgZW5kIG9mIHRoZSBsaW5lIHRoZW4gZXZhbHVsYXRlCiAgICAgICAgICBpZiAodHlwZW9mIG9bcGFydF0gPT09ICJzdHJpbmciKQogICAgICAgICAgICBvW3BhcnRdID0gZXZhbCgiKCIgKyBvW3BhcnRdICsgIikiKTsKICAgICAgICB9IGVsc2UgeyAvLyBvdGhlcndpc2UgY29udGludWUgdG8gbmV4dCBlbWJlZGRlZCBvYmplY3QKICAgICAgICAgIG8gPSBvW3BhcnRdOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIC8vIFJldHJpZXZlIHRoZSBIVE1MV2lkZ2V0IGluc3RhbmNlIChpLmUuIHRoZSByZXR1cm4gdmFsdWUgb2YgYW4KICAvLyBIVE1MV2lkZ2V0IGJpbmRpbmcncyBpbml0aWFsaXplKCkgb3IgZmFjdG9yeSgpIGZ1bmN0aW9uKQogIC8vIGFzc29jaWF0ZWQgd2l0aCBhbiBlbGVtZW50LCBvciBudWxsIGlmIG5vbmUuCiAgd2luZG93LkhUTUxXaWRnZXRzLmdldEluc3RhbmNlID0gZnVuY3Rpb24oZWwpIHsKICAgIHJldHVybiBlbGVtZW50RGF0YShlbCwgImluaXRfcmVzdWx0Iik7CiAgfTsKCiAgLy8gRmluZHMgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIHNjb3BlIHRoYXQgbWF0Y2hlcyB0aGUgc2VsZWN0b3IsCiAgLy8gYW5kIHJldHVybnMgdGhlIEhUTUxXaWRnZXQgaW5zdGFuY2UgKGkuZS4gdGhlIHJldHVybiB2YWx1ZSBvZgogIC8vIGFuIEhUTUxXaWRnZXQgYmluZGluZydzIGluaXRpYWxpemUoKSBvciBmYWN0b3J5KCkgZnVuY3Rpb24pCiAgLy8gYXNzb2NpYXRlZCB3aXRoIHRoYXQgZWxlbWVudCwgaWYgYW55LiBJZiBubyBlbGVtZW50IG1hdGNoZXMgdGhlCiAgLy8gc2VsZWN0b3IsIG9yIHRoZSBmaXJzdCBtYXRjaGluZyBlbGVtZW50IGhhcyBubyBIVE1MV2lkZ2V0CiAgLy8gaW5zdGFuY2UgYXNzb2NpYXRlZCB3aXRoIGl0LCB0aGVuIG51bGwgaXMgcmV0dXJuZWQuCiAgLy8KICAvLyBUaGUgc2NvcGUgYXJndW1lbnQgaXMgb3B0aW9uYWwsIGFuZCBkZWZhdWx0cyB0byB3aW5kb3cuZG9jdW1lbnQuCiAgd2luZG93LkhUTUxXaWRnZXRzLmZpbmQgPSBmdW5jdGlvbihzY29wZSwgc2VsZWN0b3IpIHsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDEpIHsKICAgICAgc2VsZWN0b3IgPSBzY29wZTsKICAgICAgc2NvcGUgPSBkb2N1bWVudDsKICAgIH0KCiAgICB2YXIgZWwgPSBzY29wZS5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsKICAgIGlmIChlbCA9PT0gbnVsbCkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiB3aW5kb3cuSFRNTFdpZGdldHMuZ2V0SW5zdGFuY2UoZWwpOwogICAgfQogIH07CgogIC8vIEZpbmRzIGFsbCBlbGVtZW50cyBpbiB0aGUgc2NvcGUgdGhhdCBtYXRjaCB0aGUgc2VsZWN0b3IsIGFuZAogIC8vIHJldHVybnMgdGhlIEhUTUxXaWRnZXQgaW5zdGFuY2VzIChpLmUuIHRoZSByZXR1cm4gdmFsdWVzIG9mCiAgLy8gYW4gSFRNTFdpZGdldCBiaW5kaW5nJ3MgaW5pdGlhbGl6ZSgpIG9yIGZhY3RvcnkoKSBmdW5jdGlvbikKICAvLyBhc3NvY2lhdGVkIHdpdGggdGhlIGVsZW1lbnRzLCBpbiBhbiBhcnJheS4gSWYgZWxlbWVudHMgdGhhdAogIC8vIG1hdGNoIHRoZSBzZWxlY3RvciBkb24ndCBoYXZlIGFuIGFzc29jaWF0ZWQgSFRNTFdpZGdldAogIC8vIGluc3RhbmNlLCB0aGUgcmV0dXJuZWQgYXJyYXkgd2lsbCBjb250YWluIG51bGxzLgogIC8vCiAgLy8gVGhlIHNjb3BlIGFyZ3VtZW50IGlzIG9wdGlvbmFsLCBhbmQgZGVmYXVsdHMgdG8gd2luZG93LmRvY3VtZW50LgogIHdpbmRvdy5IVE1MV2lkZ2V0cy5maW5kQWxsID0gZnVuY3Rpb24oc2NvcGUsIHNlbGVjdG9yKSB7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7CiAgICAgIHNlbGVjdG9yID0gc2NvcGU7CiAgICAgIHNjb3BlID0gZG9jdW1lbnQ7CiAgICB9CgogICAgdmFyIG5vZGVzID0gc2NvcGUucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykgewogICAgICByZXN1bHRzLnB1c2god2luZG93LkhUTUxXaWRnZXRzLmdldEluc3RhbmNlKG5vZGVzW2ldKSk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0czsKICB9OwoKICB2YXIgcG9zdFJlbmRlckhhbmRsZXJzID0gW107CiAgZnVuY3Rpb24gaW52b2tlUG9zdFJlbmRlckhhbmRsZXJzKCkgewogICAgd2hpbGUgKHBvc3RSZW5kZXJIYW5kbGVycy5sZW5ndGgpIHsKICAgICAgdmFyIGhhbmRsZXIgPSBwb3N0UmVuZGVySGFuZGxlcnMuc2hpZnQoKTsKICAgICAgaWYgKGhhbmRsZXIpIHsKICAgICAgICBoYW5kbGVyKCk7CiAgICAgIH0KICAgIH0KICB9CgogIC8vIFJlZ2lzdGVyIHRoZSBnaXZlbiBjYWxsYmFjayBmdW5jdGlvbiB0byBiZSBpbnZva2VkIGFmdGVyIHRoZQogIC8vIG5leHQgdGltZSBzdGF0aWMgd2lkZ2V0cyBhcmUgcmVuZGVyZWQuCiAgd2luZG93LkhUTUxXaWRnZXRzLmFkZFBvc3RSZW5kZXJIYW5kbGVyID0gZnVuY3Rpb24oY2FsbGJhY2spIHsKICAgIHBvc3RSZW5kZXJIYW5kbGVycy5wdXNoKGNhbGxiYWNrKTsKICB9OwoKICAvLyBUYWtlcyBhIG5ldy1zdHlsZSBpbnN0YW5jZS1ib3VuZCBkZWZpbml0aW9uLCBhbmQgcmV0dXJucyBhbgogIC8vIG9sZC1zdHlsZSBjbGFzcy1ib3VuZCBkZWZpbml0aW9uLiBUaGlzIHNhdmVzIHVzIGZyb20gaGF2aW5nCiAgLy8gdG8gcmV3cml0ZSBhbGwgdGhlIGxvZ2ljIGluIHRoaXMgZmlsZSB0byBhY2NvbW9kYXRlIGJvdGgKICAvLyB0eXBlcyBvZiBkZWZpbml0aW9ucy4KICBmdW5jdGlvbiBjcmVhdGVMZWdhY3lEZWZpbml0aW9uQWRhcHRlcihkZWZuKSB7CiAgICB2YXIgcmVzdWx0ID0gewogICAgICBuYW1lOiBkZWZuLm5hbWUsCiAgICAgIHR5cGU6IGRlZm4udHlwZSwKICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oZWwsIHdpZHRoLCBoZWlnaHQpIHsKICAgICAgICByZXR1cm4gZGVmbi5mYWN0b3J5KGVsLCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgfSwKICAgICAgcmVuZGVyVmFsdWU6IGZ1bmN0aW9uKGVsLCB4LCBpbnN0YW5jZSkgewogICAgICAgIHJldHVybiBpbnN0YW5jZS5yZW5kZXJWYWx1ZSh4KTsKICAgICAgfSwKICAgICAgcmVzaXplOiBmdW5jdGlvbihlbCwgd2lkdGgsIGhlaWdodCwgaW5zdGFuY2UpIHsKICAgICAgICByZXR1cm4gaW5zdGFuY2UucmVzaXplKHdpZHRoLCBoZWlnaHQpOwogICAgICB9CiAgICB9OwoKICAgIGlmIChkZWZuLmZpbmQpCiAgICAgIHJlc3VsdC5maW5kID0gZGVmbi5maW5kOwogICAgaWYgKGRlZm4ucmVuZGVyRXJyb3IpCiAgICAgIHJlc3VsdC5yZW5kZXJFcnJvciA9IGRlZm4ucmVuZGVyRXJyb3I7CiAgICBpZiAoZGVmbi5jbGVhckVycm9yKQogICAgICByZXN1bHQuY2xlYXJFcnJvciA9IGRlZm4uY2xlYXJFcnJvcjsKCiAgICByZXR1cm4gcmVzdWx0OwogIH0KfSkoKTsKCg=="></script>
<link href="data:text/css;charset=utf-8,%0A%2Ebiojs%5Fmsa%5Fdiv%20%7B%0A%7D%0A%2Ebiojs%5Fmsa%5Fstage%20%7B%0Acursor%3A%20default%3B%0Aline%2Dheight%3A%20normal%3B%20font%2Dfamily%3A%20Helvetica%3B%0A%7D%0A%2Ebiojs%5Fmsa%5Fseqblock%20%7B%0Acursor%3A%20move%3B%0A%7D%0A%2Ebiojs%5Fmsa%5Flayer%7B%0Adisplay%3A%20block%3B%0Awhite%2Dspace%3A%20nowrap%3B%0A%7D%0A%2Ebiojs%5Fmsa%5Flabels%20%7B%0Acolor%3Ablack%3B%0Adisplay%3A%20inline%2Dblock%3B%0Awhite%2Dspace%3A%20nowrap%3B%0Acursor%3A%20pointer%3B%0Avertical%2Dalign%3Amiddle%3B%0Aoverflow%3A%20hidden%3B%0Atext%2Doverflow%3A%20clip%3B%0A%0Atext%2Dalign%3A%20left%3B%0A%7D%0A%2Ebiojs%5Fmsa%5Fheader%20%7B%0Awhite%2Dspace%3A%20nowrap%3B%0Atext%2Dalign%3A%20left%3B%0A%7D%0A%2Ebiojs%5Fmsa%5Flabelrow%3Abefore%20%7B%0Acontent%3A%20%27%27%3B%0Adisplay%3A%20inline%2Dblock%3B%0Awidth%3A%200%3B%0Aheight%3A%20100%25%3B%0Avertical%2Dalign%3A%20middle%3B%0A%7D%0A%2Ebiojs%5Fmsa%5Flabelrow%7B%0Aheight%3A%20100%25%3B%0A%7D%0A%2Ebiojs%5Fmsa%5Flabelblock%3A%3A%2Dwebkit%2Dscrollbar%2C%20%2Ebiojs%5Fmsa%5Frheader%3A%3A%2Dwebkit%2Dscrollbar%7B%0A%2F%2F%20FIX%20scrollbars%20on%20Mac%0A%2Dwebkit%2Dappearance%3A%20none%3B%0Awidth%3A%207px%3B%0Aheight%3A%207px%3B%0A%7D%0A%2Ebiojs%5Fmsa%5Flabelblock%3A%3A%2Dwebkit%2Dscrollbar%2Dthumb%2C%20%2Ebiojs%5Fmsa%5Frheader%3A%3A%2Dwebkit%2Dscrollbar%2Dthumb%7B%0Aborder%2Dradius%3A%204px%3B%0Abackground%2Dcolor%3A%20rgba%280%2C0%2C0%2C%2E5%29%3B%0Abox%2Dshadow%3A%200%200%201px%20rgba%28255%2C255%2C255%2C%2E5%29%3B%0A%7D%0A%0A%0A%2Ebiojs%5Fmsa%5Fmarker%20%7B%0Acolor%3A%20%23999%3B%0Awhite%2Dspace%3A%20nowrap%3B%0A%7D%0A%2Ebiojs%5Fmsa%5Fmarker%20%2Emsa%2Dcol%2Dheader%20%7B%0Acursor%3A%20pointer%3B%0Acursor%3A%20pointer%3B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%2Ebiojs%5Fmsa%5Fmarker%20%2Emsa%2Dcol%2Dheader%3Ahover%20%7B%0Acolor%3A%20%23f00%3B%0A%7D%0A%0A%0A%2Esmenubar%20%2Esmenubar%5Falink%20%7B%0Abackground%3A%20%233498db%3B%0Abackground%2Dimage%3A%20%2Dwebkit%2Dlinear%2Dgradient%28top%2C%20%233498db%2C%20%232980b9%29%3B%0Abackground%2Dimage%3A%20%2Dmoz%2Dlinear%2Dgradient%28top%2C%20%233498db%2C%20%232980b9%29%3B%0Abackground%2Dimage%3A%20%2Dms%2Dlinear%2Dgradient%28top%2C%20%233498db%2C%20%232980b9%29%3B%0Abackground%2Dimage%3A%20%2Do%2Dlinear%2Dgradient%28top%2C%20%233498db%2C%20%232980b9%29%3B%0Abackground%2Dimage%3A%20linear%2Dgradient%28to%20bottom%2C%20%233498db%2C%20%232980b9%29%3B%0A%2Dwebkit%2Dborder%2Dradius%3A%2028%3B%0A%2Dmoz%2Dborder%2Dradius%3A%2028%3B%0Aborder%2Dradius%3A%2028px%3B%0Afont%2Dfamily%3A%20Arial%3B%0Acolor%3A%20%23ffffff%3B%0Apadding%3A%203px%2010px%203px%2010px%3B%0Amargin%2Dleft%3A%2010px%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0A%2Esmenubar%20%7B%0Adisplay%3A%20inline%2Dblock%3B%0A%7D%0A%2Esmenubar%20%2Esmenubar%5Falink%3Ahover%20%7B%0Acursor%3A%20pointer%3B%0A%7D%0A%0A%2Esmenu%2Ddropdown%20%7B%0Aposition%3A%20absolute%3B%0Az%2Dindex%3A%209999999%3B%0Adisplay%3A%20none%3B%0A%7D%0A%2Esmenu%2Ddropdown%20%2Esmenu%2Ddropdown%2Dmenu%2C%0A%2Esmenu%2Ddropdown%20%2Esmenu%2Ddropdown%2Dpanel%20%7B%0Amin%2Dwidth%3A%20160px%3B%0Amax%2Dwidth%3A%20360px%3B%0Alist%2Dstyle%3A%20none%3B%0Abackground%3A%20%23FFF%3B%0Aborder%3A%20solid%201px%20%23DDD%3B%0Aborder%3A%20solid%201px%20rgba%280%2C%200%2C%200%2C%20%2E2%29%3B%0Aborder%2Dradius%3A%206px%3B%0Abox%2Dshadow%3A%200%205px%2010px%20rgba%280%2C%200%2C%200%2C%20%2E2%29%3B%0Aoverflow%3A%20visible%3B%0Apadding%3A%204px%200%3B%0Amargin%3A%200%3B%0A%7D%0A%2Esmenu%2Ddropdown%20%2Esmenu%2Ddropdown%2Dpanel%20%7B%0Apadding%3A%2010px%3B%0A%7D%0A%2Esmenu%2Ddropdown%2Esmenu%2Ddropdown%2Dscroll%20%2Esmenu%2Ddropdown%2Dmenu%2C%0A%2Esmenu%2Ddropdown%2Esmenu%2Ddropdown%2Dscroll%20%2Esmenu%2Ddropdown%2Dpanel%20%7B%0Amax%2Dheight%3A%20358px%3B%0Aoverflow%3A%20auto%3B%0A%7D%0A%2Esmenu%2Ddropdown%20%2Esmenu%2Ddropdown%2Dmenu%20LI%20%7B%0Alist%2Dstyle%3A%20none%3B%0Apadding%3A%200%200%3B%0Amargin%3A%200%3B%0Aline%2Dheight%3A%2018px%3B%0A%7D%0A%2Esmenu%2Ddropdown%20%2Esmenu%2Ddropdown%2Dmenu%20LI%2C%0A%2Esmenu%2Ddropdown%20%2Esmenu%2Ddropdown%2Dmenu%20LABEL%20%7B%0Adisplay%3A%20block%3B%0Acolor%3A%20%23555%3B%0Atext%2Ddecoration%3A%20none%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%203px%2015px%3B%0Awhite%2Dspace%3A%20nowrap%3B%0A%7D%0A%2Esmenu%2Ddropdown%20%2Esmenu%2Ddropdown%2Dmenu%20LI%3Ahover%2C%0A%2Esmenu%2Ddropdown%20%2Esmenu%2Ddropdown%2Dmenu%20LABEL%3Ahover%20%7B%0Abackground%2Dcolor%3A%20%2308C%3B%0Acolor%3A%20%23FFF%3B%0Acursor%3A%20pointer%3B%0A%7D%0A%2Esmenu%2Ddropdown%20%2Esmenu%2Ddropdown%2Dmenu%20%2Esmenu%2Ddropdown%2Ddivider%20%7B%0Afont%2Dsize%3A%201px%3B%0Aborder%2Dtop%3A%20solid%201px%20%23E5E5E5%3B%0Apadding%3A%200%3B%0Amargin%3A%205px%200%3B%0A%7D%0A%0A%2Ebiojs%5Fmsa%5Fdiv%20%7B%0Aposition%3A%20relative%3B%0A%7D%0A%2Ebiojs%5Fmsa%5Fscale%20%7B%0Aposition%3A%20absolute%3B%0Abottom%3A%200%3B%0Aright%3A%200%3B%0Abackground%2Dcolor%3A%20%23fff%3B%0Abox%2Dshadow%3A%200%202px%203px%20%23999%3B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200%200%20auto%3B%0Apadding%3A%205px%3B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%2Ebiojs%5Fmsa%5Fscale%20%2Emsa%2Dbtngroup%20%7B%0Amargin%3A%205px%20auto%200%3B%0A%7D%0A%2Ebiojs%5Fmsa%5Fscale%20%5Btype%3D%22range%22%5D%20%7B%0Acursor%3A%20pointer%3B%0A%7D%0A%2Ebiojs%5Fmsa%5Fscale%20%2Emsa%2Dscale%2Dminimised%20%7B%0A%7D%0A%2Ebiojs%5Fmsa%5Fscale%20%2Emsa%2Dscale%2Dminimised%20%7B%0A%7D%0A%2Ebiojs%5Fmsa%5Fscale%20%2Emsa%2Dbtn%2Dclose%20%7B%0Atext%2Dalign%3A%20right%3B%0Afont%2Dsize%3A%200%2E8em%3B%0Apadding%3A%202px%3B%0A%7D%0A%2Ebiojs%5Fmsa%5Fscale%20%2Emsa%2Dbtn%2Dopen%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0A%7D%0A%2Ebiojs%5Fmsa%5Fscale%20%2Emsa%2Dhide%20%7B%0Adisplay%3A%20none%3B%0A%7D%0A%2Emsa%2Dbtn%20%7B%0Acursor%3A%20pointer%3B%0Afont%2Dsize%3A%201%2E1em%3B%0Adisplay%3A%20inline%2Dblock%3B%0Apadding%3A%202px%208px%3B%0Amargin%2Dbottom%3A%200%3B%0Aborder%3A%201px%20solid%20transparent%3B%0Aborder%2Dradius%3A%204px%3B%0Abox%2Dsizing%3A%20border%2Dbox%3B%0A%7D%0A%2Emsa%2Dbtn%3Ahover%20%7B%0Abackground%2Dcolor%3A%20%23ddd%3B%0A%7D%0A" rel="stylesheet" />
<script src="data:application/x-javascript;base64,IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUocil7aWYobltyXSlyZXR1cm4gbltyXS5leHBvcnRzO3ZhciBpPW5bcl09e2V4cG9ydHM6e30saWQ6cixsb2FkZWQ6ITF9O3JldHVybiB0W3JdLmNhbGwoaS5leHBvcnRzLGksaS5leHBvcnRzLGUpLGkubG9hZGVkPSEwLGkuZXhwb3J0c312YXIgbj17fTtyZXR1cm4gZS5tPXQsZS5jPW4sZS5wPSIiLGUoMCl9KFtmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlWyJkZWZhdWx0Il09dCxlfXZhciBpPW4oMTExKSxvPXIoaSk7bigxNTQpO3ZhciBzPW9bImRlZmF1bHQiXTtmb3IodmFyIHUgaW4gbylvLmhhc093blByb3BlcnR5KHUpJiYoc1t1XT1vW3VdKTt3aW5kb3cmJih3aW5kb3cubXNhPXMpLHQuZXhwb3J0cz1zfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3QuZXhwb3J0cy5Nb2RlbD1uKDQxKSx0LmV4cG9ydHMuQ29sbGVjdGlvbj1uKDU1KSx0LmV4cG9ydHMuRXZlbnRzPW4oMjIpLHQuZXhwb3J0cy5leHRlbmQ9bigyMyl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9big2MCksaT1uKDU4KSxvPW4oNTkpLHM9big1KSx1PWZ1bmN0aW9uKHQpe3RoaXMuY2lkPXIudW5pcXVlSWQoInZpZXciKSx0fHwodD17fSksci5leHRlbmQodGhpcyxyLnBpY2sodCxsKSksdGhpcy5fZW5zdXJlRWxlbWVudCgpLHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGE9L14oXFMrKVxzKiguKikkLyxsPVsibW9kZWwiLCJjb2xsZWN0aW9uIiwiZWwiLCJpZCIsImF0dHJpYnV0ZXMiLCJjbGFzc05hbWUiLCJ0YWdOYW1lIiwiZXZlbnRzIl07ci5leHRlbmQodS5wcm90b3R5cGUsaSx7dGFnTmFtZToiZGl2IiwkOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLiRlbC5maW5kKHQpfSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7fSxyZW5kZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbW92ZUVsZW1lbnQoKSx0aGlzLnN0b3BMaXN0ZW5pbmcoKSx0aGlzfSxfcmVtb3ZlRWxlbWVudDpmdW5jdGlvbigpe3RoaXMuJGVsLnJlbW92ZSgpfSxzZXRFbGVtZW50OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnVuZGVsZWdhdGVFdmVudHMoKSx0aGlzLl9zZXRFbGVtZW50KHQpLHRoaXMuZGVsZWdhdGVFdmVudHMoKSx0aGlzfSxfc2V0RWxlbWVudDpmdW5jdGlvbih0KXt0aGlzLiRlbD10IGluc3RhbmNlb2Ygcz90OnModCksdGhpcy5lbD10aGlzLiRlbFswXX0sZGVsZWdhdGVFdmVudHM6ZnVuY3Rpb24odCl7aWYoIXQmJiEodD1yLnJlc3VsdCh0aGlzLCJldmVudHMiKSkpcmV0dXJuIHRoaXM7dGhpcy51bmRlbGVnYXRlRXZlbnRzKCk7Zm9yKHZhciBlIGluIHQpe3ZhciBuPXRbZV07aWYoci5pc0Z1bmN0aW9uKG4pfHwobj10aGlzW3RbZV1dKSxuKXt2YXIgaT1lLm1hdGNoKGEpO3RoaXMuZGVsZWdhdGUoaVsxXSxpWzJdLHIuYmluZChuLHRoaXMpKX19cmV0dXJuIHRoaXN9LGRlbGVnYXRlOmZ1bmN0aW9uKHQsZSxuKXt0aGlzLiRlbC5vbih0KyIuZGVsZWdhdGVFdmVudHMiK3RoaXMuY2lkLGUsbil9LHVuZGVsZWdhdGVFdmVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWwmJnRoaXMuJGVsLm9mZigiLmRlbGVnYXRlRXZlbnRzIit0aGlzLmNpZCksdGhpc30sdW5kZWxlZ2F0ZTpmdW5jdGlvbih0LGUsbil7dGhpcy4kZWwub2ZmKHQrIi5kZWxlZ2F0ZUV2ZW50cyIrdGhpcy5jaWQsZSxuKX0sX2NyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodCl9LF9lbnN1cmVFbGVtZW50OmZ1bmN0aW9uKCl7aWYodGhpcy5lbCl0aGlzLnNldEVsZW1lbnQoci5yZXN1bHQodGhpcywiZWwiKSk7ZWxzZXt2YXIgdD1yLmV4dGVuZCh7fSxyLnJlc3VsdCh0aGlzLCJhdHRyaWJ1dGVzIikpO3RoaXMuaWQmJih0LmlkPXIucmVzdWx0KHRoaXMsImlkIikpLHRoaXMuY2xhc3NOYW1lJiYodFsiY2xhc3MiXT1yLnJlc3VsdCh0aGlzLCJjbGFzc05hbWUiKSksdGhpcy5zZXRFbGVtZW50KHRoaXMuX2NyZWF0ZUVsZW1lbnQoci5yZXN1bHQodGhpcywidGFnTmFtZSIpKSksdGhpcy5fc2V0QXR0cmlidXRlcyh0KX19LF9zZXRBdHRyaWJ1dGVzOmZ1bmN0aW9uKHQpe3RoaXMuJGVsLmF0dHIodCl9fSksdS5leHRlbmQ9byx0LmV4cG9ydHM9dX0sZnVuY3Rpb24odCxlLG4pe3ZhciByOyhmdW5jdGlvbih0LGkpeyJ1c2Ugc3RyaWN0Ijt2YXIgbz0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sPyJzeW1ib2wiOnR5cGVvZiB0fTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBzKHQsZSl7cmV0dXJuIHQuc2V0KGVbMF0sZVsxXSksdH1mdW5jdGlvbiB1KHQsZSl7cmV0dXJuIHQuYWRkKGUpLHR9ZnVuY3Rpb24gYSh0LGUsbil7c3dpdGNoKG4ubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIHQuY2FsbChlKTtjYXNlIDE6cmV0dXJuIHQuY2FsbChlLG5bMF0pO2Nhc2UgMjpyZXR1cm4gdC5jYWxsKGUsblswXSxuWzFdKTtjYXNlIDM6cmV0dXJuIHQuY2FsbChlLG5bMF0sblsxXSxuWzJdKX1yZXR1cm4gdC5hcHBseShlLG4pfWZ1bmN0aW9uIGwodCxlLG4scil7Zm9yKHZhciBpPS0xLG89dD90Lmxlbmd0aDowOysraTxvOyl7dmFyIHM9dFtpXTtlKHIscyxuKHMpLHQpfXJldHVybiByfWZ1bmN0aW9uIGModCxlKXtmb3IodmFyIG49LTEscj10P3QubGVuZ3RoOjA7KytuPHImJmUodFtuXSxuLHQpIT09ITE7KTtyZXR1cm4gdH1mdW5jdGlvbiBmKHQsZSl7Zm9yKHZhciBuPXQ/dC5sZW5ndGg6MDtuLS0mJmUodFtuXSxuLHQpIT09ITE7KTtyZXR1cm4gdH1mdW5jdGlvbiBoKHQsZSl7Zm9yKHZhciBuPS0xLHI9dD90Lmxlbmd0aDowOysrbjxyOylpZighZSh0W25dLG4sdCkpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gZCh0LGUpe2Zvcih2YXIgbj0tMSxyPXQ/dC5sZW5ndGg6MCxpPTAsbz1bXTsrK248cjspe3ZhciBzPXRbbl07ZShzLG4sdCkmJihvW2krK109cyl9cmV0dXJuIG99ZnVuY3Rpb24gcCh0LGUpe3JldHVybiEhKHQ/dC5sZW5ndGg6MCkmJlModCxlLDApPi0xfWZ1bmN0aW9uIGcodCxlLG4pe2Zvcih2YXIgcj0tMSxpPXQ/dC5sZW5ndGg6MDsrK3I8aTspaWYobihlLHRbcl0pKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIHYodCxlKXtmb3IodmFyIG49LTEscj10P3QubGVuZ3RoOjAsaT1BcnJheShyKTsrK248cjspaVtuXT1lKHRbbl0sbix0KTtyZXR1cm4gaX1mdW5jdGlvbiBtKHQsZSl7Zm9yKHZhciBuPS0xLHI9ZS5sZW5ndGgsaT10Lmxlbmd0aDsrK248cjspdFtpK25dPWVbbl07cmV0dXJuIHR9ZnVuY3Rpb24geSh0LGUsbixyKXt2YXIgaT0tMSxvPXQ/dC5sZW5ndGg6MDtmb3IociYmbyYmKG49dFsrK2ldKTsrK2k8bzspbj1lKG4sdFtpXSxpLHQpO3JldHVybiBufWZ1bmN0aW9uIF8odCxlLG4scil7dmFyIGk9dD90Lmxlbmd0aDowO2ZvcihyJiZpJiYobj10Wy0taV0pO2ktLTspbj1lKG4sdFtpXSxpLHQpO3JldHVybiBufWZ1bmN0aW9uIGIodCxlKXtmb3IodmFyIG49LTEscj10P3QubGVuZ3RoOjA7KytuPHI7KWlmKGUodFtuXSxuLHQpKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIHgodCxlLG4pe3ZhciByO3JldHVybiBuKHQsZnVuY3Rpb24odCxuLGkpe2lmKGUodCxuLGkpKXJldHVybiByPW4sITF9KSxyfWZ1bmN0aW9uIHcodCxlLG4scil7Zm9yKHZhciBpPXQubGVuZ3RoLG89bisocj8xOi0xKTtyP28tLTorK288aTspaWYoZSh0W29dLG8sdCkpcmV0dXJuIG87cmV0dXJuLTF9ZnVuY3Rpb24gUyh0LGUsbil7aWYoZSE9PWUpcmV0dXJuIEQodCxuKTtmb3IodmFyIHI9bi0xLGk9dC5sZW5ndGg7KytyPGk7KWlmKHRbcl09PT1lKXJldHVybiByO3JldHVybi0xfWZ1bmN0aW9uIGsodCxlLG4scil7Zm9yKHZhciBpPW4tMSxvPXQubGVuZ3RoOysraTxvOylpZihyKHRbaV0sZSkpcmV0dXJuIGk7cmV0dXJuLTF9ZnVuY3Rpb24gaih0LGUpe3ZhciBuPXQ/dC5sZW5ndGg6MDtyZXR1cm4gbj9NKHQsZSkvbjpFdH1mdW5jdGlvbiBPKHQsZSxuLHIsaSl7cmV0dXJuIGkodCxmdW5jdGlvbih0LGksbyl7bj1yPyhyPSExLHQpOmUobix0LGksbyl9KSxufWZ1bmN0aW9uIEUodCxlKXt2YXIgbj10Lmxlbmd0aDtmb3IodC5zb3J0KGUpO24tLTspdFtuXT10W25dLnZhbHVlO3JldHVybiB0fWZ1bmN0aW9uIE0odCxlKXtmb3IodmFyIG4scj0tMSxpPXQubGVuZ3RoOysrcjxpOyl7dmFyIG89ZSh0W3JdKTtvIT09USYmKG49bj09PVE/bzpuK28pfXJldHVybiBufWZ1bmN0aW9uIHoodCxlKXtmb3IodmFyIG49LTEscj1BcnJheSh0KTsrK248dDspcltuXT1lKG4pO3JldHVybiByfWZ1bmN0aW9uIEEodCxlKXtyZXR1cm4gdihlLGZ1bmN0aW9uKGUpe3JldHVybltlLHRbZV1dfSl9ZnVuY3Rpb24gQyh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl9fWZ1bmN0aW9uIFQodCxlKXtyZXR1cm4gdihlLGZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfSl9ZnVuY3Rpb24gSSh0LGUpe3JldHVybiB0LmhhcyhlKX1mdW5jdGlvbiBOKHQsZSl7Zm9yKHZhciBuPS0xLHI9dC5sZW5ndGg7KytuPHImJlMoZSx0W25dLDApPi0xOyk7cmV0dXJuIG59ZnVuY3Rpb24gTCh0LGUpe2Zvcih2YXIgbj10Lmxlbmd0aDtuLS0mJlMoZSx0W25dLDApPi0xOyk7cmV0dXJuIG59ZnVuY3Rpb24gUih0KXtyZXR1cm4gdCYmdC5PYmplY3Q9PT1PYmplY3Q/dDpudWxsfWZ1bmN0aW9uIHEodCxlKXtmb3IodmFyIG49dC5sZW5ndGgscj0wO24tLTspdFtuXT09PWUmJnIrKztyZXR1cm4gcn1mdW5jdGlvbiBGKHQpe3JldHVybiBBblt0XX1mdW5jdGlvbiBQKHQpe3JldHVybiBDblt0XX1mdW5jdGlvbiBCKHQpe3JldHVybiJcXCIrSW5bdF19ZnVuY3Rpb24gVyh0LGUpe3JldHVybiBudWxsPT10P1E6dFtlXX1mdW5jdGlvbiBEKHQsZSxuKXtmb3IodmFyIHI9dC5sZW5ndGgsaT1lKyhuPzE6LTEpO24/aS0tOisraTxyOyl7dmFyIG89dFtpXTtpZihvIT09bylyZXR1cm4gaX1yZXR1cm4tMX1mdW5jdGlvbiBIKHQpe3ZhciBlPSExO2lmKG51bGwhPXQmJiJmdW5jdGlvbiIhPXR5cGVvZiB0LnRvU3RyaW5nKXRyeXtlPSEhKHQrIiIpfWNhdGNoKG4pe31yZXR1cm4gZX1mdW5jdGlvbiBVKHQpe2Zvcih2YXIgZSxuPVtdOyEoZT10Lm5leHQoKSkuZG9uZTspbi5wdXNoKGUudmFsdWUpO3JldHVybiBufWZ1bmN0aW9uIFYodCl7dmFyIGU9LTEsbj1BcnJheSh0LnNpemUpO3JldHVybiB0LmZvckVhY2goZnVuY3Rpb24odCxyKXtuWysrZV09W3IsdF19KSxufWZ1bmN0aW9uICQodCxlKXtmb3IodmFyIG49LTEscj10Lmxlbmd0aCxpPTAsbz1bXTsrK248cjspe3ZhciBzPXRbbl07cyE9PWUmJnMhPT1pdHx8KHRbbl09aXQsb1tpKytdPW4pfXJldHVybiBvfWZ1bmN0aW9uIEcodCl7dmFyIGU9LTEsbj1BcnJheSh0LnNpemUpO3JldHVybiB0LmZvckVhY2goZnVuY3Rpb24odCl7blsrK2VdPXR9KSxufWZ1bmN0aW9uIEsodCl7dmFyIGU9LTEsbj1BcnJheSh0LnNpemUpO3JldHVybiB0LmZvckVhY2goZnVuY3Rpb24odCl7blsrK2VdPVt0LHRdfSksbn1mdW5jdGlvbiBYKHQpe2lmKCF0fHwha24udGVzdCh0KSlyZXR1cm4gdC5sZW5ndGg7Zm9yKHZhciBlPXduLmxhc3RJbmRleD0wO3duLnRlc3QodCk7KWUrKztyZXR1cm4gZX1mdW5jdGlvbiBaKHQpe3JldHVybiB0Lm1hdGNoKHduKX1mdW5jdGlvbiBKKHQpe3JldHVybiBUblt0XX1mdW5jdGlvbiBZKHQpe2Z1bmN0aW9uIGUodCl7aWYoX3UodCkmJiF5Zih0KSYmISh0IGluc3RhbmNlb2YgaSkpe2lmKHQgaW5zdGFuY2VvZiByKXJldHVybiB0O2lmKEFsLmNhbGwodCwiX193cmFwcGVkX18iKSlyZXR1cm4gaG8odCl9cmV0dXJuIG5ldyByKHQpfWZ1bmN0aW9uIG4oKXt9ZnVuY3Rpb24gcih0LGUpe3RoaXMuX193cmFwcGVkX189dCx0aGlzLl9fYWN0aW9uc19fPVtdLHRoaXMuX19jaGFpbl9fPSEhZSx0aGlzLl9faW5kZXhfXz0wLHRoaXMuX192YWx1ZXNfXz1RfWZ1bmN0aW9uIGkodCl7dGhpcy5fX3dyYXBwZWRfXz10LHRoaXMuX19hY3Rpb25zX189W10sdGhpcy5fX2Rpcl9fPTEsdGhpcy5fX2ZpbHRlcmVkX189ITEsdGhpcy5fX2l0ZXJhdGVlc19fPVtdLHRoaXMuX190YWtlQ291bnRfXz1NdCx0aGlzLl9fdmlld3NfXz1bXX1mdW5jdGlvbiBSKCl7dmFyIHQ9bmV3IGkodGhpcy5fX3dyYXBwZWRfXyk7cmV0dXJuIHQuX19hY3Rpb25zX189cmkodGhpcy5fX2FjdGlvbnNfXyksdC5fX2Rpcl9fPXRoaXMuX19kaXJfXyx0Ll9fZmlsdGVyZWRfXz10aGlzLl9fZmlsdGVyZWRfXyx0Ll9faXRlcmF0ZWVzX189cmkodGhpcy5fX2l0ZXJhdGVlc19fKSx0Ll9fdGFrZUNvdW50X189dGhpcy5fX3Rha2VDb3VudF9fLHQuX192aWV3c19fPXJpKHRoaXMuX192aWV3c19fKSx0fWZ1bmN0aW9uIFJlKCl7aWYodGhpcy5fX2ZpbHRlcmVkX18pe3ZhciB0PW5ldyBpKHRoaXMpO3QuX19kaXJfXz0tMSx0Ll9fZmlsdGVyZWRfXz0hMH1lbHNlIHQ9dGhpcy5jbG9uZSgpLHQuX19kaXJfXyo9LTE7cmV0dXJuIHR9ZnVuY3Rpb24gcWUoKXt2YXIgdD10aGlzLl9fd3JhcHBlZF9fLnZhbHVlKCksZT10aGlzLl9fZGlyX18sbj15Zih0KSxyPWU8MCxpPW4/dC5sZW5ndGg6MCxvPUhpKDAsaSx0aGlzLl9fdmlld3NfXykscz1vLnN0YXJ0LHU9by5lbmQsYT11LXMsbD1yP3U6cy0xLGM9dGhpcy5fX2l0ZXJhdGVlc19fLGY9Yy5sZW5ndGgsaD0wLGQ9dGMoYSx0aGlzLl9fdGFrZUNvdW50X18pO2lmKCFufHxpPGV0fHxpPT1hJiZkPT1hKXJldHVybiBGcih0LHRoaXMuX19hY3Rpb25zX18pO3ZhciBwPVtdO3Q6Zm9yKDthLS0mJmg8ZDspe2wrPWU7Zm9yKHZhciBnPS0xLHY9dFtsXTsrK2c8Zjspe3ZhciBtPWNbZ10seT1tLml0ZXJhdGVlLF89bS50eXBlLGI9eSh2KTtpZihfPT13dCl2PWI7ZWxzZSBpZighYil7aWYoXz09eHQpY29udGludWUgdDticmVhayB0fX1wW2grK109dn1yZXR1cm4gcH1mdW5jdGlvbiBGZSh0KXt2YXIgZT0tMSxuPXQ/dC5sZW5ndGg6MDtmb3IodGhpcy5jbGVhcigpOysrZTxuOyl7dmFyIHI9dFtlXTt0aGlzLnNldChyWzBdLHJbMV0pfX1mdW5jdGlvbiBQZSgpe3RoaXMuX19kYXRhX189ZmM/ZmMobnVsbCk6e319ZnVuY3Rpb24gQmUodCl7cmV0dXJuIHRoaXMuaGFzKHQpJiZkZWxldGUgdGhpcy5fX2RhdGFfX1t0XX1mdW5jdGlvbiBXZSh0KXt2YXIgZT10aGlzLl9fZGF0YV9fO2lmKGZjKXt2YXIgbj1lW3RdO3JldHVybiBuPT09cnQ/UTpufXJldHVybiBBbC5jYWxsKGUsdCk/ZVt0XTpRfWZ1bmN0aW9uIERlKHQpe3ZhciBlPXRoaXMuX19kYXRhX187cmV0dXJuIGZjP2VbdF0hPT1ROkFsLmNhbGwoZSx0KX1mdW5jdGlvbiBIZSh0LGUpe3JldHVybiB0aGlzLl9fZGF0YV9fW3RdPWZjJiZlPT09UT9ydDplLHRoaXN9ZnVuY3Rpb24gVWUodCl7dmFyIGU9LTEsbj10P3QubGVuZ3RoOjA7Zm9yKHRoaXMuY2xlYXIoKTsrK2U8bjspe3ZhciByPXRbZV07dGhpcy5zZXQoclswXSxyWzFdKX19ZnVuY3Rpb24gVmUoKXt0aGlzLl9fZGF0YV9fPVtdfWZ1bmN0aW9uICRlKHQpe3ZhciBlPXRoaXMuX19kYXRhX18sbj1nbihlLHQpO3JldHVybiEobjwwfHwobj09ZS5sZW5ndGgtMT9lLnBvcCgpOlZsLmNhbGwoZSxuLDEpLDApKX1mdW5jdGlvbiBHZSh0KXt2YXIgZT10aGlzLl9fZGF0YV9fLG49Z24oZSx0KTtyZXR1cm4gbjwwP1E6ZVtuXVsxXX1mdW5jdGlvbiBLZSh0KXtyZXR1cm4gZ24odGhpcy5fX2RhdGFfXyx0KT4tMX1mdW5jdGlvbiBYZSh0LGUpe3ZhciBuPXRoaXMuX19kYXRhX18scj1nbihuLHQpO3JldHVybiByPDA/bi5wdXNoKFt0LGVdKTpuW3JdWzFdPWUsdGhpc31mdW5jdGlvbiBaZSh0KXt2YXIgZT0tMSxuPXQ/dC5sZW5ndGg6MDtmb3IodGhpcy5jbGVhcigpOysrZTxuOyl7dmFyIHI9dFtlXTt0aGlzLnNldChyWzBdLHJbMV0pfX1mdW5jdGlvbiBKZSgpe3RoaXMuX19kYXRhX189e2hhc2g6bmV3IEZlLG1hcDpuZXcodWN8fFVlKSxzdHJpbmc6bmV3IEZlfX1mdW5jdGlvbiBZZSh0KXtyZXR1cm4gcWkodGhpcyx0KVsiZGVsZXRlIl0odCl9ZnVuY3Rpb24gUWUodCl7cmV0dXJuIHFpKHRoaXMsdCkuZ2V0KHQpfWZ1bmN0aW9uIHRuKHQpe3JldHVybiBxaSh0aGlzLHQpLmhhcyh0KX1mdW5jdGlvbiBlbih0LGUpe3JldHVybiBxaSh0aGlzLHQpLnNldCh0LGUpLHRoaXN9ZnVuY3Rpb24gbm4odCl7dmFyIGU9LTEsbj10P3QubGVuZ3RoOjA7Zm9yKHRoaXMuX19kYXRhX189bmV3IFplOysrZTxuOyl0aGlzLmFkZCh0W2VdKX1mdW5jdGlvbiBybih0KXtyZXR1cm4gdGhpcy5fX2RhdGFfXy5zZXQodCxydCksdGhpc31mdW5jdGlvbiBvbih0KXtyZXR1cm4gdGhpcy5fX2RhdGFfXy5oYXModCl9ZnVuY3Rpb24gc24odCl7dGhpcy5fX2RhdGFfXz1uZXcgVWUodCl9ZnVuY3Rpb24gdW4oKXt0aGlzLl9fZGF0YV9fPW5ldyBVZX1mdW5jdGlvbiBhbih0KXtyZXR1cm4gdGhpcy5fX2RhdGFfX1siZGVsZXRlIl0odCl9ZnVuY3Rpb24gbG4odCl7cmV0dXJuIHRoaXMuX19kYXRhX18uZ2V0KHQpfWZ1bmN0aW9uIGNuKHQpe3JldHVybiB0aGlzLl9fZGF0YV9fLmhhcyh0KX1mdW5jdGlvbiBmbih0LGUpe3ZhciBuPXRoaXMuX19kYXRhX187cmV0dXJuIG4gaW5zdGFuY2VvZiBVZSYmbi5fX2RhdGFfXy5sZW5ndGg9PWV0JiYobj10aGlzLl9fZGF0YV9fPW5ldyBaZShuLl9fZGF0YV9fKSksbi5zZXQodCxlKSx0aGlzfWZ1bmN0aW9uIGhuKHQsZSxuLHIpe3JldHVybiB0PT09UXx8bnUodCxqbFtuXSkmJiFBbC5jYWxsKHIsbik/ZTp0fWZ1bmN0aW9uIGRuKHQsZSxuKXsobj09PVF8fG51KHRbZV0sbikpJiYoIm51bWJlciIhPXR5cGVvZiBlfHxuIT09UXx8ZSBpbiB0KXx8KHRbZV09bil9ZnVuY3Rpb24gcG4odCxlLG4pe3ZhciByPXRbZV07QWwuY2FsbCh0LGUpJiZudShyLG4pJiYobiE9PVF8fGUgaW4gdCl8fCh0W2VdPW4pfWZ1bmN0aW9uIGduKHQsZSl7Zm9yKHZhciBuPXQubGVuZ3RoO24tLTspaWYobnUodFtuXVswXSxlKSlyZXR1cm4gbjtyZXR1cm4tMX1mdW5jdGlvbiB2bih0LGUsbixyKXtyZXR1cm4gU2ModCxmdW5jdGlvbih0LGksbyl7ZShyLHQsbih0KSxvKX0pLHJ9ZnVuY3Rpb24gbW4odCxlKXtyZXR1cm4gdCYmaWkoZSxpYShlKSx0KX1mdW5jdGlvbiB5bih0LGUpe2Zvcih2YXIgbj0tMSxyPW51bGw9PXQsaT1lLmxlbmd0aCxvPUFycmF5KGkpOysrbjxpOylvW25dPXI/UTplYSh0LGVbbl0pO3JldHVybiBvfWZ1bmN0aW9uIF9uKHQsZSxuKXtyZXR1cm4gdD09PXQmJihuIT09USYmKHQ9dDw9bj90Om4pLGUhPT1RJiYodD10Pj1lP3Q6ZSkpLHR9ZnVuY3Rpb24gd24odCxlLG4scixpLG8scyl7dmFyIHU7aWYociYmKHU9bz9yKHQsaSxvLHMpOnIodCkpLHUhPT1RKXJldHVybiB1O2lmKCF5dSh0KSlyZXR1cm4gdDt2YXIgYT15Zih0KTtpZihhKXtpZih1PVZpKHQpLCFlKXJldHVybiByaSh0LHUpfWVsc2V7dmFyIGw9RGkodCksZj1sPT1SdHx8bD09cXQ7aWYoX2YodCkpcmV0dXJuIFZyKHQsZSk7aWYobD09QnR8fGw9PUN0fHxmJiYhbyl7aWYoSCh0KSlyZXR1cm4gbz90Ont9O2lmKHU9JGkoZj97fTp0KSwhZSlyZXR1cm4gb2kodCxtbih1LHQpKX1lbHNle2lmKCF6bltsXSlyZXR1cm4gbz90Ont9O3U9R2kodCxsLHduLGUpfX1zfHwocz1uZXcgc24pO3ZhciBoPXMuZ2V0KHQpO2lmKGgpcmV0dXJuIGg7aWYocy5zZXQodCx1KSwhYSl2YXIgZD1uP1RpKHQpOmlhKHQpO3JldHVybiBjKGR8fHQsZnVuY3Rpb24oaSxvKXtkJiYobz1pLGk9dFtvXSkscG4odSxvLHduKGksZSxuLHIsbyx0LHMpKX0pLHV9ZnVuY3Rpb24gQW4odCl7dmFyIGU9aWEodCksbj1lLmxlbmd0aDtyZXR1cm4gZnVuY3Rpb24ocil7aWYobnVsbD09cilyZXR1cm4hbjtmb3IodmFyIGk9bjtpLS07KXt2YXIgbz1lW2ldLHM9dFtvXSx1PXJbb107aWYodT09PVEmJiEobyBpbiBPYmplY3QocikpfHwhcyh1KSlyZXR1cm4hMX1yZXR1cm4hMH19ZnVuY3Rpb24gQ24odCl7cmV0dXJuIHl1KHQpP0hsKHQpOnt9fWZ1bmN0aW9uIFRuKHQsZSxuKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCl0aHJvdyBuZXcgU2wobnQpO3JldHVybiAkbChmdW5jdGlvbigpe3QuYXBwbHkoUSxuKX0sZSl9ZnVuY3Rpb24gSW4odCxlLG4scil7dmFyIGk9LTEsbz1wLHM9ITAsdT10Lmxlbmd0aCxhPVtdLGw9ZS5sZW5ndGg7aWYoIXUpcmV0dXJuIGE7biYmKGU9dihlLEMobikpKSxyPyhvPWcscz0hMSk6ZS5sZW5ndGg+PWV0JiYobz1JLHM9ITEsZT1uZXcgbm4oZSkpO3Q6Zm9yKDsrK2k8dTspe3ZhciBjPXRbaV0sZj1uP24oYyk6YztpZihjPXJ8fDAhPT1jP2M6MCxzJiZmPT09Zil7Zm9yKHZhciBoPWw7aC0tOylpZihlW2hdPT09Ziljb250aW51ZSB0O2EucHVzaChjKX1lbHNlIG8oZSxmLHIpfHxhLnB1c2goYyl9cmV0dXJuIGF9ZnVuY3Rpb24gUm4odCxlKXt2YXIgbj0hMDtyZXR1cm4gU2ModCxmdW5jdGlvbih0LHIsaSl7cmV0dXJuIG49ISFlKHQscixpKX0pLG59ZnVuY3Rpb24gcW4odCxlLG4pe2Zvcih2YXIgcj0tMSxpPXQubGVuZ3RoOysrcjxpOyl7dmFyIG89dFtyXSxzPWUobyk7aWYobnVsbCE9cyYmKHU9PT1RP3M9PT1zJiYhSXUocyk6bihzLHUpKSl2YXIgdT1zLGE9b31yZXR1cm4gYX1mdW5jdGlvbiBQbih0LGUsbixyKXt2YXIgaT10Lmxlbmd0aDtmb3Iobj1CdShuKSxuPDAmJihuPS1uPmk/MDppK24pLHI9cj09PVF8fHI+aT9pOkJ1KHIpLHI8MCYmKHIrPWkpLHI9bj5yPzA6V3Uocik7bjxyOyl0W24rK109ZTtyZXR1cm4gdH1mdW5jdGlvbiBCbih0LGUpe3ZhciBuPVtdO3JldHVybiBTYyh0LGZ1bmN0aW9uKHQscixpKXtlKHQscixpKSYmbi5wdXNoKHQpfSksbn1mdW5jdGlvbiBXbih0LGUsbixyLGkpe3ZhciBvPS0xLHM9dC5sZW5ndGg7Zm9yKG58fChuPVhpKSxpfHwoaT1bXSk7KytvPHM7KXt2YXIgdT10W29dO2U+MCYmbih1KT9lPjE/V24odSxlLTEsbixyLGkpOm0oaSx1KTpyfHwoaVtpLmxlbmd0aF09dSl9cmV0dXJuIGl9ZnVuY3Rpb24gVW4odCxlKXtyZXR1cm4gdCYmamModCxlLGlhKX1mdW5jdGlvbiBWbih0LGUpe3JldHVybiB0JiZPYyh0LGUsaWEpfWZ1bmN0aW9uICRuKHQsZSl7cmV0dXJuIGQoZSxmdW5jdGlvbihlKXtyZXR1cm4gZ3UodFtlXSl9KX1mdW5jdGlvbiBHbih0LGUpe2U9UWkoZSx0KT9bZV06SHIoZSk7Zm9yKHZhciBuPTAscj1lLmxlbmd0aDtudWxsIT10JiZuPHI7KXQ9dFtjbyhlW24rK10pXTtyZXR1cm4gbiYmbj09cj90OlF9ZnVuY3Rpb24gS24odCxlLG4pe3ZhciByPWUodCk7cmV0dXJuIHlmKHQpP3I6bShyLG4odCkpfWZ1bmN0aW9uIFhuKHQsZSl7cmV0dXJuIHQ+ZX1mdW5jdGlvbiBabih0LGUpe3JldHVybiBudWxsIT10JiYoQWwuY2FsbCh0LGUpfHwib2JqZWN0Ij09KCJ1bmRlZmluZWQiPT10eXBlb2YgdD8idW5kZWZpbmVkIjpvKHQpKSYmZSBpbiB0JiZudWxsPT09QmkodCkpfWZ1bmN0aW9uIEpuKHQsZSl7cmV0dXJuIG51bGwhPXQmJmUgaW4gT2JqZWN0KHQpfWZ1bmN0aW9uIFluKHQsZSxuKXtyZXR1cm4gdD49dGMoZSxuKSYmdDxRbChlLG4pfWZ1bmN0aW9uIFFuKHQsZSxuKXtmb3IodmFyIHI9bj9nOnAsaT10WzBdLmxlbmd0aCxvPXQubGVuZ3RoLHM9byx1PUFycmF5KG8pLGE9MS8wLGw9W107cy0tOyl7dmFyIGM9dFtzXTtzJiZlJiYoYz12KGMsQyhlKSkpLGE9dGMoYy5sZW5ndGgsYSksdVtzXT0hbiYmKGV8fGk+PTEyMCYmYy5sZW5ndGg+PTEyMCk/bmV3IG5uKHMmJmMpOlF9Yz10WzBdO3ZhciBmPS0xLGg9dVswXTt0OmZvcig7KytmPGkmJmwubGVuZ3RoPGE7KXt2YXIgZD1jW2ZdLG09ZT9lKGQpOmQ7aWYoZD1ufHwwIT09ZD9kOjAsIShoP0koaCxtKTpyKGwsbSxuKSkpe2ZvcihzPW87LS1zOyl7dmFyIHk9dVtzXTtpZighKHk/SSh5LG0pOnIodFtzXSxtLG4pKSljb250aW51ZSB0fWgmJmgucHVzaChtKSxsLnB1c2goZCl9fXJldHVybiBsfWZ1bmN0aW9uIHRyKHQsZSxuLHIpe3JldHVybiBVbih0LGZ1bmN0aW9uKHQsaSxvKXtlKHIsbih0KSxpLG8pfSkscn1mdW5jdGlvbiBlcih0LGUsbil7UWkoZSx0KXx8KGU9SHIoZSksdD1hbyh0LGUpLGU9VG8oZSkpO3ZhciByPW51bGw9PXQ/dDp0W2NvKGUpXTtyZXR1cm4gbnVsbD09cj9ROmEocix0LG4pfWZ1bmN0aW9uIG5yKHQsZSxuLHIsaSl7cmV0dXJuIHQ9PT1lfHwobnVsbD09dHx8bnVsbD09ZXx8IXl1KHQpJiYhX3UoZSk/dCE9PXQmJmUhPT1lOnJyKHQsZSxucixuLHIsaSkpfWZ1bmN0aW9uIHJyKHQsZSxuLHIsaSxvKXt2YXIgcz15Zih0KSx1PXlmKGUpLGE9VHQsbD1UdDtzfHwoYT1EaSh0KSxhPWE9PUN0P0J0OmEpLHV8fChsPURpKGUpLGw9bD09Q3Q/QnQ6bCk7dmFyIGM9YT09QnQmJiFIKHQpLGY9bD09QnQmJiFIKGUpLGg9YT09bDtpZihoJiYhYylyZXR1cm4gb3x8KG89bmV3IHNuKSxzfHxOdSh0KT96aSh0LGUsbixyLGksbyk6QWkodCxlLGEsbixyLGksbyk7aWYoIShpJnZ0KSl7dmFyIGQ9YyYmQWwuY2FsbCh0LCJfX3dyYXBwZWRfXyIpLHA9ZiYmQWwuY2FsbChlLCJfX3dyYXBwZWRfXyIpO2lmKGR8fHApe3ZhciBnPWQ/dC52YWx1ZSgpOnQsdj1wP2UudmFsdWUoKTplO3JldHVybiBvfHwobz1uZXcgc24pLG4oZyx2LHIsaSxvKX19cmV0dXJuISFoJiYob3x8KG89bmV3IHNuKSxDaSh0LGUsbixyLGksbykpfWZ1bmN0aW9uIGlyKHQsZSxuLHIpe3ZhciBpPW4ubGVuZ3RoLG89aSxzPSFyO2lmKG51bGw9PXQpcmV0dXJuIW87Zm9yKHQ9T2JqZWN0KHQpO2ktLTspe3ZhciB1PW5baV07aWYocyYmdVsyXT91WzFdIT09dFt1WzBdXTohKHVbMF1pbiB0KSlyZXR1cm4hMX1mb3IoOysraTxvOyl7dT1uW2ldO3ZhciBhPXVbMF0sbD10W2FdLGM9dVsxXTtpZihzJiZ1WzJdKXtpZihsPT09USYmIShhIGluIHQpKXJldHVybiExfWVsc2V7dmFyIGY9bmV3IHNuO2lmKHIpdmFyIGg9cihsLGMsYSx0LGUsZik7aWYoIShoPT09UT9ucihjLGwscixndHx2dCxmKTpoKSlyZXR1cm4hMX19cmV0dXJuITB9ZnVuY3Rpb24gb3IodCl7cmV0dXJuISgheXUodCl8fG5vKHQpKSYmKGd1KHQpfHxIKHQpP0xsOkFlKS50ZXN0KGZvKHQpKX1mdW5jdGlvbiBzcih0KXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdD90Om51bGw9PXQ/R2E6Im9iamVjdCI9PSgidW5kZWZpbmVkIj09dHlwZW9mIHQ/InVuZGVmaW5lZCI6byh0KSk/eWYodCk/aHIodFswXSx0WzFdKTpmcih0KTplbCh0KX1mdW5jdGlvbiB1cih0KXtyZXR1cm4gWWwoT2JqZWN0KHQpKX1mdW5jdGlvbiBhcih0KXt0PW51bGw9PXQ/dDpPYmplY3QodCk7dmFyIGU9W107Zm9yKHZhciBuIGluIHQpZS5wdXNoKG4pO3JldHVybiBlfWZ1bmN0aW9uIGxyKHQsZSl7cmV0dXJuIHQ8ZX1mdW5jdGlvbiBjcih0LGUpe3ZhciBuPS0xLHI9b3UodCk/QXJyYXkodC5sZW5ndGgpOltdO3JldHVybiBTYyh0LGZ1bmN0aW9uKHQsaSxvKXtyWysrbl09ZSh0LGksbyl9KSxyfWZ1bmN0aW9uIGZyKHQpe3ZhciBlPUZpKHQpO3JldHVybiAxPT1lLmxlbmd0aCYmZVswXVsyXT9vbyhlWzBdWzBdLGVbMF1bMV0pOmZ1bmN0aW9uKG4pe3JldHVybiBuPT09dHx8aXIobix0LGUpfX1mdW5jdGlvbiBocih0LGUpe3JldHVybiBRaSh0KSYmaW8oZSk/b28oY28odCksZSk6ZnVuY3Rpb24obil7dmFyIHI9ZWEobix0KTtyZXR1cm4gcj09PVEmJnI9PT1lP3JhKG4sdCk6bnIoZSxyLFEsZ3R8dnQpfX1mdW5jdGlvbiBkcih0LGUsbixyLGkpe2lmKHQhPT1lKXtpZigheWYoZSkmJiFOdShlKSl2YXIgbz1vYShlKTtjKG98fGUsZnVuY3Rpb24ocyx1KXtpZihvJiYodT1zLHM9ZVt1XSkseXUocykpaXx8KGk9bmV3IHNuKSxwcih0LGUsdSxuLGRyLHIsaSk7ZWxzZXt2YXIgYT1yP3IodFt1XSxzLHUrIiIsdCxlLGkpOlE7YT09PVEmJihhPXMpLGRuKHQsdSxhKX19KX19ZnVuY3Rpb24gcHIodCxlLG4scixpLG8scyl7dmFyIHU9dFtuXSxhPWVbbl0sbD1zLmdldChhKTtpZihsKXJldHVybiB2b2lkIGRuKHQsbixsKTt2YXIgYz1vP28odSxhLG4rIiIsdCxlLHMpOlEsZj1jPT09UTtmJiYoYz1hLHlmKGEpfHxOdShhKT95Zih1KT9jPXU6c3UodSk/Yz1yaSh1KTooZj0hMSxjPXduKGEsITApKTpNdShhKXx8cnUoYSk/cnUodSk/Yz1IdSh1KToheXUodSl8fHImJmd1KHUpPyhmPSExLGM9d24oYSwhMCkpOmM9dTpmPSExKSxzLnNldChhLGMpLGYmJmkoYyxhLHIsbyxzKSxzWyJkZWxldGUiXShhKSxkbih0LG4sYyl9ZnVuY3Rpb24gZ3IodCxlKXt2YXIgbj10Lmxlbmd0aDtpZihuKXJldHVybiBlKz1lPDA/bjowLEppKGUsbik/dFtlXTpRfWZ1bmN0aW9uIHZyKHQsZSxuKXt2YXIgcj0tMTtyZXR1cm4gZT12KGUubGVuZ3RoP2U6W0dhXSxDKFJpKCkpKSxFKGNyKHQsZnVuY3Rpb24odCxuLGkpe3JldHVybntjcml0ZXJpYTp2KGUsZnVuY3Rpb24oZSl7cmV0dXJuIGUodCl9KSxpbmRleDorK3IsdmFsdWU6dH19KSxmdW5jdGlvbih0LGUpe3JldHVybiB0aSh0LGUsbil9KX1mdW5jdGlvbiBtcih0LGUpe3JldHVybiB0PU9iamVjdCh0KSx5KGUsZnVuY3Rpb24oZSxuKXtyZXR1cm4gbiBpbiB0JiYoZVtuXT10W25dKSxlfSx7fSl9ZnVuY3Rpb24geXIodCxlKXtmb3IodmFyIG49LTEscj1JaSh0KSxpPXIubGVuZ3RoLG89e307KytuPGk7KXt2YXIgcz1yW25dLHU9dFtzXTtlKHUscykmJihvW3NdPXUpfXJldHVybiBvfWZ1bmN0aW9uIF9yKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT9ROmVbdF19fWZ1bmN0aW9uIGJyKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gR24oZSx0KX19ZnVuY3Rpb24geHIodCxlLG4scil7dmFyIGk9cj9rOlMsbz0tMSxzPWUubGVuZ3RoLHU9dDtmb3IodD09PWUmJihlPXJpKGUpKSxuJiYodT12KHQsQyhuKSkpOysrbzxzOylmb3IodmFyIGE9MCxsPWVbb10sYz1uP24obCk6bDsoYT1pKHUsYyxhLHIpKT4tMTspdSE9PXQmJlZsLmNhbGwodSxhLDEpLFZsLmNhbGwodCxhLDEpO3JldHVybiB0fWZ1bmN0aW9uIHdyKHQsZSl7Zm9yKHZhciBuPXQ/ZS5sZW5ndGg6MCxyPW4tMTtuLS07KXt2YXIgaT1lW25dO2lmKG49PXJ8fGkhPT1vKXt2YXIgbz1pO2lmKEppKGkpKVZsLmNhbGwodCxpLDEpO2Vsc2UgaWYoUWkoaSx0KSlkZWxldGUgdFtjbyhpKV07ZWxzZXt2YXIgcz1IcihpKSx1PWFvKHQscyk7bnVsbCE9dSYmZGVsZXRlIHVbY28oVG8ocykpXX19fXJldHVybiB0fWZ1bmN0aW9uIFNyKHQsZSl7cmV0dXJuIHQrS2wobmMoKSooZS10KzEpKX1mdW5jdGlvbiBrcih0LGUsbixyKXtmb3IodmFyIGk9LTEsbz1RbChHbCgoZS10KS8obnx8MSkpLDApLHM9QXJyYXkobyk7by0tOylzW3I/bzorK2ldPXQsdCs9bjtyZXR1cm4gc31mdW5jdGlvbiBqcih0LGUpe3ZhciBuPSIiO2lmKCF0fHxlPDF8fGU+anQpcmV0dXJuIG47ZG8gZSUyJiYobis9dCksZT1LbChlLzIpLGUmJih0Kz10KTt3aGlsZShlKTtyZXR1cm4gbn1mdW5jdGlvbiBPcih0LGUsbixyKXtlPVFpKGUsdCk/W2VdOkhyKGUpO2Zvcih2YXIgaT0tMSxvPWUubGVuZ3RoLHM9by0xLHU9dDtudWxsIT11JiYrK2k8bzspe3ZhciBhPWNvKGVbaV0pO2lmKHl1KHUpKXt2YXIgbD1uO2lmKGkhPXMpe3ZhciBjPXVbYV07bD1yP3IoYyxhLHUpOlEsbD09PVEmJihsPW51bGw9PWM/SmkoZVtpKzFdKT9bXTp7fTpjKX1wbih1LGEsbCl9dT11W2FdfXJldHVybiB0fWZ1bmN0aW9uIEVyKHQsZSxuKXt2YXIgcj0tMSxpPXQubGVuZ3RoO2U8MCYmKGU9LWU+aT8wOmkrZSksbj1uPmk/aTpuLG48MCYmKG4rPWkpLGk9ZT5uPzA6bi1lPj4+MCxlPj4+PTA7Zm9yKHZhciBvPUFycmF5KGkpOysrcjxpOylvW3JdPXRbcitlXTtyZXR1cm4gb31mdW5jdGlvbiBNcih0LGUpe3ZhciBuO3JldHVybiBTYyh0LGZ1bmN0aW9uKHQscixpKXtyZXR1cm4gbj1lKHQscixpKSwhbn0pLCEhbn1mdW5jdGlvbiB6cih0LGUsbil7dmFyIHI9MCxpPXQ/dC5sZW5ndGg6cjtpZigibnVtYmVyIj09dHlwZW9mIGUmJmU9PT1lJiZpPD1BdCl7Zm9yKDtyPGk7KXt2YXIgbz1yK2k+Pj4xLHM9dFtvXTtudWxsIT09cyYmIUl1KHMpJiYobj9zPD1lOnM8ZSk/cj1vKzE6aT1vfXJldHVybiBpfXJldHVybiBBcih0LGUsR2Esbil9ZnVuY3Rpb24gQXIodCxlLG4scil7ZT1uKGUpO2Zvcih2YXIgaT0wLG89dD90Lmxlbmd0aDowLHM9ZSE9PWUsdT1udWxsPT09ZSxhPUl1KGUpLGw9ZT09PVE7aTxvOyl7dmFyIGM9S2woKGkrbykvMiksZj1uKHRbY10pLGg9ZiE9PVEsZD1udWxsPT09ZixwPWY9PT1mLGc9SXUoZik7aWYocyl2YXIgdj1yfHxwO2Vsc2Ugdj1sP3AmJihyfHxoKTp1P3AmJmgmJihyfHwhZCk6YT9wJiZoJiYhZCYmKHJ8fCFnKTohZCYmIWcmJihyP2Y8PWU6ZjxlKTt2P2k9YysxOm89Y31yZXR1cm4gdGMobyx6dCl9ZnVuY3Rpb24gQ3IodCxlKXtmb3IodmFyIG49LTEscj10Lmxlbmd0aCxpPTAsbz1bXTsrK248cjspe3ZhciBzPXRbbl0sdT1lP2Uocyk6cztpZighbnx8IW51KHUsYSkpe3ZhciBhPXU7b1tpKytdPTA9PT1zPzA6c319cmV0dXJuIG99ZnVuY3Rpb24gVHIodCl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiB0P3Q6SXUodCk/RXQ6K3R9ZnVuY3Rpb24gSXIodCl7aWYoInN0cmluZyI9PXR5cGVvZiB0KXJldHVybiB0O2lmKEl1KHQpKXJldHVybiB3Yz93Yy5jYWxsKHQpOiIiO3ZhciBlPXQrIiI7cmV0dXJuIjAiPT1lJiYxL3Q9PS1rdD8iLTAiOmV9ZnVuY3Rpb24gTnIodCxlLG4pe3ZhciByPS0xLGk9cCxvPXQubGVuZ3RoLHM9ITAsdT1bXSxhPXU7aWYobilzPSExLGk9ZztlbHNlIGlmKG8+PWV0KXt2YXIgbD1lP251bGw6TWModCk7aWYobClyZXR1cm4gRyhsKTtzPSExLGk9SSxhPW5ldyBubn1lbHNlIGE9ZT9bXTp1O3Q6Zm9yKDsrK3I8bzspe3ZhciBjPXRbcl0sZj1lP2UoYyk6YztpZihjPW58fDAhPT1jP2M6MCxzJiZmPT09Zil7Zm9yKHZhciBoPWEubGVuZ3RoO2gtLTspaWYoYVtoXT09PWYpY29udGludWUgdDtlJiZhLnB1c2goZiksdS5wdXNoKGMpfWVsc2UgaShhLGYsbil8fChhIT09dSYmYS5wdXNoKGYpLHUucHVzaChjKSl9cmV0dXJuIHV9ZnVuY3Rpb24gTHIodCxlKXtlPVFpKGUsdCk/W2VdOkhyKGUpLHQ9YW8odCxlKTt2YXIgbj1jbyhUbyhlKSk7cmV0dXJuIShudWxsIT10JiZabih0LG4pKXx8ZGVsZXRlIHRbbl19ZnVuY3Rpb24gUnIodCxlLG4scil7cmV0dXJuIE9yKHQsZSxuKEduKHQsZSkpLHIpfWZ1bmN0aW9uIHFyKHQsZSxuLHIpe2Zvcih2YXIgaT10Lmxlbmd0aCxvPXI/aTotMTsocj9vLS06KytvPGkpJiZlKHRbb10sbyx0KTspO3JldHVybiBuP0VyKHQscj8wOm8scj9vKzE6aSk6RXIodCxyP28rMTowLHI/aTpvKX1mdW5jdGlvbiBGcih0LGUpe3ZhciBuPXQ7cmV0dXJuIG4gaW5zdGFuY2VvZiBpJiYobj1uLnZhbHVlKCkpLHkoZSxmdW5jdGlvbih0LGUpe3JldHVybiBlLmZ1bmMuYXBwbHkoZS50aGlzQXJnLG0oW3RdLGUuYXJncykpfSxuKX1mdW5jdGlvbiBQcih0LGUsbil7Zm9yKHZhciByPS0xLGk9dC5sZW5ndGg7KytyPGk7KXZhciBvPW8/bShJbihvLHRbcl0sZSxuKSxJbih0W3JdLG8sZSxuKSk6dFtyXTtyZXR1cm4gbyYmby5sZW5ndGg/TnIobyxlLG4pOltdfWZ1bmN0aW9uIEJyKHQsZSxuKXtmb3IodmFyIHI9LTEsaT10Lmxlbmd0aCxvPWUubGVuZ3RoLHM9e307KytyPGk7KXt2YXIgdT1yPG8/ZVtyXTpRO24ocyx0W3JdLHUpfXJldHVybiBzfWZ1bmN0aW9uIFdyKHQpe3JldHVybiBzdSh0KT90OltdfWZ1bmN0aW9uIERyKHQpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0P3Q6R2F9ZnVuY3Rpb24gSHIodCl7cmV0dXJuIHlmKHQpP3Q6TmModCl9ZnVuY3Rpb24gVXIodCxlLG4pe3ZhciByPXQubGVuZ3RoO3JldHVybiBuPW49PT1RP3I6biwhZSYmbj49cj90OkVyKHQsZSxuKX1mdW5jdGlvbiBWcih0LGUpe2lmKGUpcmV0dXJuIHQuc2xpY2UoKTt2YXIgbj1uZXcgdC5jb25zdHJ1Y3Rvcih0Lmxlbmd0aCk7cmV0dXJuIHQuY29weShuKSxufWZ1bmN0aW9uICRyKHQpe3ZhciBlPW5ldyB0LmNvbnN0cnVjdG9yKHQuYnl0ZUxlbmd0aCk7cmV0dXJuIG5ldyBQbChlKS5zZXQobmV3IFBsKHQpKSxlfWZ1bmN0aW9uIEdyKHQsZSl7dmFyIG49ZT8kcih0LmJ1ZmZlcik6dC5idWZmZXI7cmV0dXJuIG5ldyB0LmNvbnN0cnVjdG9yKG4sdC5ieXRlT2Zmc2V0LHQuYnl0ZUxlbmd0aCl9ZnVuY3Rpb24gS3IodCxlLG4pe3JldHVybiB5KGU/bihWKHQpLCEwKTpWKHQpLHMsbmV3IHQuY29uc3RydWN0b3IpfWZ1bmN0aW9uIFhyKHQpe3ZhciBlPW5ldyB0LmNvbnN0cnVjdG9yKHQuc291cmNlLE9lLmV4ZWModCkpO3JldHVybiBlLmxhc3RJbmRleD10Lmxhc3RJbmRleCxlfWZ1bmN0aW9uIFpyKHQsZSxuKXtyZXR1cm4geShlP24oRyh0KSwhMCk6Ryh0KSx1LG5ldyB0LmNvbnN0cnVjdG9yKX1mdW5jdGlvbiBKcih0KXtyZXR1cm4geGM/T2JqZWN0KHhjLmNhbGwodCkpOnt9fWZ1bmN0aW9uIFlyKHQsZSl7dmFyIG49ZT8kcih0LmJ1ZmZlcik6dC5idWZmZXI7cmV0dXJuIG5ldyB0LmNvbnN0cnVjdG9yKG4sdC5ieXRlT2Zmc2V0LHQubGVuZ3RoKX1mdW5jdGlvbiBRcih0LGUpe2lmKHQhPT1lKXt2YXIgbj10IT09USxyPW51bGw9PT10LGk9dD09PXQsbz1JdSh0KSxzPWUhPT1RLHU9bnVsbD09PWUsYT1lPT09ZSxsPUl1KGUpO2lmKCF1JiYhbCYmIW8mJnQ+ZXx8byYmcyYmYSYmIXUmJiFsfHxyJiZzJiZhfHwhbiYmYXx8IWkpcmV0dXJuIDE7aWYoIXImJiFvJiYhbCYmdDxlfHxsJiZuJiZpJiYhciYmIW98fHUmJm4mJml8fCFzJiZpfHwhYSlyZXR1cm4tMX1yZXR1cm4gMH1mdW5jdGlvbiB0aSh0LGUsbil7Zm9yKHZhciByPS0xLGk9dC5jcml0ZXJpYSxvPWUuY3JpdGVyaWEscz1pLmxlbmd0aCx1PW4ubGVuZ3RoOysrcjxzOyl7dmFyIGE9UXIoaVtyXSxvW3JdKTtpZihhKXJldHVybiByPj11P2E6YSooImRlc2MiPT1uW3JdPy0xOjEpfXJldHVybiB0LmluZGV4LWUuaW5kZXh9ZnVuY3Rpb24gZWkodCxlLG4scil7Zm9yKHZhciBpPS0xLG89dC5sZW5ndGgscz1uLmxlbmd0aCx1PS0xLGE9ZS5sZW5ndGgsbD1RbChvLXMsMCksYz1BcnJheShhK2wpLGY9IXI7Kyt1PGE7KWNbdV09ZVt1XTtmb3IoOysraTxzOykoZnx8aTxvKSYmKGNbbltpXV09dFtpXSk7Zm9yKDtsLS07KWNbdSsrXT10W2krK107cmV0dXJuIGN9ZnVuY3Rpb24gbmkodCxlLG4scil7Zm9yKHZhciBpPS0xLG89dC5sZW5ndGgscz0tMSx1PW4ubGVuZ3RoLGE9LTEsbD1lLmxlbmd0aCxjPVFsKG8tdSwwKSxmPUFycmF5KGMrbCksaD0hcjsrK2k8YzspZltpXT10W2ldO2Zvcih2YXIgZD1pOysrYTxsOylmW2QrYV09ZVthXTtmb3IoOysrczx1OykoaHx8aTxvKSYmKGZbZCtuW3NdXT10W2krK10pO3JldHVybiBmfWZ1bmN0aW9uIHJpKHQsZSl7dmFyIG49LTEscj10Lmxlbmd0aDtmb3IoZXx8KGU9QXJyYXkocikpOysrbjxyOyllW25dPXRbbl07cmV0dXJuIGV9ZnVuY3Rpb24gaWkodCxlLG4scil7bnx8KG49e30pO2Zvcih2YXIgaT0tMSxvPWUubGVuZ3RoOysraTxvOyl7dmFyIHM9ZVtpXTtwbihuLHMscj9yKG5bc10sdFtzXSxzLG4sdCk6dFtzXSl9cmV0dXJuIG59ZnVuY3Rpb24gb2kodCxlKXtyZXR1cm4gaWkodCxXaSh0KSxlKX1mdW5jdGlvbiBzaSh0LGUpe3JldHVybiBmdW5jdGlvbihuLHIpe3ZhciBpPXlmKG4pP2w6dm4sbz1lP2UoKTp7fTtyZXR1cm4gaShuLHQsUmkociksbyl9fWZ1bmN0aW9uIHVpKHQpe3JldHVybiAkcyhmdW5jdGlvbihlLG4pe3ZhciByPS0xLGk9bi5sZW5ndGgsbz1pPjE/bltpLTFdOlEscz1pPjI/blsyXTpRO2ZvcihvPXQubGVuZ3RoPjMmJiJmdW5jdGlvbiI9PXR5cGVvZiBvPyhpLS0sbyk6USxzJiZZaShuWzBdLG5bMV0scykmJihvPWk8Mz9ROm8saT0xKSxlPU9iamVjdChlKTsrK3I8aTspe3ZhciB1PW5bcl07dSYmdChlLHUscixvKX1yZXR1cm4gZX0pfWZ1bmN0aW9uIGFpKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4scil7aWYobnVsbD09bilyZXR1cm4gbjtpZighb3UobikpcmV0dXJuIHQobixyKTtmb3IodmFyIGk9bi5sZW5ndGgsbz1lP2k6LTEscz1PYmplY3Qobik7KGU/by0tOisrbzxpKSYmcihzW29dLG8scykhPT0hMTspO3JldHVybiBufX1mdW5jdGlvbiBsaSh0KXtyZXR1cm4gZnVuY3Rpb24oZSxuLHIpe2Zvcih2YXIgaT0tMSxvPU9iamVjdChlKSxzPXIoZSksdT1zLmxlbmd0aDt1LS07KXt2YXIgYT1zW3Q/dTorK2ldO2lmKG4ob1thXSxhLG8pPT09ITEpYnJlYWt9cmV0dXJuIGV9fWZ1bmN0aW9uIGNpKHQsZSxuKXtmdW5jdGlvbiByKCl7cmV0dXJuKHRoaXMmJnRoaXMhPT1EbiYmdGhpcyBpbnN0YW5jZW9mIHI/bzp0KS5hcHBseShpP246dGhpcyxhcmd1bWVudHMpfXZhciBpPWUmb3Qsbz1kaSh0KTtyZXR1cm4gcn1mdW5jdGlvbiBmaSh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7ZT1WdShlKTt2YXIgbj1rbi50ZXN0KGUpP1ooZSk6USxyPW4/blswXTplLmNoYXJBdCgwKSxpPW4/VXIobiwxKS5qb2luKCIiKTplLnNsaWNlKDEpO3JldHVybiByW3RdKCkraX19ZnVuY3Rpb24gaGkodCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB5KEhhKFNhKGUpLnJlcGxhY2UoYm4sIiIpKSx0LCIiKX19ZnVuY3Rpb24gZGkodCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3N3aXRjaChlLmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuZXcgdDtjYXNlIDE6cmV0dXJuIG5ldyB0KGVbMF0pO2Nhc2UgMjpyZXR1cm4gbmV3IHQoZVswXSxlWzFdKTtjYXNlIDM6cmV0dXJuIG5ldyB0KGVbMF0sZVsxXSxlWzJdKTtjYXNlIDQ6cmV0dXJuIG5ldyB0KGVbMF0sZVsxXSxlWzJdLGVbM10pO2Nhc2UgNTpyZXR1cm4gbmV3IHQoZVswXSxlWzFdLGVbMl0sZVszXSxlWzRdKTtjYXNlIDY6cmV0dXJuIG5ldyB0KGVbMF0sZVsxXSxlWzJdLGVbM10sZVs0XSxlWzVdKTtjYXNlIDc6cmV0dXJuIG5ldyB0KGVbMF0sZVsxXSxlWzJdLGVbM10sZVs0XSxlWzVdLGVbNl0pfXZhciBuPUNuKHQucHJvdG90eXBlKSxyPXQuYXBwbHkobixlKTtyZXR1cm4geXUocik/cjpufX1mdW5jdGlvbiBwaSh0LGUsbil7ZnVuY3Rpb24gcigpe2Zvcih2YXIgbz1hcmd1bWVudHMubGVuZ3RoLHM9QXJyYXkobyksdT1vLGw9TGkocik7dS0tOylzW3VdPWFyZ3VtZW50c1t1XTt2YXIgYz1vPDMmJnNbMF0hPT1sJiZzW28tMV0hPT1sP1tdOiQocyxsKTtyZXR1cm4gby09Yy5sZW5ndGgsbzxuP2ppKHQsZSxtaSxyLnBsYWNlaG9sZGVyLFEscyxjLFEsUSxuLW8pOmEodGhpcyYmdGhpcyE9PURuJiZ0aGlzIGluc3RhbmNlb2Ygcj9pOnQsdGhpcyxzKX12YXIgaT1kaSh0KTtyZXR1cm4gcn1mdW5jdGlvbiBnaSh0KXtyZXR1cm4gZnVuY3Rpb24oZSxuLHIpe3ZhciBpPU9iamVjdChlKTtpZihuPVJpKG4sMyksIW91KGUpKXZhciBvPWlhKGUpO3ZhciBzPXQob3x8ZSxmdW5jdGlvbih0LGUpe3JldHVybiBvJiYoZT10LHQ9aVtlXSksbih0LGUsaSl9LHIpO3JldHVybiBzPi0xP2Vbbz9vW3NdOnNdOlF9fWZ1bmN0aW9uIHZpKHQpe3JldHVybiAkcyhmdW5jdGlvbihlKXtlPVduKGUsMSk7dmFyIG49ZS5sZW5ndGgsaT1uLG89ci5wcm90b3R5cGUudGhydTtmb3IodCYmZS5yZXZlcnNlKCk7aS0tOyl7dmFyIHM9ZVtpXTtpZigiZnVuY3Rpb24iIT10eXBlb2Ygcyl0aHJvdyBuZXcgU2wobnQpO2lmKG8mJiF1JiYid3JhcHBlciI9PU5pKHMpKXZhciB1PW5ldyByKFtdLCghMCkpfWZvcihpPXU/aTpuOysraTxuOyl7cz1lW2ldO3ZhciBhPU5pKHMpLGw9IndyYXBwZXIiPT1hP3pjKHMpOlE7dT1sJiZlbyhsWzBdKSYmbFsxXT09KGh0fGF0fGN0fGR0KSYmIWxbNF0ubGVuZ3RoJiYxPT1sWzldP3VbTmkobFswXSldLmFwcGx5KHUsbFszXSk6MT09cy5sZW5ndGgmJmVvKHMpP3VbYV0oKTp1LnRocnUocyl9cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLHI9dFswXTtpZih1JiYxPT10Lmxlbmd0aCYmeWYocikmJnIubGVuZ3RoPj1ldClyZXR1cm4gdS5wbGFudChyKS52YWx1ZSgpO2Zvcih2YXIgaT0wLG89bj9lW2ldLmFwcGx5KHRoaXMsdCk6cjsrK2k8bjspbz1lW2ldLmNhbGwodGhpcyxvKTtyZXR1cm4gb319KX1mdW5jdGlvbiBtaSh0LGUsbixyLGksbyxzLHUsYSxsKXtmdW5jdGlvbiBjKCl7Zm9yKHZhciBtPWFyZ3VtZW50cy5sZW5ndGgseT1BcnJheShtKSxfPW07Xy0tOyl5W19dPWFyZ3VtZW50c1tfXTtpZihwKXZhciBiPUxpKGMpLHg9cSh5LGIpO2lmKHImJih5PWVpKHkscixpLHApKSxvJiYoeT1uaSh5LG8scyxwKSksbS09eCxwJiZtPGwpe3ZhciB3PSQoeSxiKTtyZXR1cm4gamkodCxlLG1pLGMucGxhY2Vob2xkZXIsbix5LHcsdSxhLGwtbSl9dmFyIFM9aD9uOnRoaXMsaz1kP1NbdF06dDtyZXR1cm4gbT15Lmxlbmd0aCx1P3k9bG8oeSx1KTpnJiZtPjEmJnkucmV2ZXJzZSgpLGYmJmE8bSYmKHkubGVuZ3RoPWEpLHRoaXMmJnRoaXMhPT1EbiYmdGhpcyBpbnN0YW5jZW9mIGMmJihrPXZ8fGRpKGspKSxrLmFwcGx5KFMseSl9dmFyIGY9ZSZodCxoPWUmb3QsZD1lJnN0LHA9ZSYoYXR8bHQpLGc9ZSZwdCx2PWQ/UTpkaSh0KTtyZXR1cm4gY31mdW5jdGlvbiB5aSh0LGUpe3JldHVybiBmdW5jdGlvbihuLHIpe3JldHVybiB0cihuLHQsZShyKSx7fSl9fWZ1bmN0aW9uIF9pKHQpe3JldHVybiBmdW5jdGlvbihlLG4pe3ZhciByO2lmKGU9PT1RJiZuPT09USlyZXR1cm4gMDtpZihlIT09USYmKHI9ZSksbiE9PVEpe2lmKHI9PT1RKXJldHVybiBuOyJzdHJpbmciPT10eXBlb2YgZXx8InN0cmluZyI9PXR5cGVvZiBuPyhlPUlyKGUpLG49SXIobikpOihlPVRyKGUpLG49VHIobikpLHI9dChlLG4pfXJldHVybiByfX1mdW5jdGlvbiBiaSh0KXtyZXR1cm4gJHMoZnVuY3Rpb24oZSl7cmV0dXJuIGU9MT09ZS5sZW5ndGgmJnlmKGVbMF0pP3YoZVswXSxDKFJpKCkpKTp2KFduKGUsMSxaaSksQyhSaSgpKSksJHMoZnVuY3Rpb24obil7dmFyIHI9dGhpcztyZXR1cm4gdChlLGZ1bmN0aW9uKHQpe3JldHVybiBhKHQscixuKX0pfSl9KX1mdW5jdGlvbiB4aSh0LGUpe2U9ZT09PVE/IiAiOklyKGUpO3ZhciBuPWUubGVuZ3RoO2lmKG48MilyZXR1cm4gbj9qcihlLHQpOmU7dmFyIHI9anIoZSxHbCh0L1goZSkpKTtyZXR1cm4ga24udGVzdChlKT9VcihaKHIpLDAsdCkuam9pbigiIik6ci5zbGljZSgwLHQpfWZ1bmN0aW9uIHdpKHQsZSxuLHIpe2Z1bmN0aW9uIGkoKXtmb3IodmFyIGU9LTEsdT1hcmd1bWVudHMubGVuZ3RoLGw9LTEsYz1yLmxlbmd0aCxmPUFycmF5KGMrdSksaD10aGlzJiZ0aGlzIT09RG4mJnRoaXMgaW5zdGFuY2VvZiBpP3M6dDsrK2w8YzspZltsXT1yW2xdO2Zvcig7dS0tOylmW2wrK109YXJndW1lbnRzWysrZV07cmV0dXJuIGEoaCxvP246dGhpcyxmKX12YXIgbz1lJm90LHM9ZGkodCk7cmV0dXJuIGl9ZnVuY3Rpb24gU2kodCl7cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gciYmIm51bWJlciIhPXR5cGVvZiByJiZZaShlLG4scikmJihuPXI9USksZT1EdShlKSxlPWU9PT1lP2U6MCxuPT09UT8obj1lLGU9MCk6bj1EdShuKXx8MCxyPXI9PT1RP2U8bj8xOi0xOkR1KHIpfHwwLGtyKGUsbixyLHQpfX1mdW5jdGlvbiBraSh0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGUmJiJzdHJpbmciPT10eXBlb2Ygbnx8KGU9RHUoZSksbj1EdShuKSksdChlLG4pfX1mdW5jdGlvbiBqaSh0LGUsbixyLGksbyxzLHUsYSxsKXt2YXIgYz1lJmF0LGY9Yz9zOlEsaD1jP1E6cyxkPWM/bzpRLHA9Yz9ROm87ZXw9Yz9jdDpmdCxlJj1+KGM/ZnQ6Y3QpLGUmdXR8fChlJj1+KG90fHN0KSk7dmFyIGc9W3QsZSxpLGQsZixwLGgsdSxhLGxdLHY9bi5hcHBseShRLGcpO3JldHVybiBlbyh0KSYmSWModixnKSx2LnBsYWNlaG9sZGVyPXIsdn1mdW5jdGlvbiBPaSh0KXt2YXIgZT14bFt0XTtyZXR1cm4gZnVuY3Rpb24odCxuKXtpZih0PUR1KHQpLG49dGMoQnUobiksMjkyKSl7dmFyIHI9KFZ1KHQpKyJlIikuc3BsaXQoImUiKTtyZXR1cm4gcj0oVnUoZShyWzBdKyJlIisoK3JbMV0rbikpKSsiZSIpLnNwbGl0KCJlIiksKyhyWzBdKyJlIisoK3JbMV0tbikpfXJldHVybiBlKHQpfX1mdW5jdGlvbiBFaSh0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49RGkoZSk7cmV0dXJuIG49PUZ0P1YoZSk6bj09SHQ/SyhlKTpBKGUsdChlKSl9fWZ1bmN0aW9uIE1pKHQsZSxuLHIsaSxvLHMsdSl7dmFyIGE9ZSZzdDtpZighYSYmImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFNsKG50KTt2YXIgbD1yP3IubGVuZ3RoOjA7aWYobHx8KGUmPX4oY3R8ZnQpLHI9aT1RKSxzPXM9PT1RP3M6UWwoQnUocyksMCksdT11PT09UT91OkJ1KHUpLGwtPWk/aS5sZW5ndGg6MCxlJmZ0KXt2YXIgYz1yLGY9aTtyPWk9UX12YXIgaD1hP1E6emModCksZD1bdCxlLG4scixpLGMsZixvLHMsdV07aWYoaCYmc28oZCxoKSx0PWRbMF0sZT1kWzFdLG49ZFsyXSxyPWRbM10saT1kWzRdLHU9ZFs5XT1udWxsPT1kWzldP2E/MDp0Lmxlbmd0aDpRbChkWzldLWwsMCksIXUmJmUmKGF0fGx0KSYmKGUmPX4oYXR8bHQpKSxlJiZlIT1vdClwPWU9PWF0fHxlPT1sdD9waSh0LGUsdSk6ZSE9Y3QmJmUhPShvdHxjdCl8fGkubGVuZ3RoP21pLmFwcGx5KFEsZCk6d2kodCxlLG4scik7ZWxzZSB2YXIgcD1jaSh0LGUsbik7cmV0dXJuKGg/RWM6SWMpKHAsZCl9ZnVuY3Rpb24gemkodCxlLG4scixpLG8pe3ZhciBzPWkmdnQsdT10Lmxlbmd0aCxhPWUubGVuZ3RoO2lmKHUhPWEmJiEocyYmYT51KSlyZXR1cm4hMTt2YXIgbD1vLmdldCh0KTtpZihsKXJldHVybiBsPT1lO3ZhciBjPS0xLGY9ITAsaD1pJmd0P25ldyBubjpRO2ZvcihvLnNldCh0LGUpOysrYzx1Oyl7dmFyIGQ9dFtjXSxwPWVbY107aWYocil2YXIgZz1zP3IocCxkLGMsZSx0LG8pOnIoZCxwLGMsdCxlLG8pO2lmKGchPT1RKXtpZihnKWNvbnRpbnVlO2Y9ITE7YnJlYWt9aWYoaCl7aWYoIWIoZSxmdW5jdGlvbih0LGUpe2lmKCFoLmhhcyhlKSYmKGQ9PT10fHxuKGQsdCxyLGksbykpKXJldHVybiBoLmFkZChlKX0pKXtmPSExO2JyZWFrfX1lbHNlIGlmKGQhPT1wJiYhbihkLHAscixpLG8pKXtmPSExO2JyZWFrfX1yZXR1cm4gb1siZGVsZXRlIl0odCksZn1mdW5jdGlvbiBBaSh0LGUsbixyLGksbyxzKXtzd2l0Y2gobil7Y2FzZSBYdDppZih0LmJ5dGVMZW5ndGghPWUuYnl0ZUxlbmd0aHx8dC5ieXRlT2Zmc2V0IT1lLmJ5dGVPZmZzZXQpcmV0dXJuITE7dD10LmJ1ZmZlcixlPWUuYnVmZmVyO2Nhc2UgS3Q6cmV0dXJuISh0LmJ5dGVMZW5ndGghPWUuYnl0ZUxlbmd0aHx8IXIobmV3IFBsKHQpLG5ldyBQbChlKSkpO2Nhc2UgSXQ6Y2FzZSBOdDpyZXR1cm4rdD09K2U7Y2FzZSBMdDpyZXR1cm4gdC5uYW1lPT1lLm5hbWUmJnQubWVzc2FnZT09ZS5tZXNzYWdlO2Nhc2UgUHQ6cmV0dXJuIHQhPSt0P2UhPStlOnQ9PStlO2Nhc2UgRHQ6Y2FzZSBVdDpyZXR1cm4gdD09ZSsiIjtjYXNlIEZ0OnZhciB1PVY7Y2FzZSBIdDp2YXIgYT1vJnZ0O2lmKHV8fCh1PUcpLHQuc2l6ZSE9ZS5zaXplJiYhYSlyZXR1cm4hMTt2YXIgbD1zLmdldCh0KTtyZXR1cm4gbD9sPT1lOihvfD1ndCxzLnNldCh0LGUpLHppKHUodCksdShlKSxyLGksbyxzKSk7Y2FzZSBWdDppZih4YylyZXR1cm4geGMuY2FsbCh0KT09eGMuY2FsbChlKX1yZXR1cm4hMX1mdW5jdGlvbiBDaSh0LGUsbixyLGksbyl7dmFyIHM9aSZ2dCx1PWlhKHQpLGE9dS5sZW5ndGg7aWYoYSE9aWEoZSkubGVuZ3RoJiYhcylyZXR1cm4hMTtmb3IodmFyIGw9YTtsLS07KXt2YXIgYz11W2xdO2lmKCEocz9jIGluIGU6Wm4oZSxjKSkpcmV0dXJuITF9dmFyIGY9by5nZXQodCk7aWYoZilyZXR1cm4gZj09ZTt2YXIgaD0hMDtvLnNldCh0LGUpO2Zvcih2YXIgZD1zOysrbDxhOyl7Yz11W2xdO3ZhciBwPXRbY10sZz1lW2NdO2lmKHIpdmFyIHY9cz9yKGcscCxjLGUsdCxvKTpyKHAsZyxjLHQsZSxvKTtpZighKHY9PT1RP3A9PT1nfHxuKHAsZyxyLGksbyk6dikpe2g9ITE7YnJlYWt9ZHx8KGQ9ImNvbnN0cnVjdG9yIj09Yyl9aWYoaCYmIWQpe3ZhciBtPXQuY29uc3RydWN0b3IseT1lLmNvbnN0cnVjdG9yO20hPXkmJiJjb25zdHJ1Y3RvciJpbiB0JiYiY29uc3RydWN0b3IiaW4gZSYmISgiZnVuY3Rpb24iPT10eXBlb2YgbSYmbSBpbnN0YW5jZW9mIG0mJiJmdW5jdGlvbiI9PXR5cGVvZiB5JiZ5IGluc3RhbmNlb2YgeSkmJihoPSExKX1yZXR1cm4gb1siZGVsZXRlIl0odCksaH1mdW5jdGlvbiBUaSh0KXtyZXR1cm4gS24odCxpYSxXaSl9ZnVuY3Rpb24gSWkodCl7cmV0dXJuIEtuKHQsb2EsQ2MpfWZ1bmN0aW9uIE5pKHQpe2Zvcih2YXIgZT10Lm5hbWUrIiIsbj1wY1tlXSxyPUFsLmNhbGwocGMsZSk/bi5sZW5ndGg6MDtyLS07KXt2YXIgaT1uW3JdLG89aS5mdW5jO2lmKG51bGw9PW98fG89PXQpcmV0dXJuIGkubmFtZX1yZXR1cm4gZX1mdW5jdGlvbiBMaSh0KXtyZXR1cm4oQWwuY2FsbChlLCJwbGFjZWhvbGRlciIpP2U6dCkucGxhY2Vob2xkZXJ9ZnVuY3Rpb24gUmkoKXt2YXIgdD1lLml0ZXJhdGVlfHxLYTtyZXR1cm4gdD10PT09S2E/c3I6dCxhcmd1bWVudHMubGVuZ3RoP3QoYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSk6dH1mdW5jdGlvbiBxaSh0LGUpe3ZhciBuPXQuX19kYXRhX187cmV0dXJuIHRvKGUpP25bInN0cmluZyI9PXR5cGVvZiBlPyJzdHJpbmciOiJoYXNoIl06bi5tYXB9ZnVuY3Rpb24gRmkodCl7Zm9yKHZhciBlPWlhKHQpLG49ZS5sZW5ndGg7bi0tOyl7dmFyIHI9ZVtuXSxpPXRbcl07ZVtuXT1bcixpLGlvKGkpXX1yZXR1cm4gZX1mdW5jdGlvbiBQaSh0LGUpe3ZhciBuPVcodCxlKTtyZXR1cm4gb3Iobik/bjpRfWZ1bmN0aW9uIEJpKHQpe3JldHVybiBYbChPYmplY3QodCkpfWZ1bmN0aW9uIFdpKHQpe3JldHVybiBXbChPYmplY3QodCkpfWZ1bmN0aW9uIERpKHQpe3JldHVybiBJbC5jYWxsKHQpfWZ1bmN0aW9uIEhpKHQsZSxuKXtmb3IodmFyIHI9LTEsaT1uLmxlbmd0aDsrK3I8aTspe3ZhciBvPW5bcl0scz1vLnNpemU7c3dpdGNoKG8udHlwZSl7Y2FzZSJkcm9wIjp0Kz1zO2JyZWFrO2Nhc2UiZHJvcFJpZ2h0IjplLT1zO2JyZWFrO2Nhc2UidGFrZSI6ZT10YyhlLHQrcyk7YnJlYWs7Y2FzZSJ0YWtlUmlnaHQiOnQ9UWwodCxlLXMpfX1yZXR1cm57c3RhcnQ6dCxlbmQ6ZX19ZnVuY3Rpb24gVWkodCxlLG4pe2U9UWkoZSx0KT9bZV06SHIoZSk7Zm9yKHZhciByLGk9LTEsbz1lLmxlbmd0aDsrK2k8bzspe3ZhciBzPWNvKGVbaV0pO2lmKCEocj1udWxsIT10JiZuKHQscykpKWJyZWFrO3Q9dFtzXX1pZihyKXJldHVybiByO3ZhciBvPXQ/dC5sZW5ndGg6MDtyZXR1cm4hIW8mJm11KG8pJiZKaShzLG8pJiYoeWYodCl8fFR1KHQpfHxydSh0KSl9ZnVuY3Rpb24gVmkodCl7dmFyIGU9dC5sZW5ndGgsbj10LmNvbnN0cnVjdG9yKGUpO3JldHVybiBlJiYic3RyaW5nIj09dHlwZW9mIHRbMF0mJkFsLmNhbGwodCwiaW5kZXgiKSYmKG4uaW5kZXg9dC5pbmRleCxuLmlucHV0PXQuaW5wdXQpLG59ZnVuY3Rpb24gJGkodCl7cmV0dXJuImZ1bmN0aW9uIiE9dHlwZW9mIHQuY29uc3RydWN0b3J8fHJvKHQpP3t9OkNuKEJpKHQpKX1mdW5jdGlvbiBHaSh0LGUsbixyKXt2YXIgaT10LmNvbnN0cnVjdG9yO3N3aXRjaChlKXtjYXNlIEt0OnJldHVybiAkcih0KTtjYXNlIEl0OmNhc2UgTnQ6cmV0dXJuIG5ldyBpKCgrdCkpO2Nhc2UgWHQ6cmV0dXJuIEdyKHQscik7Y2FzZSBadDpjYXNlIEp0OmNhc2UgWXQ6Y2FzZSBRdDpjYXNlIHRlOmNhc2UgZWU6Y2FzZSBuZTpjYXNlIHJlOmNhc2UgaWU6cmV0dXJuIFlyKHQscik7Y2FzZSBGdDpyZXR1cm4gS3IodCxyLG4pO2Nhc2UgUHQ6Y2FzZSBVdDpyZXR1cm4gbmV3IGkodCk7Y2FzZSBEdDpyZXR1cm4gWHIodCk7Y2FzZSBIdDpyZXR1cm4gWnIodCxyLG4pO2Nhc2UgVnQ6cmV0dXJuIEpyKHQpfX1mdW5jdGlvbiBLaSh0KXt2YXIgZT10P3QubGVuZ3RoOlE7cmV0dXJuIG11KGUpJiYoeWYodCl8fFR1KHQpfHxydSh0KSk/eihlLFN0cmluZyk6bnVsbH1mdW5jdGlvbiBYaSh0KXtyZXR1cm4geWYodCl8fHJ1KHQpfWZ1bmN0aW9uIFppKHQpe3JldHVybiB5Zih0KSYmISgyPT10Lmxlbmd0aCYmIWd1KHRbMF0pKX1mdW5jdGlvbiBKaSh0LGUpe3JldHVybiBlPW51bGw9PWU/anQ6ZSwhIWUmJigibnVtYmVyIj09dHlwZW9mIHR8fFRlLnRlc3QodCkpJiZ0Pi0xJiZ0JTE9PTAmJnQ8ZX1mdW5jdGlvbiBZaSh0LGUsbil7aWYoIXl1KG4pKXJldHVybiExO3ZhciByPSJ1bmRlZmluZWQiPT10eXBlb2YgZT8idW5kZWZpbmVkIjpvKGUpO3JldHVybiEhKCJudW1iZXIiPT1yP291KG4pJiZKaShlLG4ubGVuZ3RoKToic3RyaW5nIj09ciYmZSBpbiBuKSYmbnUobltlXSx0KX1mdW5jdGlvbiBRaSh0LGUpe2lmKHlmKHQpKXJldHVybiExO3ZhciBuPSJ1bmRlZmluZWQiPT10eXBlb2YgdD8idW5kZWZpbmVkIjpvKHQpO3JldHVybiEoIm51bWJlciIhPW4mJiJzeW1ib2wiIT1uJiYiYm9vbGVhbiIhPW4mJm51bGwhPXQmJiFJdSh0KSl8fHZlLnRlc3QodCl8fCFnZS50ZXN0KHQpfHxudWxsIT1lJiZ0IGluIE9iamVjdChlKX1mdW5jdGlvbiB0byh0KXt2YXIgZT0idW5kZWZpbmVkIj09dHlwZW9mIHQ/InVuZGVmaW5lZCI6byh0KTtyZXR1cm4ic3RyaW5nIj09ZXx8Im51bWJlciI9PWV8fCJzeW1ib2wiPT1lfHwiYm9vbGVhbiI9PWU/Il9fcHJvdG9fXyIhPT10Om51bGw9PT10fWZ1bmN0aW9uIGVvKHQpe3ZhciBuPU5pKHQpLHI9ZVtuXTtpZigiZnVuY3Rpb24iIT10eXBlb2Ygcnx8IShuIGluIGkucHJvdG90eXBlKSlyZXR1cm4hMTtpZih0PT09cilyZXR1cm4hMDt2YXIgbz16YyhyKTtyZXR1cm4hIW8mJnQ9PT1vWzBdfWZ1bmN0aW9uIG5vKHQpe3JldHVybiEhTWwmJk1sIGluIHR9ZnVuY3Rpb24gcm8odCl7dmFyIGU9dCYmdC5jb25zdHJ1Y3RvcjtyZXR1cm4gdD09PSgiZnVuY3Rpb24iPT10eXBlb2YgZSYmZS5wcm90b3R5cGV8fGpsKX1mdW5jdGlvbiBpbyh0KXtyZXR1cm4gdD09PXQmJiF5dSh0KX1mdW5jdGlvbiBvbyh0LGUpe3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gbnVsbCE9biYmblt0XT09PWUmJihlIT09UXx8dCBpbiBPYmplY3QobikpfX1mdW5jdGlvbiBzbyh0LGUpe3ZhciBuPXRbMV0scj1lWzFdLGk9bnxyLG89aTwob3R8c3R8aHQpLHM9cj09aHQmJm49PWF0fHxyPT1odCYmbj09ZHQmJnRbN10ubGVuZ3RoPD1lWzhdfHxyPT0oaHR8ZHQpJiZlWzddLmxlbmd0aDw9ZVs4XSYmbj09YXQ7aWYoIW8mJiFzKXJldHVybiB0O3Imb3QmJih0WzJdPWVbMl0saXw9biZvdD8wOnV0KTt2YXIgdT1lWzNdO2lmKHUpe3ZhciBhPXRbM107dFszXT1hP2VpKGEsdSxlWzRdKTp1LHRbNF09YT8kKHRbM10saXQpOmVbNF19cmV0dXJuIHU9ZVs1XSx1JiYoYT10WzVdLHRbNV09YT9uaShhLHUsZVs2XSk6dSx0WzZdPWE/JCh0WzVdLGl0KTplWzZdKSx1PWVbN10sdSYmKHRbN109dSksciZodCYmKHRbOF09bnVsbD09dFs4XT9lWzhdOnRjKHRbOF0sZVs4XSkpLG51bGw9PXRbOV0mJih0WzldPWVbOV0pLHRbMF09ZVswXSx0WzFdPWksdH1mdW5jdGlvbiB1byh0LGUsbixyLGksbyl7cmV0dXJuIHl1KHQpJiZ5dShlKSYmZHIodCxlLFEsdW8sby5zZXQoZSx0KSksdH1mdW5jdGlvbiBhbyh0LGUpe3JldHVybiAxPT1lLmxlbmd0aD90OkduKHQsRXIoZSwwLC0xKSl9ZnVuY3Rpb24gbG8odCxlKXtmb3IodmFyIG49dC5sZW5ndGgscj10YyhlLmxlbmd0aCxuKSxpPXJpKHQpO3ItLTspe3ZhciBvPWVbcl07dFtyXT1KaShvLG4pP2lbb106UX1yZXR1cm4gdH1mdW5jdGlvbiBjbyh0KXtpZigic3RyaW5nIj09dHlwZW9mIHR8fEl1KHQpKXJldHVybiB0O3ZhciBlPXQrIiI7cmV0dXJuIjAiPT1lJiYxL3Q9PS1rdD8iLTAiOmV9ZnVuY3Rpb24gZm8odCl7aWYobnVsbCE9dCl7dHJ5e3JldHVybiB6bC5jYWxsKHQpfWNhdGNoKGUpe310cnl7cmV0dXJuIHQrIiJ9Y2F0Y2goZSl7fX1yZXR1cm4iIn1mdW5jdGlvbiBobyh0KXtpZih0IGluc3RhbmNlb2YgaSlyZXR1cm4gdC5jbG9uZSgpO3ZhciBlPW5ldyByKHQuX193cmFwcGVkX18sdC5fX2NoYWluX18pO3JldHVybiBlLl9fYWN0aW9uc19fPXJpKHQuX19hY3Rpb25zX18pLGUuX19pbmRleF9fPXQuX19pbmRleF9fLGUuX192YWx1ZXNfXz10Ll9fdmFsdWVzX18sZX1mdW5jdGlvbiBwbyh0LGUsbil7ZT0obj9ZaSh0LGUsbik6ZT09PVEpPzE6UWwoQnUoZSksMCk7dmFyIHI9dD90Lmxlbmd0aDowO2lmKCFyfHxlPDEpcmV0dXJuW107Zm9yKHZhciBpPTAsbz0wLHM9QXJyYXkoR2woci9lKSk7aTxyOylzW28rK109RXIodCxpLGkrPWUpO3JldHVybiBzfWZ1bmN0aW9uIGdvKHQpe2Zvcih2YXIgZT0tMSxuPXQ/dC5sZW5ndGg6MCxyPTAsaT1bXTsrK2U8bjspe3ZhciBvPXRbZV07byYmKGlbcisrXT1vKX1yZXR1cm4gaX1mdW5jdGlvbiB2bygpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLGU9QXJyYXkodD90LTE6MCksbj1hcmd1bWVudHNbMF0scj10O3ItLTspZVtyLTFdPWFyZ3VtZW50c1tyXTtyZXR1cm4gdD9tKHlmKG4pP3JpKG4pOltuXSxXbihlLDEpKTpbXX1mdW5jdGlvbiBtbyh0LGUsbil7dmFyIHI9dD90Lmxlbmd0aDowO3JldHVybiByPyhlPW58fGU9PT1RPzE6QnUoZSksRXIodCxlPDA/MDplLHIpKTpbXX1mdW5jdGlvbiB5byh0LGUsbil7dmFyIHI9dD90Lmxlbmd0aDowO3JldHVybiByPyhlPW58fGU9PT1RPzE6QnUoZSksZT1yLWUsRXIodCwwLGU8MD8wOmUpKTpbXX1mdW5jdGlvbiBfbyh0LGUpe3JldHVybiB0JiZ0Lmxlbmd0aD9xcih0LFJpKGUsMyksITAsITApOltdfWZ1bmN0aW9uIGJvKHQsZSl7cmV0dXJuIHQmJnQubGVuZ3RoP3FyKHQsUmkoZSwzKSwhMCk6W119ZnVuY3Rpb24geG8odCxlLG4scil7dmFyIGk9dD90Lmxlbmd0aDowO3JldHVybiBpPyhuJiYibnVtYmVyIiE9dHlwZW9mIG4mJllpKHQsZSxuKSYmKG49MCxyPWkpLFBuKHQsZSxuLHIpKTpbXX1mdW5jdGlvbiB3byh0LGUsbil7dmFyIHI9dD90Lmxlbmd0aDowO2lmKCFyKXJldHVybi0xO3ZhciBpPW51bGw9PW4/MDpCdShuKTtyZXR1cm4gaTwwJiYoaT1RbChyK2ksMCkpLHcodCxSaShlLDMpLGkpfWZ1bmN0aW9uIFNvKHQsZSxuKXt2YXIgcj10P3QubGVuZ3RoOjA7aWYoIXIpcmV0dXJuLTE7dmFyIGk9ci0xO3JldHVybiBuIT09USYmKGk9QnUobiksaT1uPDA/UWwocitpLDApOnRjKGksci0xKSksdyh0LFJpKGUsMyksaSwhMCl9ZnVuY3Rpb24ga28odCl7cmV0dXJuKHQ/dC5sZW5ndGg6MCk/V24odCwxKTpbXX1mdW5jdGlvbiBqbyh0KXtyZXR1cm4odD90Lmxlbmd0aDowKT9Xbih0LGt0KTpbXX1mdW5jdGlvbiBPbyh0LGUpe3JldHVybih0P3QubGVuZ3RoOjApPyhlPWU9PT1RPzE6QnUoZSksV24odCxlKSk6W119ZnVuY3Rpb24gRW8odCl7Zm9yKHZhciBlPS0xLG49dD90Lmxlbmd0aDowLHI9e307KytlPG47KXt2YXIgaT10W2VdO3JbaVswXV09aVsxXX1yZXR1cm4gcn1mdW5jdGlvbiBNbyh0KXtyZXR1cm4gdCYmdC5sZW5ndGg/dFswXTpRfWZ1bmN0aW9uIHpvKHQsZSxuKXt2YXIgcj10P3QubGVuZ3RoOjA7aWYoIXIpcmV0dXJuLTE7dmFyIGk9bnVsbD09bj8wOkJ1KG4pO3JldHVybiBpPDAmJihpPVFsKHIraSwwKSksUyh0LGUsaSl9ZnVuY3Rpb24gQW8odCl7cmV0dXJuIHlvKHQsMSl9ZnVuY3Rpb24gQ28odCxlKXtyZXR1cm4gdD9KbC5jYWxsKHQsZSk6IiJ9ZnVuY3Rpb24gVG8odCl7dmFyIGU9dD90Lmxlbmd0aDowO3JldHVybiBlP3RbZS0xXTpRfWZ1bmN0aW9uIElvKHQsZSxuKXt2YXIgcj10P3QubGVuZ3RoOjA7aWYoIXIpcmV0dXJuLTE7dmFyIGk9cjtpZihuIT09USYmKGk9QnUobiksaT0oaTwwP1FsKHIraSwwKTp0YyhpLHItMSkpKzEpLGUhPT1lKXJldHVybiBEKHQsaS0xLCEwKTtmb3IoO2ktLTspaWYodFtpXT09PWUpcmV0dXJuIGk7cmV0dXJuLTF9ZnVuY3Rpb24gTm8odCxlKXtyZXR1cm4gdCYmdC5sZW5ndGg/Z3IodCxCdShlKSk6UX1mdW5jdGlvbiBMbyh0LGUpe3JldHVybiB0JiZ0Lmxlbmd0aCYmZSYmZS5sZW5ndGg/eHIodCxlKTp0fWZ1bmN0aW9uIFJvKHQsZSxuKXtyZXR1cm4gdCYmdC5sZW5ndGgmJmUmJmUubGVuZ3RoP3hyKHQsZSxSaShuKSk6dH1mdW5jdGlvbiBxbyh0LGUsbil7cmV0dXJuIHQmJnQubGVuZ3RoJiZlJiZlLmxlbmd0aD94cih0LGUsUSxuKTp0fWZ1bmN0aW9uIEZvKHQsZSl7dmFyIG49W107aWYoIXR8fCF0Lmxlbmd0aClyZXR1cm4gbjsKdmFyIHI9LTEsaT1bXSxvPXQubGVuZ3RoO2ZvcihlPVJpKGUsMyk7KytyPG87KXt2YXIgcz10W3JdO2UocyxyLHQpJiYobi5wdXNoKHMpLGkucHVzaChyKSl9cmV0dXJuIHdyKHQsaSksbn1mdW5jdGlvbiBQbyh0KXtyZXR1cm4gdD9pYy5jYWxsKHQpOnR9ZnVuY3Rpb24gQm8odCxlLG4pe3ZhciByPXQ/dC5sZW5ndGg6MDtyZXR1cm4gcj8obiYmIm51bWJlciIhPXR5cGVvZiBuJiZZaSh0LGUsbik/KGU9MCxuPXIpOihlPW51bGw9PWU/MDpCdShlKSxuPW49PT1RP3I6QnUobikpLEVyKHQsZSxuKSk6W119ZnVuY3Rpb24gV28odCxlKXtyZXR1cm4genIodCxlKX1mdW5jdGlvbiBEbyh0LGUsbil7cmV0dXJuIEFyKHQsZSxSaShuKSl9ZnVuY3Rpb24gSG8odCxlKXt2YXIgbj10P3QubGVuZ3RoOjA7aWYobil7dmFyIHI9enIodCxlKTtpZihyPG4mJm51KHRbcl0sZSkpcmV0dXJuIHJ9cmV0dXJuLTF9ZnVuY3Rpb24gVW8odCxlKXtyZXR1cm4genIodCxlLCEwKX1mdW5jdGlvbiBWbyh0LGUsbil7cmV0dXJuIEFyKHQsZSxSaShuKSwhMCl9ZnVuY3Rpb24gJG8odCxlKXtpZih0P3QubGVuZ3RoOjApe3ZhciBuPXpyKHQsZSwhMCktMTtpZihudSh0W25dLGUpKXJldHVybiBufXJldHVybi0xfWZ1bmN0aW9uIEdvKHQpe3JldHVybiB0JiZ0Lmxlbmd0aD9Dcih0KTpbXX1mdW5jdGlvbiBLbyh0LGUpe3JldHVybiB0JiZ0Lmxlbmd0aD9Dcih0LFJpKGUpKTpbXX1mdW5jdGlvbiBYbyh0KXtyZXR1cm4gbW8odCwxKX1mdW5jdGlvbiBabyh0LGUsbil7cmV0dXJuIHQmJnQubGVuZ3RoPyhlPW58fGU9PT1RPzE6QnUoZSksRXIodCwwLGU8MD8wOmUpKTpbXX1mdW5jdGlvbiBKbyh0LGUsbil7dmFyIHI9dD90Lmxlbmd0aDowO3JldHVybiByPyhlPW58fGU9PT1RPzE6QnUoZSksZT1yLWUsRXIodCxlPDA/MDplLHIpKTpbXX1mdW5jdGlvbiBZbyh0LGUpe3JldHVybiB0JiZ0Lmxlbmd0aD9xcih0LFJpKGUsMyksITEsITApOltdfWZ1bmN0aW9uIFFvKHQsZSl7cmV0dXJuIHQmJnQubGVuZ3RoP3FyKHQsUmkoZSwzKSk6W119ZnVuY3Rpb24gdHModCl7cmV0dXJuIHQmJnQubGVuZ3RoP05yKHQpOltdfWZ1bmN0aW9uIGVzKHQsZSl7cmV0dXJuIHQmJnQubGVuZ3RoP05yKHQsUmkoZSkpOltdfWZ1bmN0aW9uIG5zKHQsZSl7cmV0dXJuIHQmJnQubGVuZ3RoP05yKHQsUSxlKTpbXX1mdW5jdGlvbiBycyh0KXtpZighdHx8IXQubGVuZ3RoKXJldHVybltdO3ZhciBlPTA7cmV0dXJuIHQ9ZCh0LGZ1bmN0aW9uKHQpe2lmKHN1KHQpKXJldHVybiBlPVFsKHQubGVuZ3RoLGUpLCEwfSkseihlLGZ1bmN0aW9uKGUpe3JldHVybiB2KHQsX3IoZSkpfSl9ZnVuY3Rpb24gaXModCxlKXtpZighdHx8IXQubGVuZ3RoKXJldHVybltdO3ZhciBuPXJzKHQpO3JldHVybiBudWxsPT1lP246dihuLGZ1bmN0aW9uKHQpe3JldHVybiBhKGUsUSx0KX0pfWZ1bmN0aW9uIG9zKHQsZSl7cmV0dXJuIEJyKHR8fFtdLGV8fFtdLHBuKX1mdW5jdGlvbiBzcyh0LGUpe3JldHVybiBCcih0fHxbXSxlfHxbXSxPcil9ZnVuY3Rpb24gdXModCl7dmFyIG49ZSh0KTtyZXR1cm4gbi5fX2NoYWluX189ITAsbn1mdW5jdGlvbiBhcyh0LGUpe3JldHVybiBlKHQpLHR9ZnVuY3Rpb24gbHModCxlKXtyZXR1cm4gZSh0KX1mdW5jdGlvbiBjcygpe3JldHVybiB1cyh0aGlzKX1mdW5jdGlvbiBmcygpe3JldHVybiBuZXcgcih0aGlzLnZhbHVlKCksdGhpcy5fX2NoYWluX18pfWZ1bmN0aW9uIGhzKCl7dGhpcy5fX3ZhbHVlc19fPT09USYmKHRoaXMuX192YWx1ZXNfXz1GdSh0aGlzLnZhbHVlKCkpKTt2YXIgdD10aGlzLl9faW5kZXhfXz49dGhpcy5fX3ZhbHVlc19fLmxlbmd0aDtyZXR1cm57ZG9uZTp0LHZhbHVlOnQ/UTp0aGlzLl9fdmFsdWVzX19bdGhpcy5fX2luZGV4X18rK119fWZ1bmN0aW9uIGRzKCl7cmV0dXJuIHRoaXN9ZnVuY3Rpb24gcHModCl7Zm9yKHZhciBlLHI9dGhpcztyIGluc3RhbmNlb2Ygbjspe3ZhciBpPWhvKHIpO2kuX19pbmRleF9fPTAsaS5fX3ZhbHVlc19fPVEsZT9vLl9fd3JhcHBlZF9fPWk6ZT1pO3ZhciBvPWk7cj1yLl9fd3JhcHBlZF9ffXJldHVybiBvLl9fd3JhcHBlZF9fPXQsZX1mdW5jdGlvbiBncygpe3ZhciB0PXRoaXMuX193cmFwcGVkX187aWYodCBpbnN0YW5jZW9mIGkpe3ZhciBlPXQ7cmV0dXJuIHRoaXMuX19hY3Rpb25zX18ubGVuZ3RoJiYoZT1uZXcgaSh0aGlzKSksZT1lLnJldmVyc2UoKSxlLl9fYWN0aW9uc19fLnB1c2goe2Z1bmM6bHMsYXJnczpbUG9dLHRoaXNBcmc6UX0pLG5ldyByKGUsdGhpcy5fX2NoYWluX18pfXJldHVybiB0aGlzLnRocnUoUG8pfWZ1bmN0aW9uIHZzKCl7cmV0dXJuIEZyKHRoaXMuX193cmFwcGVkX18sdGhpcy5fX2FjdGlvbnNfXyl9ZnVuY3Rpb24gbXModCxlLG4pe3ZhciByPXlmKHQpP2g6Um47cmV0dXJuIG4mJllpKHQsZSxuKSYmKGU9USkscih0LFJpKGUsMykpfWZ1bmN0aW9uIHlzKHQsZSl7cmV0dXJuKHlmKHQpP2Q6Qm4pKHQsUmkoZSwzKSl9ZnVuY3Rpb24gX3ModCxlKXtyZXR1cm4gV24oanModCxlKSwxKX1mdW5jdGlvbiBicyh0LGUpe3JldHVybiBXbihqcyh0LGUpLGt0KX1mdW5jdGlvbiB4cyh0LGUsbil7cmV0dXJuIG49bj09PVE/MTpCdShuKSxXbihqcyh0LGUpLG4pfWZ1bmN0aW9uIHdzKHQsZSl7cmV0dXJuKHlmKHQpP2M6U2MpKHQsUmkoZSwzKSl9ZnVuY3Rpb24gU3ModCxlKXtyZXR1cm4oeWYodCk/ZjprYykodCxSaShlLDMpKX1mdW5jdGlvbiBrcyh0LGUsbixyKXt0PW91KHQpP3Q6bWEodCksbj1uJiYhcj9CdShuKTowO3ZhciBpPXQubGVuZ3RoO3JldHVybiBuPDAmJihuPVFsKGkrbiwwKSksVHUodCk/bjw9aSYmdC5pbmRleE9mKGUsbik+LTE6ISFpJiZTKHQsZSxuKT4tMX1mdW5jdGlvbiBqcyh0LGUpe3JldHVybih5Zih0KT92OmNyKSh0LFJpKGUsMykpfWZ1bmN0aW9uIE9zKHQsZSxuLHIpe3JldHVybiBudWxsPT10P1tdOih5ZihlKXx8KGU9bnVsbD09ZT9bXTpbZV0pLG49cj9ROm4seWYobil8fChuPW51bGw9PW4/W106W25dKSx2cih0LGUsbikpfWZ1bmN0aW9uIEVzKHQsZSxuKXt2YXIgcj15Zih0KT95Ok8saT1hcmd1bWVudHMubGVuZ3RoPDM7cmV0dXJuIHIodCxSaShlLDQpLG4saSxTYyl9ZnVuY3Rpb24gTXModCxlLG4pe3ZhciByPXlmKHQpP186TyxpPWFyZ3VtZW50cy5sZW5ndGg8MztyZXR1cm4gcih0LFJpKGUsNCksbixpLGtjKX1mdW5jdGlvbiB6cyh0LGUpe3ZhciBuPXlmKHQpP2Q6Qm47cmV0dXJuIGU9UmkoZSwzKSxuKHQsZnVuY3Rpb24odCxuLHIpe3JldHVybiFlKHQsbixyKX0pfWZ1bmN0aW9uIEFzKHQpe3ZhciBlPW91KHQpP3Q6bWEodCksbj1lLmxlbmd0aDtyZXR1cm4gbj4wP2VbU3IoMCxuLTEpXTpRfWZ1bmN0aW9uIENzKHQsZSxuKXt2YXIgcj0tMSxpPUZ1KHQpLG89aS5sZW5ndGgscz1vLTE7Zm9yKGU9KG4/WWkodCxlLG4pOmU9PT1RKT8xOl9uKEJ1KGUpLDAsbyk7KytyPGU7KXt2YXIgdT1TcihyLHMpLGE9aVt1XTtpW3VdPWlbcl0saVtyXT1hfXJldHVybiBpLmxlbmd0aD1lLGl9ZnVuY3Rpb24gVHModCl7cmV0dXJuIENzKHQsTXQpfWZ1bmN0aW9uIElzKHQpe2lmKG51bGw9PXQpcmV0dXJuIDA7aWYob3UodCkpe3ZhciBlPXQubGVuZ3RoO3JldHVybiBlJiZUdSh0KT9YKHQpOmV9aWYoX3UodCkpe3ZhciBuPURpKHQpO2lmKG49PUZ0fHxuPT1IdClyZXR1cm4gdC5zaXplfXJldHVybiBpYSh0KS5sZW5ndGh9ZnVuY3Rpb24gTnModCxlLG4pe3ZhciByPXlmKHQpP2I6TXI7cmV0dXJuIG4mJllpKHQsZSxuKSYmKGU9USkscih0LFJpKGUsMykpfWZ1bmN0aW9uIExzKCl7cmV0dXJuIF9sLm5vdygpfWZ1bmN0aW9uIFJzKHQsZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFNsKG50KTtyZXR1cm4gdD1CdSh0KSxmdW5jdGlvbigpe2lmKC0tdDwxKXJldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19ZnVuY3Rpb24gcXModCxlLG4pe3JldHVybiBlPW4/UTplLGU9dCYmbnVsbD09ZT90Lmxlbmd0aDplLE1pKHQsaHQsUSxRLFEsUSxlKX1mdW5jdGlvbiBGcyh0LGUpe3ZhciBuO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IG5ldyBTbChudCk7cmV0dXJuIHQ9QnUodCksZnVuY3Rpb24oKXtyZXR1cm4tLXQ+MCYmKG49ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpLHQ8PTEmJihlPVEpLG59fWZ1bmN0aW9uIFBzKHQsZSxuKXtlPW4/UTplO3ZhciByPU1pKHQsYXQsUSxRLFEsUSxRLGUpO3JldHVybiByLnBsYWNlaG9sZGVyPVBzLnBsYWNlaG9sZGVyLHJ9ZnVuY3Rpb24gQnModCxlLG4pe2U9bj9ROmU7dmFyIHI9TWkodCxsdCxRLFEsUSxRLFEsZSk7cmV0dXJuIHIucGxhY2Vob2xkZXI9QnMucGxhY2Vob2xkZXIscn1mdW5jdGlvbiBXcyh0LGUsbil7ZnVuY3Rpb24gcihlKXt2YXIgbj1oLHI9ZDtyZXR1cm4gaD1kPVEseT1lLGc9dC5hcHBseShyLG4pfWZ1bmN0aW9uIGkodCl7cmV0dXJuIHk9dCx2PSRsKHUsZSksXz9yKHQpOmd9ZnVuY3Rpb24gbyh0KXt2YXIgbj10LW0scj10LXksaT1lLW47cmV0dXJuIGI/dGMoaSxwLXIpOml9ZnVuY3Rpb24gcyh0KXt2YXIgbj10LW0scj10LXk7cmV0dXJuIG09PT1RfHxuPj1lfHxuPDB8fGImJnI+PXB9ZnVuY3Rpb24gdSgpe3ZhciB0PUxzKCk7cmV0dXJuIHModCk/YSh0KTp2b2lkKHY9JGwodSxvKHQpKSl9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gdj1RLHgmJmg/cih0KTooaD1kPVEsZyl9ZnVuY3Rpb24gbCgpe3k9MCxoPW09ZD12PVF9ZnVuY3Rpb24gYygpe3JldHVybiB2PT09UT9nOmEoTHMoKSl9ZnVuY3Rpb24gZigpe3ZhciB0PUxzKCksbj1zKHQpO2lmKGg9YXJndW1lbnRzLGQ9dGhpcyxtPXQsbil7aWYodj09PVEpcmV0dXJuIGkobSk7aWYoYilyZXR1cm4gdj0kbCh1LGUpLHIobSl9cmV0dXJuIHY9PT1RJiYodj0kbCh1LGUpKSxnfXZhciBoLGQscCxnLHYsbSx5PTAsXz0hMSxiPSExLHg9ITA7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFNsKG50KTtyZXR1cm4gZT1EdShlKXx8MCx5dShuKSYmKF89ISFuLmxlYWRpbmcsYj0ibWF4V2FpdCJpbiBuLHA9Yj9RbChEdShuLm1heFdhaXQpfHwwLGUpOnAseD0idHJhaWxpbmciaW4gbj8hIW4udHJhaWxpbmc6eCksZi5jYW5jZWw9bCxmLmZsdXNoPWMsZn1mdW5jdGlvbiBEcyh0KXtyZXR1cm4gTWkodCxwdCl9ZnVuY3Rpb24gSHModCxlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdHx8ZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFNsKG50KTt2YXIgbj1mdW5jdGlvbiByKCl7dmFyIG49YXJndW1lbnRzLGk9ZT9lLmFwcGx5KHRoaXMsbik6blswXSxvPXIuY2FjaGU7aWYoby5oYXMoaSkpcmV0dXJuIG8uZ2V0KGkpO3ZhciBzPXQuYXBwbHkodGhpcyxuKTtyZXR1cm4gci5jYWNoZT1vLnNldChpLHMpLHN9O3JldHVybiBuLmNhY2hlPW5ldyhIcy5DYWNoZXx8WmUpLG59ZnVuY3Rpb24gVXModCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFNsKG50KTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4hdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIFZzKHQpe3JldHVybiBGcygyLHQpfWZ1bmN0aW9uICRzKHQsZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFNsKG50KTtyZXR1cm4gZT1RbChlPT09UT90Lmxlbmd0aC0xOkJ1KGUpLDApLGZ1bmN0aW9uKCl7Zm9yKHZhciBuPWFyZ3VtZW50cyxyPS0xLGk9UWwobi5sZW5ndGgtZSwwKSxvPUFycmF5KGkpOysrcjxpOylvW3JdPW5bZStyXTtzd2l0Y2goZSl7Y2FzZSAwOnJldHVybiB0LmNhbGwodGhpcyxvKTtjYXNlIDE6cmV0dXJuIHQuY2FsbCh0aGlzLG5bMF0sbyk7Y2FzZSAyOnJldHVybiB0LmNhbGwodGhpcyxuWzBdLG5bMV0sbyl9dmFyIHM9QXJyYXkoZSsxKTtmb3Iocj0tMTsrK3I8ZTspc1tyXT1uW3JdO3JldHVybiBzW2VdPW8sYSh0LHRoaXMscyl9fWZ1bmN0aW9uIEdzKHQsZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFNsKG50KTtyZXR1cm4gZT1lPT09UT8wOlFsKEJ1KGUpLDApLCRzKGZ1bmN0aW9uKG4pe3ZhciByPW5bZV0saT1VcihuLDAsZSk7cmV0dXJuIHImJm0oaSxyKSxhKHQsdGhpcyxpKX0pfWZ1bmN0aW9uIEtzKHQsZSxuKXt2YXIgcj0hMCxpPSEwO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBTbChudCk7cmV0dXJuIHl1KG4pJiYocj0ibGVhZGluZyJpbiBuPyEhbi5sZWFkaW5nOnIsaT0idHJhaWxpbmciaW4gbj8hIW4udHJhaWxpbmc6aSksV3ModCxlLHtsZWFkaW5nOnIsbWF4V2FpdDplLHRyYWlsaW5nOml9KX1mdW5jdGlvbiBYcyh0KXtyZXR1cm4gcXModCwxKX1mdW5jdGlvbiBacyh0LGUpe3JldHVybiBlPW51bGw9PWU/R2E6ZSxkZihlLHQpfWZ1bmN0aW9uIEpzKCl7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuW107dmFyIHQ9YXJndW1lbnRzWzBdO3JldHVybiB5Zih0KT90Olt0XX1mdW5jdGlvbiBZcyh0KXtyZXR1cm4gd24odCwhMSwhMCl9ZnVuY3Rpb24gUXModCxlKXtyZXR1cm4gd24odCwhMSwhMCxlKX1mdW5jdGlvbiB0dSh0KXtyZXR1cm4gd24odCwhMCwhMCl9ZnVuY3Rpb24gZXUodCxlKXtyZXR1cm4gd24odCwhMCwhMCxlKX1mdW5jdGlvbiBudSh0LGUpe3JldHVybiB0PT09ZXx8dCE9PXQmJmUhPT1lfWZ1bmN0aW9uIHJ1KHQpe3JldHVybiBzdSh0KSYmQWwuY2FsbCh0LCJjYWxsZWUiKSYmKCFVbC5jYWxsKHQsImNhbGxlZSIpfHxJbC5jYWxsKHQpPT1DdCl9ZnVuY3Rpb24gaXUodCl7cmV0dXJuIF91KHQpJiZJbC5jYWxsKHQpPT1LdH1mdW5jdGlvbiBvdSh0KXtyZXR1cm4gbnVsbCE9dCYmbXUoQWModCkpJiYhZ3UodCl9ZnVuY3Rpb24gc3UodCl7cmV0dXJuIF91KHQpJiZvdSh0KX1mdW5jdGlvbiB1dSh0KXtyZXR1cm4gdD09PSEwfHx0PT09ITF8fF91KHQpJiZJbC5jYWxsKHQpPT1JdH1mdW5jdGlvbiBhdSh0KXtyZXR1cm4gX3UodCkmJklsLmNhbGwodCk9PU50fWZ1bmN0aW9uIGx1KHQpe3JldHVybiEhdCYmMT09PXQubm9kZVR5cGUmJl91KHQpJiYhTXUodCl9ZnVuY3Rpb24gY3UodCl7aWYob3UodCkmJih5Zih0KXx8VHUodCl8fGd1KHQuc3BsaWNlKXx8cnUodCl8fF9mKHQpKSlyZXR1cm4hdC5sZW5ndGg7aWYoX3UodCkpe3ZhciBlPURpKHQpO2lmKGU9PUZ0fHxlPT1IdClyZXR1cm4hdC5zaXplfWZvcih2YXIgbiBpbiB0KWlmKEFsLmNhbGwodCxuKSlyZXR1cm4hMTtyZXR1cm4hKGRjJiZpYSh0KS5sZW5ndGgpfWZ1bmN0aW9uIGZ1KHQsZSl7cmV0dXJuIG5yKHQsZSl9ZnVuY3Rpb24gaHUodCxlLG4pe249ImZ1bmN0aW9uIj09dHlwZW9mIG4/bjpRO3ZhciByPW4/bih0LGUpOlE7cmV0dXJuIHI9PT1RP25yKHQsZSxuKTohIXJ9ZnVuY3Rpb24gZHUodCl7cmV0dXJuISFfdSh0KSYmKElsLmNhbGwodCk9PUx0fHwic3RyaW5nIj09dHlwZW9mIHQubWVzc2FnZSYmInN0cmluZyI9PXR5cGVvZiB0Lm5hbWUpfWZ1bmN0aW9uIHB1KHQpe3JldHVybiJudW1iZXIiPT10eXBlb2YgdCYmWmwodCl9ZnVuY3Rpb24gZ3UodCl7dmFyIGU9eXUodCk/SWwuY2FsbCh0KToiIjtyZXR1cm4gZT09UnR8fGU9PXF0fWZ1bmN0aW9uIHZ1KHQpe3JldHVybiJudW1iZXIiPT10eXBlb2YgdCYmdD09QnUodCl9ZnVuY3Rpb24gbXUodCl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiB0JiZ0Pi0xJiZ0JTE9PTAmJnQ8PWp0fWZ1bmN0aW9uIHl1KHQpe3ZhciBlPSJ1bmRlZmluZWQiPT10eXBlb2YgdD8idW5kZWZpbmVkIjpvKHQpO3JldHVybiEhdCYmKCJvYmplY3QiPT1lfHwiZnVuY3Rpb24iPT1lKX1mdW5jdGlvbiBfdSh0KXtyZXR1cm4hIXQmJiJvYmplY3QiPT0oInVuZGVmaW5lZCI9PXR5cGVvZiB0PyJ1bmRlZmluZWQiOm8odCkpfWZ1bmN0aW9uIGJ1KHQpe3JldHVybiBfdSh0KSYmRGkodCk9PUZ0fWZ1bmN0aW9uIHh1KHQsZSl7cmV0dXJuIHQ9PT1lfHxpcih0LGUsRmkoZSkpfWZ1bmN0aW9uIHd1KHQsZSxuKXtyZXR1cm4gbj0iZnVuY3Rpb24iPT10eXBlb2Ygbj9uOlEsaXIodCxlLEZpKGUpLG4pfWZ1bmN0aW9uIFN1KHQpe3JldHVybiBFdSh0KSYmdCE9K3R9ZnVuY3Rpb24ga3UodCl7aWYoVGModCkpdGhyb3cgbmV3IGJsKCJUaGlzIG1ldGhvZCBpcyBub3Qgc3VwcG9ydGVkIHdpdGggYGNvcmUtanNgLiBUcnkgaHR0cHM6Ly9naXRodWIuY29tL2VzLXNoaW1zLiIpO3JldHVybiBvcih0KX1mdW5jdGlvbiBqdSh0KXtyZXR1cm4gbnVsbD09PXR9ZnVuY3Rpb24gT3UodCl7cmV0dXJuIG51bGw9PXR9ZnVuY3Rpb24gRXUodCl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiB0fHxfdSh0KSYmSWwuY2FsbCh0KT09UHR9ZnVuY3Rpb24gTXUodCl7aWYoIV91KHQpfHxJbC5jYWxsKHQpIT1CdHx8SCh0KSlyZXR1cm4hMTt2YXIgZT1CaSh0KTtpZihudWxsPT09ZSlyZXR1cm4hMDt2YXIgbj1BbC5jYWxsKGUsImNvbnN0cnVjdG9yIikmJmUuY29uc3RydWN0b3I7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIG4mJm4gaW5zdGFuY2VvZiBuJiZ6bC5jYWxsKG4pPT1UbH1mdW5jdGlvbiB6dSh0KXtyZXR1cm4geXUodCkmJklsLmNhbGwodCk9PUR0fWZ1bmN0aW9uIEF1KHQpe3JldHVybiB2dSh0KSYmdD49LWp0JiZ0PD1qdH1mdW5jdGlvbiBDdSh0KXtyZXR1cm4gX3UodCkmJkRpKHQpPT1IdH1mdW5jdGlvbiBUdSh0KXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHR8fCF5Zih0KSYmX3UodCkmJklsLmNhbGwodCk9PVV0fWZ1bmN0aW9uIEl1KHQpe3JldHVybiJzeW1ib2wiPT0oInVuZGVmaW5lZCI9PXR5cGVvZiB0PyJ1bmRlZmluZWQiOm8odCkpfHxfdSh0KSYmSWwuY2FsbCh0KT09VnR9ZnVuY3Rpb24gTnUodCl7cmV0dXJuIF91KHQpJiZtdSh0Lmxlbmd0aCkmJiEhTW5bSWwuY2FsbCh0KV19ZnVuY3Rpb24gTHUodCl7cmV0dXJuIHQ9PT1RfWZ1bmN0aW9uIFJ1KHQpe3JldHVybiBfdSh0KSYmRGkodCk9PSR0fWZ1bmN0aW9uIHF1KHQpe3JldHVybiBfdSh0KSYmSWwuY2FsbCh0KT09R3R9ZnVuY3Rpb24gRnUodCl7aWYoIXQpcmV0dXJuW107aWYob3UodCkpcmV0dXJuIFR1KHQpP1oodCk6cmkodCk7aWYoRGwmJnRbRGxdKXJldHVybiBVKHRbRGxdKCkpO3ZhciBlPURpKHQpO3JldHVybihlPT1GdD9WOmU9PUh0P0c6bWEpKHQpfWZ1bmN0aW9uIFB1KHQpe3JldHVybiB0Pyh0PUR1KHQpLHQ9PT1rdHx8dD09PS1rdD8odDwwPy0xOjEpKk90OnQ9PT10P3Q6MCk6MD09PXQ/dDowfWZ1bmN0aW9uIEJ1KHQpe3ZhciBlPVB1KHQpLG49ZSUxO3JldHVybiBlPT09ZT9uP2UtbjplOjB9ZnVuY3Rpb24gV3UodCl7cmV0dXJuIHQ/X24oQnUodCksMCxNdCk6MH1mdW5jdGlvbiBEdSh0KXtpZigibnVtYmVyIj09dHlwZW9mIHQpcmV0dXJuIHQ7aWYoSXUodCkpcmV0dXJuIEV0O2lmKHl1KHQpKXt2YXIgZT1ndSh0LnZhbHVlT2YpP3QudmFsdWVPZigpOnQ7dD15dShlKT9lKyIiOmV9aWYoInN0cmluZyIhPXR5cGVvZiB0KXJldHVybiAwPT09dD90Oit0O3Q9dC5yZXBsYWNlKGJlLCIiKTt2YXIgbj16ZS50ZXN0KHQpO3JldHVybiBufHxDZS50ZXN0KHQpP0xuKHQuc2xpY2UoMiksbj8yOjgpOk1lLnRlc3QodCk/RXQ6K3R9ZnVuY3Rpb24gSHUodCl7cmV0dXJuIGlpKHQsb2EodCkpfWZ1bmN0aW9uIFV1KHQpe3JldHVybiBfbihCdSh0KSwtanQsanQpfWZ1bmN0aW9uIFZ1KHQpe3JldHVybiBudWxsPT10PyIiOklyKHQpfWZ1bmN0aW9uICR1KHQsZSl7dmFyIG49Q24odCk7cmV0dXJuIGU/bW4obixlKTpufWZ1bmN0aW9uIEd1KHQsZSl7cmV0dXJuIHgodCxSaShlLDMpLFVuKX1mdW5jdGlvbiBLdSh0LGUpe3JldHVybiB4KHQsUmkoZSwzKSxWbil9ZnVuY3Rpb24gWHUodCxlKXtyZXR1cm4gbnVsbD09dD90OmpjKHQsUmkoZSwzKSxvYSl9ZnVuY3Rpb24gWnUodCxlKXtyZXR1cm4gbnVsbD09dD90Ok9jKHQsUmkoZSwzKSxvYSl9ZnVuY3Rpb24gSnUodCxlKXtyZXR1cm4gdCYmVW4odCxSaShlLDMpKX1mdW5jdGlvbiBZdSh0LGUpe3JldHVybiB0JiZWbih0LFJpKGUsMykpfWZ1bmN0aW9uIFF1KHQpe3JldHVybiBudWxsPT10P1tdOiRuKHQsaWEodCkpfWZ1bmN0aW9uIHRhKHQpe3JldHVybiBudWxsPT10P1tdOiRuKHQsb2EodCkpfWZ1bmN0aW9uIGVhKHQsZSxuKXt2YXIgcj1udWxsPT10P1E6R24odCxlKTtyZXR1cm4gcj09PVE/bjpyfWZ1bmN0aW9uIG5hKHQsZSl7cmV0dXJuIG51bGwhPXQmJlVpKHQsZSxabil9ZnVuY3Rpb24gcmEodCxlKXtyZXR1cm4gbnVsbCE9dCYmVWkodCxlLEpuKX1mdW5jdGlvbiBpYSh0KXt2YXIgZT1ybyh0KTtpZighZSYmIW91KHQpKXJldHVybiB1cih0KTt2YXIgbj1LaSh0KSxyPSEhbixpPW58fFtdLG89aS5sZW5ndGg7Zm9yKHZhciBzIGluIHQpIVpuKHQscyl8fHImJigibGVuZ3RoIj09c3x8SmkocyxvKSl8fGUmJiJjb25zdHJ1Y3RvciI9PXN8fGkucHVzaChzKTtyZXR1cm4gaX1mdW5jdGlvbiBvYSh0KXtmb3IodmFyIGU9LTEsbj1ybyh0KSxyPWFyKHQpLGk9ci5sZW5ndGgsbz1LaSh0KSxzPSEhbyx1PW98fFtdLGE9dS5sZW5ndGg7KytlPGk7KXt2YXIgbD1yW2VdO3MmJigibGVuZ3RoIj09bHx8SmkobCxhKSl8fCJjb25zdHJ1Y3RvciI9PWwmJihufHwhQWwuY2FsbCh0LGwpKXx8dS5wdXNoKGwpfXJldHVybiB1fWZ1bmN0aW9uIHNhKHQsZSl7dmFyIG49e307cmV0dXJuIGU9UmkoZSwzKSxVbih0LGZ1bmN0aW9uKHQscixpKXtuW2UodCxyLGkpXT10fSksbn1mdW5jdGlvbiB1YSh0LGUpe3ZhciBuPXt9O3JldHVybiBlPVJpKGUsMyksVW4odCxmdW5jdGlvbih0LHIsaSl7bltyXT1lKHQscixpKX0pLG59ZnVuY3Rpb24gYWEodCxlKXtyZXR1cm4gZT1SaShlKSx5cih0LGZ1bmN0aW9uKHQsbil7cmV0dXJuIWUodCxuKX0pfWZ1bmN0aW9uIGxhKHQsZSl7cmV0dXJuIG51bGw9PXQ/e306eXIodCxSaShlKSl9ZnVuY3Rpb24gY2EodCxlLG4pe2U9UWkoZSx0KT9bZV06SHIoZSk7dmFyIHI9LTEsaT1lLmxlbmd0aDtmb3IoaXx8KHQ9USxpPTEpOysrcjxpOyl7dmFyIG89bnVsbD09dD9ROnRbY28oZVtyXSldO289PT1RJiYocj1pLG89biksdD1ndShvKT9vLmNhbGwodCk6b31yZXR1cm4gdH1mdW5jdGlvbiBmYSh0LGUsbil7cmV0dXJuIG51bGw9PXQ/dDpPcih0LGUsbil9ZnVuY3Rpb24gaGEodCxlLG4scil7cmV0dXJuIHI9ImZ1bmN0aW9uIj09dHlwZW9mIHI/cjpRLG51bGw9PXQ/dDpPcih0LGUsbixyKX1mdW5jdGlvbiBkYSh0LGUsbil7dmFyIHI9eWYodCl8fE51KHQpO2lmKGU9UmkoZSw0KSxudWxsPT1uKWlmKHJ8fHl1KHQpKXt2YXIgaT10LmNvbnN0cnVjdG9yO249cj95Zih0KT9uZXcgaTpbXTpndShpKT9DbihCaSh0KSk6e319ZWxzZSBuPXt9O3JldHVybihyP2M6VW4pKHQsZnVuY3Rpb24odCxyLGkpe3JldHVybiBlKG4sdCxyLGkpfSksbn1mdW5jdGlvbiBwYSh0LGUpe3JldHVybiBudWxsPT10fHxMcih0LGUpfWZ1bmN0aW9uIGdhKHQsZSxuKXtyZXR1cm4gbnVsbD09dD90OlJyKHQsZSxEcihuKSl9ZnVuY3Rpb24gdmEodCxlLG4scil7cmV0dXJuIHI9ImZ1bmN0aW9uIj09dHlwZW9mIHI/cjpRLG51bGw9PXQ/dDpScih0LGUsRHIobikscil9ZnVuY3Rpb24gbWEodCl7cmV0dXJuIHQ/VCh0LGlhKHQpKTpbXX1mdW5jdGlvbiB5YSh0KXtyZXR1cm4gbnVsbD09dD9bXTpUKHQsb2EodCkpfWZ1bmN0aW9uIF9hKHQsZSxuKXtyZXR1cm4gbj09PVEmJihuPWUsZT1RKSxuIT09USYmKG49RHUobiksbj1uPT09bj9uOjApLGUhPT1RJiYoZT1EdShlKSxlPWU9PT1lP2U6MCksX24oRHUodCksZSxuKX1mdW5jdGlvbiBiYSh0LGUsbil7cmV0dXJuIGU9RHUoZSl8fDAsbj09PVE/KG49ZSxlPTApOm49RHUobil8fDAsdD1EdSh0KSxZbih0LGUsbil9ZnVuY3Rpb24geGEodCxlLG4pe2lmKG4mJiJib29sZWFuIiE9dHlwZW9mIG4mJllpKHQsZSxuKSYmKGU9bj1RKSxuPT09USYmKCJib29sZWFuIj09dHlwZW9mIGU/KG49ZSxlPVEpOiJib29sZWFuIj09dHlwZW9mIHQmJihuPXQsdD1RKSksdD09PVEmJmU9PT1RPyh0PTAsZT0xKToodD1EdSh0KXx8MCxlPT09UT8oZT10LHQ9MCk6ZT1EdShlKXx8MCksdD5lKXt2YXIgcj10O3Q9ZSxlPXJ9aWYobnx8dCUxfHxlJTEpe3ZhciBpPW5jKCk7cmV0dXJuIHRjKHQraSooZS10K05uKCIxZS0iKygoaSsiIikubGVuZ3RoLTEpKSksZSl9cmV0dXJuIFNyKHQsZSl9ZnVuY3Rpb24gd2EodCl7cmV0dXJuIFZmKFZ1KHQpLnRvTG93ZXJDYXNlKCkpfWZ1bmN0aW9uIFNhKHQpe3JldHVybiB0PVZ1KHQpLHQmJnQucmVwbGFjZShJZSxGKS5yZXBsYWNlKHhuLCIiKX1mdW5jdGlvbiBrYSh0LGUsbil7dD1WdSh0KSxlPUlyKGUpO3ZhciByPXQubGVuZ3RoO3JldHVybiBuPW49PT1RP3I6X24oQnUobiksMCxyKSxuLT1lLmxlbmd0aCxuPj0wJiZ0LmluZGV4T2YoZSxuKT09bn1mdW5jdGlvbiBqYSh0KXtyZXR1cm4gdD1WdSh0KSx0JiZmZS50ZXN0KHQpP3QucmVwbGFjZShsZSxQKTp0fWZ1bmN0aW9uIE9hKHQpe3JldHVybiB0PVZ1KHQpLHQmJl9lLnRlc3QodCk/dC5yZXBsYWNlKHllLCJcXCQmIik6dH1mdW5jdGlvbiBFYSh0LGUsbil7dD1WdSh0KSxlPUJ1KGUpO3ZhciByPWU/WCh0KTowO2lmKCFlfHxyPj1lKXJldHVybiB0O3ZhciBpPShlLXIpLzI7cmV0dXJuIHhpKEtsKGkpLG4pK3QreGkoR2woaSksbil9ZnVuY3Rpb24gTWEodCxlLG4pe3Q9VnUodCksZT1CdShlKTt2YXIgcj1lP1godCk6MDtyZXR1cm4gZSYmcjxlP3QreGkoZS1yLG4pOnR9ZnVuY3Rpb24gemEodCxlLG4pe3Q9VnUodCksZT1CdShlKTt2YXIgcj1lP1godCk6MDtyZXR1cm4gZSYmcjxlP3hpKGUtcixuKSt0OnR9ZnVuY3Rpb24gQWEodCxlLG4pe3JldHVybiBufHxudWxsPT1lP2U9MDplJiYoZT0rZSksdD1WdSh0KS5yZXBsYWNlKGJlLCIiKSxlYyh0LGV8fChFZS50ZXN0KHQpPzE2OjEwKSl9ZnVuY3Rpb24gQ2EodCxlLG4pe3JldHVybiBlPShuP1lpKHQsZSxuKTplPT09USk/MTpCdShlKSxqcihWdSh0KSxlKX1mdW5jdGlvbiBUYSgpe3ZhciB0PWFyZ3VtZW50cyxlPVZ1KHRbMF0pO3JldHVybiB0Lmxlbmd0aDwzP2U6cmMuY2FsbChlLHRbMV0sdFsyXSl9ZnVuY3Rpb24gSWEodCxlLG4pe3JldHVybiBuJiYibnVtYmVyIiE9dHlwZW9mIG4mJllpKHQsZSxuKSYmKGU9bj1RKSwobj1uPT09UT9NdDpuPj4+MCk/KHQ9VnUodCksdCYmKCJzdHJpbmciPT10eXBlb2YgZXx8bnVsbCE9ZSYmIXp1KGUpKSYmKGU9SXIoZSksIiI9PWUmJmtuLnRlc3QodCkpP1VyKFoodCksMCxuKTpvYy5jYWxsKHQsZSxuKSk6W119ZnVuY3Rpb24gTmEodCxlLG4pe3JldHVybiB0PVZ1KHQpLG49X24oQnUobiksMCx0Lmxlbmd0aCksdC5sYXN0SW5kZXhPZihJcihlKSxuKT09bn1mdW5jdGlvbiBMYSh0LG4scil7dmFyIGk9ZS50ZW1wbGF0ZVNldHRpbmdzO3ImJllpKHQsbixyKSYmKG49USksdD1WdSh0KSxuPWtmKHt9LG4saSxobik7dmFyIG8scyx1PWtmKHt9LG4uaW1wb3J0cyxpLmltcG9ydHMsaG4pLGE9aWEodSksbD1UKHUsYSksYz0wLGY9bi5pbnRlcnBvbGF0ZXx8TmUsaD0iX19wICs9ICciLGQ9d2woKG4uZXNjYXBlfHxOZSkuc291cmNlKyJ8IitmLnNvdXJjZSsifCIrKGY9PT1wZT9qZTpOZSkuc291cmNlKyJ8Iisobi5ldmFsdWF0ZXx8TmUpLnNvdXJjZSsifCQiLCJnIikscD0iLy8jIHNvdXJjZVVSTD0iKygic291cmNlVVJMImluIG4/bi5zb3VyY2VVUkw6ImxvZGFzaC50ZW1wbGF0ZVNvdXJjZXNbIisgKytFbisiXSIpKyJcbiI7dC5yZXBsYWNlKGQsZnVuY3Rpb24oZSxuLHIsaSx1LGEpe3JldHVybiByfHwocj1pKSxoKz10LnNsaWNlKGMsYSkucmVwbGFjZShMZSxCKSxuJiYobz0hMCxoKz0iJyArXG5fX2UoIituKyIpICtcbiciKSx1JiYocz0hMCxoKz0iJztcbiIrdSsiO1xuX19wICs9ICciKSxyJiYoaCs9IicgK1xuKChfX3QgPSAoIityKyIpKSA9PSBudWxsID8gJycgOiBfX3QpICtcbiciKSxjPWErZS5sZW5ndGgsZX0pLGgrPSInO1xuIjt2YXIgZz1uLnZhcmlhYmxlO2d8fChoPSJ3aXRoIChvYmopIHtcbiIraCsiXG59XG4iKSxoPShzP2gucmVwbGFjZShvZSwiIik6aCkucmVwbGFjZShzZSwiJDEiKS5yZXBsYWNlKHVlLCIkMTsiKSxoPSJmdW5jdGlvbigiKyhnfHwib2JqIikrIikge1xuIisoZz8iIjoib2JqIHx8IChvYmogPSB7fSk7XG4iKSsidmFyIF9fdCwgX19wID0gJyciKyhvPyIsIF9fZSA9IF8uZXNjYXBlIjoiIikrKHM/IiwgX19qID0gQXJyYXkucHJvdG90eXBlLmpvaW47XG5mdW5jdGlvbiBwcmludCgpIHsgX19wICs9IF9fai5jYWxsKGFyZ3VtZW50cywgJycpIH1cbiI6IjtcbiIpK2grInJldHVybiBfX3Bcbn0iO3ZhciB2PSRmKGZ1bmN0aW9uKCl7cmV0dXJuIEZ1bmN0aW9uKGEscCsicmV0dXJuICIraCkuYXBwbHkoUSxsKX0pO2lmKHYuc291cmNlPWgsZHUodikpdGhyb3cgdjtyZXR1cm4gdn1mdW5jdGlvbiBSYSh0KXtyZXR1cm4gVnUodCkudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiBxYSh0KXtyZXR1cm4gVnUodCkudG9VcHBlckNhc2UoKX1mdW5jdGlvbiBGYSh0LGUsbil7aWYodD1WdSh0KSx0JiYobnx8ZT09PVEpKXJldHVybiB0LnJlcGxhY2UoYmUsIiIpO2lmKCF0fHwhKGU9SXIoZSkpKXJldHVybiB0O3ZhciByPVoodCksaT1aKGUpO3JldHVybiBVcihyLE4ocixpKSxMKHIsaSkrMSkuam9pbigiIil9ZnVuY3Rpb24gUGEodCxlLG4pe2lmKHQ9VnUodCksdCYmKG58fGU9PT1RKSlyZXR1cm4gdC5yZXBsYWNlKHdlLCIiKTtpZighdHx8IShlPUlyKGUpKSlyZXR1cm4gdDt2YXIgcj1aKHQpO3JldHVybiBVcihyLDAsTChyLFooZSkpKzEpLmpvaW4oIiIpfWZ1bmN0aW9uIEJhKHQsZSxuKXtpZih0PVZ1KHQpLHQmJihufHxlPT09USkpcmV0dXJuIHQucmVwbGFjZSh4ZSwiIik7aWYoIXR8fCEoZT1JcihlKSkpcmV0dXJuIHQ7dmFyIHI9Wih0KTtyZXR1cm4gVXIocixOKHIsWihlKSkpLmpvaW4oIiIpfWZ1bmN0aW9uIFdhKHQsZSl7dmFyIG49bXQscj15dDtpZih5dShlKSl7dmFyIGk9InNlcGFyYXRvciJpbiBlP2Uuc2VwYXJhdG9yOmk7bj0ibGVuZ3RoImluIGU/QnUoZS5sZW5ndGgpOm4scj0ib21pc3Npb24iaW4gZT9JcihlLm9taXNzaW9uKTpyfXQ9VnUodCk7dmFyIG89dC5sZW5ndGg7aWYoa24udGVzdCh0KSl7dmFyIHM9Wih0KTtvPXMubGVuZ3RofWlmKG4+PW8pcmV0dXJuIHQ7dmFyIHU9bi1YKHIpO2lmKHU8MSlyZXR1cm4gcjt2YXIgYT1zP1VyKHMsMCx1KS5qb2luKCIiKTp0LnNsaWNlKDAsdSk7aWYoaT09PVEpcmV0dXJuIGErcjtpZihzJiYodSs9YS5sZW5ndGgtdSksenUoaSkpe2lmKHQuc2xpY2UodSkuc2VhcmNoKGkpKXt2YXIgbCxjPWE7Zm9yKGkuZ2xvYmFsfHwoaT13bChpLnNvdXJjZSxWdShPZS5leGVjKGkpKSsiZyIpKSxpLmxhc3RJbmRleD0wO2w9aS5leGVjKGMpOyl2YXIgZj1sLmluZGV4O2E9YS5zbGljZSgwLGY9PT1RP3U6Zil9fWVsc2UgaWYodC5pbmRleE9mKElyKGkpLHUpIT11KXt2YXIgaD1hLmxhc3RJbmRleE9mKGkpO2g+LTEmJihhPWEuc2xpY2UoMCxoKSl9cmV0dXJuIGErcn1mdW5jdGlvbiBEYSh0KXtyZXR1cm4gdD1WdSh0KSx0JiZjZS50ZXN0KHQpP3QucmVwbGFjZShhZSxKKTp0fWZ1bmN0aW9uIEhhKHQsZSxuKXtyZXR1cm4gdD1WdSh0KSxlPW4/UTplLGU9PT1RJiYoZT1qbi50ZXN0KHQpP1NuOlNlKSx0Lm1hdGNoKGUpfHxbXX1mdW5jdGlvbiBVYSh0KXt2YXIgZT10P3QubGVuZ3RoOjAsbj1SaSgpO3JldHVybiB0PWU/dih0LGZ1bmN0aW9uKHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0WzFdKXRocm93IG5ldyBTbChudCk7cmV0dXJuW24odFswXSksdFsxXV19KTpbXSwkcyhmdW5jdGlvbihuKXtmb3IodmFyIHI9LTE7KytyPGU7KXt2YXIgaT10W3JdO2lmKGEoaVswXSx0aGlzLG4pKXJldHVybiBhKGlbMV0sdGhpcyxuKX19KX1mdW5jdGlvbiBWYSh0KXtyZXR1cm4gQW4od24odCwhMCkpfWZ1bmN0aW9uICRhKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0fX1mdW5jdGlvbiBHYSh0KXtyZXR1cm4gdH1mdW5jdGlvbiBLYSh0KXtyZXR1cm4gc3IoImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDp3bih0LCEwKSl9ZnVuY3Rpb24gWGEodCl7cmV0dXJuIGZyKHduKHQsITApKX1mdW5jdGlvbiBaYSh0LGUpe3JldHVybiBocih0LHduKGUsITApKX1mdW5jdGlvbiBKYSh0LGUsbil7dmFyIHI9aWEoZSksaT0kbihlLHIpO251bGwhPW58fHl1KGUpJiYoaS5sZW5ndGh8fCFyLmxlbmd0aCl8fChuPWUsZT10LHQ9dGhpcyxpPSRuKGUsaWEoZSkpKTt2YXIgbz0hKHl1KG4pJiYiY2hhaW4iaW4gbiYmIW4uY2hhaW4pLHM9Z3UodCk7cmV0dXJuIGMoaSxmdW5jdGlvbihuKXt2YXIgcj1lW25dO3Rbbl09cixzJiYodC5wcm90b3R5cGVbbl09ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9fY2hhaW5fXztpZihvfHxlKXt2YXIgbj10KHRoaXMuX193cmFwcGVkX18pO3JldHVybihuLl9fYWN0aW9uc19fPXJpKHRoaXMuX19hY3Rpb25zX18pKS5wdXNoKHtmdW5jOnIsYXJnczphcmd1bWVudHMsdGhpc0FyZzp0fSksbi5fX2NoYWluX189ZSxufXJldHVybiByLmFwcGx5KHQsbShbdGhpcy52YWx1ZSgpXSxhcmd1bWVudHMpKX0pfSksdH1mdW5jdGlvbiBZYSgpe3JldHVybiBEbi5fPT09dGhpcyYmKERuLl89TmwpLHRoaXN9ZnVuY3Rpb24gUWEoKXt9ZnVuY3Rpb24gdGwodCl7cmV0dXJuIHQ9QnUodCksJHMoZnVuY3Rpb24oZSl7cmV0dXJuIGdyKGUsdCl9KX1mdW5jdGlvbiBlbCh0KXtyZXR1cm4gUWkodCk/X3IoY28odCkpOmJyKHQpfWZ1bmN0aW9uIG5sKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09dD9ROkduKHQsZSl9fWZ1bmN0aW9uIHJsKCl7cmV0dXJuW119ZnVuY3Rpb24gaWwoKXtyZXR1cm4hMX1mdW5jdGlvbiBvbCgpe3JldHVybnt9fWZ1bmN0aW9uIHNsKCl7cmV0dXJuIiJ9ZnVuY3Rpb24gdWwoKXtyZXR1cm4hMH1mdW5jdGlvbiBhbCh0LGUpe2lmKHQ9QnUodCksdDwxfHx0Pmp0KXJldHVybltdO3ZhciBuPU10LHI9dGModCxNdCk7ZT1SaShlKSx0LT1NdDtmb3IodmFyIGk9eihyLGUpOysrbjx0OyllKG4pO3JldHVybiBpfWZ1bmN0aW9uIGxsKHQpe3JldHVybiB5Zih0KT92KHQsY28pOkl1KHQpP1t0XTpyaShOYyh0KSl9ZnVuY3Rpb24gY2wodCl7dmFyIGU9KytDbDtyZXR1cm4gVnUodCkrZX1mdW5jdGlvbiBmbCh0KXtyZXR1cm4gdCYmdC5sZW5ndGg/cW4odCxHYSxYbik6UX1mdW5jdGlvbiBobCh0LGUpe3JldHVybiB0JiZ0Lmxlbmd0aD9xbih0LFJpKGUpLFhuKTpRfWZ1bmN0aW9uIGRsKHQpe3JldHVybiBqKHQsR2EpfWZ1bmN0aW9uIHBsKHQsZSl7cmV0dXJuIGoodCxSaShlKSl9ZnVuY3Rpb24gZ2wodCl7cmV0dXJuIHQmJnQubGVuZ3RoP3FuKHQsR2EsbHIpOlF9ZnVuY3Rpb24gdmwodCxlKXtyZXR1cm4gdCYmdC5sZW5ndGg/cW4odCxSaShlKSxscik6UX1mdW5jdGlvbiBtbCh0KXtyZXR1cm4gdCYmdC5sZW5ndGg/TSh0LEdhKTowfWZ1bmN0aW9uIHlsKHQsZSl7cmV0dXJuIHQmJnQubGVuZ3RoP00odCxSaShlKSk6MH10PXQ/SG4uZGVmYXVsdHMoe30sdCxIbi5waWNrKERuLE9uKSk6RG47dmFyIF9sPXQuRGF0ZSxibD10LkVycm9yLHhsPXQuTWF0aCx3bD10LlJlZ0V4cCxTbD10LlR5cGVFcnJvcixrbD10LkFycmF5LnByb3RvdHlwZSxqbD10Lk9iamVjdC5wcm90b3R5cGUsT2w9dC5TdHJpbmcucHJvdG90eXBlLEVsPXRbIl9fY29yZS1qc19zaGFyZWRfXyJdLE1sPWZ1bmN0aW9uKCl7dmFyIHQ9L1teLl0rJC8uZXhlYyhFbCYmRWwua2V5cyYmRWwua2V5cy5JRV9QUk9UT3x8IiIpO3JldHVybiB0PyJTeW1ib2woc3JjKV8xLiIrdDoiIn0oKSx6bD10LkZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZyxBbD1qbC5oYXNPd25Qcm9wZXJ0eSxDbD0wLFRsPXpsLmNhbGwoT2JqZWN0KSxJbD1qbC50b1N0cmluZyxObD1Ebi5fLExsPXdsKCJeIit6bC5jYWxsKEFsKS5yZXBsYWNlKHllLCJcXCQmIikucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXCgpfCBmb3IgLis/KD89XFxcXSkvZywiJDEuKj8iKSsiJCIpLFJsPUZuP3QuQnVmZmVyOlEscWw9dC5SZWZsZWN0LEZsPXQuU3ltYm9sLFBsPXQuVWludDhBcnJheSxCbD1xbD9xbC5lbnVtZXJhdGU6USxXbD1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzLERsPSJzeW1ib2wiPT1vKERsPUZsJiZGbC5pdGVyYXRvcik/RGw6USxIbD1PYmplY3QuY3JlYXRlLFVsPWpsLnByb3BlcnR5SXNFbnVtZXJhYmxlLFZsPWtsLnNwbGljZSwkbD1mdW5jdGlvbihlLG4pe3JldHVybiB0LnNldFRpbWVvdXQuY2FsbChEbixlLG4pfSxHbD14bC5jZWlsLEtsPXhsLmZsb29yLFhsPU9iamVjdC5nZXRQcm90b3R5cGVPZixabD10LmlzRmluaXRlLEpsPWtsLmpvaW4sWWw9T2JqZWN0LmtleXMsUWw9eGwubWF4LHRjPXhsLm1pbixlYz10LnBhcnNlSW50LG5jPXhsLnJhbmRvbSxyYz1PbC5yZXBsYWNlLGljPWtsLnJldmVyc2Usb2M9T2wuc3BsaXQsc2M9UGkodCwiRGF0YVZpZXciKSx1Yz1QaSh0LCJNYXAiKSxhYz1QaSh0LCJQcm9taXNlIiksbGM9UGkodCwiU2V0IiksY2M9UGkodCwiV2Vha01hcCIpLGZjPVBpKE9iamVjdCwiY3JlYXRlIiksaGM9Y2MmJm5ldyBjYyxkYz0hVWwuY2FsbCh7dmFsdWVPZjoxfSwidmFsdWVPZiIpLHBjPXt9LGdjPWZvKHNjKSx2Yz1mbyh1YyksbWM9Zm8oYWMpLHljPWZvKGxjKSxfYz1mbyhjYyksYmM9Rmw/RmwucHJvdG90eXBlOlEseGM9YmM/YmMudmFsdWVPZjpRLHdjPWJjP2JjLnRvU3RyaW5nOlE7ZS50ZW1wbGF0ZVNldHRpbmdzPXtlc2NhcGU6aGUsZXZhbHVhdGU6ZGUsaW50ZXJwb2xhdGU6cGUsdmFyaWFibGU6IiIsaW1wb3J0czp7XzplfX0sZS5wcm90b3R5cGU9bi5wcm90b3R5cGUsZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxyLnByb3RvdHlwZT1DbihuLnByb3RvdHlwZSksci5wcm90b3R5cGUuY29uc3RydWN0b3I9cixpLnByb3RvdHlwZT1DbihuLnByb3RvdHlwZSksaS5wcm90b3R5cGUuY29uc3RydWN0b3I9aSxGZS5wcm90b3R5cGUuY2xlYXI9UGUsRmUucHJvdG90eXBlWyJkZWxldGUiXT1CZSxGZS5wcm90b3R5cGUuZ2V0PVdlLEZlLnByb3RvdHlwZS5oYXM9RGUsRmUucHJvdG90eXBlLnNldD1IZSxVZS5wcm90b3R5cGUuY2xlYXI9VmUsVWUucHJvdG90eXBlWyJkZWxldGUiXT0kZSxVZS5wcm90b3R5cGUuZ2V0PUdlLFVlLnByb3RvdHlwZS5oYXM9S2UsVWUucHJvdG90eXBlLnNldD1YZSxaZS5wcm90b3R5cGUuY2xlYXI9SmUsWmUucHJvdG90eXBlWyJkZWxldGUiXT1ZZSxaZS5wcm90b3R5cGUuZ2V0PVFlLFplLnByb3RvdHlwZS5oYXM9dG4sWmUucHJvdG90eXBlLnNldD1lbixubi5wcm90b3R5cGUuYWRkPW5uLnByb3RvdHlwZS5wdXNoPXJuLG5uLnByb3RvdHlwZS5oYXM9b24sc24ucHJvdG90eXBlLmNsZWFyPXVuLHNuLnByb3RvdHlwZVsiZGVsZXRlIl09YW4sc24ucHJvdG90eXBlLmdldD1sbixzbi5wcm90b3R5cGUuaGFzPWNuLHNuLnByb3RvdHlwZS5zZXQ9Zm47dmFyIFNjPWFpKFVuKSxrYz1haShWbiwhMCksamM9bGkoKSxPYz1saSghMCk7QmwmJiFVbC5jYWxsKHt2YWx1ZU9mOjF9LCJ2YWx1ZU9mIikmJihhcj1mdW5jdGlvbih0KXtyZXR1cm4gVShCbCh0KSl9KTt2YXIgRWM9aGM/ZnVuY3Rpb24odCxlKXtyZXR1cm4gaGMuc2V0KHQsZSksdH06R2EsTWM9bGMmJjEvRyhuZXcgbGMoWywtMF0pKVsxXT09a3Q/ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBsYyh0KX06UWEsemM9aGM/ZnVuY3Rpb24odCl7cmV0dXJuIGhjLmdldCh0KX06UWEsQWM9X3IoImxlbmd0aCIpO1dsfHwoV2k9cmwpO3ZhciBDYz1XbD9mdW5jdGlvbih0KXtmb3IodmFyIGU9W107dDspbShlLFdpKHQpKSx0PUJpKHQpO3JldHVybiBlfTpXaTsoc2MmJkRpKG5ldyBzYyhuZXcgQXJyYXlCdWZmZXIoMSkpKSE9WHR8fHVjJiZEaShuZXcgdWMpIT1GdHx8YWMmJkRpKGFjLnJlc29sdmUoKSkhPVd0fHxsYyYmRGkobmV3IGxjKSE9SHR8fGNjJiZEaShuZXcgY2MpIT0kdCkmJihEaT1mdW5jdGlvbih0KXt2YXIgZT1JbC5jYWxsKHQpLG49ZT09QnQ/dC5jb25zdHJ1Y3RvcjpRLHI9bj9mbyhuKTpRO2lmKHIpc3dpdGNoKHIpe2Nhc2UgZ2M6cmV0dXJuIFh0O2Nhc2UgdmM6cmV0dXJuIEZ0O2Nhc2UgbWM6cmV0dXJuIFd0O2Nhc2UgeWM6cmV0dXJuIEh0O2Nhc2UgX2M6cmV0dXJuICR0fXJldHVybiBlfSk7dmFyIFRjPUVsP2d1OmlsLEljPWZ1bmN0aW9uKCl7dmFyIHQ9MCxlPTA7cmV0dXJuIGZ1bmN0aW9uKG4scil7dmFyIGk9THMoKSxvPWJ0LShpLWUpO2lmKGU9aSxvPjApe2lmKCsrdD49X3QpcmV0dXJuIG59ZWxzZSB0PTA7cmV0dXJuIEVjKG4scil9fSgpLE5jPUhzKGZ1bmN0aW9uKHQpe3ZhciBlPVtdO3JldHVybiBWdSh0KS5yZXBsYWNlKG1lLGZ1bmN0aW9uKHQsbixyLGkpe2UucHVzaChyP2kucmVwbGFjZShrZSwiJDEiKTpufHx0KX0pLGV9KSxMYz0kcyhmdW5jdGlvbih0LGUpe3JldHVybiBzdSh0KT9Jbih0LFduKGUsMSxzdSwhMCkpOltdfSksUmM9JHMoZnVuY3Rpb24odCxlKXt2YXIgbj1UbyhlKTtyZXR1cm4gc3UobikmJihuPVEpLHN1KHQpP0luKHQsV24oZSwxLHN1LCEwKSxSaShuKSk6W119KSxxYz0kcyhmdW5jdGlvbih0LGUpe3ZhciBuPVRvKGUpO3JldHVybiBzdShuKSYmKG49USksc3UodCk/SW4odCxXbihlLDEsc3UsITApLFEsbik6W119KSxGYz0kcyhmdW5jdGlvbih0KXt2YXIgZT12KHQsV3IpO3JldHVybiBlLmxlbmd0aCYmZVswXT09PXRbMF0/UW4oZSk6W119KSxQYz0kcyhmdW5jdGlvbih0KXt2YXIgZT1Ubyh0KSxuPXYodCxXcik7cmV0dXJuIGU9PT1UbyhuKT9lPVE6bi5wb3AoKSxuLmxlbmd0aCYmblswXT09PXRbMF0/UW4obixSaShlKSk6W119KSxCYz0kcyhmdW5jdGlvbih0KXt2YXIgZT1Ubyh0KSxuPXYodCxXcik7cmV0dXJuIGU9PT1UbyhuKT9lPVE6bi5wb3AoKSxuLmxlbmd0aCYmblswXT09PXRbMF0/UW4obixRLGUpOltdfSksV2M9JHMoTG8pLERjPSRzKGZ1bmN0aW9uKHQsZSl7ZT1XbihlLDEpO3ZhciBuPXQ/dC5sZW5ndGg6MCxyPXluKHQsZSk7cmV0dXJuIHdyKHQsdihlLGZ1bmN0aW9uKHQpe3JldHVybiBKaSh0LG4pPyt0OnR9KS5zb3J0KFFyKSkscn0pLEhjPSRzKGZ1bmN0aW9uKHQpe3JldHVybiBOcihXbih0LDEsc3UsITApKX0pLFVjPSRzKGZ1bmN0aW9uKHQpe3ZhciBlPVRvKHQpO3JldHVybiBzdShlKSYmKGU9USksTnIoV24odCwxLHN1LCEwKSxSaShlKSl9KSxWYz0kcyhmdW5jdGlvbih0KXt2YXIgZT1Ubyh0KTtyZXR1cm4gc3UoZSkmJihlPVEpLE5yKFduKHQsMSxzdSwhMCksUSxlKX0pLCRjPSRzKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHN1KHQpP0luKHQsZSk6W119KSxHYz0kcyhmdW5jdGlvbih0KXtyZXR1cm4gUHIoZCh0LHN1KSl9KSxLYz0kcyhmdW5jdGlvbih0KXt2YXIgZT1Ubyh0KTtyZXR1cm4gc3UoZSkmJihlPVEpLFByKGQodCxzdSksUmkoZSkpfSksWGM9JHMoZnVuY3Rpb24odCl7dmFyIGU9VG8odCk7cmV0dXJuIHN1KGUpJiYoZT1RKSxQcihkKHQsc3UpLFEsZSl9KSxaYz0kcyhycyksSmM9JHMoZnVuY3Rpb24odCl7dmFyIGU9dC5sZW5ndGgsbj1lPjE/dFtlLTFdOlE7cmV0dXJuIG49ImZ1bmN0aW9uIj09dHlwZW9mIG4/KHQucG9wKCksbik6USxpcyh0LG4pfSksWWM9JHMoZnVuY3Rpb24odCl7dD1Xbih0LDEpO3ZhciBlPXQubGVuZ3RoLG49ZT90WzBdOjAsbz10aGlzLl9fd3JhcHBlZF9fLHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHluKGUsdCl9O3JldHVybiEoZT4xfHx0aGlzLl9fYWN0aW9uc19fLmxlbmd0aCkmJm8gaW5zdGFuY2VvZiBpJiZKaShuKT8obz1vLnNsaWNlKG4sK24rKGU/MTowKSksby5fX2FjdGlvbnNfXy5wdXNoKHtmdW5jOmxzLGFyZ3M6W3NdLHRoaXNBcmc6UX0pLG5ldyByKG8sdGhpcy5fX2NoYWluX18pLnRocnUoZnVuY3Rpb24odCl7cmV0dXJuIGUmJiF0Lmxlbmd0aCYmdC5wdXNoKFEpLHR9KSk6dGhpcy50aHJ1KHMpfSksUWM9c2koZnVuY3Rpb24odCxlLG4pe0FsLmNhbGwodCxuKT8rK3Rbbl06dFtuXT0xfSksdGY9Z2kod28pLGVmPWdpKFNvKSxuZj1zaShmdW5jdGlvbih0LGUsbil7QWwuY2FsbCh0LG4pP3Rbbl0ucHVzaChlKTp0W25dPVtlXX0pLHJmPSRzKGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj0tMSxpPSJmdW5jdGlvbiI9PXR5cGVvZiBlLG89UWkoZSkscz1vdSh0KT9BcnJheSh0Lmxlbmd0aCk6W107cmV0dXJuIFNjKHQsZnVuY3Rpb24odCl7dmFyIHU9aT9lOm8mJm51bGwhPXQ/dFtlXTpRO3NbKytyXT11P2EodSx0LG4pOmVyKHQsZSxuKX0pLHN9KSxvZj1zaShmdW5jdGlvbih0LGUsbil7dFtuXT1lfSksc2Y9c2koZnVuY3Rpb24odCxlLG4pe3Rbbj8wOjFdLnB1c2goZSl9LGZ1bmN0aW9uKCl7cmV0dXJuW1tdLFtdXX0pLHVmPSRzKGZ1bmN0aW9uKHQsZSl7aWYobnVsbD09dClyZXR1cm5bXTt2YXIgbj1lLmxlbmd0aDtyZXR1cm4gbj4xJiZZaSh0LGVbMF0sZVsxXSk/ZT1bXTpuPjImJllpKGVbMF0sZVsxXSxlWzJdKSYmKGU9W2VbMF1dKSxlPTE9PWUubGVuZ3RoJiZ5ZihlWzBdKT9lWzBdOlduKGUsMSxaaSksdnIodCxlLFtdKX0pLGFmPSRzKGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1vdDtpZihuLmxlbmd0aCl7dmFyIGk9JChuLExpKGFmKSk7cnw9Y3R9cmV0dXJuIE1pKHQscixlLG4saSl9KSxsZj0kcyhmdW5jdGlvbih0LGUsbil7dmFyIHI9b3R8c3Q7aWYobi5sZW5ndGgpe3ZhciBpPSQobixMaShsZikpO3J8PWN0fXJldHVybiBNaShlLHIsdCxuLGkpfSksY2Y9JHMoZnVuY3Rpb24odCxlKXtyZXR1cm4gVG4odCwxLGUpfSksZmY9JHMoZnVuY3Rpb24odCxlLG4pe3JldHVybiBUbih0LER1KGUpfHwwLG4pfSk7SHMuQ2FjaGU9WmU7dmFyIGhmPSRzKGZ1bmN0aW9uKHQsZSl7ZT0xPT1lLmxlbmd0aCYmeWYoZVswXSk/dihlWzBdLEMoUmkoKSkpOnYoV24oZSwxLFppKSxDKFJpKCkpKTt2YXIgbj1lLmxlbmd0aDtyZXR1cm4gJHMoZnVuY3Rpb24ocil7Zm9yKHZhciBpPS0xLG89dGMoci5sZW5ndGgsbik7KytpPG87KXJbaV09ZVtpXS5jYWxsKHRoaXMscltpXSk7cmV0dXJuIGEodCx0aGlzLHIpfSl9KSxkZj0kcyhmdW5jdGlvbih0LGUpe3JldHVybiBNaSh0LGN0LFEsZSwkKGUsTGkoZGYpKSl9KSxwZj0kcyhmdW5jdGlvbih0LGUpe3JldHVybiBNaSh0LGZ0LFEsZSwkKGUsTGkocGYpKSl9KSxnZj0kcyhmdW5jdGlvbih0LGUpe3JldHVybiBNaSh0LGR0LFEsUSxRLFduKGUsMSkpfSksdmY9a2koWG4pLG1mPWtpKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ+PWV9KSx5Zj1BcnJheS5pc0FycmF5LF9mPVJsP2Z1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgUmx9OmlsLGJmPWtpKGxyKSx4Zj1raShmdW5jdGlvbih0LGUpe3JldHVybiB0PD1lfSksd2Y9dWkoZnVuY3Rpb24odCxlKXtpZihkY3x8cm8oZSl8fG91KGUpKXJldHVybiB2b2lkIGlpKGUsaWEoZSksdCk7Zm9yKHZhciBuIGluIGUpQWwuY2FsbChlLG4pJiZwbih0LG4sZVtuXSl9KSxTZj11aShmdW5jdGlvbih0LGUpe2lmKGRjfHxybyhlKXx8b3UoZSkpcmV0dXJuIHZvaWQgaWkoZSxvYShlKSx0KTtmb3IodmFyIG4gaW4gZSlwbih0LG4sZVtuXSl9KSxrZj11aShmdW5jdGlvbih0LGUsbixyKXtpaShlLG9hKGUpLHQscil9KSxqZj11aShmdW5jdGlvbih0LGUsbixyKXtpaShlLGlhKGUpLHQscil9KSxPZj0kcyhmdW5jdGlvbih0LGUpe3JldHVybiB5bih0LFduKGUsMSkpfSksRWY9JHMoZnVuY3Rpb24odCl7cmV0dXJuIHQucHVzaChRLGhuKSxhKGtmLFEsdCl9KSxNZj0kcyhmdW5jdGlvbih0KXtyZXR1cm4gdC5wdXNoKFEsdW8pLGEoSWYsUSx0KX0pLHpmPXlpKGZ1bmN0aW9uKHQsZSxuKXt0W2VdPW59LCRhKEdhKSksQWY9eWkoZnVuY3Rpb24odCxlLG4pe0FsLmNhbGwodCxlKT90W2VdLnB1c2gobik6dFtlXT1bbl19LFJpKSxDZj0kcyhlciksVGY9dWkoZnVuY3Rpb24odCxlLG4pe2RyKHQsZSxuKX0pLElmPXVpKGZ1bmN0aW9uKHQsZSxuLHIpe2RyKHQsZSxuLHIpfSksTmY9JHMoZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbD09dD97fTooZT12KFduKGUsMSksY28pLG1yKHQsSW4oSWkodCksZSkpKX0pLExmPSRzKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGw9PXQ/e306bXIodCx2KFduKGUsMSksY28pKX0pLFJmPUVpKGlhKSxxZj1FaShvYSksRmY9aGkoZnVuY3Rpb24odCxlLG4pe3JldHVybiBlPWUudG9Mb3dlckNhc2UoKSx0KyhuP3dhKGUpOmUpfSksUGY9aGkoZnVuY3Rpb24odCxlLG4pe3JldHVybiB0KyhuPyItIjoiIikrZS50b0xvd2VyQ2FzZSgpfSksQmY9aGkoZnVuY3Rpb24odCxlLG4pe3JldHVybiB0KyhuPyIgIjoiIikrZS50b0xvd2VyQ2FzZSgpfSksV2Y9ZmkoInRvTG93ZXJDYXNlIiksRGY9aGkoZnVuY3Rpb24odCxlLG4pe3JldHVybiB0KyhuPyJfIjoiIikrZS50b0xvd2VyQ2FzZSgpfSksSGY9aGkoZnVuY3Rpb24odCxlLG4pe3JldHVybiB0KyhuPyIgIjoiIikrVmYoZSl9KSxVZj1oaShmdW5jdGlvbih0LGUsbil7cmV0dXJuIHQrKG4/IiAiOiIiKStlLnRvVXBwZXJDYXNlKCl9KSxWZj1maSgidG9VcHBlckNhc2UiKSwkZj0kcyhmdW5jdGlvbih0LGUpe3RyeXtyZXR1cm4gYSh0LFEsZSl9Y2F0Y2gobil7cmV0dXJuIGR1KG4pP246bmV3IGJsKG4pfX0pLEdmPSRzKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGMoV24oZSwxKSxmdW5jdGlvbihlKXtlPWNvKGUpLHRbZV09YWYodFtlXSx0KX0pLHR9KSxLZj12aSgpLFhmPXZpKCEwKSxaZj0kcyhmdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gZXIobix0LGUpfX0pLEpmPSRzKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBlcih0LG4sZSl9fSksWWY9YmkodiksUWY9YmkoaCksdGg9YmkoYiksZWg9U2koKSxuaD1TaSghMCkscmg9X2koZnVuY3Rpb24odCxlKXtyZXR1cm4gdCtlfSksaWg9T2koImNlaWwiKSxvaD1faShmdW5jdGlvbih0LGUpe3JldHVybiB0L2V9KSxzaD1PaSgiZmxvb3IiKSx1aD1faShmdW5jdGlvbih0LGUpe3JldHVybiB0KmV9KSxhaD1PaSgicm91bmQiKSxsaD1faShmdW5jdGlvbih0LGUpe3JldHVybiB0LWV9KTtyZXR1cm4gZS5hZnRlcj1ScyxlLmFyeT1xcyxlLmFzc2lnbj13ZixlLmFzc2lnbkluPVNmLGUuYXNzaWduSW5XaXRoPWtmLGUuYXNzaWduV2l0aD1qZixlLmF0PU9mLGUuYmVmb3JlPUZzLGUuYmluZD1hZixlLmJpbmRBbGw9R2YsZS5iaW5kS2V5PWxmLGUuY2FzdEFycmF5PUpzLGUuY2hhaW49dXMsZS5jaHVuaz1wbyxlLmNvbXBhY3Q9Z28sZS5jb25jYXQ9dm8sZS5jb25kPVVhLGUuY29uZm9ybXM9VmEsZS5jb25zdGFudD0kYSxlLmNvdW50Qnk9UWMsZS5jcmVhdGU9JHUsZS5jdXJyeT1QcyxlLmN1cnJ5UmlnaHQ9QnMsZS5kZWJvdW5jZT1XcyxlLmRlZmF1bHRzPUVmLGUuZGVmYXVsdHNEZWVwPU1mLGUuZGVmZXI9Y2YsZS5kZWxheT1mZixlLmRpZmZlcmVuY2U9TGMsZS5kaWZmZXJlbmNlQnk9UmMsZS5kaWZmZXJlbmNlV2l0aD1xYyxlLmRyb3A9bW8sZS5kcm9wUmlnaHQ9eW8sZS5kcm9wUmlnaHRXaGlsZT1fbyxlLmRyb3BXaGlsZT1ibyxlLmZpbGw9eG8sZS5maWx0ZXI9eXMsZS5mbGF0TWFwPV9zLGUuZmxhdE1hcERlZXA9YnMsZS5mbGF0TWFwRGVwdGg9eHMsZS5mbGF0dGVuPWtvLGUuZmxhdHRlbkRlZXA9am8sZS5mbGF0dGVuRGVwdGg9T28sZS5mbGlwPURzLGUuZmxvdz1LZixlLmZsb3dSaWdodD1YZixlLmZyb21QYWlycz1FbyxlLmZ1bmN0aW9ucz1RdSxlLmZ1bmN0aW9uc0luPXRhLGUuZ3JvdXBCeT1uZixlLmluaXRpYWw9QW8sZS5pbnRlcnNlY3Rpb249RmMsZS5pbnRlcnNlY3Rpb25CeT1QYyxlLmludGVyc2VjdGlvbldpdGg9QmMsZS5pbnZlcnQ9emYsZS5pbnZlcnRCeT1BZixlLmludm9rZU1hcD1yZixlLml0ZXJhdGVlPUthLGUua2V5Qnk9b2YsZS5rZXlzPWlhLGUua2V5c0luPW9hLGUubWFwPWpzLGUubWFwS2V5cz1zYSxlLm1hcFZhbHVlcz11YSxlLm1hdGNoZXM9WGEsZS5tYXRjaGVzUHJvcGVydHk9WmEsZS5tZW1vaXplPUhzLGUubWVyZ2U9VGYsZS5tZXJnZVdpdGg9SWYsZS5tZXRob2Q9WmYsZS5tZXRob2RPZj1KZixlLm1peGluPUphLGUubmVnYXRlPVVzLGUubnRoQXJnPXRsLGUub21pdD1OZixlLm9taXRCeT1hYSxlLm9uY2U9VnMsZS5vcmRlckJ5PU9zLGUub3Zlcj1ZZixlLm92ZXJBcmdzPWhmLGUub3ZlckV2ZXJ5PVFmLGUub3ZlclNvbWU9dGgsZS5wYXJ0aWFsPWRmLGUucGFydGlhbFJpZ2h0PXBmLGUucGFydGl0aW9uPXNmLGUucGljaz1MZixlLnBpY2tCeT1sYSxlLnByb3BlcnR5PWVsLGUucHJvcGVydHlPZj1ubCxlLnB1bGw9V2MsZS5wdWxsQWxsPUxvLGUucHVsbEFsbEJ5PVJvLGUucHVsbEFsbFdpdGg9cW8sZS5wdWxsQXQ9RGMsZS5yYW5nZT1laCxlLnJhbmdlUmlnaHQ9bmgsZS5yZWFyZz1nZixlLnJlamVjdD16cyxlLnJlbW92ZT1GbyxlLnJlc3Q9JHMsZS5yZXZlcnNlPVBvLGUuc2FtcGxlU2l6ZT1DcyxlLnNldD1mYSxlLnNldFdpdGg9aGEsZS5zaHVmZmxlPVRzLGUuc2xpY2U9Qm8sZS5zb3J0Qnk9dWYsZS5zb3J0ZWRVbmlxPUdvLGUuc29ydGVkVW5pcUJ5PUtvLGUuc3BsaXQ9SWEsZS5zcHJlYWQ9R3MsZS50YWlsPVhvLGUudGFrZT1abyxlLnRha2VSaWdodD1KbyxlLnRha2VSaWdodFdoaWxlPVlvLGUudGFrZVdoaWxlPVFvLGUudGFwPWFzLGUudGhyb3R0bGU9S3MsZS50aHJ1PWxzLGUudG9BcnJheT1GdSxlLnRvUGFpcnM9UmYsZS50b1BhaXJzSW49cWYsZS50b1BhdGg9bGwsZS50b1BsYWluT2JqZWN0PUh1LGUudHJhbnNmb3JtPWRhLGUudW5hcnk9WHMsZS51bmlvbj1IYyxlLnVuaW9uQnk9VWMsZS51bmlvbldpdGg9VmMsZS51bmlxPXRzLGUudW5pcUJ5PWVzLGUudW5pcVdpdGg9bnMsZS51bnNldD1wYSxlLnVuemlwPXJzLGUudW56aXBXaXRoPWlzLGUudXBkYXRlPWdhLGUudXBkYXRlV2l0aD12YSxlLnZhbHVlcz1tYSxlLnZhbHVlc0luPXlhLGUud2l0aG91dD0kYyxlLndvcmRzPUhhLGUud3JhcD1acyxlLnhvcj1HYyxlLnhvckJ5PUtjLGUueG9yV2l0aD1YYyxlLnppcD1aYyxlLnppcE9iamVjdD1vcyxlLnppcE9iamVjdERlZXA9c3MsZS56aXBXaXRoPUpjLGUuZW50cmllcz1SZixlLmVudHJpZXNJbj1xZixlLmV4dGVuZD1TZixlLmV4dGVuZFdpdGg9a2YsSmEoZSxlKSxlLmFkZD1yaCxlLmF0dGVtcHQ9JGYsZS5jYW1lbENhc2U9RmYsZS5jYXBpdGFsaXplPXdhLGUuY2VpbD1paCxlLmNsYW1wPV9hLGUuY2xvbmU9WXMsZS5jbG9uZURlZXA9dHUsZS5jbG9uZURlZXBXaXRoPWV1LGUuY2xvbmVXaXRoPVFzLGUuZGVidXJyPVNhLGUuZGl2aWRlPW9oLGUuZW5kc1dpdGg9a2EsZS5lcT1udSxlLmVzY2FwZT1qYSxlLmVzY2FwZVJlZ0V4cD1PYSxlLmV2ZXJ5PW1zLGUuZmluZD10ZixlLmZpbmRJbmRleD13byxlLmZpbmRLZXk9R3UsZS5maW5kTGFzdD1lZixlLmZpbmRMYXN0SW5kZXg9U28sZS5maW5kTGFzdEtleT1LdSxlLmZsb29yPXNoLGUuZm9yRWFjaD13cyxlLmZvckVhY2hSaWdodD1TcyxlLmZvckluPVh1LGUuZm9ySW5SaWdodD1adSxlLmZvck93bj1KdSxlLmZvck93blJpZ2h0PVl1LGUuZ2V0PWVhLGUuZ3Q9dmYsZS5ndGU9bWYsZS5oYXM9bmEsZS5oYXNJbj1yYSxlLmhlYWQ9TW8sZS5pZGVudGl0eT1HYSxlLmluY2x1ZGVzPWtzLGUuaW5kZXhPZj16byxlLmluUmFuZ2U9YmEsZS5pbnZva2U9Q2YsZS5pc0FyZ3VtZW50cz1ydSxlLmlzQXJyYXk9eWYsZS5pc0FycmF5QnVmZmVyPWl1LGUuaXNBcnJheUxpa2U9b3UsZS5pc0FycmF5TGlrZU9iamVjdD1zdSxlLmlzQm9vbGVhbj11dSxlLmlzQnVmZmVyPV9mLGUuaXNEYXRlPWF1LGUuaXNFbGVtZW50PWx1LGUuaXNFbXB0eT1jdSxlLmlzRXF1YWw9ZnUsZS5pc0VxdWFsV2l0aD1odSxlLmlzRXJyb3I9ZHUsZS5pc0Zpbml0ZT1wdSxlLmlzRnVuY3Rpb249Z3UsZS5pc0ludGVnZXI9dnUsZS5pc0xlbmd0aD1tdSxlLmlzTWFwPWJ1LGUuaXNNYXRjaD14dSxlLmlzTWF0Y2hXaXRoPXd1LGUuaXNOYU49U3UsZS5pc05hdGl2ZT1rdSxlLmlzTmlsPU91LGUuaXNOdWxsPWp1LGUuaXNOdW1iZXI9RXUsZS5pc09iamVjdD15dSxlLmlzT2JqZWN0TGlrZT1fdSxlLmlzUGxhaW5PYmplY3Q9TXUsZS5pc1JlZ0V4cD16dSxlLmlzU2FmZUludGVnZXI9QXUsZS5pc1NldD1DdSxlLmlzU3RyaW5nPVR1LGUuaXNTeW1ib2w9SXUsZS5pc1R5cGVkQXJyYXk9TnUsZS5pc1VuZGVmaW5lZD1MdSxlLmlzV2Vha01hcD1SdSxlLmlzV2Vha1NldD1xdSxlLmpvaW49Q28sZS5rZWJhYkNhc2U9UGYsZS5sYXN0PVRvLGUubGFzdEluZGV4T2Y9SW8sZS5sb3dlckNhc2U9QmYsZS5sb3dlckZpcnN0PVdmLGUubHQ9YmYsZS5sdGU9eGYsZS5tYXg9ZmwsZS5tYXhCeT1obCxlLm1lYW49ZGwsZS5tZWFuQnk9cGwsZS5taW49Z2wsZS5taW5CeT12bCxlLnN0dWJBcnJheT1ybCxlLnN0dWJGYWxzZT1pbCxlLnN0dWJPYmplY3Q9b2wsZS5zdHViU3RyaW5nPXNsLGUuc3R1YlRydWU9dWwsZS5tdWx0aXBseT11aCxlLm50aD1ObyxlLm5vQ29uZmxpY3Q9WWEsZS5ub29wPVFhLGUubm93PUxzLGUucGFkPUVhLGUucGFkRW5kPU1hLGUucGFkU3RhcnQ9emEsZS5wYXJzZUludD1BYSxlLnJhbmRvbT14YSxlLnJlZHVjZT1FcyxlLnJlZHVjZVJpZ2h0PU1zLGUucmVwZWF0PUNhLGUucmVwbGFjZT1UYSxlLnJlc3VsdD1jYSxlLnJvdW5kPWFoLGUucnVuSW5Db250ZXh0PVksZS5zYW1wbGU9QXMsZS5zaXplPUlzLGUuc25ha2VDYXNlPURmLGUuc29tZT1OcyxlLnNvcnRlZEluZGV4PVdvLGUuc29ydGVkSW5kZXhCeT1EbyxlLnNvcnRlZEluZGV4T2Y9SG8sZS5zb3J0ZWRMYXN0SW5kZXg9VW8sZS5zb3J0ZWRMYXN0SW5kZXhCeT1WbyxlLnNvcnRlZExhc3RJbmRleE9mPSRvLGUuc3RhcnRDYXNlPUhmLGUuc3RhcnRzV2l0aD1OYSxlLnN1YnRyYWN0PWxoLGUuc3VtPW1sLGUuc3VtQnk9eWwsZS50ZW1wbGF0ZT1MYSxlLnRpbWVzPWFsLGUudG9GaW5pdGU9UHUsZS50b0ludGVnZXI9QnUsZS50b0xlbmd0aD1XdSxlLnRvTG93ZXI9UmEsZS50b051bWJlcj1EdSxlLnRvU2FmZUludGVnZXI9VXUsZS50b1N0cmluZz1WdSxlLnRvVXBwZXI9cWEsZS50cmltPUZhLGUudHJpbUVuZD1QYSxlLnRyaW1TdGFydD1CYSxlLnRydW5jYXRlPVdhLGUudW5lc2NhcGU9RGEsZS51bmlxdWVJZD1jbCxlLnVwcGVyQ2FzZT1VZixlLnVwcGVyRmlyc3Q9VmYsZS5lYWNoPXdzLGUuZWFjaFJpZ2h0PVNzLGUuZmlyc3Q9TW8sSmEoZSxmdW5jdGlvbigpe3ZhciB0PXt9O3JldHVybiBVbihlLGZ1bmN0aW9uKG4scil7QWwuY2FsbChlLnByb3RvdHlwZSxyKXx8KHRbcl09bil9KSx0fSgpLHtjaGFpbjohMX0pLGUuVkVSU0lPTj10dCxjKFsiYmluZCIsImJpbmRLZXkiLCJjdXJyeSIsImN1cnJ5UmlnaHQiLCJwYXJ0aWFsIiwicGFydGlhbFJpZ2h0Il0sZnVuY3Rpb24odCl7ZVt0XS5wbGFjZWhvbGRlcj1lfSksYyhbImRyb3AiLCJ0YWtlIl0sZnVuY3Rpb24odCxlKXtpLnByb3RvdHlwZVt0XT1mdW5jdGlvbihuKXt2YXIgcj10aGlzLl9fZmlsdGVyZWRfXztpZihyJiYhZSlyZXR1cm4gbmV3IGkodGhpcyk7bj1uPT09UT8xOlFsKEJ1KG4pLDApO3ZhciBvPXRoaXMuY2xvbmUoKTtyZXR1cm4gcj9vLl9fdGFrZUNvdW50X189dGMobixvLl9fdGFrZUNvdW50X18pOm8uX192aWV3c19fLnB1c2goe3NpemU6dGMobixNdCksdHlwZTp0KyhvLl9fZGlyX188MD8iUmlnaHQiOiIiKX0pLG99LGkucHJvdG90eXBlW3QrIlJpZ2h0Il09ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmV2ZXJzZSgpW3RdKGUpLnJldmVyc2UoKX19KSxjKFsiZmlsdGVyIiwibWFwIiwidGFrZVdoaWxlIl0sZnVuY3Rpb24odCxlKXt2YXIgbj1lKzEscj1uPT14dHx8bj09U3Q7aS5wcm90b3R5cGVbdF09ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jbG9uZSgpO3JldHVybiBlLl9faXRlcmF0ZWVzX18ucHVzaCh7aXRlcmF0ZWU6UmkodCwzKSx0eXBlOm59KSxlLl9fZmlsdGVyZWRfXz1lLl9fZmlsdGVyZWRfX3x8cixlfX0pLGMoWyJoZWFkIiwibGFzdCJdLGZ1bmN0aW9uKHQsZSl7dmFyIG49InRha2UiKyhlPyJSaWdodCI6IiIpO2kucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbbl0oMSkudmFsdWUoKVswXX19KSxjKFsiaW5pdGlhbCIsInRhaWwiXSxmdW5jdGlvbih0LGUpe3ZhciBuPSJkcm9wIisoZT8iIjoiUmlnaHQiKTtpLnByb3RvdHlwZVt0XT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9fZmlsdGVyZWRfXz9uZXcgaSh0aGlzKTp0aGlzW25dKDEpfX0pLGkucHJvdG90eXBlLmNvbXBhY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWx0ZXIoR2EpfSxpLnByb3RvdHlwZS5maW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmZpbHRlcih0KS5oZWFkKCl9LGkucHJvdG90eXBlLmZpbmRMYXN0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnJldmVyc2UoKS5maW5kKHQpfSxpLnByb3RvdHlwZS5pbnZva2VNYXA9JHMoZnVuY3Rpb24odCxlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdD9uZXcgaSh0aGlzKTp0aGlzLm1hcChmdW5jdGlvbihuKXtyZXR1cm4gZXIobix0LGUpfSl9KSxpLnByb3RvdHlwZS5yZWplY3Q9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9UmkodCwzKSx0aGlzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hdChlKX0pfSxpLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbih0LGUpe3Q9QnUodCk7dmFyIG49dGhpcztyZXR1cm4gbi5fX2ZpbHRlcmVkX18mJih0PjB8fGU8MCk/bmV3IGkobik6KHQ8MD9uPW4udGFrZVJpZ2h0KC10KTp0JiYobj1uLmRyb3AodCkpLGUhPT1RJiYoZT1CdShlKSxuPWU8MD9uLmRyb3BSaWdodCgtZSk6bi50YWtlKGUtdCkpLG4pfSxpLnByb3RvdHlwZS50YWtlUmlnaHRXaGlsZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yZXZlcnNlKCkudGFrZVdoaWxlKHQpLnJldmVyc2UoKX0saS5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRha2UoTXQpfSxVbihpLnByb3RvdHlwZSxmdW5jdGlvbih0LG4pe3ZhciBvPS9eKD86ZmlsdGVyfGZpbmR8bWFwfHJlamVjdCl8V2hpbGUkLy50ZXN0KG4pLHM9L14oPzpoZWFkfGxhc3QpJC8udGVzdChuKSx1PWVbcz8idGFrZSIrKCJsYXN0Ij09bj8iUmlnaHQiOiIiKTpuXSxhPXN8fC9eZmluZC8udGVzdChuKTt1JiYoZS5wcm90b3R5cGVbbl09ZnVuY3Rpb24oKXt2YXIgbj10aGlzLl9fd3JhcHBlZF9fLGw9cz9bMV06YXJndW1lbnRzLGM9biBpbnN0YW5jZW9mIGksZj1sWzBdLGg9Y3x8eWYobiksZD1mdW5jdGlvbih0KXt2YXIgbj11LmFwcGx5KGUsbShbdF0sbCkpO3JldHVybiBzJiZwP25bMF06bn07aCYmbyYmImZ1bmN0aW9uIj09dHlwZW9mIGYmJjEhPWYubGVuZ3RoJiYoYz1oPSExKTt2YXIgcD10aGlzLl9fY2hhaW5fXyxnPSEhdGhpcy5fX2FjdGlvbnNfXy5sZW5ndGgsdj1hJiYhcCx5PWMmJiFnO2lmKCFhJiZoKXtuPXk/bjpuZXcgaSh0aGlzKTt2YXIgXz10LmFwcGx5KG4sbCk7cmV0dXJuIF8uX19hY3Rpb25zX18ucHVzaCh7ZnVuYzpscyxhcmdzOltkXSx0aGlzQXJnOlF9KSxuZXcgcihfLHApfXJldHVybiB2JiZ5P3QuYXBwbHkodGhpcyxsKTooXz10aGlzLnRocnUoZCksdj9zP18udmFsdWUoKVswXTpfLnZhbHVlKCk6Xyl9KX0pLGMoWyJwb3AiLCJwdXNoIiwic2hpZnQiLCJzb3J0Iiwic3BsaWNlIiwidW5zaGlmdCJdLGZ1bmN0aW9uKHQpe3ZhciBuPWtsW3RdLHI9L14oPzpwdXNofHNvcnR8dW5zaGlmdCkkLy50ZXN0KHQpPyJ0YXAiOiJ0aHJ1IixpPS9eKD86cG9wfHNoaWZ0KSQvLnRlc3QodCk7ZS5wcm90b3R5cGVbdF09ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHM7aWYoaSYmIXRoaXMuX19jaGFpbl9fKXt2YXIgZT10aGlzLnZhbHVlKCk7cmV0dXJuIG4uYXBwbHkoeWYoZSk/ZTpbXSx0KX1yZXR1cm4gdGhpc1tyXShmdW5jdGlvbihlKXtyZXR1cm4gbi5hcHBseSh5ZihlKT9lOltdLHQpfSl9fSksVW4oaS5wcm90b3R5cGUsZnVuY3Rpb24odCxuKXt2YXIgcj1lW25dO2lmKHIpe3ZhciBpPXIubmFtZSsiIjsocGNbaV18fChwY1tpXT1bXSkpLnB1c2goe25hbWU6bixmdW5jOnJ9KX19KSxwY1ttaShRLHN0KS5uYW1lXT1be25hbWU6IndyYXBwZXIiLGZ1bmM6UX1dLGkucHJvdG90eXBlLmNsb25lPVIsaS5wcm90b3R5cGUucmV2ZXJzZT1SZSxpLnByb3RvdHlwZS52YWx1ZT1xZSxlLnByb3RvdHlwZS5hdD1ZYyxlLnByb3RvdHlwZS5jaGFpbj1jcyxlLnByb3RvdHlwZS5jb21taXQ9ZnMsZS5wcm90b3R5cGUubmV4dD1ocyxlLnByb3RvdHlwZS5wbGFudD1wcyxlLnByb3RvdHlwZS5yZXZlcnNlPWdzLGUucHJvdG90eXBlLnRvSlNPTj1lLnByb3RvdHlwZS52YWx1ZU9mPWUucHJvdG90eXBlLnZhbHVlPXZzLERsJiYoZS5wcm90b3R5cGVbRGxdPWRzKSxlfXZhciBRLHR0PSI0LjEzLjEiLGV0PTIwMCxudD0iRXhwZWN0ZWQgYSBmdW5jdGlvbiIscnQ9Il9fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18iLGl0PSJfX2xvZGFzaF9wbGFjZWhvbGRlcl9fIixvdD0xLHN0PTIsdXQ9NCxhdD04LGx0PTE2LGN0PTMyLGZ0PTY0LGh0PTEyOCxkdD0yNTYscHQ9NTEyLGd0PTEsdnQ9MixtdD0zMCx5dD0iLi4uIixfdD0xNTAsYnQ9MTYseHQ9MSx3dD0yLFN0PTMsa3Q9MS8wLGp0PTkwMDcxOTkyNTQ3NDA5OTEsT3Q9MS43OTc2OTMxMzQ4NjIzMTU3ZTMwOCxFdD1OYU4sTXQ9NDI5NDk2NzI5NSx6dD1NdC0xLEF0PU10Pj4+MSxDdD0iW29iamVjdCBBcmd1bWVudHNdIixUdD0iW29iamVjdCBBcnJheV0iLEl0PSJbb2JqZWN0IEJvb2xlYW5dIixOdD0iW29iamVjdCBEYXRlXSIsTHQ9IltvYmplY3QgRXJyb3JdIixSdD0iW29iamVjdCBGdW5jdGlvbl0iLHF0PSJbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXSIsRnQ9IltvYmplY3QgTWFwXSIsUHQ9IltvYmplY3QgTnVtYmVyXSIsQnQ9IltvYmplY3QgT2JqZWN0XSIsV3Q9IltvYmplY3QgUHJvbWlzZV0iLER0PSJbb2JqZWN0IFJlZ0V4cF0iLEh0PSJbb2JqZWN0IFNldF0iLFV0PSJbb2JqZWN0IFN0cmluZ10iLFZ0PSJbb2JqZWN0IFN5bWJvbF0iLCR0PSJbb2JqZWN0IFdlYWtNYXBdIixHdD0iW29iamVjdCBXZWFrU2V0XSIsS3Q9IltvYmplY3QgQXJyYXlCdWZmZXJdIixYdD0iW29iamVjdCBEYXRhVmlld10iLFp0PSJbb2JqZWN0IEZsb2F0MzJBcnJheV0iLEp0PSJbb2JqZWN0IEZsb2F0NjRBcnJheV0iLFl0PSJbb2JqZWN0IEludDhBcnJheV0iLFF0PSJbb2JqZWN0IEludDE2QXJyYXldIix0ZT0iW29iamVjdCBJbnQzMkFycmF5XSIsZWU9IltvYmplY3QgVWludDhBcnJheV0iLG5lPSJbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XSIscmU9IltvYmplY3QgVWludDE2QXJyYXldIixpZT0iW29iamVjdCBVaW50MzJBcnJheV0iLG9lPS9cYl9fcCBcKz0gJyc7L2csc2U9L1xiKF9fcCBcKz0pICcnIFwrL2csdWU9LyhfX2VcKC4qP1wpfFxiX190XCkpIFwrXG4nJzsvZyxhZT0vJig/OmFtcHxsdHxndHxxdW90fCMzOXwjOTYpOy9nLGxlPS9bJjw+IidgXS9nLGNlPVJlZ0V4cChhZS5zb3VyY2UpLGZlPVJlZ0V4cChsZS5zb3VyY2UpLGhlPS88JS0oW1xzXFNdKz8pJT4vZyxkZT0vPCUoW1xzXFNdKz8pJT4vZyxwZT0vPCU9KFtcc1xTXSs/KSU+L2csZ2U9L1wufFxbKD86W15bXF1dKnwoWyInXSkoPzooPyFcMSlbXlxcXXxcXC4pKj9cMSlcXS8sdmU9L15cdyokLyxtZT0vW14uW1xdXSt8XFsoPzooLT9cZCsoPzpcLlxkKyk/KXwoWyInXSkoKD86KD8hXDIpW15cXF18XFwuKSo/KVwyKVxdfCg/PShcLnxcW1xdKSg/Olw0fCQpKS9nLHllPS9bXFxeJC4qKz8oKVtcXXt9fF0vZyxfZT1SZWdFeHAoeWUuc291cmNlKSxiZT0vXlxzK3xccyskL2cseGU9L15ccysvLHdlPS9ccyskLyxTZT0vW2EtekEtWjAtOV0rL2csa2U9L1xcKFxcKT8vZyxqZT0vXCRceyhbXlxcfV0qKD86XFwuW15cXH1dKikqKVx9L2csT2U9L1x3KiQvLEVlPS9eMHgvaSxNZT0vXlstK10weFswLTlhLWZdKyQvaSx6ZT0vXjBiWzAxXSskL2ksQWU9L15cW29iamVjdCAuKz9Db25zdHJ1Y3RvclxdJC8sQ2U9L14wb1swLTddKyQvaSxUZT0vXig/OjB8WzEtOV1cZCopJC8sSWU9L1tceGMwLVx4ZDZceGQ4LVx4ZGVceGRmLVx4ZjZceGY4LVx4ZmZdL2csTmU9LygkXikvLExlPS9bJ1xuXHJcdTIwMjhcdTIwMjlcXF0vZyxSZT0iXFx1ZDgwMC1cXHVkZmZmIixxZT0iXFx1MDMwMC1cXHUwMzZmXFx1ZmUyMC1cXHVmZTIzIixGZT0iXFx1MjBkMC1cXHUyMGYwIixQZT0iXFx1MjcwMC1cXHUyN2JmIixCZT0iYS16XFx4ZGYtXFx4ZjZcXHhmOC1cXHhmZiIsV2U9IlxceGFjXFx4YjFcXHhkN1xceGY3IixEZT0iXFx4MDAtXFx4MmZcXHgzYS1cXHg0MFxceDViLVxceDYwXFx4N2ItXFx4YmYiLEhlPSJcXHUyMDAwLVxcdTIwNmYiLFVlPSIgXFx0XFx4MGJcXGZcXHhhMFxcdWZlZmZcXG5cXHJcXHUyMDI4XFx1MjAyOVxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDAiLFZlPSJBLVpcXHhjMC1cXHhkNlxceGQ4LVxceGRlIiwkZT0iXFx1ZmUwZVxcdWZlMGYiLEdlPVdlK0RlK0hlK1VlLEtlPSJbJ+KAmV0iLFhlPSJbIitSZSsiXSIsWmU9IlsiK0dlKyJdIixKZT0iWyIrcWUrRmUrIl0iLFllPSJcXGQrIixRZT0iWyIrUGUrIl0iLHRuPSJbIitCZSsiXSIsZW49IlteIitSZStHZStZZStQZStCZStWZSsiXSIsbm49IlxcdWQ4M2NbXFx1ZGZmYi1cXHVkZmZmXSIscm49Iig/OiIrSmUrInwiK25uKyIpIixvbj0iW14iK1JlKyJdIixzbj0iKD86XFx1ZDgzY1tcXHVkZGU2LVxcdWRkZmZdKXsyfSIsdW49IltcXHVkODAwLVxcdWRiZmZdW1xcdWRjMDAtXFx1ZGZmZl0iLGFuPSJbIitWZSsiXSIsbG49IlxcdTIwMGQiLGNuPSIoPzoiK3RuKyJ8IitlbisiKSIsZm49Iig/OiIrYW4rInwiK2VuKyIpIixobj0iKD86IitLZSsiKD86ZHxsbHxtfHJlfHN8dHx2ZSkpPyIsZG49Iig/OiIrS2UrIig/OkR8TEx8TXxSRXxTfFR8VkUpKT8iLHBuPXJuKyI/Iixnbj0iWyIrJGUrIl0/Iix2bj0iKD86IitsbisiKD86Iitbb24sc24sdW5dLmpvaW4oInwiKSsiKSIrZ24rcG4rIikqIixtbj1nbitwbit2bix5bj0iKD86IitbUWUsc24sdW5dLmpvaW4oInwiKSsiKSIrbW4sX249Iig/OiIrW29uK0plKyI/IixKZSxzbix1bixYZV0uam9pbigifCIpKyIpIixibj1SZWdFeHAoS2UsImciKSx4bj1SZWdFeHAoSmUsImciKSx3bj1SZWdFeHAobm4rIig/PSIrbm4rIil8IitfbittbiwiZyIpLFNuPVJlZ0V4cChbYW4rIj8iK3RuKyIrIitobisiKD89IitbWmUsYW4sIiQiXS5qb2luKCJ8IikrIikiLGZuKyIrIitkbisiKD89IitbWmUsYW4rY24sIiQiXS5qb2luKCJ8IikrIikiLGFuKyI/IitjbisiKyIraG4sYW4rIisiK2RuLFllLHluXS5qb2luKCJ8IiksImciKSxrbj1SZWdFeHAoIlsiK2xuK1JlK3FlK0ZlKyRlKyJdIiksam49L1thLXpdW0EtWl18W0EtWl17Mix9W2Etel18WzAtOV1bYS16QS1aXXxbYS16QS1aXVswLTldfFteYS16QS1aMC05IF0vLE9uPVsiQXJyYXkiLCJCdWZmZXIiLCJEYXRhVmlldyIsIkRhdGUiLCJFcnJvciIsIkZsb2F0MzJBcnJheSIsIkZsb2F0NjRBcnJheSIsIkZ1bmN0aW9uIiwiSW50OEFycmF5IiwiSW50MTZBcnJheSIsIkludDMyQXJyYXkiLCJNYXAiLCJNYXRoIiwiT2JqZWN0IiwiUHJvbWlzZSIsIlJlZmxlY3QiLCJSZWdFeHAiLCJTZXQiLCJTdHJpbmciLCJTeW1ib2wiLCJUeXBlRXJyb3IiLCJVaW50OEFycmF5IiwiVWludDhDbGFtcGVkQXJyYXkiLCJVaW50MTZBcnJheSIsIlVpbnQzMkFycmF5IiwiV2Vha01hcCIsIl8iLCJpc0Zpbml0ZSIsInBhcnNlSW50Iiwic2V0VGltZW91dCJdLEVuPS0xLE1uPXt9OwpNbltadF09TW5bSnRdPU1uW1l0XT1NbltRdF09TW5bdGVdPU1uW2VlXT1NbltuZV09TW5bcmVdPU1uW2llXT0hMCxNbltDdF09TW5bVHRdPU1uW0t0XT1NbltJdF09TW5bWHRdPU1uW050XT1NbltMdF09TW5bUnRdPU1uW0Z0XT1NbltQdF09TW5bQnRdPU1uW0R0XT1NbltIdF09TW5bVXRdPU1uWyR0XT0hMTt2YXIgem49e307em5bQ3RdPXpuW1R0XT16bltLdF09em5bWHRdPXpuW0l0XT16bltOdF09em5bWnRdPXpuW0p0XT16bltZdF09em5bUXRdPXpuW3RlXT16bltGdF09em5bUHRdPXpuW0J0XT16bltEdF09em5bSHRdPXpuW1V0XT16bltWdF09em5bZWVdPXpuW25lXT16bltyZV09em5baWVdPSEwLHpuW0x0XT16bltSdF09em5bJHRdPSExO3ZhciBBbj17IsOAIjoiQSIsIsOBIjoiQSIsIsOCIjoiQSIsIsODIjoiQSIsIsOEIjoiQSIsIsOFIjoiQSIsIsOgIjoiYSIsIsOhIjoiYSIsIsOiIjoiYSIsIsOjIjoiYSIsIsOkIjoiYSIsIsOlIjoiYSIsIsOHIjoiQyIsIsOnIjoiYyIsIsOQIjoiRCIsIsOwIjoiZCIsIsOIIjoiRSIsIsOJIjoiRSIsIsOKIjoiRSIsIsOLIjoiRSIsIsOoIjoiZSIsIsOpIjoiZSIsIsOqIjoiZSIsIsOrIjoiZSIsIsOMIjoiSSIsIsONIjoiSSIsIsOOIjoiSSIsIsOPIjoiSSIsIsOsIjoiaSIsIsOtIjoiaSIsIsOuIjoiaSIsIsOvIjoiaSIsIsORIjoiTiIsIsOxIjoibiIsIsOSIjoiTyIsIsOTIjoiTyIsIsOUIjoiTyIsIsOVIjoiTyIsIsOWIjoiTyIsIsOYIjoiTyIsIsOyIjoibyIsIsOzIjoibyIsIsO0IjoibyIsIsO1IjoibyIsIsO2IjoibyIsIsO4IjoibyIsIsOZIjoiVSIsIsOaIjoiVSIsIsObIjoiVSIsIsOcIjoiVSIsIsO5IjoidSIsIsO6IjoidSIsIsO7IjoidSIsIsO8IjoidSIsIsOdIjoiWSIsIsO9IjoieSIsIsO/IjoieSIsIsOGIjoiQWUiLCLDpiI6ImFlIiwiw54iOiJUaCIsIsO+IjoidGgiLCLDnyI6InNzIn0sQ249eyImIjoiJmFtcDsiLCI8IjoiJmx0OyIsIj4iOiImZ3Q7IiwnIic6IiZxdW90OyIsIiciOiImIzM5OyIsImAiOiImIzk2OyJ9LFRuPXsiJmFtcDsiOiImIiwiJmx0OyI6IjwiLCImZ3Q7IjoiPiIsIiZxdW90OyI6JyInLCImIzM5OyI6IiciLCImIzk2OyI6ImAifSxJbj17IlxcIjoiXFwiLCInIjoiJyIsIlxuIjoibiIsIlxyIjoiciIsIlx1MjAyOCI6InUyMDI4IiwiXHUyMDI5IjoidTIwMjkifSxObj1wYXJzZUZsb2F0LExuPXBhcnNlSW50LFJuPSJvYmplY3QiPT1vKGUpJiZlLHFuPVJuJiYib2JqZWN0Ij09byh0KSYmdCxGbj1xbiYmcW4uZXhwb3J0cz09PVJuLFBuPVIoIm9iamVjdCI9PSgidW5kZWZpbmVkIj09dHlwZW9mIGk/InVuZGVmaW5lZCI6byhpKSkmJmkpLEJuPVIoIm9iamVjdCI9PSgidW5kZWZpbmVkIj09dHlwZW9mIHNlbGY/InVuZGVmaW5lZCI6byhzZWxmKSkmJnNlbGYpLFduPVIoIm9iamVjdCI9PW8odGhpcykmJnRoaXMpLERuPVBufHxCbnx8V258fEZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCksSG49WSgpOyhCbnx8e30pLl89SG4sIm9iamVjdCI9PW8obig1MykpJiZuKDUzKT8ocj1mdW5jdGlvbigpe3JldHVybiBIbn0uY2FsbChlLG4sZSx0KSwhKHIhPT1RJiYodC5leHBvcnRzPXIpKSk6cW4/KChxbi5leHBvcnRzPUhuKS5fPUhuLFJuLl89SG4pOkRuLl89SG59KS5jYWxsKHZvaWQgMCl9KS5jYWxsKGUsbigyMCkodCksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXt2YXIgZT10LnBhcmVudE5vZGUsbj10Lm5leHRTaWJsaW5nO3JldHVybiBlLnJlbW92ZUNoaWxkKHQpLGZ1bmN0aW9uKCl7bj9lLmluc2VydEJlZm9yZSh0LG4pOmUuYXBwZW5kQ2hpbGQodCl9fXZhciBpLG89big1NCkscz1uKDIpLHU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlO2U9dC5sYXN0Q2hpbGQ7KXQucmVtb3ZlQ2hpbGQoZSl9O3QuZXhwb3J0cz1pPXMuZXh0ZW5kKHtyZW5kZXJTdWJ2aWV3czpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZWwsZT12b2lkIDAhPXQucGFyZW50Tm9kZTtpZihlKXZhciBuPXIodCk7dSh0KTtmb3IodmFyIGkscyxhPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxsPXRoaXMuX3ZpZXdzKCksYz1vLnNvcnRCeShsLGZ1bmN0aW9uKHQpe3JldHVybiB0Lm9yZGVyaW5nfSksZj0wO2Y8Yy5sZW5ndGg7ZisrKWk9Y1tmXSxpLnJlbmRlcigpLHM9aS5lbCxudWxsIT1zJiZhLmFwcGVuZENoaWxkKHMpO3JldHVybiB0LmFwcGVuZENoaWxkKGEpLGUmJm4oKSx0fSxhZGRWaWV3OmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5fdmlld3MoKTtpZihudWxsPT1lKXRocm93IkludmFsaWQgcGx1Z2luLiAiO3JldHVybiBudWxsPT1lLm9yZGVyaW5nJiYoZS5vcmRlcmluZz10KSxuW3RdPWV9LHJlbW92ZVZpZXdzOmZ1bmN0aW9uKCl7dmFyIHQsZSxuPXRoaXMuX3ZpZXdzKCk7Zm9yKGUgaW4gbil0PW5bZV0sdC51bmRlbGVnYXRlRXZlbnRzKCksdC51bmJpbmQoKSxudWxsIT10LnJlbW92ZVZpZXdzJiZ0LnJlbW92ZVZpZXdzKCksdC5yZW1vdmUoKTtyZXR1cm4gdGhpcy52aWV3cz17fX0scmVtb3ZlVmlldzpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl92aWV3cygpO3JldHVybiBlW3RdLnJlbW92ZSgpLGRlbGV0ZSBlW3RdfSxnZXRWaWV3OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl92aWV3cygpW3RdfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW1vdmVWaWV3cygpLHMucHJvdG90eXBlLnJlbW92ZS5hcHBseSh0aGlzKX0sX3ZpZXdzOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PXRoaXMudmlld3MmJih0aGlzLnZpZXdzPXt9KSx0aGlzLnZpZXdzfX0pfSxmdW5jdGlvbih0LGUsbil7dmFyIHI7KGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgaT0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sPyJzeW1ib2wiOnR5cGVvZiB0fTsvKiEKCSAqIGpCb25lIHYxLjIuMCAtIDIwMTYtMDQtMTMgLSBMaWJyYXJ5IGZvciBET00gbWFuaXB1bGF0aW9uCgkgKgoJICogaHR0cDovL2pib25lLmpzLm9yZwoJICoKCSAqIENvcHlyaWdodCAyMDE2IEFsZXhleSBLdXByaXlhbmVua28KCSAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4KCSAqLwohZnVuY3Rpb24obyl7ZnVuY3Rpb24gcyh0KXt2YXIgZT10Lmxlbmd0aCxuPSJ1bmRlZmluZWQiPT10eXBlb2YgdD8idW5kZWZpbmVkIjppKHQpO3JldHVybiFfKG4pJiZ0IT09byYmKCEoMSE9PXQubm9kZVR5cGV8fCFlKXx8YihuKXx8MD09PWV8fCJudW1iZXIiPT10eXBlb2YgZSYmZT4wJiZlLTEgaW4gdCl9ZnVuY3Rpb24gdSh0LGUpe3ZhciBuLHI7dGhpcy5vcmlnaW5hbEV2ZW50PXQscj1mdW5jdGlvbih0LGUpeyJwcmV2ZW50RGVmYXVsdCI9PT10P3RoaXNbdF09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kZWZhdWx0UHJldmVudGVkPSEwLGVbdF0oKX06InN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiI9PT10P3RoaXNbdF09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9ITAsZVt0XSgpfTpfKGVbdF0pP3RoaXNbdF09ZnVuY3Rpb24oKXtyZXR1cm4gZVt0XSgpfTp0aGlzW3RdPWVbdF19O2ZvcihuIGluIHQpKHRbbl18fCJmdW5jdGlvbiI9PXR5cGVvZiB0W25dKSYmci5jYWxsKHRoaXMsbix0KTt4LmV4dGVuZCh0aGlzLGUse2lzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZH19KX12YXIgYSxsPW8uJCxjPW8uakJvbmUsZj0vXjwoXHcrKVxzKlwvPz4kLyxoPS9eKD86W14jPF0qKDxbXHdcV10rPilbXj5dKiR8IyhbXHdcLV0qKSQpLyxkPVtdLnNsaWNlLHA9W10uc3BsaWNlLGc9T2JqZWN0LmtleXMsdj1kb2N1bWVudCxtPWZ1bmN0aW9uKHQpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdH0seT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIE9iamVjdH0sXz1mdW5jdGlvbih0KXtyZXR1cm4iW29iamVjdCBGdW5jdGlvbl0iPT09e30udG9TdHJpbmcuY2FsbCh0KX0sYj1mdW5jdGlvbih0KXtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KX0seD1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgYS5pbml0KHQsZSl9O3gubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBvLiQ9bCxvLmpCb25lPWMseH0sYT14LmZuPXgucHJvdG90eXBlPXtpbml0OmZ1bmN0aW9uKHQsZSl7dmFyIG4scixpLG87aWYoIXQpcmV0dXJuIHRoaXM7aWYobSh0KSl7aWYocj1mLmV4ZWModCkpcmV0dXJuIHRoaXNbMF09di5jcmVhdGVFbGVtZW50KHJbMV0pLHRoaXMubGVuZ3RoPTEseShlKSYmdGhpcy5hdHRyKGUpLHRoaXM7aWYoKHI9aC5leGVjKHQpKSYmclsxXSl7Zm9yKG89di5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksaT12LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGkuaW5uZXJIVE1MPXQ7aS5sYXN0Q2hpbGQ7KW8uYXBwZW5kQ2hpbGQoaS5maXJzdENoaWxkKTtyZXR1cm4gbj1kLmNhbGwoby5jaGlsZE5vZGVzKSx4Lm1lcmdlKHRoaXMsbil9aWYoeC5pc0VsZW1lbnQoZSkpcmV0dXJuIHgoZSkuZmluZCh0KTt0cnl7cmV0dXJuIG49di5xdWVyeVNlbGVjdG9yQWxsKHQpLHgubWVyZ2UodGhpcyxuKX1jYXRjaChzKXtyZXR1cm4gdGhpc319cmV0dXJuIHQubm9kZVR5cGU/KHRoaXNbMF09dCx0aGlzLmxlbmd0aD0xLHRoaXMpOl8odCk/dCgpOnQgaW5zdGFuY2VvZiB4P3Q6eC5tYWtlQXJyYXkodCx0aGlzKX0scG9wOltdLnBvcCxwdXNoOltdLnB1c2gscmV2ZXJzZTpbXS5yZXZlcnNlLHNoaWZ0OltdLnNoaWZ0LHNvcnQ6W10uc29ydCxzcGxpY2U6W10uc3BsaWNlLHNsaWNlOltdLnNsaWNlLGluZGV4T2Y6W10uaW5kZXhPZixmb3JFYWNoOltdLmZvckVhY2gsdW5zaGlmdDpbXS51bnNoaWZ0LGNvbmNhdDpbXS5jb25jYXQsam9pbjpbXS5qb2luLGV2ZXJ5OltdLmV2ZXJ5LHNvbWU6W10uc29tZSxmaWx0ZXI6W10uZmlsdGVyLG1hcDpbXS5tYXAscmVkdWNlOltdLnJlZHVjZSxyZWR1Y2VSaWdodDpbXS5yZWR1Y2VSaWdodCxsZW5ndGg6MH0sYS5jb25zdHJ1Y3Rvcj14LGEuaW5pdC5wcm90b3R5cGU9YSx4LnNldElkPWZ1bmN0aW9uKHQpe3ZhciBlPXQuamlkO3Q9PT1vP2U9IndpbmRvdyI6dm9pZCAwPT09dC5qaWQmJih0LmppZD1lPSsreC5fY2FjaGUuamlkKSx4Ll9jYWNoZS5ldmVudHNbZV18fCh4Ll9jYWNoZS5ldmVudHNbZV09e30pfSx4LmdldERhdGE9ZnVuY3Rpb24odCl7dD10IGluc3RhbmNlb2YgeD90WzBdOnQ7dmFyIGU9dD09PW8/IndpbmRvdyI6dC5qaWQ7cmV0dXJue2ppZDplLGV2ZW50czp4Ll9jYWNoZS5ldmVudHNbZV19fSx4LmlzRWxlbWVudD1mdW5jdGlvbih0KXtyZXR1cm4gdCYmdCBpbnN0YW5jZW9mIHh8fHQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudHx8bSh0KX0seC5fY2FjaGU9e2V2ZW50czp7fSxqaWQ6MH0sYS5wdXNoU3RhY2s9ZnVuY3Rpb24odCl7cmV0dXJuIHgubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLHQpfSx4Lm1lcmdlPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPWUubGVuZ3RoLHI9dC5sZW5ndGgsaT0wO2k8bjspdFtyKytdPWVbaSsrXTtyZXR1cm4gdC5sZW5ndGg9cix0fSx4LmNvbnRhaW5zPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuY29udGFpbnMoZSl9LHguZXh0ZW5kPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBwLmNhbGwoYXJndW1lbnRzLDEpLmZvckVhY2goZnVuY3Rpb24obil7aWYoZT10LG4pZm9yKHZhciByIGluIG4pZVtyXT1uW3JdfSksdH0seC5tYWtlQXJyYXk9ZnVuY3Rpb24odCxlKXt2YXIgbj1lfHxbXTtyZXR1cm4gbnVsbCE9PXQmJihzKHQpP3gubWVyZ2UobixtKHQpP1t0XTp0KTpuLnB1c2godCkpLG59LHgudW5pcXVlPWZ1bmN0aW9uKHQpe2lmKG51bGw9PXQpcmV0dXJuW107Zm9yKHZhciBlPVtdLG49MCxyPXQubGVuZ3RoO248cjtuKyspe3ZhciBpPXRbbl07ZS5pbmRleE9mKGkpPDAmJmUucHVzaChpKX1yZXR1cm4gZX0seC5FdmVudD1mdW5jdGlvbih0LGUpe3ZhciBuLHI7cmV0dXJuIHQudHlwZSYmIWUmJihlPXQsdD10LnR5cGUpLG49dC5zcGxpdCgiLiIpLnNwbGljZSgxKS5qb2luKCIuIikscj10LnNwbGl0KCIuIilbMF0sdD12LmNyZWF0ZUV2ZW50KCJFdmVudCIpLHQuaW5pdEV2ZW50KHIsITAsITApLHguZXh0ZW5kKHQse25hbWVzcGFjZTpuLGlzRGVmYXVsdFByZXZlbnRlZDpmdW5jdGlvbigpe3JldHVybiB0LmRlZmF1bHRQcmV2ZW50ZWR9fSxlKX0seC5ldmVudD17YWRkOmZ1bmN0aW9uKHQsZSxuLHIsaSl7eC5zZXRJZCh0KTt2YXIgbyxzLHUsYT1mdW5jdGlvbihlKXt4LmV2ZW50LmRpc3BhdGNoLmNhbGwodCxlKX0sbD14LmdldERhdGEodCkuZXZlbnRzO2ZvcihlPWUuc3BsaXQoIiAiKSxzPWUubGVuZ3RoO3MtLTspdT1lW3NdLG89dS5zcGxpdCgiLiIpWzBdLGxbb109bFtvXXx8W10sbFtvXS5sZW5ndGg/YT1sW29dWzBdLmZuOnQuYWRkRXZlbnRMaXN0ZW5lciYmdC5hZGRFdmVudExpc3RlbmVyKG8sYSwhMSksbFtvXS5wdXNoKHtuYW1lc3BhY2U6dS5zcGxpdCgiLiIpLnNwbGljZSgxKS5qb2luKCIuIiksZm46YSxzZWxlY3RvcjppLGRhdGE6cixvcmlnaW5mbjpufSl9LHJlbW92ZTpmdW5jdGlvbih0LGUsbixyKXt2YXIgaSxvLHM9ZnVuY3Rpb24odCxlLHIsaSxvKXt2YXIgczsobiYmby5vcmlnaW5mbj09PW58fCFuKSYmKHM9by5mbiksdFtlXVtyXS5mbj09PXMmJih0W2VdLnNwbGljZShyLDEpLHRbZV0ubGVuZ3RofHxpLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxzKSl9LHU9eC5nZXREYXRhKHQpLmV2ZW50cztpZih1KXJldHVybiFlJiZ1P2codSkuZm9yRWFjaChmdW5jdGlvbihlKXtmb3Iobz11W2VdLGk9by5sZW5ndGg7aS0tOylzKHUsZSxpLHQsb1tpXSl9KTp2b2lkIGUuc3BsaXQoIiAiKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBuLGE9ZS5zcGxpdCgiLiIpWzBdLGw9ZS5zcGxpdCgiLiIpLnNwbGljZSgxKS5qb2luKCIuIik7aWYodVthXSlmb3Iobz11W2FdLGk9by5sZW5ndGg7aS0tOyluPW9baV0sKCFsfHxsJiZuLm5hbWVzcGFjZT09PWwpJiYoIXJ8fHImJm4uc2VsZWN0b3I9PT1yKSYmcyh1LGEsaSx0LG4pO2Vsc2UgbCYmZyh1KS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2ZvcihvPXVbZV0saT1vLmxlbmd0aDtpLS07KW49b1tpXSxuLm5hbWVzcGFjZS5zcGxpdCgiLiIpWzBdPT09bC5zcGxpdCgiLiIpWzBdJiZzKHUsZSxpLHQsbil9KX0pfSx0cmlnZ2VyOmZ1bmN0aW9uKHQsZSl7dmFyIG49W107bShlKT9uPWUuc3BsaXQoIiAiKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHguRXZlbnQodCl9KTooZT1lIGluc3RhbmNlb2YgRXZlbnQ/ZTp4LkV2ZW50KGUpLG49W2VdKSxuLmZvckVhY2goZnVuY3Rpb24oZSl7ZS50eXBlJiZ0LmRpc3BhdGNoRXZlbnQmJnQuZGlzcGF0Y2hFdmVudChlKX0pfSxkaXNwYXRjaDpmdW5jdGlvbih0KXtmb3IodmFyIGUsbixyLGksbyxzPTAsYT0wLGw9dGhpcyxjPXguZ2V0RGF0YShsKS5ldmVudHNbdC50eXBlXSxmPWMubGVuZ3RoLGg9W10sZD1bXTtzPGY7cysrKWgucHVzaChjW3NdKTtmb3Iocz0wLGY9aC5sZW5ndGg7czxmJiZ+Yy5pbmRleE9mKGhbc10pJiYoIWl8fCFpLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpO3MrKylpZihuPW51bGwsbz17fSxyPWhbc10sci5kYXRhJiYoby5kYXRhPXIuZGF0YSksci5zZWxlY3Rvcil7aWYofihkPXgobCkuZmluZChyLnNlbGVjdG9yKSkuaW5kZXhPZih0LnRhcmdldCkmJihuPXQudGFyZ2V0KXx8bCE9PXQudGFyZ2V0JiZsLmNvbnRhaW5zKHQudGFyZ2V0KSl7aWYoIW4pZm9yKGU9ZC5sZW5ndGgsYT0wO2E8ZTthKyspZFthXSYmZFthXS5jb250YWlucyh0LnRhcmdldCkmJihuPWRbYV0pO2lmKCFuKWNvbnRpbnVlO28uY3VycmVudFRhcmdldD1uLGk9bmV3IHUodCxvKSx0Lm5hbWVzcGFjZSYmdC5uYW1lc3BhY2UhPT1yLm5hbWVzcGFjZXx8ci5vcmlnaW5mbi5jYWxsKG4saSl9fWVsc2UgaT1uZXcgdSh0LG8pLHQubmFtZXNwYWNlJiZ0Lm5hbWVzcGFjZSE9PXIubmFtZXNwYWNlfHxyLm9yaWdpbmZuLmNhbGwobCxpKX19LGEub249ZnVuY3Rpb24odCxlLG4scil7dmFyIGk9dGhpcy5sZW5ndGgsbz0wO2lmKG51bGw9PW4mJm51bGw9PXI/KHI9ZSxuPWU9dm9pZCAwKTpudWxsPT1yJiYoInN0cmluZyI9PXR5cGVvZiBlPyhyPW4sbj12b2lkIDApOihyPW4sbj1lLGU9dm9pZCAwKSksIXIpcmV0dXJuIHRoaXM7Zm9yKDtvPGk7bysrKXguZXZlbnQuYWRkKHRoaXNbb10sdCxyLG4sZSk7cmV0dXJuIHRoaXN9LGEub25lPWZ1bmN0aW9uKHQpe3ZhciBlLG49YXJndW1lbnRzLHI9MCxpPXRoaXMubGVuZ3RoLG89ZC5jYWxsKG4sMSxuLmxlbmd0aC0xKSxzPWQuY2FsbChuLC0xKVswXTtmb3IoZT1mdW5jdGlvbihlKXt2YXIgbj14KGUpO3Quc3BsaXQoIiAiKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciByPWZ1bmN0aW9uIGkocil7bi5vZmYodCxpKSxzLmNhbGwoZSxyKX07bi5vbi5hcHBseShuLFt0XS5jb25jYXQobyxyKSl9KX07cjxpO3IrKyllKHRoaXNbcl0pO3JldHVybiB0aGlzfSxhLnRyaWdnZXI9ZnVuY3Rpb24odCl7dmFyIGU9MCxuPXRoaXMubGVuZ3RoO2lmKCF0KXJldHVybiB0aGlzO2Zvcig7ZTxuO2UrKyl4LmV2ZW50LnRyaWdnZXIodGhpc1tlXSx0KTtyZXR1cm4gdGhpc30sYS5vZmY9ZnVuY3Rpb24odCxlLG4pe3ZhciByPTAsaT10aGlzLmxlbmd0aDtmb3IoXyhlKSYmKG49ZSxlPXZvaWQgMCk7cjxpO3IrKyl4LmV2ZW50LnJlbW92ZSh0aGlzW3JdLHQsbixlKTtyZXR1cm4gdGhpc30sYS5maW5kPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTAscj10aGlzLmxlbmd0aCxpPWZ1bmN0aW9uKG4pe18obi5xdWVyeVNlbGVjdG9yQWxsKSYmW10uZm9yRWFjaC5jYWxsKG4ucXVlcnlTZWxlY3RvckFsbCh0KSxmdW5jdGlvbih0KXtlLnB1c2godCl9KX07bjxyO24rKylpKHRoaXNbbl0pO3JldHVybiB4KGUpfSxhLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9dD90PDA/dGhpc1t0K3RoaXMubGVuZ3RoXTp0aGlzW3RdOmQuY2FsbCh0aGlzKX0sYS5lcT1mdW5jdGlvbih0KXtyZXR1cm4geCh0aGlzW3RdKX0sYS5wYXJlbnQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQsZT1bXSxuPTAscj10aGlzLmxlbmd0aDtuPHI7bisrKSF+ZS5pbmRleE9mKHQ9dGhpc1tuXS5wYXJlbnRFbGVtZW50KSYmdCYmZS5wdXNoKHQpO3JldHVybiB4KGUpfSxhLnRvQXJyYXk9ZnVuY3Rpb24oKXtyZXR1cm4gZC5jYWxsKHRoaXMpfSxhLmlzPWZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzO3JldHVybiB0aGlzLnNvbWUoZnVuY3Rpb24oZSl7cmV0dXJuIGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT09dFswXX0pfSxhLmhhcz1mdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cztyZXR1cm4gdGhpcy5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiBlLnF1ZXJ5U2VsZWN0b3JBbGwodFswXSkubGVuZ3RofSl9LGEuYWRkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHgudW5pcXVlKHgubWVyZ2UodGhpcy5nZXQoKSx4KHQsZSkpKSl9LGEuYXR0cj1mdW5jdGlvbih0LGUpe3ZhciBuLHI9YXJndW1lbnRzLGk9MCxvPXRoaXMubGVuZ3RoO2lmKG0odCkmJjE9PT1yLmxlbmd0aClyZXR1cm4gdGhpc1swXSYmdGhpc1swXS5nZXRBdHRyaWJ1dGUodCk7Zm9yKDI9PT1yLmxlbmd0aD9uPWZ1bmN0aW9uKG4pe24uc2V0QXR0cmlidXRlKHQsZSl9OnkodCkmJihuPWZ1bmN0aW9uKGUpe2codCkuZm9yRWFjaChmdW5jdGlvbihuKXtlLnNldEF0dHJpYnV0ZShuLHRbbl0pfSl9KTtpPG87aSsrKW4odGhpc1tpXSk7cmV0dXJuIHRoaXN9LGEucmVtb3ZlQXR0cj1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPXRoaXMubGVuZ3RoO2U8bjtlKyspdGhpc1tlXS5yZW1vdmVBdHRyaWJ1dGUodCk7cmV0dXJuIHRoaXN9LGEudmFsPWZ1bmN0aW9uKHQpe3ZhciBlPTAsbj10aGlzLmxlbmd0aDtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpc1swXSYmdGhpc1swXS52YWx1ZTtmb3IoO2U8bjtlKyspdGhpc1tlXS52YWx1ZT10O3JldHVybiB0aGlzfSxhLmNzcz1mdW5jdGlvbih0LGUpe3ZhciBuLHI9YXJndW1lbnRzLGk9MCxzPXRoaXMubGVuZ3RoO2lmKG0odCkmJjE9PT1yLmxlbmd0aClyZXR1cm4gdGhpc1swXSYmby5nZXRDb21wdXRlZFN0eWxlKHRoaXNbMF0pW3RdO2ZvcigyPT09ci5sZW5ndGg/bj1mdW5jdGlvbihuKXtuLnN0eWxlW3RdPWV9OnkodCkmJihuPWZ1bmN0aW9uKGUpe2codCkuZm9yRWFjaChmdW5jdGlvbihuKXtlLnN0eWxlW25dPXRbbl19KX0pO2k8cztpKyspbih0aGlzW2ldKTtyZXR1cm4gdGhpc30sYS5kYXRhPWZ1bmN0aW9uKHQsZSl7dmFyIG4scj1hcmd1bWVudHMsaT17fSxvPTAscz10aGlzLmxlbmd0aCx1PWZ1bmN0aW9uKHQsZSxuKXt5KG4pPyh0LmpkYXRhPXQuamRhdGF8fHt9LHQuamRhdGFbZV09bik6dC5kYXRhc2V0W2VdPW59LGE9ZnVuY3Rpb24odCl7cmV0dXJuInRydWUiPT09dHx8ImZhbHNlIiE9PXQmJnR9O2lmKDA9PT1yLmxlbmd0aClyZXR1cm4gdGhpc1swXS5qZGF0YSYmKGk9dGhpc1swXS5qZGF0YSksZyh0aGlzWzBdLmRhdGFzZXQpLmZvckVhY2goZnVuY3Rpb24odCl7aVt0XT1hKHRoaXNbMF0uZGF0YXNldFt0XSl9LHRoaXMpLGk7aWYoMT09PXIubGVuZ3RoJiZtKHQpKXJldHVybiB0aGlzWzBdJiZhKHRoaXNbMF0uZGF0YXNldFt0XXx8dGhpc1swXS5qZGF0YSYmdGhpc1swXS5qZGF0YVt0XSk7Zm9yKDE9PT1yLmxlbmd0aCYmeSh0KT9uPWZ1bmN0aW9uKGUpe2codCkuZm9yRWFjaChmdW5jdGlvbihuKXt1KGUsbix0W25dKX0pfToyPT09ci5sZW5ndGgmJihuPWZ1bmN0aW9uKG4pe3Uobix0LGUpfSk7bzxzO28rKyluKHRoaXNbb10pO3JldHVybiB0aGlzfSxhLnJlbW92ZURhdGE9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG4scj0wLGk9dGhpcy5sZW5ndGg7cjxpO3IrKylpZihlPXRoaXNbcl0uamRhdGEsbj10aGlzW3JdLmRhdGFzZXQsdCllJiZlW3RdJiZkZWxldGUgZVt0XSxkZWxldGUgblt0XTtlbHNle2Zvcih0IGluIGUpZGVsZXRlIGVbdF07Zm9yKHQgaW4gbilkZWxldGUgblt0XX1yZXR1cm4gdGhpc30sYS5hZGRDbGFzcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPTAscj10aGlzLmxlbmd0aCxpPXQ/dC50cmltKCkuc3BsaXQoL1xzKy8pOltdO2U8cjtlKyspZm9yKG49MCxuPTA7bjxpLmxlbmd0aDtuKyspdGhpc1tlXS5jbGFzc0xpc3QuYWRkKGlbbl0pO3JldHVybiB0aGlzfSxhLnJlbW92ZUNsYXNzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49MCxyPXRoaXMubGVuZ3RoLGk9dD90LnRyaW0oKS5zcGxpdCgvXHMrLyk6W107ZTxyO2UrKylmb3Iobj0wLG49MDtuPGkubGVuZ3RoO24rKyl0aGlzW2VdLmNsYXNzTGlzdC5yZW1vdmUoaVtuXSk7cmV0dXJuIHRoaXN9LGEudG9nZ2xlQ2xhc3M9ZnVuY3Rpb24odCxlKXt2YXIgbj0wLHI9dGhpcy5sZW5ndGgsaT0idG9nZ2xlIjtpZihlPT09ITAmJihpPSJhZGQiKXx8ZT09PSExJiYoaT0icmVtb3ZlIiksdClmb3IoO248cjtuKyspdGhpc1tuXS5jbGFzc0xpc3RbaV0odCk7cmV0dXJuIHRoaXN9LGEuaGFzQ2xhc3M9ZnVuY3Rpb24odCl7dmFyIGU9MCxuPXRoaXMubGVuZ3RoO2lmKHQpZm9yKDtlPG47ZSsrKWlmKHRoaXNbZV0uY2xhc3NMaXN0LmNvbnRhaW5zKHQpKXJldHVybiEwO3JldHVybiExfSxhLmh0bWw9ZnVuY3Rpb24odCl7dmFyIGUsbj1hcmd1bWVudHM7cmV0dXJuIDE9PT1uLmxlbmd0aCYmdm9pZCAwIT09dD90aGlzLmVtcHR5KCkuYXBwZW5kKHQpOjA9PT1uLmxlbmd0aCYmKGU9dGhpc1swXSk/ZS5pbm5lckhUTUw6dGhpc30sYS5hcHBlbmQ9ZnVuY3Rpb24odCl7dmFyIGUsbj0wLHI9dGhpcy5sZW5ndGg7Zm9yKG0odCkmJmguZXhlYyh0KT90PXgodCk6eSh0KXx8KHQ9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodCkpLHQ9dCBpbnN0YW5jZW9mIHg/dDp4KHQpLGU9ZnVuY3Rpb24oZSxuKXt0LmZvckVhY2goZnVuY3Rpb24odCl7bj9lLmFwcGVuZENoaWxkKHQuY2xvbmVOb2RlKCEwKSk6ZS5hcHBlbmRDaGlsZCh0KX0pfTtuPHI7bisrKWUodGhpc1tuXSxuKTtyZXR1cm4gdGhpc30sYS5hcHBlbmRUbz1mdW5jdGlvbih0KXtyZXR1cm4geCh0KS5hcHBlbmQodGhpcyksdGhpc30sYS5lbXB0eT1mdW5jdGlvbigpe2Zvcih2YXIgdCxlPTAsbj10aGlzLmxlbmd0aDtlPG47ZSsrKWZvcih0PXRoaXNbZV07dC5sYXN0Q2hpbGQ7KXQucmVtb3ZlQ2hpbGQodC5sYXN0Q2hpbGQpO3JldHVybiB0aGlzfSxhLnJlbW92ZT1mdW5jdGlvbigpe3ZhciB0LGU9MCxuPXRoaXMubGVuZ3RoO2Zvcih0aGlzLm9mZigpO2U8bjtlKyspdD10aGlzW2VdLGRlbGV0ZSB0LmpkYXRhLHQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpO3JldHVybiB0aGlzfSwib2JqZWN0Ij09PWkodCkmJnQmJiJvYmplY3QiPT09aSh0LmV4cG9ydHMpP3QuZXhwb3J0cz14OihyPWZ1bmN0aW9uKCl7cmV0dXJuIHh9LmNhbGwoZSxuLGUsdCksISh2b2lkIDAhPT1yJiYodC5leHBvcnRzPXIpKSxvLmpCb25lPW8uJD14KX0od2luZG93KX0pLmNhbGwoZSxuKDIwKSh0KSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciByPW4oOTEpLGk9ci5leHRlbmQoe2J1aWxkRE9NOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub24oIm5ldzpub2RlIix0aGlzLmJ1aWxkTm9kZSksdGhpcy5vbigibmV3OmJ1dHRvbiIsdGhpcy5idWlsZEJ1dHRvbiksdGhpcy5vbigibmV3Om1lbnUiLHRoaXMuYnVpbGRNZW51KSxyLnByb3RvdHlwZS5idWlsZERPTS5jYWxsKHRoaXMpfSxidWlsZE5vZGU6ZnVuY3Rpb24odCl7aWYobnVsbCE9dGhpcy5nKXJldHVybiB0LnN0eWxlLmxpbmVIZWlnaHQ9dGhpcy5nLm1lbnVjb25maWcuZ2V0KCJtZW51SXRlbUxpbmVIZWlnaHQiKX0sYnVpbGRCdXR0b246ZnVuY3Rpb24odCl7aWYobnVsbCE9dGhpcy5nKXJldHVybiB0LnN0eWxlLmZvbnRTaXplPXRoaXMuZy5tZW51Y29uZmlnLmdldCgibWVudUZvbnRzaXplIiksdC5zdHlsZS5tYXJnaW5MZWZ0PXRoaXMuZy5tZW51Y29uZmlnLmdldCgibWVudU1hcmdpbkxlZnQiKSx0LnN0eWxlLnBhZGRpbmc9dGhpcy5nLm1lbnVjb25maWcuZ2V0KCJtZW51UGFkZGluZyIpfSxidWlsZE1lbnU6ZnVuY3Rpb24odCl7aWYobnVsbCE9dGhpcy5nKXJldHVybiB0LnN0eWxlLmZvbnRTaXplPXRoaXMuZy5tZW51Y29uZmlnLmdldCgibWVudUl0ZW1Gb250c2l6ZSIpfX0pO2VbImRlZmF1bHQiXT1pfSxmdW5jdGlvbih0LGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj17fTtuLnJlbW92ZVRvSW5zZXJ0TGF0ZXI9ZnVuY3Rpb24odCl7dmFyIGUsbjtyZXR1cm4gbj10LnBhcmVudE5vZGUsZT10Lm5leHRTaWJsaW5nLG4ucmVtb3ZlQ2hpbGQodCksZnVuY3Rpb24oKXtlP24uaW5zZXJ0QmVmb3JlKHQsZSk6bi5hcHBlbmRDaGlsZCh0KX19LG4ucmVtb3ZlQWxsQ2hpbGRzPWZ1bmN0aW9uKHQpe3ZhciBlO2ZvcihlPTA7dC5maXJzdENoaWxkOyllKyssdC5yZW1vdmVDaGlsZCh0LmZpcnN0Q2hpbGQpfSx0LmV4cG9ydHM9bn0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksZS5jb2x1bW5zZWw9ZS5yb3dzZWw9ZS5wb3NzZWw9ZS5zZWw9dm9pZCAwO3ZhciByPW4oMyksaT1uKDEpLk1vZGVsLG89aS5leHRlbmQoe2RlZmF1bHRzOnt0eXBlOiJzdXBlciJ9fSkscz1vLmV4dGVuZCh7ZGVmYXVsdHM6KDAsci5leHRlbmQpKHt9LG8ucHJvdG90eXBlLmRlZmF1bHRzLHt0eXBlOiJyb3ciLHNlcUlkOiIifSksaW5Sb3c6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT10aGlzLmdldCgic2VxSWQiKX0saW5Db2x1bW46ZnVuY3Rpb24odCl7cmV0dXJuITB9LGdldExlbmd0aDpmdW5jdGlvbigpe3JldHVybiAxfX0pLHU9by5leHRlbmQoe2RlZmF1bHRzOigwLHIuZXh0ZW5kKSh7fSxvLnByb3RvdHlwZS5kZWZhdWx0cyx7dHlwZToiY29sdW1uIix4U3RhcnQ6LTEseEVuZDotMX0pLGluUm93OmZ1bmN0aW9uKCl7cmV0dXJuITB9LGluQ29sdW1uOmZ1bmN0aW9uKHQpe3JldHVybiB4U3RhcnQ8PXQmJnQ8PXhFbmR9LGdldExlbmd0aDpmdW5jdGlvbigpe3JldHVybiB4RW5kLXhTdGFydH19KSxhPXMuZXh0ZW5kKCgwLHIuZXh0ZW5kKSh7fSwoMCxyLnBpY2spKHUsImluQ29sdW1uIiksKDAsci5waWNrKSh1LCJnZXRMZW5ndGgiKSx7ZGVmYXVsdHM6KDAsci5leHRlbmQpKHt9LHUucHJvdG90eXBlLmRlZmF1bHRzLHMucHJvdG90eXBlLmRlZmF1bHRzLHt0eXBlOiJwb3MifSl9KSk7ZS5zZWw9byxlLnBvc3NlbD1hLGUucm93c2VsPXMsZS5jb2x1bW5zZWw9dX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHI9big4KSxpPW4oMyksbz1uKDEpLkNvbGxlY3Rpb24scz1vLmV4dGVuZCh7bW9kZWw6ci5zZWwsaW5pdGlhbGl6ZTpmdW5jdGlvbih0LGUpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgZSYmbnVsbCE9PWUpcmV0dXJuIHRoaXMuZz1lLmcsdGhpcy5saXN0ZW5Ubyh0aGlzLmcsInJlc2lkdWU6Y2xpY2siLGZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9oYW5kbGVFKHQuZXZ0LG5ldyByLnBvc3NlbCh7eFN0YXJ0OnQucm93UG9zLHhFbmQ6dC5yb3dQb3Msc2VxSWQ6dC5zZXFJZH0pKX0pLHRoaXMubGlzdGVuVG8odGhpcy5nLCJyb3c6Y2xpY2siLGZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9oYW5kbGVFKHQuZXZ0LG5ldyByLnJvd3NlbCh7c2VxSWQ6dC5zZXFJZH0pKX0pLHRoaXMubGlzdGVuVG8odGhpcy5nLCJjb2x1bW46Y2xpY2siLGZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9oYW5kbGVFKHQuZXZ0LG5ldyByLmNvbHVtbnNlbCh7eFN0YXJ0OnQucm93UG9zLHhFbmQ6dC5yb3dQb3MrdC5zdGVwU2l6ZS0xfSkpfSl9LGdldFNlbEZvclJvdzpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5Sb3codCl9KX0sZ2V0U2VsRm9yQ29sdW1uczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5Db2x1bW4odCl9KX0sYWRkSlNPTjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hZGQodGhpcy5fZnJvbUpTT04odCkpfSxfZnJvbUpTT046ZnVuY3Rpb24odCl7c3dpdGNoKHQudHlwZSl7Y2FzZSJjb2x1bW4iOnJldHVybiBuZXcgci5jb2x1bW5zZWwodCk7Y2FzZSJyb3ciOnJldHVybiBuZXcgci5yb3dzZWwodCk7Y2FzZSJwb3MiOnJldHVybiBuZXcgci5wb3NzZWwodCl9fSxyZXNldEpTT046ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dC5tYXAodGhpcy5fZnJvbUpTT04pLHRoaXMucmVzZXQodCl9LGdldEJsb2Nrc0ZvclJvdzpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbixyPXRoaXMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmluUm93KHQpfSksaT1bXSxvPWZ1bmN0aW9uKHQsbil7dmFyIG49clt0XTtyZXR1cm4icm93Ij09PW4uYXR0cmlidXRlcy50eXBlPyhpPWZ1bmN0aW9uKCl7dmFyIHQ9W10sbj0wO2lmKDA8PWUpZm9yKDtuPD1lOyl0LnB1c2gobisrKTtlbHNlIGZvcig7bj49ZTspdC5wdXNoKG4tLSk7cmV0dXJuIHR9KCksImJyZWFrIik6dm9pZChpPWkuY29uY2F0KGZ1bmN0aW9uKCl7dmFyIHQ9W10sZT1uLmF0dHJpYnV0ZXMueFN0YXJ0O2lmKG4uYXR0cmlidXRlcy54U3RhcnQ8PW4uYXR0cmlidXRlcy54RW5kKWZvcig7ZTw9bi5hdHRyaWJ1dGVzLnhFbmQ7KXQucHVzaChlKyspO2Vsc2UgZm9yKDtlPj1uLmF0dHJpYnV0ZXMueEVuZDspdC5wdXNoKGUtLSk7cmV0dXJuIHR9KCkpKX0scz0wO3M8ci5sZW5ndGgmJiJicmVhayIhPT1vKHMsbik7cysrKTtyZXR1cm4gaX0sZ2V0QWxsQ29sdW1uQmxvY2tzOmZ1bmN0aW9uKHQpe3ZhciBlPSh0Lm1heExlbix0LndpdGhQb3MsW10pLG49dm9pZCAwO249dC53aXRoUG9zP3RoaXMuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT10LmdldCgieFN0YXJ0Iil9KTp0aGlzLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4iY29sdW1uIj09PXQuZ2V0KCJ0eXBlIil9KTtmb3IodmFyIHIsbz1mdW5jdGlvbih0LHIpe3ZhciByPW5bdF07ZT1lLmNvbmNhdChmdW5jdGlvbigpe3ZhciB0PVtdLGU9ci5hdHRyaWJ1dGVzLnhTdGFydDtpZihyLmF0dHJpYnV0ZXMueFN0YXJ0PD1yLmF0dHJpYnV0ZXMueEVuZClmb3IoO2U8PXIuYXR0cmlidXRlcy54RW5kOyl0LnB1c2goZSsrKTtlbHNlIGZvcig7ZT49ci5hdHRyaWJ1dGVzLnhFbmQ7KXQucHVzaChlLS0pO3JldHVybiB0fSgpKX0scz0wO3M8bi5sZW5ndGg7cysrKW8ocyxyKTtyZXR1cm4gZT0oMCxpLnVuaXEpKGUpfSxpbnZlcnRSb3c6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy53aGVyZSh7dHlwZToicm93In0pO2U9ZS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQuYXR0cmlidXRlcy5zZXFJZH0pO2Zvcih2YXIgbixvPSgwLGkuZmlsdGVyKSh0LGZ1bmN0aW9uKHQpe3JldHVybiEoZS5pbmRleE9mKHQpPj0wKX0pLHM9W10sdT0wO3U8by5sZW5ndGg7dSsrKXt2YXIgbj1vW3VdO3MucHVzaChuZXcgci5yb3dzZWwoe3NlcUlkOm59KSl9cmV0dXJuIHRoaXMucmVzZXQocyl9LGludmVydENvbDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLndoZXJlKHt0eXBlOiJjb2x1bW4ifSkucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuY29uY2F0KGZ1bmN0aW9uKCl7dmFyIHQ9W10sbj1lLmF0dHJpYnV0ZXMueFN0YXJ0O2lmKGUuYXR0cmlidXRlcy54U3RhcnQ8PWUuYXR0cmlidXRlcy54RW5kKWZvcig7bjw9ZS5hdHRyaWJ1dGVzLnhFbmQ7KXQucHVzaChuKyspO2Vsc2UgZm9yKDtuPj1lLmF0dHJpYnV0ZXMueEVuZDspdC5wdXNoKG4tLSk7cmV0dXJuIHR9KCkpfSxbXSksbj0oMCxpLmZpbHRlcikodCxmdW5jdGlvbih0KXtyZXR1cm4hKGUuaW5kZXhPZih0KT49MCl9KTtpZigwIT09bi5sZW5ndGgpe2Zvcih2YXIgbyxzPVtdLHU9blswXSxhPXUsbD0wO2w8bi5sZW5ndGg7bCsrKW89bltsXSxhKzE9PT1vP2E9bzoocy5wdXNoKG5ldyByLmNvbHVtbnNlbCh7eFN0YXJ0OnUseEVuZDphfSkpLHU9YT1vKTtyZXR1cm4gdSE9PWEmJnMucHVzaChuZXcgci5jb2x1bW5zZWwoe3hTdGFydDp1LHhFbmQ6bltuLmxlbmd0aC0xXX0pKSx0aGlzLnJlc2V0KHMpfX0sX2hhbmRsZUU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5jdHJsS2V5fHx0Lm1ldGFLZXk/dGhpcy5hZGQoZSk6dGhpcy5yZXNldChbZV0pfSxfcmVkdWNlQ29sdW1uczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj0oMCxpLmZpbHRlcikobixmdW5jdGlvbih0KXtyZXR1cm4iY29sdW1uIj09PXQuZ2V0KCJ0eXBlIil9KSxvPXQuZ2V0KCJ4U3RhcnQiKSxzPXQuZ2V0KCJ4RW5kIiksdT0oMCxpLmZpbHRlcikocixmdW5jdGlvbih0KXtyZXR1cm4gdC5nZXQoInhFbmQiKT09PW8tMX0pLGE9MDthPHUubGVuZ3RoO2ErKyl1W2FdLnNldCgieEVuZCIsbyk7Zm9yKHZhciBsPSgwLGkuZmlsdGVyKShyLGZ1bmN0aW9uKHQpe3JldHVybiB0LmdldCgieFN0YXJ0Iik9PT1zKzF9KSxjPTA7YzxsLmxlbmd0aDtjKyspbFtjXS5zZXQoInhTdGFydCIscyk7aWYodS5sZW5ndGg+MHx8bC5sZW5ndGg+MClyZXR1cm4gdC5jb2xsZWN0aW9uLnJlbW92ZSh0KX0pfX0pO2VbImRlZmF1bHQiXT1zfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OnsiZGVmYXVsdCI6dH19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLGUudmVyc2lvbj1lLnhocj1lLnNlcXM9ZS5wYXJzZXI9ZS5uZXdpY2s9ZS5tYXRyaXg9ZS5nZmY9ZS5mYXN0YT1lLmNsdXN0YWw9dm9pZCAwO3ZhciBpPW4oNjEpLG89cihpKSxzPW4oNjIpLHU9cihzKSxhPW4oNjMpLGw9cihhKSxjPW4oNjUpLGY9cihjKSxoPW4oNjcpLGQ9cihoKSxwPW4oMTEpLGc9cihwKSx2PW4oMjQpLG09cih2KTtlLmNsdXN0YWw9b1siZGVmYXVsdCJdLGUuZmFzdGE9dVsiZGVmYXVsdCJdLGUuZ2ZmPWxbImRlZmF1bHQiXSxlLm1hdHJpeD1mWyJkZWZhdWx0Il0sZS5uZXdpY2s9ZFsiZGVmYXVsdCJdLGUucGFyc2VyPWdbImRlZmF1bHQiXSxlLnNlcXM9bVsiZGVmYXVsdCJdO3ZhciB5PW4oMjEpO2UueGhyPXk7dmFyIF89ImltcG9ydGVkIjsidW5kZWZpbmVkIiE9dHlwZW9mIElPX1ZFUlNJT04mJihfPUlPX1ZFUlNJT04pLGUudmVyc2lvbj1ffSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgcj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sPyJzeW1ib2wiOnR5cGVvZiB0fSxpPW4oMjEpLG89e307ZVsiZGVmYXVsdCJdPW8sby5yZWFkPWZ1bmN0aW9uKHQsZSl7dmFyIG49ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKG4scixpKXtyZXR1cm4gby5fb25SZXRyaWV2YWwobixpLGUsdCl9fSh0aGlzKTtyZXR1cm4idW5kZWZpbmVkIj09dHlwZW9mIGU/bmV3IFByb21pc2UoZnVuY3Rpb24ocixvKXtlPWZ1bmN0aW9uKHQsZSl7dD9vKHQpOnIoZSl9LGkodCxuKX0pOmkodCxuKX0sby5fb25SZXRyaWV2YWw9ZnVuY3Rpb24odCxlLG4scil7dmFyIGk9dm9pZCAwO3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgdCYmKGk9ci5wYXJzZShlKSksbi5jYWxsKHIsdCxpKX0sby5leHRlbmQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXh0ZW5kKG8sdCxlKX0sby5taXhpbj1mdW5jdGlvbih0KXt2YXIgZT1bInJlYWQiXTtyZXR1cm4ib2JqZWN0IiE9PSgidW5kZWZpbmVkIj09dHlwZW9mIHQ/InVuZGVmaW5lZCI6cih0KSkmJih0PXQucHJvdG90eXBlKSxlLmZvckVhY2goZnVuY3Rpb24oZSl7dFtlXT1vW2VdfSx0aGlzKSx0fX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIscj1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbiBpbiBlKXt2YXIgcj1lW25dO3Quc2V0QXR0cmlidXRlTlMobnVsbCxuLHIpfXJldHVybiB0fSxpPWZ1bmN0aW9uKHQpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhuLCJzdmciKTtyZXR1cm4gZS5zZXRBdHRyaWJ1dGUoIndpZHRoIix0LndpZHRoKSxlLnNldEF0dHJpYnV0ZSgiaGVpZ2h0Iix0LmhlaWdodCksZX0sbz1mdW5jdGlvbih0KXtyZXR1cm4gcihkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobiwicmVjdCIpLHQpfSxzPWZ1bmN0aW9uKHQpe3JldHVybiByKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhuLCJsaW5lIiksdCl9LHU9ZnVuY3Rpb24odCl7cmV0dXJuIHIoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG4sInBvbHlnb24iKSx0KX07ZS5iYXNlPWksZS5saW5lPXMsZS5yZWN0PW8sZS5wb2x5Z29uPXV9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9big3MSk7ci5vbkFsbD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLm9uKCJhbGwiLHQsZSksdGhpc30sci5vbGRNaXhpbj1yLm1peGluLHIubWl4aW49ZnVuY3Rpb24odCl7ci5vbGRNaXhpbih0KTtmb3IodmFyIGU9WyJvbkFsbCJdLG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTt0W2ldPXRoaXNbaV19cmV0dXJuIHR9LHQuZXhwb3J0cz1yfSxmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT17fTtlLmQ9ZS5kZWZhdWx0VmFsdWU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09dD8iZnVuY3Rpb24iPT10eXBlb2YgdD9lKCk6ZTp0fSxlLmlkPWZ1bmN0aW9uKHQpe3JldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0KX0sZS5taz1mdW5jdGlvbih0KXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0KX0sdm9pZCAwIT09dCYmdm9pZCAwIT09dC5leHBvcnRzJiYodC5leHBvcnRzPWUpfSkuY2FsbChlLG4oMjApKHQpKX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZVtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLHIpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLHImJnQoZSxyKSxlfX0oKSxpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe24odGhpcyx0KX1yZXR1cm4gcih0LG51bGwsW3trZXk6InJhbmRvbUludCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIGV8fG51bGw9PT1lKXt2YXIgbj1bMCx0XTt0PW5bMF0sZT1uWzFdfWlmKHQ+ZSl7dmFyIHI9W2UsdF07dD1yWzBdLGU9clsxXX1yZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihlLXQrMSkrdCl9fSx7a2V5OiJ1bmlxdWVJZCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aDw9MHx8dm9pZCAwPT09YXJndW1lbnRzWzBdPzg6YXJndW1lbnRzWzBdLGU9IiI7ZS5sZW5ndGg8dDspZSs9TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIpO3JldHVybiBlLnN1YnN0cigwLHQpfX0se2tleToiZ2V0UmFuZG9tSW50Iix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKGUtdCsxKSkrdH19XSksdH0oKTtlWyJkZWZhdWx0Il09aX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHI9bigxMCksaT1uKDMpLG89big4Nykscz1uKDg4KSx1PXtvcGVuSW5KYWx2aWV3OmZ1bmN0aW9uKHQsZSl7Ii4iPT09dC5jaGFyQXQoMCkmJih0PWRvY3VtZW50LlVSTC5zdWJzdHIoMCxkb2N1bWVudC5VUkwubGFzdEluZGV4T2YoIi8iKSkrIi8iK3QpLHQuaW5kZXhPZigiaHR0cCIpPDAmJih0PSJodHRwOi8vIit3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUrdCksdD1lbmNvZGVVUklDb21wb25lbnQodCk7dmFyIG49Imh0dHA6Ly93d3cuamFsdmlldy5vcmcvc2VydmljZXMvbGF1bmNoQXBwP29wZW49Iit0O3JldHVybiBuKz0iJmNvbG91cj0iK2Usd2luZG93Lm9wZW4obiwiX2JsYW5rIil9LHB1Ymxpc2hXZWI6ZnVuY3Rpb24odCxlKXt2YXIgbj1yLmZhc3RhLndyaXRlKHQuc2Vxcy50b0pTT04oKSk7cmV0dXJuIG49ZW5jb2RlVVJJQ29tcG9uZW50KG4pLCgwLHIueGhyKSh7bWV0aG9kOiJQT1NUIixib2R5OiJzcHJ1bmdlPSIrbix1cmk6Imh0dHA6Ly9zcHJ1bmdlLmJpb2pzLm5ldCIsaGVhZGVyczp7IkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCJ9fSxmdW5jdGlvbih0LG4scil7cmV0dXJuIGUoci50cmltKCkpfSl9LHNoYXJlTGluazpmdW5jdGlvbih0LGUpe3ZhciBuPXQuZy5jb25maWcuZ2V0KCJpbXBvcnRVUkwiKSxyPSJodHRwOi8vbXNhLmJpb2pzLm5ldC9hcHAvP3NlcT0iLGk9ZnVuY3Rpb24odCl7dmFyIG49cit0O2lmKGUpcmV0dXJuIGUobil9O3JldHVybiBuP2kobik6dS5wdWJsaXNoV2ViKHQsaSl9LHNhdmVBc0ZpbGU6ZnVuY3Rpb24odCxlKXt2YXIgbj1yLmZhc3RhLndyaXRlKHQuc2Vxcy50b0pTT04oKSk7cmV0dXJuIHMobmV3IEJsb2IoW25dLHt0eXBlOiJ0ZXh0L3BsYWluIn0pLGUpfSxzYXZlU2VsZWN0aW9uOmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5nLnNlbGNvbC5wbHVjaygic2VxSWQiKTtpZihuLmxlbmd0aD4wKXtuPXQuc2Vxcy5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIG4uaW5kZXhPZih0LmdldCgiaWQiKSk+PTB9KTtmb3IodmFyIGk9bi5sZW5ndGgtMSxvPTA7MDxpP288PWk6bz49aTswPGk/bysrOm8tLSluW29dPW5bb10udG9KU09OKCl9ZWxzZSBuPXQuc2Vxcy50b0pTT04oKSxjb25zb2xlLndhcm4oIm5vIHNlbGVjdGlvbiBmb3VuZCIpO3ZhciB1PXIuZmFzdGEud3JpdGUobik7cmV0dXJuIHMobmV3IEJsb2IoW3VdLHt0eXBlOiJ0ZXh0L3BsYWluIn0pLGUpfSxzYXZlQW5ub3RzOmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5zZXFzLm1hcChmdW5jdGlvbih0KXtpZihuPXQuZ2V0KCJmZWF0dXJlcyIpLDAhPT1uLmxlbmd0aCl7dmFyIGU9dC5nZXQoIm5hbWUiKTtyZXR1cm4gbi5lYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnNldCgic2VxbmFtZSIsZSl9KSxuLnRvSlNPTigpfX0pO249KDAsaS5mbGF0dGVuKSgoMCxpLmNvbXBhY3QpKG4pKTt2YXIgbz1yLmdmZi5leHBvcnRMaW5lcyhuKTtyZXR1cm4gcyhuZXcgQmxvYihbb10se3R5cGU6InRleHQvcGxhaW4ifSksZSl9LHNhdmVBc0ltZzpmdW5jdGlvbih0LGUpe3ZhciBuPXQuZ2V0Vmlldygic3RhZ2UiKS5nZXRWaWV3KCJib2R5IikuZ2V0Vmlldygic2VxYmxvY2siKS5lbDtpZigidW5kZWZpbmVkIiE9dHlwZW9mIG4mJm51bGwhPT1uKXJldHVybiBzKG8obi50b0RhdGFVUkwoImltYWdlL3BuZyIpKSxlLCJpbWFnZS9wbmciKX19O2VbImRlZmF1bHQiXT11fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OnsiZGVmYXVsdCI6dH19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3ZhciBuPVtdLHI9ITAsaT0hMSxvPXZvaWQgMDt0cnl7Zm9yKHZhciBzLHU9dFtTeW1ib2wuaXRlcmF0b3JdKCk7IShyPShzPXUubmV4dCgpKS5kb25lKSYmKG4ucHVzaChzLnZhbHVlKSwhZXx8bi5sZW5ndGghPT1lKTtyPSEwKTt9Y2F0Y2goYSl7aT0hMCxvPWF9ZmluYWxseXt0cnl7IXImJnVbInJldHVybiJdJiZ1WyJyZXR1cm4iXSgpfWZpbmFsbHl7aWYoaSl0aHJvdyBvfX1yZXR1cm4gbn1yZXR1cm4gZnVuY3Rpb24oZSxuKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBlO2lmKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoZSkpcmV0dXJuIHQoZSxuKTt0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIil9fSgpLG89bigzKSxzPW4oMTApLHU9bigzOCksYT1yKHUpLGw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubXNhPXQsdGhpc30sYz17Z3Vlc3NGaWxlRnJvbVRleHQ6ZnVuY3Rpb24odCxlKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIHR8fG51bGw9PT10KXJldHVybiBjb25zb2xlLndhcm4oImludmFsaWQgZmlsZSBmb3JtYXQiKSxbIiIsImVycm9yIl07c3dpdGNoKCgwLGFbImRlZmF1bHQiXSkodCxlKSl7Y2FzZSJjbHVzdGFsIjp2YXIgbj1zLmNsdXN0YWwscj0ic2VxcyI7YnJlYWs7Y2FzZSJmYXN0YSI6bj1zLmZhc3RhLHI9InNlcXMiO2JyZWFrO2Nhc2UibmV3aWNrIjpyPSJuZXdpY2siO2JyZWFrO2Nhc2UiZ2ZmIjpuPXMuZ2ZmLHI9ImZlYXR1cmVzIjticmVhaztkZWZhdWx0OmFsZXJ0KCJVbmtub3duIGZpbGUgZm9ybWF0LiBQbGVhc2UgY29udGFjdCB1cyBvbiBHaXRodWIgZm9yIGhlbHAuIil9cmV0dXJuW24scl19LHBhcnNlVGV4dDpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZ3Vlc3NGaWxlRnJvbVRleHQodCxlKSxyPWkobiwyKSxvPXJbMF0scz1yWzFdO3JldHVybiJzZXFzIj09PXM/W28ucGFyc2UodCksc106ImZlYXR1cmVzIj09PXM/W28ucGFyc2VTZXFzKHQpLHNdOlt0LHNdfSxpbXBvcnRGaWxlczpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgbj1bXSxyPXQubGVuZ3RoLTEsaT0wOzA8cj9pPD1yOmk+PXI7MDxyP2krKzppLS0pe3ZhciBvPXRbaV0scz1uZXcgRmlsZVJlYWRlcjtzLm9ubG9hZD1mdW5jdGlvbih0KXtyZXR1cm4gZS5pbXBvcnRGaWxlKHQudGFyZ2V0LnJlc3VsdCl9LG4ucHVzaChzLnJlYWRBc1RleHQobykpfXJldHVybiBufSgpfSxpbXBvcnRGaWxlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztlPWV8fHt9LGUubmFtZT10Lm5hbWU7dmFyIHIsbz10aGlzLnBhcnNlVGV4dCh0LGUpLHM9aShvLDIpLHU9c1swXSxhPXNbMV07cmV0dXJuImVycm9yIj09PWE/KGFsZXJ0KCJBbiBlcnJvciBoYXBwZW5lZCIpLCJlcnJvciIpOigic2VxcyI9PT1hPyh0aGlzLm1zYS5zZXFzLnJlc2V0KHUpLHRoaXMubXNhLmcuY29uZmlnLnNldCgidXJsIiwidXNlcmltcG9ydCIpLHRoaXMubXNhLmcudHJpZ2dlcigidXJsOnVzZXJJbXBvcnQiKSk6ImZlYXR1cmVzIj09PWE/dGhpcy5tc2Euc2Vxcy5hZGRGZWF0dXJlcyh1KToibmV3aWNrIj09PWE/dGhpcy5tc2EudS50cmVlLmxvYWRUcmVlKGZ1bmN0aW9uKCl7cmV0dXJuIG4ubXNhLnUudHJlZS5zaG93VHJlZSh0KX0pOmFsZXJ0KCJVbmtub3duIGZpbGUhIikscj10Lm5hbWUpfSxpbXBvcnRVUkw6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3JldHVybiB0PXRoaXMubXNhLnUucHJveHkuY29yc1VSTCh0KSx0aGlzLm1zYS5nLmNvbmZpZy5zZXQoInVybCIsdCksKDAscy54aHIpKHt1cmw6dCx0aW1lb3V0OjB9LGZ1bmN0aW9uKHIsaSxvKXtyZXR1cm4gcj9jb25zb2xlLmVycm9yKHIpOiJlcnJvciIhPT1uLmltcG9ydEZpbGUobyx7dXJsOnR9KT8obi5tc2EuZy50cmlnZ2VyKCJpbXBvcnQ6dXJsIix0KSxlP2UoKTp2b2lkIDApOnZvaWQgMH0pfX07KDAsby5leHRlbmQpKGwucHJvdG90eXBlLGMpLGVbImRlZmF1bHQiXT1sfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgcj1uKDE0KSxpPXtsb2FkU2NyaXB0OmZ1bmN0aW9uKHQsZSl7dmFyIG49ci5taygic2NyaXB0Iik7cmV0dXJuIG4udHlwZT0idGV4dC9qYXZhc2NyaXB0IixuLnNyYz10LG4uYXN5bmM9ITAsbi5vbmxvYWQ9bi5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZighKHR8fHRoaXMucmVhZHlTdGF0ZSYmImNvbXBsZXRlIiE9PXRoaXMucmVhZHlTdGF0ZSkpe3ZhciB0PSEwO3JldHVybiBlKCl9fSxkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2NyaXB0IilbMF0ucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChuKX0sam9pbkNiOmZ1bmN0aW9uKHQsZSxuKXtlPWV8fDE7dmFyIHI9MCxpPWZ1bmN0aW9uKHQsZSl7cmV0dXJuInVuZGVmaW5lZCI9PXR5cGVvZiB0fHxudWxsPT09dD9vKCk6ZnVuY3Rpb24oKXt2YXIgbjtyZXR1cm4gbj0iYXBwbHkiLHQuaW5kZXhPZihuKT49MCYmdC5hcHBseShlLGFyZ3VtZW50cyksbygpfX0sbz1mdW5jdGlvbigpe2lmKHIrKyxyPT09ZSlyZXR1cm4gdC5jYWxsKG4pfTtyZXR1cm4gaX19O2VbImRlZmF1bHQiXT1pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgcj1uKDMpLGk9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZz10LmcsdGhpc30sbz17Y29yc1VSTDpmdW5jdGlvbih0KXtyZXR1cm4gZG9jdW1lbnQuVVJMLmluZGV4T2YoImxvY2FsaG9zdCIpPj0wJiYiLyI9PT10WzBdP3Q6Ii4iPT09dC5jaGFyQXQoMCl8fCIvIj09PXQuY2hhckF0KDApP3Q6KHRoaXMuZy5jb25maWcuZ2V0KCJpbXBvcnRQcm94eVN0cmlwSHR0cCIpJiYodD10LnJlcGxhY2UoImh0dHA6Ly8iLCIiKSx0PXQucmVwbGFjZSgiaHR0cHM6Ly8iLCIiKSksdD10aGlzLmcuY29uZmlnLmdldCgiaW1wb3J0UHJveHkiKSt0KX19OygwLHIuZXh0ZW5kKShpLnByb3RvdHlwZSxvKSxlWyJkZWZhdWx0Il09aX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiB0LndlYnBhY2tQb2x5ZmlsbHx8KHQuZGVwcmVjYXRlPWZ1bmN0aW9uKCl7fSx0LnBhdGhzPVtdLHQuY2hpbGRyZW49W10sdC53ZWJwYWNrUG9seWZpbGw9MSksdH19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0LGUpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWUodFtuXSl9ZnVuY3Rpb24gaSh0KXtmb3IodmFyIGUgaW4gdClpZih0Lmhhc093blByb3BlcnR5KGUpKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIG8odCxlLG4pe3ZhciByPXQ7cmV0dXJuIGYoZSk/KG49ZSwic3RyaW5nIj09dHlwZW9mIHQmJihyPXt1cmk6dH0pKTpyPWQoZSx7dXJpOnR9KSxyLmNhbGxiYWNrPW4scn1mdW5jdGlvbiBzKHQsZSxuKXtyZXR1cm4gZT1vKHQsZSxuKSx1KGUpfWZ1bmN0aW9uIHUodCl7ZnVuY3Rpb24gZSgpezQ9PT1mLnJlYWR5U3RhdGUmJm8oKX1mdW5jdGlvbiBuKCl7dmFyIHQ9dm9pZCAwO2lmKHQ9Zi5yZXNwb25zZT9mLnJlc3BvbnNlOmYucmVzcG9uc2VUZXh0fHxhKGYpLHgpdHJ5e3Q9SlNPTi5wYXJzZSh0KX1jYXRjaChlKXt9cmV0dXJuIHR9ZnVuY3Rpb24gcih0KXtjbGVhclRpbWVvdXQoZyksdCBpbnN0YW5jZW9mIEVycm9yfHwodD1uZXcgRXJyb3IoIiIrKHR8fCJVbmtub3duIFhNTEh0dHBSZXF1ZXN0IEVycm9yIikpKSx0LnN0YXR1c0NvZGU9MCx1KHQsYyksdT1sfWZ1bmN0aW9uIG8oKXtpZighcCl7dmFyIGU7Y2xlYXJUaW1lb3V0KGcpLGU9dC51c2VYRFImJnZvaWQgMD09PWYuc3RhdHVzPzIwMDoxMjIzPT09Zi5zdGF0dXM/MjA0OmYuc3RhdHVzO3ZhciByPWMsaT1udWxsOzAhPT1lPyhyPXtib2R5Om4oKSxzdGF0dXNDb2RlOmUsbWV0aG9kOm0saGVhZGVyczp7fSx1cmw6dixyYXdSZXF1ZXN0OmZ9LGYuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzJiYoci5oZWFkZXJzPWgoZi5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpKTppPW5ldyBFcnJvcigiSW50ZXJuYWwgWE1MSHR0cFJlcXVlc3QgRXJyb3IiKSx1KGkscixyLmJvZHkpLHU9bH19dmFyIHU9dC5jYWxsYmFjaztpZigidW5kZWZpbmVkIj09dHlwZW9mIHUpdGhyb3cgbmV3IEVycm9yKCJjYWxsYmFjayBhcmd1bWVudCBtaXNzaW5nIik7dmFyIGM9e2JvZHk6dm9pZCAwLGhlYWRlcnM6e30sc3RhdHVzQ29kZTowLG1ldGhvZDptLHVybDp2LHJhd1JlcXVlc3Q6Zn0sZj10Lnhocnx8bnVsbDtmfHwoZj10LmNvcnN8fHQudXNlWERSP25ldyBzLlhEb21haW5SZXF1ZXN0Om5ldyBzLlhNTEh0dHBSZXF1ZXN0KTt2YXIgZCxwLGcsdj1mLnVybD10LnVyaXx8dC51cmwsbT1mLm1ldGhvZD10Lm1ldGhvZHx8IkdFVCIseT10LmJvZHl8fHQuZGF0YXx8bnVsbCxfPWYuaGVhZGVycz10LmhlYWRlcnN8fHt9LGI9ISF0LnN5bmMseD0hMTtpZigianNvbiJpbiB0JiYoeD0hMCxfLmFjY2VwdHx8Xy5BY2NlcHR8fChfLkFjY2VwdD0iYXBwbGljYXRpb24vanNvbiIpLCJHRVQiIT09bSYmIkhFQUQiIT09bSYmKF9bImNvbnRlbnQtdHlwZSJdfHxfWyJDb250ZW50LVR5cGUiXXx8KF9bIkNvbnRlbnQtVHlwZSJdPSJhcHBsaWNhdGlvbi9qc29uIikseT1KU09OLnN0cmluZ2lmeSh0Lmpzb24pKSksZi5vbnJlYWR5c3RhdGVjaGFuZ2U9ZSxmLm9ubG9hZD1vLGYub25lcnJvcj1yLGYub25wcm9ncmVzcz1mdW5jdGlvbigpe30sZi5vbnRpbWVvdXQ9cixmLm9wZW4obSx2LCFiLHQudXNlcm5hbWUsdC5wYXNzd29yZCksYnx8KGYud2l0aENyZWRlbnRpYWxzPSEhdC53aXRoQ3JlZGVudGlhbHMpLCFiJiZ0LnRpbWVvdXQ+MCYmKGc9c2V0VGltZW91dChmdW5jdGlvbigpe3A9ITAsZi5hYm9ydCgidGltZW91dCIpO3ZhciB0PW5ldyBFcnJvcigiWE1MSHR0cFJlcXVlc3QgdGltZW91dCIpO3QuY29kZT0iRVRJTUVET1VUIixyKHQpfSx0LnRpbWVvdXQpKSxmLnNldFJlcXVlc3RIZWFkZXIpZm9yKGQgaW4gXylfLmhhc093blByb3BlcnR5KGQpJiZmLnNldFJlcXVlc3RIZWFkZXIoZCxfW2RdKTtlbHNlIGlmKHQuaGVhZGVycyYmIWkodC5oZWFkZXJzKSl0aHJvdyBuZXcgRXJyb3IoIkhlYWRlcnMgY2Fubm90IGJlIHNldCBvbiBhbiBYRG9tYWluUmVxdWVzdCBvYmplY3QiKTtyZXR1cm4icmVzcG9uc2VUeXBlImluIHQmJihmLnJlc3BvbnNlVHlwZT10LnJlc3BvbnNlVHlwZSksImJlZm9yZVNlbmQiaW4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIHQuYmVmb3JlU2VuZCYmdC5iZWZvcmVTZW5kKGYpLGYuc2VuZCh5KSxmfWZ1bmN0aW9uIGEodCl7aWYoImRvY3VtZW50Ij09PXQucmVzcG9uc2VUeXBlKXJldHVybiB0LnJlc3BvbnNlWE1MO3ZhciBlPTIwND09PXQuc3RhdHVzJiZ0LnJlc3BvbnNlWE1MJiYicGFyc2VyZXJyb3IiPT09dC5yZXNwb25zZVhNTC5kb2N1bWVudEVsZW1lbnQubm9kZU5hbWU7cmV0dXJuIiIhPT10LnJlc3BvbnNlVHlwZXx8ZT9udWxsOnQucmVzcG9uc2VYTUx9ZnVuY3Rpb24gbCgpe312YXIgYz1uKDE0NyksZj1uKDUyKSxoPW4oMTUwKSxkPW4oMTUxKTt0LmV4cG9ydHM9cyxzLlhNTEh0dHBSZXF1ZXN0PWMuWE1MSHR0cFJlcXVlc3R8fGwscy5YRG9tYWluUmVxdWVzdD0id2l0aENyZWRlbnRpYWxzImluIG5ldyBzLlhNTEh0dHBSZXF1ZXN0P3MuWE1MSHR0cFJlcXVlc3Q6Yy5YRG9tYWluUmVxdWVzdCxyKFsiZ2V0IiwicHV0IiwicG9zdCIsInBhdGNoIiwiaGVhZCIsImRlbGV0ZSJdLGZ1bmN0aW9uKHQpe3NbImRlbGV0ZSI9PT10PyJkZWwiOnRdPWZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbj1vKGUsbixyKSxuLm1ldGhvZD10LnRvVXBwZXJDYXNlKCksdShuKX19KX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9big1Nil9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcixpLG89ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbD8ic3ltYm9sIjp0eXBlb2YgdH07IWZ1bmN0aW9uKHMpeyJvYmplY3QiPT09byhlKT90LmV4cG9ydHM9cygpOihyPXMsaT0iZnVuY3Rpb24iPT10eXBlb2Ygcj9yLmNhbGwoZSxuLGUsdCk6ciwhKHZvaWQgMCE9PWkmJih0LmV4cG9ydHM9aSkpKX0oZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIHQ9e2hhczpmdW5jdGlvbih0LGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKX0sZXh0ZW5kOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0xO2U8YXJndW1lbnRzLmxlbmd0aDsrK2Upe3ZhciBuPWFyZ3VtZW50c1tlXTtpZihuKWZvcih2YXIgciBpbiBuKXRbcl09bltyXX1yZXR1cm4gdH19O3JldHVybiBmdW5jdGlvbihlLG4pe3ZhciByLGk9dGhpcztyPWUmJnQuaGFzKGUsImNvbnN0cnVjdG9yIik/ZS5jb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3JldHVybiBpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sdC5leHRlbmQocixpLG4pO3ZhciBvPWZ1bmN0aW9uKCl7dGhpcy5jb25zdHJ1Y3Rvcj1yfTtyZXR1cm4gby5wcm90b3R5cGU9aS5wcm90b3R5cGUsci5wcm90b3R5cGU9bmV3IG8sZSYmdC5leHRlbmQoci5wcm90b3R5cGUsZSksci5fX3N1cGVyX189aS5wcm90b3R5cGUscn19KX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXt9O2VbImRlZmF1bHQiXT1uLG4uZ2V0TWV0YT1mdW5jdGlvbih0KXt2YXIgZSxuLHI9ITEsaT0hMSxvPXt9LHM9e30sdT10LnNwbGl0KCIgIik7aWYodS5sZW5ndGg+PTE/KHI9dS5zaGlmdCgpLGk9dS5qb2luKCIgIikpOnI9dCxyKXt2YXIgYT1yLnNwbGl0KCJ8Iik7Zm9yKGU9YS5wb3AoKSxzLmVuPWU7MCE9YS5sZW5ndGg7KXt2YXIgbD1hLnNoaWZ0KCksYz1hLnNoaWZ0KCk7b1tsXT1jfX1lbHNlIGU9cjtpZihpKXt2YXIgZj1pLnNwbGl0KCI9Iik7aWYoZi5sZW5ndGg+MSl7dmFyIGgsZDtmLmxlbmd0aC0xLGYuZm9yRWFjaChmdW5jdGlvbih0KXt0PXQudHJpbSgpO3ZhciBlLHI9dC5zcGxpdCgiICIpO3IubGVuZ3RoPjE/KGQ9ci5wb3AoKSxlPXIuam9pbigiICIpKTplPXQsaD9zW2gudG9Mb3dlckNhc2UoKV09ZTpuPWUsaD1kfSl9ZWxzZSBuPWYuc2hpZnQoKX12YXIgcD17bmFtZTplLGlkczpvLGRldGFpbHM6c307cmV0dXJuIG4mJihwLmRlc2M9bikscH07dmFyIHI9e3NwOntsaW5rOiJodHRwOi8vd3d3LnVuaXByb3Qub3JnLyVzIixuYW1lOiJVbmlwcm90In0sdHI6e2xpbms6Imh0dHA6Ly93d3cudW5pcHJvdC5vcmcvJXMiLG5hbWU6IlRyZW1ibCJ9LGdiOntsaW5rOiJodHRwOi8vd3d3Lm5jYmkubmxtLm5paC5nb3YvbnVjY29yZS8lcyIsbmFtZToiR2VuYmFuayJ9LHBkYjp7bGluazoiaHR0cDovL3d3dy5yY3NiLm9yZy9wZGIvZXhwbG9yZS9leHBsb3JlLmRvP3N0cnVjdHVyZUlkPSVzIixuYW1lOiJQREIifX07bi5idWlsZExpbmtzPWZ1bmN0aW9uKHQpe3ZhciBlPXt9O3JldHVybiB0PXR8fHt9LE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24obil7aWYobiBpbiByKXt2YXIgaT1yW25dLG89aS5saW5rLnJlcGxhY2UoIiVzIix0W25dKTtlW2kubmFtZV09b319KSxlfSxuLmNvbnRhaW5zPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIiIuaW5kZXhPZi5jYWxsKHQsZSwwKSE9PS0xfSxuLnNwbGl0TkNoYXJzPWZ1bmN0aW9uKHQsZSl7dmFyIG4scjtlPWV8fDgwO3ZhciBpPVtdO2ZvcihuPTAscj10Lmxlbmd0aC0xO248PXI7bis9ZSlpLnB1c2godC5zdWJzdHIobixlKSk7cmV0dXJuIGl9LG4ucmV2ZXJzZT1mdW5jdGlvbih0KXtyZXR1cm4gdC5zcGxpdCgiIikucmV2ZXJzZSgpLmpvaW4oIiIpfSxuLmNvbXBsZW1lbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dCsiIixuPVtbL2cvZywiMCJdLFsvYy9nLCIxIl0sWy8wL2csImMiXSxbLzEvZywiZyJdLFsvRy9nLCIwIl0sWy9DL2csIjEiXSxbLzAvZywiQyJdLFsvMS9nLCJHIl0sWy9hL2csIjAiXSxbL3QvZywiMSJdLFsvMC9nLCJ0Il0sWy8xL2csImEiXSxbL0EvZywiMCJdLFsvVC9nLCIxIl0sWy8wL2csIlQiXSxbLzEvZywiQSJdXTtmb3IodmFyIHIgaW4gbillPWUucmVwbGFjZShuW3JdWzBdLG5bcl1bMV0pO3JldHVybiBlfSxuLnJldmVyc2VDb21wbGVtZW50PWZ1bmN0aW9uKHQpe3JldHVybiBuLnJldmVyc2Uobi5jb21wbGVtZW50KHQpKX0sbi5tb2RlbD1mdW5jdGlvbih0LGUsbil7dGhpcy5zZXE9dCx0aGlzLm5hbWU9ZSx0aGlzLmlkPW4sdGhpcy5pZHM9e319fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByLGk9bigxKS5Nb2RlbDtuKDkwKSx0LmV4cG9ydHM9cj1pLmV4dGVuZCh7Y29uc3RydWN0b3I6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5nPWUuZyxpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzfSxkZWZhdWx0czp7Y3VycmVudFNpemU6NSxzdGVwOjEsb3JpZ2luYWxTaXplOiExLHNjYWxlQ2F0ZWdvcmllczpbe2NvbHVtbldpZHRoOjEsbWFya2VyU3RlcFNpemU6MjAsc3RlcFNpemU6MH0se2NvbHVtbldpZHRoOjMsbWFya2VyU3RlcFNpemU6MjAsc3RlcFNpemU6MH0se2NvbHVtbldpZHRoOjUsbWFya2VyU3RlcFNpemU6MTAsc3RlcFNpemU6MH0se2NvbHVtbldpZHRoOjksbWFya2VyU3RlcFNpemU6NSxzdGVwU2l6ZToxfSx7Y29sdW1uV2lkdGg6MTUsbWFya2VyU3RlcFNpemU6MixzdGVwU2l6ZToxfSx7Y29sdW1uV2lkdGg6MjAsbWFya2VyU3RlcFNpemU6MSxzdGVwU2l6ZToxfSx7Y29sdW1uV2lkdGg6MzAsbWFya2VyU3RlcFNpemU6MSxzdGVwU2l6ZToxfSx7Y29sdW1uV2lkdGg6NDUsbWFya2VyU3RlcFNpemU6MSxzdGVwU2l6ZToxfV19LGluaXRpYWxpemU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXQoInNjYWxlQ2F0ZWdvcmllcyIpLG49dGhpcy5nLnpvb21lci5nZXQoImNvbHVtbldpZHRoIil8fHRoaXMuX2dldFNjYWxlSW5mbygpLmNvbHVtbldpZHRoLHI9Xy5maW5kKGUse2NvbHVtbldpZHRoOm59KTtpZighcil7dmFyIGk9dGhpcy5faW5zZXJ0U2NhbGVDYXRlZ29yeShuKTtyPWVbaV0sdGhpcy5zZXQoImN1cnJlbnRTaXplIixpKzEpfXZhciBvPXRoaXMuZ2V0KCJjdXJyZW50U2l6ZSIpO3JldHVybiB0aGlzLnNldCgib3JpZ2luYWxTaXplIixvKSx0aGlzLnNldFNpemUobyksdGhpc30sX2luc2VydFNjYWxlQ2F0ZWdvcnk6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXQoInNjYWxlQ2F0ZWdvcmllcyIpLG49Xy5maW5kTGFzdEluZGV4KGUsZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29sdW1uV2lkdGg8dH0pLHI9ZVtuXSxpPW4rMSxvPXtjb2x1bW5XaWR0aDp0LG1hcmtlclN0ZXBTaXplOnIubWFya2VyU3RlcFNpemUsc3RlcFNpemU6ci5tYXJrZXJTdGVwU2l6ZX07cmV0dXJuIGUuc3BsaWNlKGksMCxvKSx0aGlzLnNldCgic2NhbGVDYXRlZ29yaWVzIixlKSxpfSxnZXRTaXplUmFuZ2U6ZnVuY3Rpb24oKXtyZXR1cm5bMSx0aGlzLmdldCgic2NhbGVDYXRlZ29yaWVzIikubGVuZ3RoXX0sYmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0U2l6ZSh0aGlzLmdldCgiY3VycmVudFNpemUiKSt0aGlzLmdldCgic3RlcCIpKX0sc21hbGxlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNldFNpemUodGhpcy5nZXQoImN1cnJlbnRTaXplIiktdGhpcy5nZXQoInN0ZXAiKSl9LHJlc2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0U2l6ZSh0aGlzLmdldCgib3JpZ2luYWxTaXplIikpfSxzZXRTaXplOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0U2l6ZVJhbmdlKCk7dD1wYXJzZUludCh0KSx0PXQ8ZVswXT9lWzBdOnQ+ZVsxXT9lWzFdOnQsdGhpcy5zZXQoImN1cnJlbnRTaXplIix0KTt2YXIgbj10aGlzLl9nZXRTY2FsZUluZm8oKTtyZXR1cm4gdGhpcy5nLnpvb21lci5zZXQoe2NvbHVtbldpZHRoOm4uY29sdW1uV2lkdGgsc3RlcFNpemU6bi5zdGVwU2l6ZSxtYXJrZXJTdGVwU2l6ZTpuLm1hcmtlclN0ZXBTaXplfSksdGhpc30sZ2V0U2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldCgiY3VycmVudFNpemUiKX0sX2dldFNjYWxlSW5mbzpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0U2l6ZSgpLGU9dGhpcy5nZXQoInNjYWxlQ2F0ZWdvcmllcyIpO3JldHVybiB0PjAmJnQ8PWUubGVuZ3RoP2VbdC0xXTp2b2lkIGNvbnNvbGUuZXJyb3IoIm91dCBvZiBib3VuZHMiKX19KX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcixpPW4oOTkpLG89bigxKS5Nb2RlbDt0LmV4cG9ydHM9cj1vLmV4dGVuZCh7ZGVmYXVsdHM6e3NjaGVtZToidGF5bG9yIixjb2xvckJhY2tncm91bmQ6ITAsc2hvd0xvd2VyQ2FzZTohMCxvcGFjaXR5Oi42fSxpbml0aWFsaXplOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy5jb2xvcnM9bmV3IGkoe3NlcXM6ZSxjb25zZXJ2YXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gbi5zY2FsZShuLmNvbnNlcnZhdGlvbigpKX19KSxuLm9uKCJyZXNldCIsZnVuY3Rpb24oKXtpZigiZHluIj09PXRoaXMuZ2V0U2VsZWN0ZWRTY2hlbWUoKS50eXBlKXt2YXIgdDtpZih0PSJyZXNldCIsdGhpcy5nZXRTZWxlY3RlZFNjaGVtZSgpLmluZGV4T2YodCk+PTApcmV0dXJuIHRoaXMuZ2V0U2VsZWN0ZWRTY2hlbWUoKS5yZXNldCgpfX0sdGhpcyl9LGFkZFN0YXRpY1NjaGVtZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNvbG9ycy5hZGRTdGF0aWNTY2hlbWUodCxlKX0sYWRkRHluU2NoZW1lOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY29sb3JzLmFkZER5blNjaGVtZSh0LGUpfSxnZXRTY2hlbWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29sb3JzLmdldFNjaGVtZSh0KX0sZ2V0U2VsZWN0ZWRTY2hlbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb2xvcnMuZ2V0U2NoZW1lKHRoaXMuZ2V0KCJzY2hlbWUiKSl9fSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHIsaT1uKDEpLk1vZGVsO3QuZXhwb3J0cz1yPWkuZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGw9PXRoaXMuZ2V0KCJoaWRkZW4iKSYmdGhpcy5zZXQoImhpZGRlbiIsW10pLHRoaXMuc3RhdHM9ZX0sY2FsY0hpZGRlbkNvbHVtbnM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49dGhpcy5nZXQoImhpZGRlbiIpLHI9dCxpPTA7aTxuLmxlbmd0aDtpKyspZT1uW2ldLGU8PXImJnIrKztyZXR1cm4gci10fX0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByLGk9bigxKS5Nb2RlbDt0LmV4cG9ydHM9cj1pLmV4dGVuZCh7ZGVmYXVsdHM6e3JlZ2lzdGVyTW91c2VIb3ZlcjohMSxyZWdpc3Rlck1vdXNlQ2xpY2tzOiEwLGltcG9ydFByb3h5OiJodHRwczovL2NvcnMtYW55d2hlcmUuaGVyb2t1YXBwLmNvbS8iLGltcG9ydFByb3h5U3RyaXBIdHRwOiEwLGV2ZW50QnVzOiEwLGFscGhhYmV0U2l6ZToyMCxkcm9wSW1wb3J0OiExLGRlYnVnOiExLGhhc1JlZjohMSxib290c3RyYXBNZW51OiExLG1hbnVhbFJlbmRlcmluZzohMX19KX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcixpPW4oMTgpLG89bigxKS5Nb2RlbDt0LmV4cG9ydHM9cj1vLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nPXR9LGRldmVsb3BtZW50OnsibXNhLXRudCI6Ii9ub2RlX21vZHVsZXMvbXNhLXRudC9idWlsZC9idW5kbGUuanMiLCJiaW9qcy1pby1uZXdpY2siOiIvbm9kZV9tb2R1bGVzL2Jpb2pzLWlvLW5ld2ljay9idWlsZC9iaW9qcy1pby1uZXdpY2subWluLmpzIn0sbG9hZFBhY2thZ2U6ZnVuY3Rpb24odCxlKXt0cnl7cmV0dXJuIGUobigxNTUpKHQpKX1jYXRjaChyKXtyZXR1cm4gaVsiZGVmYXVsdCJdLmxvYWRTY3JpcHQodGhpcy5fcGtnVVJMKHQpLGUpfX0sbG9hZFBhY2thZ2VzOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxyPWlbImRlZmF1bHQiXS5qb2luQ2IoZnVuY3Rpb24oKXtyZXR1cm4gZSgpfSx0Lmxlbmd0aCk7cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gbi5sb2FkUGFja2FnZSh0LHIpfSl9LF9wa2dVUkw6ZnVuY3Rpb24odCl7aWYodGhpcy5nLmNvbmZpZy5nZXQoImRlYnVnIikpdmFyIGU9dGhpcy5kZXZlbG9wbWVudFt0XTtlbHNlIGU9Imh0dHA6Ly93enJkLmluL2J1bmRsZS8iK3QrIkBsYXRlc3QiOwpyZXR1cm4gZX19KX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcixpPW4oMSkuTW9kZWw7dC5leHBvcnRzPXI9aS5leHRlbmQoe2RlZmF1bHRzOntzZWFyY2hUZXh0OiIifX0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByLGk9bigxKS5Nb2RlbDt0LmV4cG9ydHM9cj1pLmV4dGVuZCh7ZGVmYXVsdHM6e3NlYXJjaEJveDotMTAsb3ZlcnZpZXdCb3g6MzAsaGVhZGVyQm94Oi0xLGFsaWdubWVudEJvZHk6MCxzY2FsZVNsaWRlcjo1MH19KX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcixpPW4oMSkuTW9kZWw7dC5leHBvcnRzPXI9aS5leHRlbmQoe2RlZmF1bHRzOntzZXF1ZW5jZXM6ITAsbWFya2VyczohMCxtZXRhY2VsbDohMSxjb25zZXJ2OiExLG92ZXJ2aWV3Ym94OiExLHNlcWxvZ286ITEsZ2FwSGVhZGVyOiExLGxlZnRIZWFkZXI6ITAsc2NhbGVzbGlkZXI6ITEsbGFiZWxzOiEwLGxhYmVsTmFtZTohMCxsYWJlbElkOiEwLGxhYmVsUGFydGl0aW9uOiExLGxhYmVsQ2hlY2tib3g6ITEsbWV0YUdhcHM6ITAsbWV0YUlkZW50aXR5OiEwLG1ldGFMaW5rczohMH0sY29uc3RydWN0b3I6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5jYWxjRGVmYXVsdHMoZS5tb2RlbCksaS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGluaXRpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5saXN0ZW5Ubyh0aGlzLCJjaGFuZ2U6bWV0YUxpbmtzIGNoYW5nZTptZXRhSWRlbnRpdHkgY2hhbmdlOm1ldGFHYXBzIixmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyaWdnZXIoImNoYW5nZTptZXRhY2VsbCIpfSx0aGlzKSx0aGlzLmxpc3RlblRvKHRoaXMsImNoYW5nZTpsYWJlbE5hbWUgY2hhbmdlOmxhYmVsSWQgY2hhbmdlOmxhYmVsUGFydGl0aW9uIGNoYW5nZTpsYWJlbENoZWNrYm94IixmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyaWdnZXIoImNoYW5nZTpsYWJlbHMiKX0sdGhpcyksdGhpcy5saXN0ZW5Ubyh0aGlzLCJjaGFuZ2U6bWFya2VycyBjaGFuZ2U6Y29uc2VydiBjaGFuZ2U6c2VxbG9nbyBjaGFuZ2U6Z2FwSGVhZGVyIixmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyaWdnZXIoImNoYW5nZTpoZWFkZXIiKX0sdGhpcyl9LGNhbGNEZWZhdWx0czpmdW5jdGlvbih0KXtpZih0Lmxlbmd0aD4wKXt2YXIgZT10LmF0KDApLG49ZS5nZXQoImlkcyIpO2lmKHZvaWQgMCE9PW4mJjA9PT1PYmplY3Qua2V5cyhuKS5sZW5ndGgpcmV0dXJuIHRoaXMuZGVmYXVsdHMubWV0YUxpbmtzPSExfX19KX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcixpPW4oMSkuTW9kZWw7dC5leHBvcnRzPXI9aS5leHRlbmQoe2NvbnN0cnVjdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY2FsY0RlZmF1bHRzKGUubW9kZWwpLGkuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuZz1lLmcsdGhpcy5saXN0ZW5Ubyh0aGlzLCJjaGFuZ2U6bGFiZWxJZExlbmd0aCBjaGFuZ2U6bGFiZWxOYW1lTGVuZ3RoIGNoYW5nZTpsYWJlbFBhcnRMZW5ndGggY2hhbmdlOmxhYmVsQ2hlY2tMZW5ndGgiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJpZ2dlcigiY2hhbmdlOmxhYmVsV2lkdGgiLHRoaXMuZ2V0TGFiZWxXaWR0aCgpKX0sdGhpcyksdGhpcy5saXN0ZW5Ubyh0aGlzLCJjaGFuZ2U6bWV0YUxpbmtzV2lkdGggY2hhbmdlOm1ldGFJZGVudFdpZHRoIGNoYW5nZTptZXRhR2FwV2lkdGgiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJpZ2dlcigiY2hhbmdlOm1ldGFXaWR0aCIsdGhpcy5nZXRNZXRhV2lkdGgoKSl9LHRoaXMpLHRoaXN9LGRlZmF1bHRzOnthbGlnbm1lbnRXaWR0aDoiYXV0byIsYWxpZ25tZW50SGVpZ2h0OjIyNSxjb2x1bW5XaWR0aDoxNSxyb3dIZWlnaHQ6MTUsYXV0b1Jlc2l6ZTohMCxsYWJlbElkTGVuZ3RoOjIwLGxhYmVsTmFtZUxlbmd0aDoxMDAsbGFiZWxQYXJ0TGVuZ3RoOjE1LGxhYmVsQ2hlY2tMZW5ndGg6MTUsbGFiZWxGb250c2l6ZToxMyxsYWJlbExpbmVIZWlnaHQ6IjEzcHgiLG1hcmtlckZvbnRzaXplOiIxMHB4IixzdGVwU2l6ZToxLG1hcmtlclN0ZXBTaXplOjIsbWFya2VySGVpZ2h0OjIwLHJlc2lkdWVGb250OiIxMyIsY2FudmFzRXZlbnRTY2FsZToxLG1pbkxldHRlckRyYXdTaXplOjExLGJveFJlY3RIZWlnaHQ6Mixib3hSZWN0V2lkdGg6MixvdmVydmlld2JveFBhZGRpbmdUb3A6MTAsbWV0YUdhcFdpZHRoOjM1LG1ldGFJZGVudFdpZHRoOjQwLF9hbGlnbm1lbnRTY3JvbGxMZWZ0OjAsX2FsaWdubWVudFNjcm9sbFRvcDowfSxjYWxjRGVmYXVsdHM6ZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2V0TWF4TGVuZ3RoKCk8MjAwJiZ0Lmxlbmd0aDwzMCYmKHRoaXMuZGVmYXVsdHMuYm94UmVjdFdpZHRoPXRoaXMuZGVmYXVsdHMuYm94UmVjdEhlaWdodD01KSx0aGlzfSxnZXRBbGlnbm1lbnRXaWR0aDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nZXQoImF1dG9SZXNpemUiKSYmdm9pZCAwIT09dD90aGlzLmdldCgiY29sdW1uV2lkdGgiKSp0OnZvaWQgMD09PXRoaXMuZ2V0KCJhbGlnbm1lbnRXaWR0aCIpfHwiYXV0byI9PT10aGlzLmdldCgiYWxpZ25tZW50V2lkdGgiKXx8MD09PXRoaXMuZ2V0KCJhbGlnbm1lbnRXaWR0aCIpP3RoaXMuX2FkanVzdFdpZHRoKCk6dGhpcy5nZXQoImFsaWdubWVudFdpZHRoIil9LHNldExlZnRPZmZzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dDtyZXR1cm4gZT1NYXRoLm1heCgwLGUpLGUtPXRoaXMuZy5jb2x1bW5zLmNhbGNIaWRkZW5Db2x1bW5zKGUpLHRoaXMuc2V0KCJfYWxpZ25tZW50U2Nyb2xsTGVmdCIsZSp0aGlzLmdldCgiY29sdW1uV2lkdGgiKSl9LHNldFRvcE9mZnNldDpmdW5jdGlvbih0KXtmb3IodmFyIGU9TWF0aC5tYXgoMCx0LTEpLG49MCxyPTA7MDxlP3I8PWU6cj49ZTswPGU/cisrOnItLSluKz10aGlzLm1vZGVsLmF0KHIpLmF0dHJpYnV0ZXMuaGVpZ2h0fHwxO3JldHVybiB0aGlzLnNldCgiX2FsaWdubWVudFNjcm9sbFRvcCIsbip0aGlzLmdldCgicm93SGVpZ2h0IikpfSxnZXRMZWZ0QmxvY2tXaWR0aDpmdW5jdGlvbigpe3ZhciB0PTA7cmV0dXJuIHRoaXMuZy52aXMuZ2V0KCJsYWJlbHMiKSYmKHQrPXRoaXMuZ2V0TGFiZWxXaWR0aCgpKSx0aGlzLmcudmlzLmdldCgibWV0YWNlbGwiKSYmKHQrPXRoaXMuZ2V0TWV0YVdpZHRoKCkpLHR9LGdldE1ldGFXaWR0aDpmdW5jdGlvbigpe3ZhciB0PTA7cmV0dXJuIHRoaXMuZy52aXMuZ2V0KCJtZXRhR2FwcyIpJiYodCs9dGhpcy5nZXQoIm1ldGFHYXBXaWR0aCIpKSx0aGlzLmcudmlzLmdldCgibWV0YUlkZW50aXR5IikmJih0Kz10aGlzLmdldCgibWV0YUlkZW50V2lkdGgiKSksdGhpcy5nLnZpcy5nZXQoIm1ldGFMaW5rcyIpJiYodCs9dGhpcy5nZXQoIm1ldGFMaW5rc1dpZHRoIikpLHR9LGdldExhYmVsV2lkdGg6ZnVuY3Rpb24oKXt2YXIgdD0wO3JldHVybiB0aGlzLmcudmlzLmdldCgibGFiZWxOYW1lIikmJih0Kz10aGlzLmdldCgibGFiZWxOYW1lTGVuZ3RoIikpLHRoaXMuZy52aXMuZ2V0KCJsYWJlbElkIikmJih0Kz10aGlzLmdldCgibGFiZWxJZExlbmd0aCIpKSx0aGlzLmcudmlzLmdldCgibGFiZWxQYXJ0aXRpb24iKSYmKHQrPXRoaXMuZ2V0KCJsYWJlbFBhcnRMZW5ndGgiKSksdGhpcy5nLnZpcy5nZXQoImxhYmVsQ2hlY2tib3giKSYmKHQrPXRoaXMuZ2V0KCJsYWJlbENoZWNrTGVuZ3RoIikpLHR9LF9hZGp1c3RXaWR0aDpmdW5jdGlvbigpe2lmKHZvaWQgMCE9PXRoaXMuZWwmJnZvaWQgMCE9PXRoaXMubW9kZWwpe2lmKG51bGwhPXRoaXMuZWwucGFyZW50Tm9kZSYmMCE9PXRoaXMuZWwucGFyZW50Tm9kZS5vZmZzZXRXaWR0aCl2YXIgdD10aGlzLmVsLnBhcmVudE5vZGUub2Zmc2V0V2lkdGg7ZWxzZSB0PWRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGgtMzU7dmFyIGU9dC10aGlzLmdldExlZnRCbG9ja1dpZHRoKCksbj10aGlzLmdldEFsaWdubWVudFdpZHRoKHRoaXMubW9kZWwuZ2V0TWF4TGVuZ3RoKCktdGhpcy5nLmNvbHVtbnMuZ2V0KCJoaWRkZW4iKS5sZW5ndGgpLHI9TWF0aC5taW4oZSxuKTtyZXR1cm4gcj1NYXRoLmZsb29yKHIvdGhpcy5nZXQoImNvbHVtbldpZHRoIikpKnRoaXMuZ2V0KCJjb2x1bW5XaWR0aCIpLHRoaXMuYXR0cmlidXRlcy5hbGlnbm1lbnRXaWR0aD1yfX0sYXV0b1Jlc2l6ZTpmdW5jdGlvbigpe2lmKHRoaXMuZ2V0KCJhdXRvUmVzaXplIikpcmV0dXJuIHRoaXMuX2FkanVzdFdpZHRoKHRoaXMuZWwsdGhpcy5tb2RlbCl9LGF1dG9IZWlnaHQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRNYXhBbGlnbm1lbnRIZWlnaHQoKTtyZXR1cm4gdm9pZCAwIT09dCYmdD4wJiYoZT1NYXRoLm1pbihlLHQpKSx0aGlzLnNldCgiYWxpZ25tZW50SGVpZ2h0IixlKX0sc2V0RWw6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5lbD10LHRoaXMubW9kZWw9ZX0sX2NoZWNrU2Nyb2xsaW5nOmZ1bmN0aW9uKHQsZSl7dmFyIG49dFswXSxyPXRbMV07cmV0dXJuIHRoaXMuc2V0KCJfYWxpZ25tZW50U2Nyb2xsTGVmdCIsbixlKSx0aGlzLnNldCgiX2FsaWdubWVudFNjcm9sbFRvcCIscixlKX0sZ2V0TWF4QWxpZ25tZW50SGVpZ2h0OmZ1bmN0aW9uKCl7dmFyIHQ9MDtyZXR1cm4gdGhpcy5tb2RlbC5lYWNoKGZ1bmN0aW9uKGUpe3JldHVybiB0Kz1lLmF0dHJpYnV0ZXMuaGVpZ2h0fHwxfSksdCp0aGlzLmdldCgicm93SGVpZ2h0Iil9LGdldE1heEFsaWdubWVudFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kZWwuZ2V0TWF4TGVuZ3RoKCkqdGhpcy5nZXQoImNvbHVtbldpZHRoIil9fSl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6eyJkZWZhdWx0Ijp0fX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGk9bigzKSxvPW4oNTApLHM9cihvKSx1PW4oMSkuQ29sbGVjdGlvbixhPXUuZXh0ZW5kKHttb2RlbDpzWyJkZWZhdWx0Il0sY29uc3RydWN0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydE9uQ2FjaGU9W10sdGhpcy5vbigiYWxsIixmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXJ0T25DYWNoZT1bXX0sdGhpcyksdS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHN0YXJ0T246ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXRoaXMuc3RhcnRPbkNhY2hlW3RdJiYodGhpcy5zdGFydE9uQ2FjaGVbdF09dGhpcy53aGVyZSh7eFN0YXJ0OnR9KSksdGhpcy5zdGFydE9uQ2FjaGVbdF19LGNvbnRhaW5zOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnJlZHVjZShmdW5jdGlvbihlLG4pe3JldHVybiBufHxlLmNvbnRhaW5zKHQpfSwhMSl9LGdldEZlYXR1cmVPblJvdzpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbihuKXtyZXR1cm4gbi5nZXQoInJvdyIpPT09dCYmbi5nZXQoInhTdGFydCIpPD1lJiZlPD1uLmdldCgieEVuZCIpfSl9LGFzc2lnblJvd3M6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm1heChmdW5jdGlvbih0KXtyZXR1cm4gdC5nZXQoInhFbmQiKX0pLmF0dHJpYnV0ZXMueEVuZCxlPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLG49MDswPHQ/bjw9dDpuPj10OzA8dD9uKys6bi0tKWUucHVzaCgwKTtyZXR1cm4gZX0oKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe2Zvcih2YXIgbj0wLHI9dC5nZXQoInhTdGFydCIpLGk9dC5nZXQoInhFbmQiKSxvPXI7cjxpP288PWk6bz49aTtyPGk/bysrOm8tLSllW29dPm4mJihuPWVbb10pLGVbb10rKztyZXR1cm4gdC5zZXQoInJvdyIsbil9KSwoMCxpLm1heCkoZSl9LGdldEN1cnJlbnRIZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXgoZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2V0KCJyb3ciKX0pLmF0dHJpYnV0ZXMucm93KzF9LGdldE1pblJvd3M6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm1heChmdW5jdGlvbih0KXtyZXR1cm4gdC5nZXQoInhFbmQiKX0pLmF0dHJpYnV0ZXMueEVuZCxlPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLG49MDswPHQ/bjw9dDpuPj10OzA8dD9uKys6bi0tKWUucHVzaCgwKTtyZXR1cm4gZX0oKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgbj1bXSxyPXQuZ2V0KCJ4U3RhcnQiKSxpPXQuZ2V0KCJ4RW5kIiksbz1yO3I8aT9vPD1pOm8+PWk7cjxpP28rKzpvKyspbi5wdXNoKGVbb10rKyk7cmV0dXJuIG59KCl9KSwoMCxpLm1heCkoZSl9fSk7ZVsiZGVmYXVsdCJdPWF9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6eyJkZWZhdWx0Ijp0fX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGk9bigzNiksbz1yKGkpLHM9bigzNCksdT1yKHMpLGE9bigxKS5Db2xsZWN0aW9uLGw9YS5leHRlbmQoe21vZGVsOm9bImRlZmF1bHQiXSxjb25zdHJ1Y3RvcjpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7cmV0dXJuIGEuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuZz1lLHRoaXMub24oImFkZCByZXNldCByZW1vdmUiLGZ1bmN0aW9uKCl7cmV0dXJuIG4ubGVuZ3RoQ2FjaGU9bnVsbCxuLl9iaW5kU2Vxc1dpdGhGZWF0dXJlcygpfSx0aGlzKSx0aGlzLm9uKCJyZXNldCIsZnVuY3Rpb24oKXtyZXR1cm4gbi5fYXV0b1NldFJlZlNlcSgpfSksdGhpcy5fYXV0b1NldFJlZlNlcSgpLHRoaXMubGVuZ3RoQ2FjaGU9bnVsbCx0aGlzLmZlYXR1cmVzPXt9LHRoaXN9LGdldE1heExlbmd0aDpmdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5tb2RlbHMubGVuZ3RoPzA6KG51bGw9PT10aGlzLmxlbmd0aENhY2hlJiYodGhpcy5sZW5ndGhDYWNoZT10aGlzLm1heChmdW5jdGlvbih0KXtyZXR1cm4gdC5nZXQoInNlcSIpLmxlbmd0aH0pLmdldCgic2VxIikubGVuZ3RoKSx0aGlzLmxlbmd0aENhY2hlKX0scHJldjpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuaW5kZXhPZih0KS0xO3JldHVybiBuPDAmJmUmJihuPXRoaXMubGVuZ3RoLTEpLHRoaXMuYXQobil9LG5leHQ6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmluZGV4T2YodCkrMTtyZXR1cm4gbj09PXRoaXMubGVuZ3RoJiZlJiYobj0wKSx0aGlzLmF0KG4pfSxjYWxjSGlkZGVuU2VxczpmdW5jdGlvbih0KXtmb3IodmFyIGU9dCxuPTA7MDxlP248PWU6bj49ZTswPGU/bisrOm4tLSl0aGlzLmF0KG4pLmdldCgiaGlkZGVuIikmJmUrKztyZXR1cm4gZS10fSxhZGRGZWF0dXJlczpmdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKG51bGwhPXQuY29uZmlnKXt2YXIgbj10O3Q9dC5zZXFzLG51bGwhPW4uY29uZmlnLmNvbG9ycyYmIWZ1bmN0aW9uKCl7dmFyIGU9bi5jb25maWcuY29sb3JzO18uZWFjaCh0LGZ1bmN0aW9uKHQpe3JldHVybiBfLmVhY2godCxmdW5jdGlvbih0KXtpZihudWxsIT1lW3QuZmVhdHVyZV0pcmV0dXJuIHQuZmlsbENvbG9yPWVbdC5mZWF0dXJlXX0pfSl9KCl9cmV0dXJuIF8uaXNFbXB0eSh0aGlzLmZlYXR1cmVzKT90aGlzLmZlYXR1cmVzPXQ6Xy5lYWNoKHQsZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5mZWF0dXJlcy5oYXNPd25Qcm9wZXJ0eShuKT9lLmZlYXR1cmVzW25dPV8udW5pb24oZS5mZWF0dXJlc1tuXSx0KTplLmZlYXR1cmVzW25dPXR9KSx0aGlzLl9iaW5kU2Vxc1dpdGhGZWF0dXJlcygpfSxfYmluZFNlcVdpdGhGZWF0dXJlczpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmZlYXR1cmVzW3QuYXR0cmlidXRlcy5uYW1lXTtlJiYodC5hdHRyaWJ1dGVzLmZlYXR1cmVzPW5ldyB1WyJkZWZhdWx0Il0oZSksdC5hdHRyaWJ1dGVzLmZlYXR1cmVzLmFzc2lnblJvd3MoKSx0LmF0dHJpYnV0ZXMuaGVpZ2h0PXQuYXR0cmlidXRlcy5mZWF0dXJlcy5nZXRDdXJyZW50SGVpZ2h0KCkrMSl9LF9iaW5kU2Vxc1dpdGhGZWF0dXJlczpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihlKXtyZXR1cm4gdC5fYmluZFNlcVdpdGhGZWF0dXJlcyhlKX0pfSxyZW1vdmVBbGxGZWF0dXJlczpmdW5jdGlvbigpe3JldHVybiBkZWxldGUgdGhpcy5mZWF0dXJlc30sX2F1dG9TZXRSZWZTZXE6ZnVuY3Rpb24oKXtpZih0aGlzLmxlbmd0aD4wKXJldHVybiB0aGlzLmF0KDApLnNldCgicmVmIiwhMCl9LHNldFJlZjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldCh0KTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKG4pe2lmKHQuY2lkKXJldHVybiBlLmNpZD09PW4uY2lkP24uc2V0KCJyZWYiLCEwKTpuLnNldCgicmVmIiwhMSl9KSx0aGlzLmcuY29uZmlnLnNldCgiaGFzUmVmIiwhMCksdGhpcy50cmlnZ2VyKCJjaGFuZ2U6cmVmZXJlbmNlIix0KX19KTtlWyJkZWZhdWx0Il09bH0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ImRlZmF1bHQiOnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1uKDM0KSxvPXIoaSkscz1uKDEpLk1vZGVsLHU9cy5leHRlbmQoe2RlZmF1bHRzOntuYW1lOiIiLGlkOiIiLHNlcToiIixoZWlnaHQ6MSxyZWY6ITF9LGluaXRpYWxpemU6ZnVuY3Rpb24oKXtpZih0aGlzLnNldCgiZ3JleSIsW10pLG51bGw9PXRoaXMuZ2V0KCJmZWF0dXJlcyIpKXJldHVybiB0aGlzLnNldCgiZmVhdHVyZXMiLG5ldyBvWyJkZWZhdWx0Il0pfX0pO2VbImRlZmF1bHQiXT11fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OnsiZGVmYXVsdCI6dH19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLGUuZXhwb3J0ZXI9ZS5maWxlPWUuc2VxZ2VuPWUucHJveHk9ZS5ibWF0aD12b2lkIDA7dmFyIGk9bigxNSksbz1yKGkpLHM9bigxOSksdT1yKHMpLGE9bigzOSksbD1yKGEpLGM9bigxNyksZj1yKGMpLGg9bigxNiksZD1yKGgpO2UuYm1hdGg9b1siZGVmYXVsdCJdLGUucHJveHk9dVsiZGVmYXVsdCJdLGUuc2VxZ2VuPWxbImRlZmF1bHQiXSxlLmZpbGU9ZlsiZGVmYXVsdCJdLGUuZXhwb3J0ZXI9ZFsiZGVmYXVsdCJdfSxmdW5jdGlvbih0LGUpeyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksZVsiZGVmYXVsdCJdPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPWUubmFtZXx8ZS51cmx8fCIiLHI9bi5zcGxpdCgiLiIpLGk9cltyLmxlbmd0aC0xXXx8IiIsbz0wO288cy5sZW5ndGg7bysrKXt2YXIgdT1zW29dKHQsaSk7aWYodSlyZXR1cm4gdX1yZXR1cm4idW5rbm93biJ9O3ZhciBuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKCJDTFVTVEFMIj09PXQuc3Vic3RyaW5nKDAsNyl8fCJjbHVzdGFsIj09ZXx8ImFsbiI9PWUpJiYiY2x1c3RhbCJ9LHI9ZnVuY3Rpb24odCxlKXtyZXR1cm4oIj4iPT09dC5zdWJzdHJpbmcoMCwxKXx8ImZhc3RhIj09ZXx8ImZhIj09ZSkmJiJmYXN0YSJ9LGk9ZnVuY3Rpb24odCxlKXtyZXR1cm4oIigiPT09dC5zdWJzdHJpbmcoMCwxKXx8Im53ayI9PWUpJiYibmV3aWNrIn0sbz1mdW5jdGlvbih0LGUpe2lmKHQubGVuZ3RoPD0xMClyZXR1cm4hMTt2YXIgbj10LnNwbGl0KCJcbiIpO3JldHVybiBuWzBdLmluZGV4T2YoImdmZiIpPj0wfHxlLmluZGV4T2YoImdmZiIpPj0wPyJnZmYiOm5bMF0uaW5kZXhPZigiIyIpPDAmJjI9PT1uWzBdLnNwbGl0KCJcdCIpLmxlbmd0aCYmImdmZiJ9LHM9W24scixpLG9dfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OnsiZGVmYXVsdCI6dH19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBpPW4oMTUpLG89cihpKSxzPW4oNzIpLnNlcSx1PW4oNDgpLGE9e19nZW5lcmF0ZVNlcXVlbmNlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0iIixuPXQtMSxyPTA7MDxuP3I8PW46cj49bjswPG4/cisrOnItLSllKz1hLmdldFJhbmRvbUNoYXIoKTtyZXR1cm4gZX0sZ2V0RHVtbXlTZXF1ZW5jZXM6ZnVuY3Rpb24odCxlKXt2YXIgbj1bXTsidW5kZWZpbmVkIiE9dHlwZW9mIHQmJm51bGwhPT10fHwodD1vWyJkZWZhdWx0Il0uZ2V0UmFuZG9tSW50KDMsNSkpLCJ1bmRlZmluZWQiIT10eXBlb2YgZSYmbnVsbCE9PWV8fChlPW9bImRlZmF1bHQiXS5nZXRSYW5kb21JbnQoNTAsMjAwKSk7Zm9yKHZhciByPTE7MTx0P3I8PXQ6cj49dDsxPHQ/cisrOnItLSluLnB1c2gobmV3IHMoYS5fZ2VuZXJhdGVTZXF1ZW5jZShlKSwic2VxIityLCJyIityKSk7cmV0dXJuIG59LGdldFJhbmRvbUNoYXI6ZnVuY3Rpb24odCl7dmFyIGU9dHx8IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaIjtyZXR1cm4gZS5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmUubGVuZ3RoKSl9LGdlbkNvbnNlcnZlZFNlcXVlbmNlczpmdW5jdGlvbih0LGUsbil7dmFyIHI9W107InVuZGVmaW5lZCIhPXR5cGVvZiB0JiZudWxsIT09dHx8KHQ9b1siZGVmYXVsdCJdLmdldFJhbmRvbUludCgzLDUpKSwidW5kZWZpbmVkIiE9dHlwZW9mIGUmJm51bGwhPT1lfHwoZT1vWyJkZWZhdWx0Il0uZ2V0UmFuZG9tSW50KDUwLDIwMCkpLG49bnx8IkFDREVGR0hJS0xNTlBRUlNUVldZLS0tIjtmb3IodmFyIGk9MTsxPHQ/aTw9dDppPj10OzE8dD9pKys6aS0tKXJbaS0xXT0iIjtmb3IodmFyIGw9LjIsYz0xLGY9ZS0xLGg9MDswPGY/aDw9ZjpoPj1mOzA8Zj9oKys6aC0tKXtoJTM9PT0wJiYoYz1vWyJkZWZhdWx0Il0uZ2V0UmFuZG9tSW50KDUwLDEwMCkvMTAwKTtmb3IodmFyIGQ9W10scD10LTEsZz0wOzA8cD9nPD1wOmc+PXA7MDxwP2crKzpnLS0pe2Zvcih2YXIgdj0wLG09dm9pZCAwO3Y8MTAwOyl7bT1hLmdldFJhbmRvbUNoYXIobik7dmFyIHk9dShkKTtpZih5LmFkZFNlcShtKSx2KyssTWF0aC5hYnMoYy15LnNjYWxlKHkuY29uc2VydmF0aW9uKCkpWzBdKTxsKWJyZWFrfXJbZ10rPW0sZC5wdXNoKG0pfX1mb3IodmFyIF89W10sYj0xOzE8dD9iPD10OmI+PXQ7MTx0P2IrKzpiLS0pXy5wdXNoKG5ldyBzKHJbYi0xXSwic2VxIitiLCJyIitiKSk7cmV0dXJuIF99fTtlWyJkZWZhdWx0Il09YX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ImRlZmF1bHQiOnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1uKDMpLG89bigzNSkscz0ocihvKSxmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5tc2E9dCx0aGlzfSksdT17bG9hZFRyZWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubXNhLmdbInBhY2thZ2UiXS5sb2FkUGFja2FnZXMoWyJtc2EtdG50IiwiYmlvanMtaW8tbmV3aWNrIl0sdCl9LHNob3dUcmVlOmZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7aWYobnVsbCE9dC5jaGlsZHJlbil0LmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIGUodCl9KTtlbHNle3ZhciBuPWEuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLm5hbWU9PT10Lm5hbWV9KVswXTtudWxsIT1uJiYoIm51bWJlciI9PXR5cGVvZiBuLmlkPyhuLmlkcz1bInMiKyhuLmlkKzEpXSx0Lm5hbWU9InMiKyhuLmlkKzEpKTp0Lm5hbWU9bi5pZCl9fXZhciByPXdpbmRvdy5yZXF1aXJlKCJiaW9qcy1pby1uZXdpY2siKSxpPXdpbmRvdy5yZXF1aXJlKCJtc2EtdG50Iik7aWYoInN0cmluZyI9PXR5cGVvZiB0KXZhciBvPXIucGFyc2VfbmV3aWNrKHQpO2Vsc2Ugbz10O3ZhciBzLHU9bmV3IGkuc2VsZWN0aW9uczswPT09dGhpcy5tc2EuZWwuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgidG50X2dyb3VwRGl2IikubGVuZ3RoPyhzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLHRoaXMubXNhLmVsLmFwcGVuZENoaWxkKHMpKToocz10aGlzLm1zYS5lbC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJ0bnRfZ3JvdXBEaXYiKVswXS5wYXJlbnROb2RlLHMuaW5uZXJIVE1MPSIiKTt2YXIgYT10aGlzLm1zYS5zZXFzLnRvSlNPTigpO2Uobyk7dmFyIGw9aS5hcHAoe3NlcXM6YSx0cmVlOm99KTtyZXR1cm4gbmV3IGkuYWRhcHRlcnMudHJlZSh7bW9kZWw6bCxlbDpzLHNlbDp1fSksbmV3IGkuYWRhcHRlcnMubXNhKHttb2RlbDpsLHNlbDp1LG1zYTp0aGlzLm1zYX0pLGwubW9kZWxzLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIGRlbGV0ZSB0LmNvbGxlY3Rpb24sT2JqZWN0LnNldFByb3RvdHlwZU9mKHQsbigxKS5Nb2RlbC5wcm90b3R5cGUpfSksdGhpcy5tc2Euc2Vxcy5yZXNldChsLm1vZGVscyksY29uc29sZS5sb2codGhpcy5tc2Euc2Vxcyl9LHJlcXVpcmU6ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdC50b1N0cmluZygpfSxlfShmdW5jdGlvbih0KXtyZXR1cm4gbigxNTYpKHQpfSl9OygwLGkuZXh0ZW5kKShzLnByb3RvdHlwZSx1KSxlWyJkZWZhdWx0Il09c30sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sPyJzeW1ib2wiOnR5cGVvZiB0fSxpPW4oMjIpLG89bigyMykscz1uKDQyKSx1PWZ1bmN0aW9uKHQsZSl7dmFyIG49dHx8e307ZXx8KGU9e30pLHRoaXMuY2lkPXMudW5pcXVlSWQoImMiKSx0aGlzLmF0dHJpYnV0ZXM9e30sZS5jb2xsZWN0aW9uJiYodGhpcy5jb2xsZWN0aW9uPWUuY29sbGVjdGlvbiksZS5wYXJzZSYmKG49dGhpcy5wYXJzZShuLGUpfHx7fSksbj1zLmRlZmF1bHRzKHt9LG4scy5yZXN1bHQodGhpcywiZGVmYXVsdHMiKSksdGhpcy5zZXQobixlKSx0aGlzLmNoYW5nZWQ9e30sdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07cy5leHRlbmQodS5wcm90b3R5cGUsaSx7Y2hhbmdlZDpudWxsLHZhbGlkYXRpb25FcnJvcjpudWxsLGlkQXR0cmlidXRlOiJpZCIsaW5pdGlhbGl6ZTpmdW5jdGlvbigpe30sdG9KU09OOmZ1bmN0aW9uKHQpe3JldHVybiBzLmNsb25lKHRoaXMuYXR0cmlidXRlcyl9LHN5bmM6ZnVuY3Rpb24oKXtyZXR1cm4gQmFja2JvbmUuc3luYy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGdldDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW3RdfSxlc2NhcGU6ZnVuY3Rpb24odCl7cmV0dXJuIHMuZXNjYXBlKHRoaXMuZ2V0KHQpKX0saGFzOmZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT10aGlzLmdldCh0KX0sc2V0OmZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxvLHUsYSxsLGMsZixoO2lmKG51bGw9PXQpcmV0dXJuIHRoaXM7aWYoIm9iamVjdCI9PT0oInVuZGVmaW5lZCI9PXR5cGVvZiB0PyJ1bmRlZmluZWQiOnIodCkpPyhvPXQsbj1lKToobz17fSlbdF09ZSxufHwobj17fSksIXRoaXMuX3ZhbGlkYXRlKG8sbikpcmV0dXJuITE7dT1uLnVuc2V0LGw9bi5zaWxlbnQsYT1bXSxjPXRoaXMuX2NoYW5naW5nLHRoaXMuX2NoYW5naW5nPSEwLGN8fCh0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXM9cy5jbG9uZSh0aGlzLmF0dHJpYnV0ZXMpLHRoaXMuY2hhbmdlZD17fSksaD10aGlzLmF0dHJpYnV0ZXMsZj10aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXMsdGhpcy5pZEF0dHJpYnV0ZSBpbiBvJiYodGhpcy5pZD1vW3RoaXMuaWRBdHRyaWJ1dGVdKTtmb3IoaSBpbiBvKWU9b1tpXSxzLmlzRXF1YWwoaFtpXSxlKXx8YS5wdXNoKGkpLHMuaXNFcXVhbChmW2ldLGUpP2RlbGV0ZSB0aGlzLmNoYW5nZWRbaV06dGhpcy5jaGFuZ2VkW2ldPWUsdT9kZWxldGUgaFtpXTpoW2ldPWU7aWYoIWwpe2EubGVuZ3RoJiYodGhpcy5fcGVuZGluZz1uKTtmb3IodmFyIGQ9MCxwPWEubGVuZ3RoO2Q8cDtkKyspdGhpcy50cmlnZ2VyKCJjaGFuZ2U6IithW2RdLHRoaXMsaFthW2RdXSxuKX1pZihjKXJldHVybiB0aGlzO2lmKCFsKWZvcig7dGhpcy5fcGVuZGluZzspbj10aGlzLl9wZW5kaW5nLHRoaXMuX3BlbmRpbmc9ITEsdGhpcy50cmlnZ2VyKCJjaGFuZ2UiLHRoaXMsbik7cmV0dXJuIHRoaXMuX3BlbmRpbmc9ITEsdGhpcy5fY2hhbmdpbmc9ITEsdGhpc30sdW5zZXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5zZXQodCx2b2lkIDAscy5leHRlbmQoe30sZSx7dW5zZXQ6ITB9KSl9LGNsZWFyOmZ1bmN0aW9uKHQpe3ZhciBlPXt9O2Zvcih2YXIgbiBpbiB0aGlzLmF0dHJpYnV0ZXMpZVtuXT12b2lkIDA7cmV0dXJuIHRoaXMuc2V0KGUscy5leHRlbmQoe30sdCx7dW5zZXQ6ITB9KSl9LGhhc0NoYW5nZWQ6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/IXMuaXNFbXB0eSh0aGlzLmNoYW5nZWQpOnMuaGFzKHRoaXMuY2hhbmdlZCx0KX0sY2hhbmdlZEF0dHJpYnV0ZXM6ZnVuY3Rpb24odCl7aWYoIXQpcmV0dXJuISF0aGlzLmhhc0NoYW5nZWQoKSYmcy5jbG9uZSh0aGlzLmNoYW5nZWQpO3ZhciBlLG49ITEscj10aGlzLl9jaGFuZ2luZz90aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXM6dGhpcy5hdHRyaWJ1dGVzO2Zvcih2YXIgaSBpbiB0KXMuaXNFcXVhbChyW2ldLGU9dFtpXSl8fCgobnx8KG49e30pKVtpXT1lKTtyZXR1cm4gbn0scHJldmlvdXM6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGwhPXQmJnRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcz90aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXNbdF06bnVsbH0scHJldmlvdXNBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHMuY2xvbmUodGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzKX0sZmV0Y2g6ZnVuY3Rpb24odCl7dD10P3MuY2xvbmUodCk6e30sdm9pZCAwPT09dC5wYXJzZSYmKHQucGFyc2U9ITApO3ZhciBlPXRoaXMsbj10LnN1Y2Nlc3M7cmV0dXJuIHQuc3VjY2Vzcz1mdW5jdGlvbihyKXtyZXR1cm4hIWUuc2V0KGUucGFyc2Uocix0KSx0KSYmKG4mJm4oZSxyLHQpLHZvaWQgZS50cmlnZ2VyKCJzeW5jIixlLHIsdCkpfSx3cmFwRXJyb3IodGhpcyx0KSx0aGlzLnN5bmMoInJlYWQiLHRoaXMsdCl9LHNhdmU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpLG8sdSxhPXRoaXMuYXR0cmlidXRlcztpZihudWxsPT10fHwib2JqZWN0Ij09PSgidW5kZWZpbmVkIj09dHlwZW9mIHQ/InVuZGVmaW5lZCI6cih0KSk/KGk9dCxuPWUpOihpPXt9KVt0XT1lLG49cy5leHRlbmQoe3ZhbGlkYXRlOiEwfSxuKSxpJiYhbi53YWl0KXtpZighdGhpcy5zZXQoaSxuKSlyZXR1cm4hMX1lbHNlIGlmKCF0aGlzLl92YWxpZGF0ZShpLG4pKXJldHVybiExO2kmJm4ud2FpdCYmKHRoaXMuYXR0cmlidXRlcz1zLmV4dGVuZCh7fSxhLGkpKSx2b2lkIDA9PT1uLnBhcnNlJiYobi5wYXJzZT0hMCk7dmFyIGw9dGhpcyxjPW4uc3VjY2VzcztyZXR1cm4gbi5zdWNjZXNzPWZ1bmN0aW9uKHQpe2wuYXR0cmlidXRlcz1hO3ZhciBlPWwucGFyc2UodCxuKTtyZXR1cm4gbi53YWl0JiYoZT1zLmV4dGVuZChpfHx7fSxlKSksIShzLmlzT2JqZWN0KGUpJiYhbC5zZXQoZSxuKSkmJihjJiZjKGwsdCxuKSx2b2lkIGwudHJpZ2dlcigic3luYyIsbCx0LG4pKX0sd3JhcEVycm9yKHRoaXMsbiksbz10aGlzLmlzTmV3KCk/ImNyZWF0ZSI6bi5wYXRjaD8icGF0Y2giOiJ1cGRhdGUiLCJwYXRjaCIhPT1vfHxuLmF0dHJzfHwobi5hdHRycz1pKSx1PXRoaXMuc3luYyhvLHRoaXMsbiksaSYmbi53YWl0JiYodGhpcy5hdHRyaWJ1dGVzPWEpLHV9LGRlc3Ryb3k6ZnVuY3Rpb24gbCh0KXt0PXQ/cy5jbG9uZSh0KTp7fTt2YXIgZT10aGlzLG49dC5zdWNjZXNzLGw9ZnVuY3Rpb24oKXtlLnN0b3BMaXN0ZW5pbmcoKSxlLnRyaWdnZXIoImRlc3Ryb3kiLGUsZS5jb2xsZWN0aW9uLHQpfTtpZih0LnN1Y2Nlc3M9ZnVuY3Rpb24ocil7KHQud2FpdHx8ZS5pc05ldygpKSYmbCgpLG4mJm4oZSxyLHQpLGUuaXNOZXcoKXx8ZS50cmlnZ2VyKCJzeW5jIixlLHIsdCl9LHRoaXMuaXNOZXcoKSlyZXR1cm4gdC5zdWNjZXNzKCksITE7d3JhcEVycm9yKHRoaXMsdCk7dmFyIHI9dGhpcy5zeW5jKCJkZWxldGUiLHRoaXMsdCk7cmV0dXJuIHQud2FpdHx8bCgpLHJ9LHVybDpmdW5jdGlvbigpe3ZhciB0PXMucmVzdWx0KHRoaXMsInVybFJvb3QiKXx8cy5yZXN1bHQodGhpcy5jb2xsZWN0aW9uLCJ1cmwiKXx8dXJsRXJyb3IoKTtyZXR1cm4gdGhpcy5pc05ldygpP3Q6dC5yZXBsYWNlKC8oW15cL10pJC8sIiQxLyIpK2VuY29kZVVSSUNvbXBvbmVudCh0aGlzLmlkKX0scGFyc2U6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdH0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5hdHRyaWJ1dGVzKX0saXNOZXc6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5oYXModGhpcy5pZEF0dHJpYnV0ZSl9LGlzVmFsaWQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3ZhbGlkYXRlKHt9LHMuZXh0ZW5kKHR8fHt9LHt2YWxpZGF0ZTohMH0pKX0sX3ZhbGlkYXRlOmZ1bmN0aW9uKHQsZSl7aWYoIWUudmFsaWRhdGV8fCF0aGlzLnZhbGlkYXRlKXJldHVybiEwO3Q9cy5leHRlbmQoe30sdGhpcy5hdHRyaWJ1dGVzLHQpO3ZhciBuPXRoaXMudmFsaWRhdGlvbkVycm9yPXRoaXMudmFsaWRhdGUodCxlKXx8bnVsbDtyZXR1cm4hbnx8KHRoaXMudHJpZ2dlcigiaW52YWxpZCIsdGhpcyxuLHMuZXh0ZW5kKGUse3ZhbGlkYXRpb25FcnJvcjpufSkpLCExKX19KTt2YXIgYT1bImtleXMiLCJ2YWx1ZXMiLCJwYWlycyIsImludmVydCIsInBpY2siLCJvbWl0IiwiY2hhaW4iLCJpc0VtcHR5Il07cy5lYWNoKGEsZnVuY3Rpb24odCl7c1t0XSYmKHUucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7dmFyIGU9c2xpY2UuY2FsbChhcmd1bWVudHMpO3JldHVybiBlLnVuc2hpZnQodGhpcy5hdHRyaWJ1dGVzKSxzW3RdLmFwcGx5KHMsZSl9KX0pLHUuZXh0ZW5kPW8sdC5leHBvcnRzPXV9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcixpLG89ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbD8ic3ltYm9sIjp0eXBlb2YgdH07KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gbih0KXtmdW5jdGlvbiBlKGUsbixyLGksbyxzKXtmb3IoO28+PTAmJm88cztvKz10KXt2YXIgdT1pP2lbb106bztyPW4ocixlW3VdLHUsZSl9cmV0dXJuIHJ9cmV0dXJuIGZ1bmN0aW9uKG4scixpLG8pe3I9ayhyLG8sNCk7dmFyIHM9IUMobikmJlMua2V5cyhuKSx1PShzfHxuKS5sZW5ndGgsYT10PjA/MDp1LTE7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8MyYmKGk9bltzP3NbYV06YV0sYSs9dCksZShuLHIsaSxzLGEsdSl9fWZ1bmN0aW9uIHModCl7cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtuPWoobixyKTtmb3IodmFyIGk9QShlKSxvPXQ+MD8wOmktMTtvPj0wJiZvPGk7bys9dClpZihuKGVbb10sbyxlKSlyZXR1cm4gbztyZXR1cm4tMX19ZnVuY3Rpb24gdSh0LGUsbil7cmV0dXJuIGZ1bmN0aW9uKHIsaSxvKXt2YXIgcz0wLHU9QShyKTtpZigibnVtYmVyIj09dHlwZW9mIG8pdD4wP3M9bz49MD9vOk1hdGgubWF4KG8rdSxzKTp1PW8+PTA/TWF0aC5taW4obysxLHUpOm8rdSsxO2Vsc2UgaWYobiYmbyYmdSlyZXR1cm4gbz1uKHIsaSkscltvXT09PWk/bzotMTtpZihpIT09aSlyZXR1cm4gbz1lKGcuY2FsbChyLHMsdSksUy5pc05hTiksbz49MD9vK3M6LTE7Zm9yKG89dD4wP3M6dS0xO28+PTAmJm88dTtvKz10KWlmKHJbb109PT1pKXJldHVybiBvO3JldHVybi0xfX1mdW5jdGlvbiBhKHQsZSl7dmFyIG49Ui5sZW5ndGgscj10LmNvbnN0cnVjdG9yLGk9Uy5pc0Z1bmN0aW9uKHIpJiZyLnByb3RvdHlwZXx8aCxvPSJjb25zdHJ1Y3RvciI7Zm9yKFMuaGFzKHQsbykmJiFTLmNvbnRhaW5zKGUsbykmJmUucHVzaChvKTtuLS07KW89UltuXSxvIGluIHQmJnRbb10hPT1pW29dJiYhUy5jb250YWlucyhlLG8pJiZlLnB1c2gobyl9dmFyIGw9dGhpcyxjPWwuXyxmPUFycmF5LnByb3RvdHlwZSxoPU9iamVjdC5wcm90b3R5cGUsZD1GdW5jdGlvbi5wcm90b3R5cGUscD1mLnB1c2gsZz1mLnNsaWNlLHY9aC50b1N0cmluZyxtPWguaGFzT3duUHJvcGVydHkseT1BcnJheS5pc0FycmF5LF89T2JqZWN0LmtleXMsYj1kLmJpbmQseD1PYmplY3QuY3JlYXRlLHc9ZnVuY3Rpb24oKXt9LFM9ZnVuY3Rpb24gRyh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIEc/dDp0aGlzIGluc3RhbmNlb2YgRz92b2lkKHRoaXMuX3dyYXBwZWQ9dCk6bmV3IEcodCl9OyJ1bmRlZmluZWQiIT10eXBlb2YgdCYmdC5leHBvcnRzJiYoZT10LmV4cG9ydHM9UyksZS5fPVMsUy5WRVJTSU9OPSIxLjguMyI7dmFyIGs9ZnVuY3Rpb24odCxlLG4pe2lmKHZvaWQgMD09PWUpcmV0dXJuIHQ7c3dpdGNoKG51bGw9PW4/MzpuKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiB0LmNhbGwoZSxuKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihuLHIpe3JldHVybiB0LmNhbGwoZSxuLHIpfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKG4scixpKXtyZXR1cm4gdC5jYWxsKGUsbixyLGkpfTtjYXNlIDQ6cmV0dXJuIGZ1bmN0aW9uKG4scixpLG8pe3JldHVybiB0LmNhbGwoZSxuLHIsaSxvKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkoZSxhcmd1bWVudHMpfX0saj1mdW5jdGlvbih0LGUsbil7cmV0dXJuIG51bGw9PXQ/Uy5pZGVudGl0eTpTLmlzRnVuY3Rpb24odCk/ayh0LGUsbik6Uy5pc09iamVjdCh0KT9TLm1hdGNoZXIodCk6Uy5wcm9wZXJ0eSh0KX07Uy5pdGVyYXRlZT1mdW5jdGlvbih0LGUpe3JldHVybiBqKHQsZSwxLzApfTt2YXIgTz1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoO2lmKHI8Mnx8bnVsbD09bilyZXR1cm4gbjtmb3IodmFyIGk9MTtpPHI7aSsrKWZvcih2YXIgbz1hcmd1bWVudHNbaV0scz10KG8pLHU9cy5sZW5ndGgsYT0wO2E8dTthKyspe3ZhciBsPXNbYV07ZSYmdm9pZCAwIT09bltsXXx8KG5bbF09b1tsXSl9cmV0dXJuIG59fSxFPWZ1bmN0aW9uKHQpe2lmKCFTLmlzT2JqZWN0KHQpKXJldHVybnt9O2lmKHgpcmV0dXJuIHgodCk7dy5wcm90b3R5cGU9dDt2YXIgZT1uZXcgdztyZXR1cm4gdy5wcm90b3R5cGU9bnVsbCxlfSxNPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT92b2lkIDA6ZVt0XX19LHo9TWF0aC5wb3coMiw1MyktMSxBPU0oImxlbmd0aCIpLEM9ZnVuY3Rpb24odCl7dmFyIGU9QSh0KTtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGUmJmU+PTAmJmU8PXp9O1MuZWFjaD1TLmZvckVhY2g9ZnVuY3Rpb24odCxlLG4pe2U9ayhlLG4pO3ZhciByLGk7aWYoQyh0KSlmb3Iocj0wLGk9dC5sZW5ndGg7cjxpO3IrKyllKHRbcl0scix0KTtlbHNle3ZhciBvPVMua2V5cyh0KTtmb3Iocj0wLGk9by5sZW5ndGg7cjxpO3IrKyllKHRbb1tyXV0sb1tyXSx0KX1yZXR1cm4gdH0sUy5tYXA9Uy5jb2xsZWN0PWZ1bmN0aW9uKHQsZSxuKXtlPWooZSxuKTtmb3IodmFyIHI9IUModCkmJlMua2V5cyh0KSxpPShyfHx0KS5sZW5ndGgsbz1BcnJheShpKSxzPTA7czxpO3MrKyl7dmFyIHU9cj9yW3NdOnM7b1tzXT1lKHRbdV0sdSx0KX1yZXR1cm4gb30sUy5yZWR1Y2U9Uy5mb2xkbD1TLmluamVjdD1uKDEpLFMucmVkdWNlUmlnaHQ9Uy5mb2xkcj1uKC0xKSxTLmZpbmQ9Uy5kZXRlY3Q9ZnVuY3Rpb24odCxlLG4pe3ZhciByO2lmKHI9Qyh0KT9TLmZpbmRJbmRleCh0LGUsbik6Uy5maW5kS2V5KHQsZSxuKSx2b2lkIDAhPT1yJiZyIT09LTEpcmV0dXJuIHRbcl19LFMuZmlsdGVyPVMuc2VsZWN0PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1bXTtyZXR1cm4gZT1qKGUsbiksUy5lYWNoKHQsZnVuY3Rpb24odCxuLGkpe2UodCxuLGkpJiZyLnB1c2godCl9KSxyfSxTLnJlamVjdD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIFMuZmlsdGVyKHQsUy5uZWdhdGUoaihlKSksbil9LFMuZXZlcnk9Uy5hbGw9ZnVuY3Rpb24odCxlLG4pe2U9aihlLG4pO2Zvcih2YXIgcj0hQyh0KSYmUy5rZXlzKHQpLGk9KHJ8fHQpLmxlbmd0aCxvPTA7bzxpO28rKyl7dmFyIHM9cj9yW29dOm87aWYoIWUodFtzXSxzLHQpKXJldHVybiExfXJldHVybiEwfSxTLnNvbWU9Uy5hbnk9ZnVuY3Rpb24odCxlLG4pe2U9aihlLG4pO2Zvcih2YXIgcj0hQyh0KSYmUy5rZXlzKHQpLGk9KHJ8fHQpLmxlbmd0aCxvPTA7bzxpO28rKyl7dmFyIHM9cj9yW29dOm87aWYoZSh0W3NdLHMsdCkpcmV0dXJuITB9cmV0dXJuITF9LFMuY29udGFpbnM9Uy5pbmNsdWRlcz1TLmluY2x1ZGU9ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIEModCl8fCh0PVMudmFsdWVzKHQpKSwoIm51bWJlciIhPXR5cGVvZiBufHxyKSYmKG49MCksUy5pbmRleE9mKHQsZSxuKT49MH0sUy5pbnZva2U9ZnVuY3Rpb24odCxlKXt2YXIgbj1nLmNhbGwoYXJndW1lbnRzLDIpLHI9Uy5pc0Z1bmN0aW9uKGUpO3JldHVybiBTLm1hcCh0LGZ1bmN0aW9uKHQpe3ZhciBpPXI/ZTp0W2VdO3JldHVybiBudWxsPT1pP2k6aS5hcHBseSh0LG4pfSl9LFMucGx1Y2s9ZnVuY3Rpb24odCxlKXtyZXR1cm4gUy5tYXAodCxTLnByb3BlcnR5KGUpKX0sUy53aGVyZT1mdW5jdGlvbih0LGUpe3JldHVybiBTLmZpbHRlcih0LFMubWF0Y2hlcihlKSl9LFMuZmluZFdoZXJlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFMuZmluZCh0LFMubWF0Y2hlcihlKSl9LFMubWF4PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcixpLG89LSgxLzApLHM9LSgxLzApO2lmKG51bGw9PWUmJm51bGwhPXQpe3Q9Qyh0KT90OlMudmFsdWVzKHQpO2Zvcih2YXIgdT0wLGE9dC5sZW5ndGg7dTxhO3UrKylyPXRbdV0scj5vJiYobz1yKX1lbHNlIGU9aihlLG4pLFMuZWFjaCh0LGZ1bmN0aW9uKHQsbixyKXtpPWUodCxuLHIpLChpPnN8fGk9PT0tKDEvMCkmJm89PT0tKDEvMCkpJiYobz10LHM9aSl9KTtyZXR1cm4gb30sUy5taW49ZnVuY3Rpb24odCxlLG4pe3ZhciByLGksbz0xLzAscz0xLzA7aWYobnVsbD09ZSYmbnVsbCE9dCl7dD1DKHQpP3Q6Uy52YWx1ZXModCk7Zm9yKHZhciB1PTAsYT10Lmxlbmd0aDt1PGE7dSsrKXI9dFt1XSxyPG8mJihvPXIpfWVsc2UgZT1qKGUsbiksUy5lYWNoKHQsZnVuY3Rpb24odCxuLHIpe2k9ZSh0LG4sciksKGk8c3x8aT09PTEvMCYmbz09PTEvMCkmJihvPXQscz1pKX0pO3JldHVybiBvfSxTLnNodWZmbGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49Qyh0KT90OlMudmFsdWVzKHQpLHI9bi5sZW5ndGgsaT1BcnJheShyKSxvPTA7bzxyO28rKyllPVMucmFuZG9tKDAsbyksZSE9PW8mJihpW29dPWlbZV0pLGlbZV09bltvXTtyZXR1cm4gaX0sUy5zYW1wbGU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBudWxsPT1lfHxuPyhDKHQpfHwodD1TLnZhbHVlcyh0KSksdFtTLnJhbmRvbSh0Lmxlbmd0aC0xKV0pOlMuc2h1ZmZsZSh0KS5zbGljZSgwLE1hdGgubWF4KDAsZSkpfSxTLnNvcnRCeT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGU9aihlLG4pLFMucGx1Y2soUy5tYXAodCxmdW5jdGlvbih0LG4scil7cmV0dXJue3ZhbHVlOnQsaW5kZXg6bixjcml0ZXJpYTplKHQsbixyKX19KS5zb3J0KGZ1bmN0aW9uKHQsZSl7dmFyIG49dC5jcml0ZXJpYSxyPWUuY3JpdGVyaWE7aWYobiE9PXIpe2lmKG4+cnx8dm9pZCAwPT09bilyZXR1cm4gMTtpZihuPHJ8fHZvaWQgMD09PXIpcmV0dXJuLTF9cmV0dXJuIHQuaW5kZXgtZS5pbmRleH0pLCJ2YWx1ZSIpfTt2YXIgVD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuLHIpe3ZhciBpPXt9O3JldHVybiBuPWoobixyKSxTLmVhY2goZSxmdW5jdGlvbihyLG8pe3QoaSxyLG4ocixvLGUpKX0pLGl9fTtTLmdyb3VwQnk9VChmdW5jdGlvbih0LGUsbil7Uy5oYXModCxuKT90W25dLnB1c2goZSk6dFtuXT1bZV19KSxTLmluZGV4Qnk9VChmdW5jdGlvbih0LGUsbil7dFtuXT1lfSksUy5jb3VudEJ5PVQoZnVuY3Rpb24odCxlLG4pe1MuaGFzKHQsbik/dFtuXSsrOnRbbl09MX0pLFMudG9BcnJheT1mdW5jdGlvbih0KXtyZXR1cm4gdD9TLmlzQXJyYXkodCk/Zy5jYWxsKHQpOkModCk/Uy5tYXAodCxTLmlkZW50aXR5KTpTLnZhbHVlcyh0KTpbXX0sUy5zaXplPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10PzA6Qyh0KT90Lmxlbmd0aDpTLmtleXModCkubGVuZ3RofSxTLnBhcnRpdGlvbj1mdW5jdGlvbih0LGUsbil7ZT1qKGUsbik7dmFyIHI9W10saT1bXTtyZXR1cm4gUy5lYWNoKHQsZnVuY3Rpb24odCxuLG8peyhlKHQsbixvKT9yOmkpLnB1c2godCl9KSxbcixpXX0sUy5maXJzdD1TLmhlYWQ9Uy50YWtlPWZ1bmN0aW9uKHQsZSxuKXtpZihudWxsIT10KXJldHVybiBudWxsPT1lfHxuP3RbMF06Uy5pbml0aWFsKHQsdC5sZW5ndGgtZSl9LFMuaW5pdGlhbD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGcuY2FsbCh0LDAsTWF0aC5tYXgoMCx0Lmxlbmd0aC0obnVsbD09ZXx8bj8xOmUpKSl9LFMubGFzdD1mdW5jdGlvbih0LGUsbil7aWYobnVsbCE9dClyZXR1cm4gbnVsbD09ZXx8bj90W3QubGVuZ3RoLTFdOlMucmVzdCh0LE1hdGgubWF4KDAsdC5sZW5ndGgtZSkpfSxTLnJlc3Q9Uy50YWlsPVMuZHJvcD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGcuY2FsbCh0LG51bGw9PWV8fG4/MTplKX0sUy5jb21wYWN0PWZ1bmN0aW9uKHQpe3JldHVybiBTLmZpbHRlcih0LFMuaWRlbnRpdHkpfTt2YXIgST1mdW5jdGlvbiBLKHQsZSxuLHIpe2Zvcih2YXIgaT1bXSxvPTAscz1yfHwwLHU9QSh0KTtzPHU7cysrKXt2YXIgYT10W3NdO2lmKEMoYSkmJihTLmlzQXJyYXkoYSl8fFMuaXNBcmd1bWVudHMoYSkpKXtlfHwoYT1LKGEsZSxuKSk7dmFyIGw9MCxjPWEubGVuZ3RoO2ZvcihpLmxlbmd0aCs9YztsPGM7KWlbbysrXT1hW2wrK119ZWxzZSBufHwoaVtvKytdPWEpfXJldHVybiBpfTtTLmZsYXR0ZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gSSh0LGUsITEpfSxTLndpdGhvdXQ9ZnVuY3Rpb24odCl7cmV0dXJuIFMuZGlmZmVyZW5jZSh0LGcuY2FsbChhcmd1bWVudHMsMSkpfSxTLnVuaXE9Uy51bmlxdWU9ZnVuY3Rpb24odCxlLG4scil7Uy5pc0Jvb2xlYW4oZSl8fChyPW4sbj1lLGU9ITEpLG51bGwhPW4mJihuPWoobixyKSk7Zm9yKHZhciBpPVtdLG89W10scz0wLHU9QSh0KTtzPHU7cysrKXt2YXIgYT10W3NdLGw9bj9uKGEscyx0KTphO2U/KHMmJm89PT1sfHxpLnB1c2goYSksbz1sKTpuP1MuY29udGFpbnMobyxsKXx8KG8ucHVzaChsKSxpLnB1c2goYSkpOlMuY29udGFpbnMoaSxhKXx8aS5wdXNoKGEpfXJldHVybiBpfSxTLnVuaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIFMudW5pcShJKGFyZ3VtZW50cywhMCwhMCkpfSxTLmludGVyc2VjdGlvbj1mdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj1hcmd1bWVudHMubGVuZ3RoLHI9MCxpPUEodCk7cjxpO3IrKyl7dmFyIG89dFtyXTtpZighUy5jb250YWlucyhlLG8pKXtmb3IodmFyIHM9MTtzPG4mJlMuY29udGFpbnMoYXJndW1lbnRzW3NdLG8pO3MrKyk7cz09PW4mJmUucHVzaChvKX19cmV0dXJuIGV9LFMuZGlmZmVyZW5jZT1mdW5jdGlvbih0KXt2YXIgZT1JKGFyZ3VtZW50cywhMCwhMCwxKTtyZXR1cm4gUy5maWx0ZXIodCxmdW5jdGlvbih0KXtyZXR1cm4hUy5jb250YWlucyhlLHQpfSl9LFMuemlwPWZ1bmN0aW9uKCl7cmV0dXJuIFMudW56aXAoYXJndW1lbnRzKX0sUy51bnppcD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dCYmUy5tYXgodCxBKS5sZW5ndGh8fDAsbj1BcnJheShlKSxyPTA7cjxlO3IrKyluW3JdPVMucGx1Y2sodCxyKTtyZXR1cm4gbn0sUy5vYmplY3Q9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49e30scj0wLGk9QSh0KTtyPGk7cisrKWU/blt0W3JdXT1lW3JdOm5bdFtyXVswXV09dFtyXVsxXTtyZXR1cm4gbn0sUy5maW5kSW5kZXg9cygxKSxTLmZpbmRMYXN0SW5kZXg9cygtMSksUy5zb3J0ZWRJbmRleD1mdW5jdGlvbih0LGUsbixyKXtuPWoobixyLDEpO2Zvcih2YXIgaT1uKGUpLG89MCxzPUEodCk7bzxzOyl7dmFyIHU9TWF0aC5mbG9vcigobytzKS8yKTtuKHRbdV0pPGk/bz11KzE6cz11fXJldHVybiBvfSxTLmluZGV4T2Y9dSgxLFMuZmluZEluZGV4LFMuc29ydGVkSW5kZXgpLFMubGFzdEluZGV4T2Y9dSgtMSxTLmZpbmRMYXN0SW5kZXgpLFMucmFuZ2U9ZnVuY3Rpb24odCxlLG4pe251bGw9PWUmJihlPXR8fDAsdD0wKSxuPW58fDE7Zm9yKHZhciByPU1hdGgubWF4KE1hdGguY2VpbCgoZS10KS9uKSwwKSxpPUFycmF5KHIpLG89MDtvPHI7bysrLHQrPW4paVtvXT10O3JldHVybiBpfTt2YXIgTj1mdW5jdGlvbih0LGUsbixyLGkpe2lmKCEociBpbnN0YW5jZW9mIGUpKXJldHVybiB0LmFwcGx5KG4saSk7dmFyIG89RSh0LnByb3RvdHlwZSkscz10LmFwcGx5KG8saSk7cmV0dXJuIFMuaXNPYmplY3Qocyk/czpvfTtTLmJpbmQ9ZnVuY3Rpb24odCxlKXtpZihiJiZ0LmJpbmQ9PT1iKXJldHVybiBiLmFwcGx5KHQsZy5jYWxsKGFyZ3VtZW50cywxKSk7aWYoIVMuaXNGdW5jdGlvbih0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJCaW5kIG11c3QgYmUgY2FsbGVkIG9uIGEgZnVuY3Rpb24iKTt2YXIgbj1nLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBmdW5jdGlvbiByKCl7cmV0dXJuIE4odCxyLGUsdGhpcyxuLmNvbmNhdChnLmNhbGwoYXJndW1lbnRzKSkpfX0sUy5wYXJ0aWFsPWZ1bmN0aW9uKHQpe3ZhciBlPWcuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uIG4oKXtmb3IodmFyIHI9MCxpPWUubGVuZ3RoLG89QXJyYXkoaSkscz0wO3M8aTtzKyspb1tzXT1lW3NdPT09Uz9hcmd1bWVudHNbcisrXTplW3NdO2Zvcig7cjxhcmd1bWVudHMubGVuZ3RoOylvLnB1c2goYXJndW1lbnRzW3IrK10pO3JldHVybiBOKHQsbix0aGlzLHRoaXMsbyl9fSxTLmJpbmRBbGw9ZnVuY3Rpb24odCl7dmFyIGUsbixyPWFyZ3VtZW50cy5sZW5ndGg7aWYocjw9MSl0aHJvdyBuZXcgRXJyb3IoImJpbmRBbGwgbXVzdCBiZSBwYXNzZWQgZnVuY3Rpb24gbmFtZXMiKTtmb3IoZT0xO2U8cjtlKyspbj1hcmd1bWVudHNbZV0sdFtuXT1TLmJpbmQodFtuXSx0KTtyZXR1cm4gdH0sUy5tZW1vaXplPWZ1bmN0aW9uKHQsZSl7dmFyIG49ZnVuY3Rpb24gcihuKXt2YXIgaT1yLmNhY2hlLG89IiIrKGU/ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6bik7cmV0dXJuIFMuaGFzKGksbyl8fChpW29dPXQuYXBwbHkodGhpcyxhcmd1bWVudHMpKSxpW29dfTtyZXR1cm4gbi5jYWNoZT17fSxufSxTLmRlbGF5PWZ1bmN0aW9uKHQsZSl7dmFyIG49Zy5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KG51bGwsbil9LGUpfSxTLmRlZmVyPVMucGFydGlhbChTLmRlbGF5LFMsMSksUy50aHJvdHRsZT1mdW5jdGlvbih0LGUsbil7dmFyIHIsaSxvLHM9bnVsbCx1PTA7bnx8KG49e30pO3ZhciBhPWZ1bmN0aW9uKCl7dT1uLmxlYWRpbmc9PT0hMT8wOlMubm93KCkscz1udWxsLG89dC5hcHBseShyLGkpLHN8fChyPWk9bnVsbCl9O3JldHVybiBmdW5jdGlvbigpe3ZhciBsPVMubm93KCk7dXx8bi5sZWFkaW5nIT09ITF8fCh1PWwpO3ZhciBjPWUtKGwtdSk7cmV0dXJuIHI9dGhpcyxpPWFyZ3VtZW50cyxjPD0wfHxjPmU/KHMmJihjbGVhclRpbWVvdXQocykscz1udWxsKSx1PWwsbz10LmFwcGx5KHIsaSksc3x8KHI9aT1udWxsKSk6c3x8bi50cmFpbGluZz09PSExfHwocz1zZXRUaW1lb3V0KGEsYykpLG99fSxTLmRlYm91bmNlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcixpLG8scyx1LGE9ZnVuY3Rpb24gbCgpe3ZhciBhPVMubm93KCktczthPGUmJmE+PTA/cj1zZXRUaW1lb3V0KGwsZS1hKToocj1udWxsLG58fCh1PXQuYXBwbHkobyxpKSxyfHwobz1pPW51bGwpKSl9O3JldHVybiBmdW5jdGlvbigpe289dGhpcyxpPWFyZ3VtZW50cyxzPVMubm93KCk7dmFyIGw9biYmIXI7cmV0dXJuIHJ8fChyPXNldFRpbWVvdXQoYSxlKSksbCYmKHU9dC5hcHBseShvLGkpLG89aT1udWxsKSx1fX0sUy53cmFwPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFMucGFydGlhbChlLHQpfSxTLm5lZ2F0ZT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4hdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxTLmNvbXBvc2U9ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMsZT10Lmxlbmd0aC0xO3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgbj1lLHI9dFtlXS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7bi0tOylyPXRbbl0uY2FsbCh0aGlzLHIpO3JldHVybiByfX0sUy5hZnRlcj1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbigpe2lmKC0tdDwxKXJldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LFMuYmVmb3JlPWZ1bmN0aW9uKHQsZSl7dmFyIG47cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuLS10PjAmJihuPWUuYXBwbHkodGhpcyxhcmd1bWVudHMpKSx0PD0xJiYoZT1udWxsKSxufX0sUy5vbmNlPVMucGFydGlhbChTLmJlZm9yZSwyKTt2YXIgTD0he3RvU3RyaW5nOm51bGx9LnByb3BlcnR5SXNFbnVtZXJhYmxlKCJ0b1N0cmluZyIpLFI9WyJ2YWx1ZU9mIiwiaXNQcm90b3R5cGVPZiIsInRvU3RyaW5nIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJoYXNPd25Qcm9wZXJ0eSIsInRvTG9jYWxlU3RyaW5nIl07Uy5rZXlzPWZ1bmN0aW9uKHQpe2lmKCFTLmlzT2JqZWN0KHQpKXJldHVybltdO2lmKF8pcmV0dXJuIF8odCk7dmFyIGU9W107Zm9yKHZhciBuIGluIHQpUy5oYXModCxuKSYmZS5wdXNoKG4pO3JldHVybiBMJiZhKHQsZSksZX0sUy5hbGxLZXlzPWZ1bmN0aW9uKHQpe2lmKCFTLmlzT2JqZWN0KHQpKXJldHVybltdO3ZhciBlPVtdO2Zvcih2YXIgbiBpbiB0KWUucHVzaChuKTtyZXR1cm4gTCYmYSh0LGUpLGV9LFMudmFsdWVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1TLmtleXModCksbj1lLmxlbmd0aCxyPUFycmF5KG4pLGk9MDtpPG47aSsrKXJbaV09dFtlW2ldXTtyZXR1cm4gcn0sUy5tYXBPYmplY3Q9ZnVuY3Rpb24odCxlLG4pe2U9aihlLG4pO2Zvcih2YXIgcixpPVMua2V5cyh0KSxvPWkubGVuZ3RoLHM9e30sdT0wO3U8bzt1Kyspcj1pW3VdLHNbcl09ZSh0W3JdLHIsdCk7cmV0dXJuIHN9LFMucGFpcnM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVMua2V5cyh0KSxuPWUubGVuZ3RoLHI9QXJyYXkobiksaT0wO2k8bjtpKyspcltpXT1bZVtpXSx0W2VbaV1dXTtyZXR1cm4gcn0sUy5pbnZlcnQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXt9LG49Uy5rZXlzKHQpLHI9MCxpPW4ubGVuZ3RoO3I8aTtyKyspZVt0W25bcl1dXT1uW3JdO3JldHVybiBlfSxTLmZ1bmN0aW9ucz1TLm1ldGhvZHM9ZnVuY3Rpb24odCl7dmFyIGU9W107Zm9yKHZhciBuIGluIHQpUy5pc0Z1bmN0aW9uKHRbbl0pJiZlLnB1c2gobik7cmV0dXJuIGUuc29ydCgpfSxTLmV4dGVuZD1PKFMuYWxsS2V5cyksUy5leHRlbmRPd249Uy5hc3NpZ249TyhTLmtleXMpLFMuZmluZEtleT1mdW5jdGlvbih0LGUsbil7ZT1qKGUsbik7Zm9yKHZhciByLGk9Uy5rZXlzKHQpLG89MCxzPWkubGVuZ3RoO288cztvKyspaWYocj1pW29dLGUodFtyXSxyLHQpKXJldHVybiByfSxTLnBpY2s9ZnVuY3Rpb24odCxlLG4pe3ZhciByLGksbz17fSxzPXQ7aWYobnVsbD09cylyZXR1cm4gbztTLmlzRnVuY3Rpb24oZSk/KGk9Uy5hbGxLZXlzKHMpLHI9ayhlLG4pKTooaT1JKGFyZ3VtZW50cywhMSwhMSwxKSxyPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZSBpbiBufSxzPU9iamVjdChzKSk7Zm9yKHZhciB1PTAsYT1pLmxlbmd0aDt1PGE7dSsrKXt2YXIgbD1pW3VdLGM9c1tsXTtyKGMsbCxzKSYmKG9bbF09Yyl9cmV0dXJuIG99LFMub21pdD1mdW5jdGlvbih0LGUsbil7aWYoUy5pc0Z1bmN0aW9uKGUpKWU9Uy5uZWdhdGUoZSk7ZWxzZXt2YXIgcj1TLm1hcChJKGFyZ3VtZW50cywhMSwhMSwxKSxTdHJpbmcpO2U9ZnVuY3Rpb24odCxlKXtyZXR1cm4hUy5jb250YWlucyhyLGUpfX1yZXR1cm4gUy5waWNrKHQsZSxuKX0sUy5kZWZhdWx0cz1PKFMuYWxsS2V5cywhMCksUy5jcmVhdGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1FKHQpO3JldHVybiBlJiZTLmV4dGVuZE93bihuLGUpLG59LFMuY2xvbmU9ZnVuY3Rpb24odCl7cmV0dXJuIFMuaXNPYmplY3QodCk/Uy5pc0FycmF5KHQpP3Quc2xpY2UoKTpTLmV4dGVuZCh7fSx0KTp0fSxTLnRhcD1mdW5jdGlvbih0LGUpe3JldHVybiBlKHQpLHR9LFMuaXNNYXRjaD1mdW5jdGlvbih0LGUpe3ZhciBuPVMua2V5cyhlKSxyPW4ubGVuZ3RoO2lmKG51bGw9PXQpcmV0dXJuIXI7Zm9yKHZhciBpPU9iamVjdCh0KSxvPTA7bzxyO28rKyl7dmFyIHM9bltvXTtpZihlW3NdIT09aVtzXXx8IShzIGluIGkpKXJldHVybiExfXJldHVybiEwfTt2YXIgcT1mdW5jdGlvbiBYKHQsZSxuLHIpe2lmKHQ9PT1lKXJldHVybiAwIT09dHx8MS90PT09MS9lO2lmKG51bGw9PXR8fG51bGw9PWUpcmV0dXJuIHQ9PT1lO3QgaW5zdGFuY2VvZiBTJiYodD10Ll93cmFwcGVkKSxlIGluc3RhbmNlb2YgUyYmKGU9ZS5fd3JhcHBlZCk7dmFyIGk9di5jYWxsKHQpO2lmKGkhPT12LmNhbGwoZSkpcmV0dXJuITE7c3dpdGNoKGkpe2Nhc2UiW29iamVjdCBSZWdFeHBdIjpjYXNlIltvYmplY3QgU3RyaW5nXSI6cmV0dXJuIiIrdD09IiIrZTtjYXNlIltvYmplY3QgTnVtYmVyXSI6cmV0dXJuK3QhPT0rdD8rZSE9PStlOjA9PT0rdD8xLyt0PT09MS9lOit0PT09K2U7Y2FzZSJbb2JqZWN0IERhdGVdIjpjYXNlIltvYmplY3QgQm9vbGVhbl0iOnJldHVybit0PT09K2V9dmFyIHM9IltvYmplY3QgQXJyYXldIj09PWk7aWYoIXMpe2lmKCJvYmplY3QiIT0oInVuZGVmaW5lZCI9PXR5cGVvZiB0PyJ1bmRlZmluZWQiOm8odCkpfHwib2JqZWN0IiE9KCJ1bmRlZmluZWQiPT10eXBlb2YgZT8idW5kZWZpbmVkIjpvKGUpKSlyZXR1cm4hMTt2YXIgdT10LmNvbnN0cnVjdG9yLGE9ZS5jb25zdHJ1Y3RvcjtpZih1IT09YSYmIShTLmlzRnVuY3Rpb24odSkmJnUgaW5zdGFuY2VvZiB1JiZTLmlzRnVuY3Rpb24oYSkmJmEgaW5zdGFuY2VvZiBhKSYmImNvbnN0cnVjdG9yImluIHQmJiJjb25zdHJ1Y3RvciJpbiBlKXJldHVybiExfW49bnx8W10scj1yfHxbXTtmb3IodmFyIGw9bi5sZW5ndGg7bC0tOylpZihuW2xdPT09dClyZXR1cm4gcltsXT09PWU7aWYobi5wdXNoKHQpLHIucHVzaChlKSxzKXtpZihsPXQubGVuZ3RoLGwhPT1lLmxlbmd0aClyZXR1cm4hMTtmb3IoO2wtLTspaWYoIVgodFtsXSxlW2xdLG4scikpcmV0dXJuITF9ZWxzZXt2YXIgYyxmPVMua2V5cyh0KTtpZihsPWYubGVuZ3RoLFMua2V5cyhlKS5sZW5ndGghPT1sKXJldHVybiExO2Zvcig7bC0tOylpZihjPWZbbF0sIVMuaGFzKGUsYyl8fCFYKHRbY10sZVtjXSxuLHIpKXJldHVybiExfXJldHVybiBuLnBvcCgpLHIucG9wKCksITB9O1MuaXNFcXVhbD1mdW5jdGlvbih0LGUpe3JldHVybiBxKHQsZSl9LFMuaXNFbXB0eT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dHx8KEModCkmJihTLmlzQXJyYXkodCl8fFMuaXNTdHJpbmcodCl8fFMuaXNBcmd1bWVudHModCkpPzA9PT10Lmxlbmd0aDowPT09Uy5rZXlzKHQpLmxlbmd0aCl9LFMuaXNFbGVtZW50PWZ1bmN0aW9uKHQpe3JldHVybiEoIXR8fDEhPT10Lm5vZGVUeXBlKX0sUy5pc0FycmF5PXl8fGZ1bmN0aW9uKHQpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT12LmNhbGwodCl9LFMuaXNPYmplY3Q9ZnVuY3Rpb24odCl7dmFyIGU9InVuZGVmaW5lZCI9PXR5cGVvZiB0PyJ1bmRlZmluZWQiOm8odCk7cmV0dXJuImZ1bmN0aW9uIj09PWV8fCJvYmplY3QiPT09ZSYmISF0fSxTLmVhY2goWyJBcmd1bWVudHMiLCJGdW5jdGlvbiIsIlN0cmluZyIsIk51bWJlciIsIkRhdGUiLCJSZWdFeHAiLCJFcnJvciJdLGZ1bmN0aW9uKHQpe1NbImlzIit0XT1mdW5jdGlvbihlKXtyZXR1cm4gdi5jYWxsKGUpPT09IltvYmplY3QgIit0KyJdIn19KSxTLmlzQXJndW1lbnRzKGFyZ3VtZW50cyl8fChTLmlzQXJndW1lbnRzPWZ1bmN0aW9uKHQpe3JldHVybiBTLmhhcyh0LCJjYWxsZWUiKX0pLCJmdW5jdGlvbiIhPXR5cGVvZi8uLyYmIm9iamVjdCIhPSgidW5kZWZpbmVkIj09dHlwZW9mIEludDhBcnJheT8idW5kZWZpbmVkIjpvKEludDhBcnJheSkpJiYoUy5pc0Z1bmN0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0fHwhMX0pLFMuaXNGaW5pdGU9ZnVuY3Rpb24odCl7cmV0dXJuIGlzRmluaXRlKHQpJiYhaXNOYU4ocGFyc2VGbG9hdCh0KSl9LFMuaXNOYU49ZnVuY3Rpb24odCl7cmV0dXJuIFMuaXNOdW1iZXIodCkmJnQhPT0rdH0sUy5pc0Jvb2xlYW49ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT0hMHx8dD09PSExfHwiW29iamVjdCBCb29sZWFuXSI9PT12LmNhbGwodCl9LFMuaXNOdWxsPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT09dH0sUy5pc1VuZGVmaW5lZD1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dH0sUy5oYXM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbCE9dCYmbS5jYWxsKHQsZSl9LFMubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBsLl89Yyx0aGlzfSxTLmlkZW50aXR5PWZ1bmN0aW9uKHQpe3JldHVybiB0fSxTLmNvbnN0YW50PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0fX0sUy5ub29wPWZ1bmN0aW9uKCl7fSxTLnByb3BlcnR5PU0sUy5wcm9wZXJ0eU9mPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P2Z1bmN0aW9uKCl7fTpmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX19LFMubWF0Y2hlcj1TLm1hdGNoZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9Uy5leHRlbmRPd24oe30sdCksZnVuY3Rpb24oZSl7cmV0dXJuIFMuaXNNYXRjaChlLHQpfX0sUy50aW1lcz1mdW5jdGlvbih0LGUsbil7dmFyIHI9QXJyYXkoTWF0aC5tYXgoMCx0KSk7ZT1rKGUsbiwxKTtmb3IodmFyIGk9MDtpPHQ7aSsrKXJbaV09ZShpKTtyZXR1cm4gcn0sUy5yYW5kb209ZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbD09ZSYmKGU9dCx0PTApLHQrTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihlLXQrMSkpfSxTLm5vdz1EYXRlLm5vd3x8ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX07dmFyIEY9eyImIjoiJmFtcDsiLCI8IjoiJmx0OyIsIj4iOiImZ3Q7IiwnIic6IiZxdW90OyIsIiciOiImI3gyNzsiLCJgIjoiJiN4NjA7In0sUD1TLmludmVydChGKSxCPWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfSxuPSIoPzoiK1Mua2V5cyh0KS5qb2luKCJ8IikrIikiLHI9UmVnRXhwKG4pLGk9UmVnRXhwKG4sImciKTtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIHQ9bnVsbD09dD8iIjoiIit0LHIudGVzdCh0KT90LnJlcGxhY2UoaSxlKTp0fX07Uy5lc2NhcGU9QihGKSxTLnVuZXNjYXBlPUIoUCksUy5yZXN1bHQ9ZnVuY3Rpb24odCxlLG4pe3ZhciByPW51bGw9PXQ/dm9pZCAwOnRbZV07cmV0dXJuIHZvaWQgMD09PXImJihyPW4pLFMuaXNGdW5jdGlvbihyKT9yLmNhbGwodCk6cn07dmFyIFc9MDtTLnVuaXF1ZUlkPWZ1bmN0aW9uKHQpe3ZhciBlPSsrVysiIjtyZXR1cm4gdD90K2U6ZX0sUy50ZW1wbGF0ZVNldHRpbmdzPXtldmFsdWF0ZTovPCUoW1xzXFNdKz8pJT4vZyxpbnRlcnBvbGF0ZTovPCU9KFtcc1xTXSs/KSU+L2csZXNjYXBlOi88JS0oW1xzXFNdKz8pJT4vZ307dmFyIEQ9LyguKV4vLEg9eyInIjoiJyIsIlxcIjoiXFwiLCJcciI6InIiLCJcbiI6Im4iLCJcdTIwMjgiOiJ1MjAyOCIsIlx1MjAyOSI6InUyMDI5In0sVT0vXFx8J3xccnxcbnxcdTIwMjh8XHUyMDI5L2csVj1mdW5jdGlvbih0KXtyZXR1cm4iXFwiK0hbdF19O1MudGVtcGxhdGU9ZnVuY3Rpb24odCxlLG4peyFlJiZuJiYoZT1uKSxlPVMuZGVmYXVsdHMoe30sZSxTLnRlbXBsYXRlU2V0dGluZ3MpO3ZhciByPVJlZ0V4cChbKGUuZXNjYXBlfHxEKS5zb3VyY2UsKGUuaW50ZXJwb2xhdGV8fEQpLnNvdXJjZSwoZS5ldmFsdWF0ZXx8RCkuc291cmNlXS5qb2luKCJ8IikrInwkIiwiZyIpLGk9MCxvPSJfX3ArPSciO3QucmVwbGFjZShyLGZ1bmN0aW9uKGUsbixyLHMsdSl7cmV0dXJuIG8rPXQuc2xpY2UoaSx1KS5yZXBsYWNlKFUsViksaT11K2UubGVuZ3RoLG4/bys9IicrXG4oKF9fdD0oIituKyIpKT09bnVsbD8nJzpfLmVzY2FwZShfX3QpKStcbiciOnI/bys9IicrXG4oKF9fdD0oIityKyIpKT09bnVsbD8nJzpfX3QpK1xuJyI6cyYmKG8rPSInO1xuIitzKyJcbl9fcCs9JyIpLAplfSksbys9Iic7XG4iLGUudmFyaWFibGV8fChvPSJ3aXRoKG9ianx8e30pe1xuIitvKyJ9XG4iKSxvPSJ2YXIgX190LF9fcD0nJyxfX2o9QXJyYXkucHJvdG90eXBlLmpvaW4scHJpbnQ9ZnVuY3Rpb24oKXtfX3ArPV9fai5jYWxsKGFyZ3VtZW50cywnJyk7fTtcbiIrbysicmV0dXJuIF9fcDtcbiI7dHJ5e3ZhciBzPW5ldyBGdW5jdGlvbihlLnZhcmlhYmxlfHwib2JqIiwiXyIsbyl9Y2F0Y2godSl7dGhyb3cgdS5zb3VyY2U9byx1fXZhciBhPWZ1bmN0aW9uKHQpe3JldHVybiBzLmNhbGwodGhpcyx0LFMpfSxsPWUudmFyaWFibGV8fCJvYmoiO3JldHVybiBhLnNvdXJjZT0iZnVuY3Rpb24oIitsKyIpe1xuIitvKyJ9IixhfSxTLmNoYWluPWZ1bmN0aW9uKHQpe3ZhciBlPVModCk7cmV0dXJuIGUuX2NoYWluPSEwLGV9O3ZhciAkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuX2NoYWluP1MoZSkuY2hhaW4oKTplfTtTLm1peGluPWZ1bmN0aW9uKHQpe1MuZWFjaChTLmZ1bmN0aW9ucyh0KSxmdW5jdGlvbihlKXt2YXIgbj1TW2VdPXRbZV07Uy5wcm90b3R5cGVbZV09ZnVuY3Rpb24oKXt2YXIgdD1bdGhpcy5fd3JhcHBlZF07cmV0dXJuIHAuYXBwbHkodCxhcmd1bWVudHMpLCQodGhpcyxuLmFwcGx5KFMsdCkpfX0pfSxTLm1peGluKFMpLFMuZWFjaChbInBvcCIsInB1c2giLCJyZXZlcnNlIiwic2hpZnQiLCJzb3J0Iiwic3BsaWNlIiwidW5zaGlmdCJdLGZ1bmN0aW9uKHQpe3ZhciBlPWZbdF07Uy5wcm90b3R5cGVbdF09ZnVuY3Rpb24oKXt2YXIgbj10aGlzLl93cmFwcGVkO3JldHVybiBlLmFwcGx5KG4sYXJndW1lbnRzKSwic2hpZnQiIT09dCYmInNwbGljZSIhPT10fHwwIT09bi5sZW5ndGh8fGRlbGV0ZSBuWzBdLCQodGhpcyxuKX19KSxTLmVhY2goWyJjb25jYXQiLCJqb2luIiwic2xpY2UiXSxmdW5jdGlvbih0KXt2YXIgZT1mW3RdO1MucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7cmV0dXJuICQodGhpcyxlLmFwcGx5KHRoaXMuX3dyYXBwZWQsYXJndW1lbnRzKSl9fSksUy5wcm90b3R5cGUudmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd3JhcHBlZH0sUy5wcm90b3R5cGUudmFsdWVPZj1TLnByb3RvdHlwZS50b0pTT049Uy5wcm90b3R5cGUudmFsdWUsUy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iIit0aGlzLl93cmFwcGVkfSxyPVtdLGk9ZnVuY3Rpb24oKXtyZXR1cm4gU30uYXBwbHkoZSxyKSwhKHZvaWQgMCE9PWkmJih0LmV4cG9ydHM9aSkpfSkuY2FsbCh2b2lkIDApfSxmdW5jdGlvbih0LGUpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKHQpe3ZhciBlPXt9O3JldHVybiB0LnNwbGl0KCI7IikuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgbixyLGk7dC5pbmRleE9mKCI9Iik+MD8obj10LnNwbGl0KCI9Iikscj1uWzBdLGk9blsxXSxlW3JdPWkpOnQuaW5kZXhPZigiICIpPjAmJihuPXQuc3BsaXQoIiAiKSxyPW5bMF0saT1uWzFdLnJlcGxhY2UoLyIvZywiIiksZVtyXT1pKX0pLGV9ZnVuY3Rpb24gcih0KXt2YXIgZT10LnRvU3RyaW5nKDE2KTtyZXR1cm4gMT09PWUubGVuZ3RoPyIwIitlOmV9ZnVuY3Rpb24gaSh0LGUsbil7cmV0dXJuIDM9PT10Lmxlbmd0aD9pKHRbMF0sdFsxXSx0WzJdKToiIyIrcih0KStyKGUpK3Iobil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLGUuZXh0cmFjdEtleXM9bixlLnJnYlRvSGV4PWksZVsiZGVmYXVsdCJdPXtleHRyYWN0S2V5czpuLHJnYlRvSGV4Oml9fSxmdW5jdGlvbih0LGUpeyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4pe3QuYmVnaW5QYXRoKCksdC5tb3ZlVG8oMCxlKSx0LmxpbmVUbyhuLGUpLHQubGluZVdpZHRoPTEsdC5zdHJva2VTdHlsZT0iIzk5OTk5OSIsdC5zdHJva2UoKX19LGZ1bmN0aW9uKHQsZSl7InVzZSBzdHJpY3QiO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbixyLGksbyxzKXt0LmZvbnQ9bysicHggQXJpYWwiLHQudGV4dEFsaWduPXM/InJpZ2h0IjoiY2VudGVyIix0LmZpbGxTdHlsZT0iIzY2NjY2NiIsdC5maWxsVGV4dChpLGUrci8yLG4pfX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuLHIsaSl7aT1pfHwiIzk5OTk5OSIsdC5iZWdpblBhdGgoKSx0Lm1vdmVUbyhlLG4pLHQubGluZVRvKGUsbityKSx0LmxpbmVXaWR0aD0xLHQuc3Ryb2tlU3R5bGU9aSx0LnN0cm9rZSgpfX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7dmFyIG47dC5leHBvcnRzPW49e3JlbDpmdW5jdGlvbih0KXt2YXIgZSxuLHIsaTtyZXR1cm4gZT10Lm9mZnNldFgsbj10Lm9mZnNldFksdm9pZCAwPT1lJiYocj1pLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGk9dC50YXJnZXR8fHQuc3JjRWxlbWVudCx2b2lkIDA9PWUmJihlPXQuY2xpZW50WC1yLmxlZnQsbj10LmNsaWVudFktci50b3ApLHZvaWQgMD09ZSYmKGU9dC5wYWdlWC1pLm9mZnNldExlZnQsbj10LnBhZ2VZLWkub2Zmc2V0VG9wKSx2b2lkIDA9PWUpP3ZvaWQgY29uc29sZS5sb2codCwibm8gbW91c2UgZXZlbnQgZGVmaW5lZC4geW91ciBicm93c2VyIHN1Y2tzIik6W2Usbl19LGFiczpmdW5jdGlvbih0KXt2YXIgZSxuO3JldHVybiBlPXQucGFnZVgsbj10LnBhZ2VZLHZvaWQgMD09ZSYmKGU9dC5sYXllclgsbj10LmxheWVyWSksdm9pZCAwPT1lJiYoZT10LmNsaWVudFgsbj10LmNsaWVudFkpLHZvaWQgMD09ZSYmKGU9dC54LG49dC55KSxbZSxuXX0sd2hlZWxEZWx0YTpmdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4gZT1bdC5kZWx0YVgsdC5kZWx0YVldLHZvaWQgMD09ZVswXSYmdC5tb3pNb3ZlbWVudFgmJihlPVswLHQubW96TW92ZW1lbnRYXSksaXNOYU4oZVswXSkmJihlWzBdPTApLGlzTmFOKGVbMV0pJiYoZVsxXT0wKSxlfX19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9bigxMTApLGk9ZnVuY3Rpb24gcyh0LGUpe2lmKCF0aGlzfHx0aGlzLmNvbnN0cnVjdG9yIT09cylyZXR1cm4gbmV3IHModCk7aWYodm9pZCAwPT09dHx8InN0cmluZyI9PXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoInlvdSBuZWVkIHRvIGdpdmUgdGhlIHNlcSBzdGF0IGFuIGFycmF5Iik7dGhpcy5yZXNldFNlcXModCksdGhpcy5hbHBoYWJldFNpemU9NCx0aGlzLl91c2VCYWNrZ3JvdW5kPSExLHRoaXMudXNlR2Fwcz0hMSx0aGlzLmlnbm9yZWRDaGFycz1bIi0iLCIqIl0sci5leHRlbmQodGhpcyxlKX07aS5wcm90b3R5cGUuYWRkU2VxPWZ1bmN0aW9uKHQpe3RoaXMuc2Vxcy5wdXNoKHQpLHRoaXMuX3Jlc2V0KCl9LGkucHJvdG90eXBlLnJlbW92ZVNlcT1mdW5jdGlvbih0KXsibnVtYmVyIj09dHlwZW9mIHQ/dGhpcy5zZXFzLnNwbGljZSh0LDEpOnIuZWFjaCh0aGlzLnNlcXMsZnVuY3Rpb24oZSxuKXt0PT09ZSYmdGhpcy5zZXFzLnNwbGljZShuLDEpfS5iaW5kKHRoaXMpKSx0aGlzLl9yZXNldCgpfSxpLnByb3RvdHlwZS5hZGRTZXFzPWZ1bmN0aW9uKHQpe3QuZm9yRWFjaChmdW5jdGlvbih0KXt0aGlzLmFkZFNlcSh0KX0uYmluZCh0aGlzKSl9LGkucHJvdG90eXBlLnJlc2V0U2Vxcz1mdW5jdGlvbih0KXtpZih0aGlzLnNlcXM9W10sIXQgaW5zdGFuY2VvZiBBcnJheXx8ImF0ImluIHQpe3RoaXMubXNlcXM9dDt2YXIgZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMubXNlcXMucGx1Y2soInNlcSIpO3RoaXMucmVzZXRTZXFzKHQpfTt0Lm9uKCJhZGQgY2hhbmdlIHJlc2V0ICIsZSx0aGlzKSxlLmNhbGwodGhpcyl9ZWxzZSB0aGlzLmFkZFNlcXModCksdGhpcy5fcmVzZXQoKSx0aGlzLnRyaWdnZXIoInJlc2V0Iil9O3ZhciBvPVsiY29uc2Vuc3VzIiwiZnJlcXVlbmN5IiwibWF4TGVuZ3RoIiwiaWMiLCJnYXBzIl07aS5wcm90b3R5cGUuX3Jlc2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDxvLmxlbmd0aDt0KyspdGhpc1siXyIrb1t0XV09dm9pZCAwO3RoaXMuX2lkZW50aXR5PXZvaWQgMCx0aGlzLl9iYWNrZ3JvdW5kPXZvaWQgMH0saS5wcm90b3R5cGUuc2V0QmFja2dyb3VuZD1mdW5jdGlvbih0KXt0aGlzLl91c2VCYWNrZ3JvdW5kPXQsdGhpcy5fcmVzZXQoKX0saS5wcm90b3R5cGUudXNlQmFja2dyb3VuZD1mdW5jdGlvbigpe3RoaXMuc2V0QmFja2dyb3VuZCghMCl9LGkucHJvdG90eXBlLnNldEROQT1mdW5jdGlvbigpe3RoaXMuYWxwaGFiZXRTaXplPTR9LGkucHJvdG90eXBlLnNldFByb3RlaW49ZnVuY3Rpb24oKXt0aGlzLmFscGhhYmV0U2l6ZT0yMH0sby5mb3JFYWNoKGZ1bmN0aW9uKHQpe2kucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PXRoaXNbIl8iK3RdJiYodGhpc1siXyIrdF09dGhpc1t0KyJDYWxjIl0oKSksdGhpc1siXyIrdF19fSksaS5wcm90b3R5cGUuaWRlbnRpdHk9ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuKHZvaWQgMD09PXRoaXMuX2lkZW50aXR5fHx0KSYmKGU9dGhpcy5pZGVudGl0eUNhbGModCksdGhpcy5faWRlbnRpdHk9dm9pZCAwKSx0aGlzLl9pZGVudGl0eXx8ZX0saS5wcm90b3R5cGUuYmFja2dyb3VuZD1mdW5jdGlvbigpe3JldHVybiB2b2lkIDAhPT10aGlzLmJnP3RoaXMuYmc6KHZvaWQgMD09PXRoaXMuX2JhY2tncm91bmQmJnRoaXMuYmFja2dyb3VuZENhbGMoKSx0aGlzLl9iYWNrZ3JvdW5kKX0saS5wcm90b3R5cGUuZnJlcXVlbmN5Q2FsYz1mdW5jdGlvbih0KXt2YXIgZSxuO2U9bmV3IEFycmF5KHRoaXMubWF4TGVuZ3RoKCkpLG49bmV3IEFycmF5KHRoaXMuc2Vxcy5sZW5ndGgpO3ZhciBpPXRoaXMuaWdub3JlZENoYXJzO3JldHVybiB2b2lkIDAhPT10JiZ0LmFsbCYmKGk9W10pLHIuZWFjaCh0aGlzLnNlcXMsZnVuY3Rpb24odCl7ci5lYWNoKHQsZnVuY3Rpb24odCxyKXtpLmluZGV4T2YodCk+PTB8fCh2b2lkIDA9PT1lW3JdJiYoZVtyXT17fSksdm9pZCAwPT09ZVtyXVt0XSYmKGVbcl1bdF09MCksZVtyXVt0XSsrLHZvaWQgMD09PW5bcl0mJihuW3JdPTApLG5bcl0rKyl9KX0pLHIuZWFjaChlLGZ1bmN0aW9uKHQsaSl7cmV0dXJuIHIuZWFjaCh0LGZ1bmN0aW9uKHQscil7cmV0dXJuIGVbaV1bcl09dC9uW2ldfSl9KSx0aGlzLl9mcmVxdWVuY3k9ZSxlfSxpLnByb3RvdHlwZS5iYWNrZ3JvdW5kQ2FsYz1mdW5jdGlvbigpe3ZhciB0PXt9LGU9MDtyZXR1cm4gci5lYWNoKHRoaXMuc2VxcyxmdW5jdGlvbihuKXtyLmVhY2gobixmdW5jdGlvbihuKXtyZXR1cm4gdm9pZCAwPT09dFtuXSYmKHRbbl09MCksdFtuXSsrLGUrK30pfSksdD1yLm1hcFZhbHVlcyh0LGZ1bmN0aW9uKHQpe3JldHVybiB0L2V9KSx0aGlzLl9iYWNrZ3JvdW5kPXQsdH0saS5wcm90b3R5cGUuaWNDYWxjPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5mcmVxdWVuY3koKTtpZih0aGlzLl91c2VCYWNrZ3JvdW5kKXZhciBlPXRoaXMuYmFja2dyb3VuZCgpO3ZhciBuPXRoaXMuaWdub3JlZENoYXJzLGk9dGhpcy5fdXNlQmFja2dyb3VuZCxvPXIubWFwKHQsZnVuY3Rpb24odCl7cmV0dXJuIHIucmVkdWNlKHQsZnVuY3Rpb24odCxyLG8pe3JldHVybiBuLmluZGV4T2Yobyk+PTA/dDooaSYmKHIvPWVbb10pLHQtciooTWF0aC5sb2cocikvTWF0aC5sb2coMikpKX0sMCl9KTtyZXR1cm4gdGhpcy5faWM9byxvfSxpLnByb3RvdHlwZS5jb25zZXJ2YXRpb249ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5pYygpLG49dGhpcy5nYXBzKCksaT10aGlzO3Q9dHx8dGhpcy5hbHBoYWJldFNpemU7dmFyIG89TWF0aC5sb2codCkvTWF0aC5sb2coMikscz0wO3JldHVybiByLm1hcChlLGZ1bmN0aW9uKHQpe3ZhciBlPW8tdDtyZXR1cm4gaS51c2VHYXBzJiYoZSo9MS1uW3MrK10pLGV9KX0saS5wcm90b3R5cGUuY29uc2VydlJlc2lkdWU9ZnVuY3Rpb24odCl7dmFyIGUsbj10P3QuYWxwaGFiZXRTaXplOnZvaWQgMCxpPXRoaXMuaWdub3JlZENoYXJzO2U9dm9pZCAwIT09dCYmdC5zY2FsZWQ/dGhpcy5zY2FsZSh0aGlzLmNvbnNlcnZhdGlvbihuKSk6dGhpcy5jb25zZXJ2YXRpb24obik7dmFyIG8scz10aGlzLmZyZXF1ZW5jeSgpO3JldHVybiByLm1hcChzLGZ1bmN0aW9uKHQsbil7bz1yLnJlamVjdChyLmtleXModCksZnVuY3Rpb24odCl7cmV0dXJuIGkuaW5kZXhPZih0KT49MH0pO3ZhciBzPXt9O3JldHVybiByLmVhY2gobyxmdW5jdGlvbihyKXtzW3JdPXRbcl0qZVtuXX0pLHN9KX0saS5wcm90b3R5cGUuY29uc2VydlJlc2lkdWUyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZnJlcXVlbmN5KCksbj10aGlzLmNvbnNlcnZhdGlvbih0KSxpPXRoaXMuYmFja2dyb3VuZCgpO3JldHVybiByLm1hcChlLGZ1bmN0aW9uKHQsbyl7cmV0dXJuIHIubWFwKHQsZnVuY3Rpb24odCl7dmFyIHM9ci5yZWR1Y2UoZVtvXSxmdW5jdGlvbih0LGUpe3JldHVybiB0K2UvaVtvXX0sMCk7cmV0dXJuIHQvaVtvXS9zKm5bb119LDApfSl9LGkucHJvdG90eXBlLnNjYWxlPWZ1bmN0aW9uKHQsZSl7ZT1lfHx0aGlzLmFscGhhYmV0U2l6ZTt2YXIgbj1NYXRoLmxvZyhlKS9NYXRoLmxvZygyKTtyZXR1cm4gci5tYXAodCxmdW5jdGlvbih0KXtyZXR1cm4gdC9ufSl9LGkucHJvdG90eXBlLm1heExlbmd0aENhbGM9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuc2Vxcy5sZW5ndGg/MDpyLm1heCh0aGlzLnNlcXMsZnVuY3Rpb24odCl7cmV0dXJuIHQubGVuZ3RofSkubGVuZ3RofSxpLnByb3RvdHlwZS5jb25zZW5zdXNDYWxjPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IEFycmF5KHRoaXMubWF4TGVuZ3RoKCkpO3JldHVybiByLmVhY2godGhpcy5zZXFzLGZ1bmN0aW9uKGUpe3IuZWFjaChlLGZ1bmN0aW9uKGUsbil7dm9pZCAwPT09dFtuXSYmKHRbbl09e30pLHZvaWQgMD09PXRbbl1bZV0mJih0W25dW2VdPTApLHRbbl1bZV0rK30pfSksdGhpcy5fY29uc2Vuc3VzPXIucmVkdWNlKHQsZnVuY3Rpb24odCxlKXt2YXIgbjtyZXR1cm4gbj1yLmtleXMoZSksdCs9ci5tYXgobixmdW5jdGlvbih0KXtyZXR1cm4gZVt0XX0pfSwiIiksdGhpcy5fY29uc2Vuc3VzfSxpLnByb3RvdHlwZS5pZGVudGl0eUNhbGM9ZnVuY3Rpb24odCl7dmFyIGU9dHx8dGhpcy5jb25zZW5zdXMoKTtyZXR1cm4gdGhpcy5faWRlbnRpdHk9dGhpcy5zZXFzLm1hcChmdW5jdGlvbih0KXtmb3IodmFyIG49MCxyPTAsaT0wO2k8dC5sZW5ndGg7aSsrKSItIiE9PXRbaV0mJiItIiE9PWVbaV0mJihyKyssdFtpXT09PWVbaV0mJm4rKyk7cmV0dXJuIG4vcn0pLHRoaXMuX2lkZW50aXR5fSxpLnByb3RvdHlwZS5nYXBzQ2FsYz1mdW5jdGlvbigpe3ZhciB0PXRoaXMubWF4TGVuZ3RoKCk7aWYodDw9MXx8InVuZGVmaW5lZCI9PXR5cGVvZiB0KXJldHVybltdO3ZhciBlPW5ldyBBcnJheSh0aGlzLm1heExlbmd0aCgpKTtyZXR1cm4gci5lYWNoKHRoaXMuc2VxcyxmdW5jdGlvbih0KXtyLmVhY2godCxmdW5jdGlvbih0LG4pe3ZvaWQgMD09PWVbbl0mJihlW25dPXtnOjAsdDowfSksdD0iLSI9PT10PyJnIjoidCIsZVtuXVt0XSsrfSl9KSx0aGlzLl9nYXBzPXIubWFwKGUsZnVuY3Rpb24odCl7cmV0dXJuIHQuZy8odC5nK3QudCl9KSx0aGlzLl9nYXBzfSxyLm1peGluKHttYXBWYWx1ZXM6ZnVuY3Rpb24odCxlKXtyZXR1cm4gci5vYmplY3Qoci5rZXlzKHQpLHIubWFwKHQsZSkpfX0pLG4oMTMpLm1peGluKGkucHJvdG90eXBlKSx0LmV4cG9ydHM9aX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHI9big5KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiU2VsZWN0aW9uTWFuYWdlciIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHIuU2VsZWN0aW9uTWFuYWdlcn19KX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHI9bigxKS5Nb2RlbCxpPXIuZXh0ZW5kKHtkZWZhdWx0czp7eFN0YXJ0Oi0xLHhFbmQ6LTEsaGVpZ2h0Oi0xLHRleHQ6IiIsZmlsbENvbG9yOiJyZWQiLGZpbGxPcGFjaXR5Oi41LHR5cGU6InJlY3RhbmdsZSIsYm9yZGVyU2l6ZToxLGJvcmRlckNvbG9yOiJibGFjayIsYm9yZGVyT3BhY2l0eTouNSx2YWxpZGF0ZTohMCxyb3c6MH0saW5pdGlhbGl6ZTpmdW5jdGlvbih0KXtpZihudWxsIT10LnN0YXJ0JiZ0aGlzLnNldCgieFN0YXJ0Iix0LnN0YXJ0LTEpLG51bGwhPXQuZW5kJiZ0aGlzLnNldCgieEVuZCIsdC5lbmQtMSksbnVsbCE9dC5hdHRyaWJ1dGVzJiYobnVsbCE9dC5hdHRyaWJ1dGVzLk5hbWUmJnRoaXMuc2V0KCJ0ZXh0Iix0LmF0dHJpYnV0ZXMuTmFtZSksbnVsbCE9dC5hdHRyaWJ1dGVzLkNvbG9yJiZ0aGlzLnNldCgiZmlsbENvbG9yIix0LmF0dHJpYnV0ZXMuQ29sb3IpKSx0aGlzLmF0dHJpYnV0ZXMueEVuZDx0aGlzLmF0dHJpYnV0ZXMueFN0YXJ0JiZjb25zb2xlLndhcm4oImludmFsaWQgZmVhdHVyZSByYW5nZSBmb3IiLHRoaXMuYXR0cmlidXRlcyksIV8uaXNOdW1iZXIodGhpcy5hdHRyaWJ1dGVzLnhTdGFydCl8fCFfLmlzTnVtYmVyKHRoaXMuYXR0cmlidXRlcy54RW5kKSlyZXR1cm4gY29uc29sZS53YXJuKCJwbGVhc2UgcHJvdmlkZSBudW1lcmljIGZlYXR1cmUgcmFuZ2VzIix0KSx0aGlzLnNldCgieFN0YXJ0IixwYXJzZUludCh0aGlzLmF0dHJpYnV0ZXMueFN0YXJ0KSksdGhpcy5zZXQoInhFbmQiLHBhcnNlSW50KHRoaXMuYXR0cmlidXRlcy54RW5kKSl9LHZhbGlkYXRlOmZ1bmN0aW9uKCl7aWYoaXNOYU4odGhpcy5hdHRyaWJ1dGVzLnhTdGFydHx8aXNOYU4odGhpcy5hdHRyaWJ1dGVzLnhFbmQpKSlyZXR1cm4iZmVhdHVyZXMgbmVlZCBpbnRlZ2VyIHN0YXJ0IGFuZCBlbmQuIn0sY29udGFpbnM6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYXR0cmlidXRlcy54U3RhcnQ8PXQmJnQ8PXRoaXMuYXR0cmlidXRlcy54RW5kfX0pO2VbImRlZmF1bHQiXT1pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OnsiZGVmYXVsdCI6dH19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBpPW4oMzYpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJzZXEiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiByKGkpWyJkZWZhdWx0Il19fSk7dmFyIG89bigzNSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsInNlcWNvbCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHIobylbImRlZmF1bHQiXX19KTt2YXIgcz1uKDUwKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiZmVhdHVyZSIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHIocylbImRlZmF1bHQiXX19KTt2YXIgdT1uKDM0KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiZmVhdHVyZWNvbCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHIodSlbImRlZmF1bHQiXX19KX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbih0KXt2YXIgZT1yLmNhbGwodCk7cmV0dXJuIltvYmplY3QgRnVuY3Rpb25dIj09PWV8fCJmdW5jdGlvbiI9PXR5cGVvZiB0JiYiW29iamVjdCBSZWdFeHBdIiE9PWV8fCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiYodD09PXdpbmRvdy5zZXRUaW1lb3V0fHx0PT09d2luZG93LmFsZXJ0fHx0PT09d2luZG93LmNvbmZpcm18fHQ9PT13aW5kb3cucHJvbXB0KX10LmV4cG9ydHM9bjt2YXIgcj1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nfSxmdW5jdGlvbih0LGUpeyhmdW5jdGlvbihlKXt0LmV4cG9ydHM9ZX0pLmNhbGwoZSx7fSl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcixpLG89ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbD8ic3ltYm9sIjp0eXBlb2YgdH07KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gbih0KXtmdW5jdGlvbiBlKGUsbixyLGksbyxzKXtmb3IoO28+PTAmJm88cztvKz10KXt2YXIgdT1pP2lbb106bztyPW4ocixlW3VdLHUsZSl9cmV0dXJuIHJ9cmV0dXJuIGZ1bmN0aW9uKG4scixpLG8pe3I9ayhyLG8sNCk7dmFyIHM9IUMobikmJlMua2V5cyhuKSx1PShzfHxuKS5sZW5ndGgsYT10PjA/MDp1LTE7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8MyYmKGk9bltzP3NbYV06YV0sYSs9dCksZShuLHIsaSxzLGEsdSl9fWZ1bmN0aW9uIHModCl7cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtuPWoobixyKTtmb3IodmFyIGk9QShlKSxvPXQ+MD8wOmktMTtvPj0wJiZvPGk7bys9dClpZihuKGVbb10sbyxlKSlyZXR1cm4gbztyZXR1cm4tMX19ZnVuY3Rpb24gdSh0LGUsbil7cmV0dXJuIGZ1bmN0aW9uKHIsaSxvKXt2YXIgcz0wLHU9QShyKTtpZigibnVtYmVyIj09dHlwZW9mIG8pdD4wP3M9bz49MD9vOk1hdGgubWF4KG8rdSxzKTp1PW8+PTA/TWF0aC5taW4obysxLHUpOm8rdSsxO2Vsc2UgaWYobiYmbyYmdSlyZXR1cm4gbz1uKHIsaSkscltvXT09PWk/bzotMTtpZihpIT09aSlyZXR1cm4gbz1lKGcuY2FsbChyLHMsdSksUy5pc05hTiksbz49MD9vK3M6LTE7Zm9yKG89dD4wP3M6dS0xO28+PTAmJm88dTtvKz10KWlmKHJbb109PT1pKXJldHVybiBvO3JldHVybi0xfX1mdW5jdGlvbiBhKHQsZSl7dmFyIG49Ui5sZW5ndGgscj10LmNvbnN0cnVjdG9yLGk9Uy5pc0Z1bmN0aW9uKHIpJiZyLnByb3RvdHlwZXx8aCxvPSJjb25zdHJ1Y3RvciI7Zm9yKFMuaGFzKHQsbykmJiFTLmNvbnRhaW5zKGUsbykmJmUucHVzaChvKTtuLS07KW89UltuXSxvIGluIHQmJnRbb10hPT1pW29dJiYhUy5jb250YWlucyhlLG8pJiZlLnB1c2gobyl9dmFyIGw9dGhpcyxjPWwuXyxmPUFycmF5LnByb3RvdHlwZSxoPU9iamVjdC5wcm90b3R5cGUsZD1GdW5jdGlvbi5wcm90b3R5cGUscD1mLnB1c2gsZz1mLnNsaWNlLHY9aC50b1N0cmluZyxtPWguaGFzT3duUHJvcGVydHkseT1BcnJheS5pc0FycmF5LF89T2JqZWN0LmtleXMsYj1kLmJpbmQseD1PYmplY3QuY3JlYXRlLHc9ZnVuY3Rpb24oKXt9LFM9ZnVuY3Rpb24gRyh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIEc/dDp0aGlzIGluc3RhbmNlb2YgRz92b2lkKHRoaXMuX3dyYXBwZWQ9dCk6bmV3IEcodCl9OyJ1bmRlZmluZWQiIT10eXBlb2YgdCYmdC5leHBvcnRzJiYoZT10LmV4cG9ydHM9UyksZS5fPVMsUy5WRVJTSU9OPSIxLjguMyI7dmFyIGs9ZnVuY3Rpb24odCxlLG4pe2lmKHZvaWQgMD09PWUpcmV0dXJuIHQ7c3dpdGNoKG51bGw9PW4/MzpuKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiB0LmNhbGwoZSxuKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihuLHIpe3JldHVybiB0LmNhbGwoZSxuLHIpfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKG4scixpKXtyZXR1cm4gdC5jYWxsKGUsbixyLGkpfTtjYXNlIDQ6cmV0dXJuIGZ1bmN0aW9uKG4scixpLG8pe3JldHVybiB0LmNhbGwoZSxuLHIsaSxvKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkoZSxhcmd1bWVudHMpfX0saj1mdW5jdGlvbih0LGUsbil7cmV0dXJuIG51bGw9PXQ/Uy5pZGVudGl0eTpTLmlzRnVuY3Rpb24odCk/ayh0LGUsbik6Uy5pc09iamVjdCh0KT9TLm1hdGNoZXIodCk6Uy5wcm9wZXJ0eSh0KX07Uy5pdGVyYXRlZT1mdW5jdGlvbih0LGUpe3JldHVybiBqKHQsZSwxLzApfTt2YXIgTz1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoO2lmKHI8Mnx8bnVsbD09bilyZXR1cm4gbjtmb3IodmFyIGk9MTtpPHI7aSsrKWZvcih2YXIgbz1hcmd1bWVudHNbaV0scz10KG8pLHU9cy5sZW5ndGgsYT0wO2E8dTthKyspe3ZhciBsPXNbYV07ZSYmdm9pZCAwIT09bltsXXx8KG5bbF09b1tsXSl9cmV0dXJuIG59fSxFPWZ1bmN0aW9uKHQpe2lmKCFTLmlzT2JqZWN0KHQpKXJldHVybnt9O2lmKHgpcmV0dXJuIHgodCk7dy5wcm90b3R5cGU9dDt2YXIgZT1uZXcgdztyZXR1cm4gdy5wcm90b3R5cGU9bnVsbCxlfSxNPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT92b2lkIDA6ZVt0XX19LHo9TWF0aC5wb3coMiw1MyktMSxBPU0oImxlbmd0aCIpLEM9ZnVuY3Rpb24odCl7dmFyIGU9QSh0KTtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGUmJmU+PTAmJmU8PXp9O1MuZWFjaD1TLmZvckVhY2g9ZnVuY3Rpb24odCxlLG4pe2U9ayhlLG4pO3ZhciByLGk7aWYoQyh0KSlmb3Iocj0wLGk9dC5sZW5ndGg7cjxpO3IrKyllKHRbcl0scix0KTtlbHNle3ZhciBvPVMua2V5cyh0KTtmb3Iocj0wLGk9by5sZW5ndGg7cjxpO3IrKyllKHRbb1tyXV0sb1tyXSx0KX1yZXR1cm4gdH0sUy5tYXA9Uy5jb2xsZWN0PWZ1bmN0aW9uKHQsZSxuKXtlPWooZSxuKTtmb3IodmFyIHI9IUModCkmJlMua2V5cyh0KSxpPShyfHx0KS5sZW5ndGgsbz1BcnJheShpKSxzPTA7czxpO3MrKyl7dmFyIHU9cj9yW3NdOnM7b1tzXT1lKHRbdV0sdSx0KX1yZXR1cm4gb30sUy5yZWR1Y2U9Uy5mb2xkbD1TLmluamVjdD1uKDEpLFMucmVkdWNlUmlnaHQ9Uy5mb2xkcj1uKC0xKSxTLmZpbmQ9Uy5kZXRlY3Q9ZnVuY3Rpb24odCxlLG4pe3ZhciByO2lmKHI9Qyh0KT9TLmZpbmRJbmRleCh0LGUsbik6Uy5maW5kS2V5KHQsZSxuKSx2b2lkIDAhPT1yJiZyIT09LTEpcmV0dXJuIHRbcl19LFMuZmlsdGVyPVMuc2VsZWN0PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1bXTtyZXR1cm4gZT1qKGUsbiksUy5lYWNoKHQsZnVuY3Rpb24odCxuLGkpe2UodCxuLGkpJiZyLnB1c2godCl9KSxyfSxTLnJlamVjdD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIFMuZmlsdGVyKHQsUy5uZWdhdGUoaihlKSksbil9LFMuZXZlcnk9Uy5hbGw9ZnVuY3Rpb24odCxlLG4pe2U9aihlLG4pO2Zvcih2YXIgcj0hQyh0KSYmUy5rZXlzKHQpLGk9KHJ8fHQpLmxlbmd0aCxvPTA7bzxpO28rKyl7dmFyIHM9cj9yW29dOm87aWYoIWUodFtzXSxzLHQpKXJldHVybiExfXJldHVybiEwfSxTLnNvbWU9Uy5hbnk9ZnVuY3Rpb24odCxlLG4pe2U9aihlLG4pO2Zvcih2YXIgcj0hQyh0KSYmUy5rZXlzKHQpLGk9KHJ8fHQpLmxlbmd0aCxvPTA7bzxpO28rKyl7dmFyIHM9cj9yW29dOm87aWYoZSh0W3NdLHMsdCkpcmV0dXJuITB9cmV0dXJuITF9LFMuY29udGFpbnM9Uy5pbmNsdWRlcz1TLmluY2x1ZGU9ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIEModCl8fCh0PVMudmFsdWVzKHQpKSwoIm51bWJlciIhPXR5cGVvZiBufHxyKSYmKG49MCksUy5pbmRleE9mKHQsZSxuKT49MH0sUy5pbnZva2U9ZnVuY3Rpb24odCxlKXt2YXIgbj1nLmNhbGwoYXJndW1lbnRzLDIpLHI9Uy5pc0Z1bmN0aW9uKGUpO3JldHVybiBTLm1hcCh0LGZ1bmN0aW9uKHQpe3ZhciBpPXI/ZTp0W2VdO3JldHVybiBudWxsPT1pP2k6aS5hcHBseSh0LG4pfSl9LFMucGx1Y2s9ZnVuY3Rpb24odCxlKXtyZXR1cm4gUy5tYXAodCxTLnByb3BlcnR5KGUpKX0sUy53aGVyZT1mdW5jdGlvbih0LGUpe3JldHVybiBTLmZpbHRlcih0LFMubWF0Y2hlcihlKSl9LFMuZmluZFdoZXJlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFMuZmluZCh0LFMubWF0Y2hlcihlKSl9LFMubWF4PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcixpLG89LSgxLzApLHM9LSgxLzApO2lmKG51bGw9PWUmJm51bGwhPXQpe3Q9Qyh0KT90OlMudmFsdWVzKHQpO2Zvcih2YXIgdT0wLGE9dC5sZW5ndGg7dTxhO3UrKylyPXRbdV0scj5vJiYobz1yKX1lbHNlIGU9aihlLG4pLFMuZWFjaCh0LGZ1bmN0aW9uKHQsbixyKXtpPWUodCxuLHIpLChpPnN8fGk9PT0tKDEvMCkmJm89PT0tKDEvMCkpJiYobz10LHM9aSl9KTtyZXR1cm4gb30sUy5taW49ZnVuY3Rpb24odCxlLG4pe3ZhciByLGksbz0xLzAscz0xLzA7aWYobnVsbD09ZSYmbnVsbCE9dCl7dD1DKHQpP3Q6Uy52YWx1ZXModCk7Zm9yKHZhciB1PTAsYT10Lmxlbmd0aDt1PGE7dSsrKXI9dFt1XSxyPG8mJihvPXIpfWVsc2UgZT1qKGUsbiksUy5lYWNoKHQsZnVuY3Rpb24odCxuLHIpe2k9ZSh0LG4sciksKGk8c3x8aT09PTEvMCYmbz09PTEvMCkmJihvPXQscz1pKX0pO3JldHVybiBvfSxTLnNodWZmbGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49Qyh0KT90OlMudmFsdWVzKHQpLHI9bi5sZW5ndGgsaT1BcnJheShyKSxvPTA7bzxyO28rKyllPVMucmFuZG9tKDAsbyksZSE9PW8mJihpW29dPWlbZV0pLGlbZV09bltvXTtyZXR1cm4gaX0sUy5zYW1wbGU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBudWxsPT1lfHxuPyhDKHQpfHwodD1TLnZhbHVlcyh0KSksdFtTLnJhbmRvbSh0Lmxlbmd0aC0xKV0pOlMuc2h1ZmZsZSh0KS5zbGljZSgwLE1hdGgubWF4KDAsZSkpfSxTLnNvcnRCeT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGU9aihlLG4pLFMucGx1Y2soUy5tYXAodCxmdW5jdGlvbih0LG4scil7cmV0dXJue3ZhbHVlOnQsaW5kZXg6bixjcml0ZXJpYTplKHQsbixyKX19KS5zb3J0KGZ1bmN0aW9uKHQsZSl7dmFyIG49dC5jcml0ZXJpYSxyPWUuY3JpdGVyaWE7aWYobiE9PXIpe2lmKG4+cnx8dm9pZCAwPT09bilyZXR1cm4gMTtpZihuPHJ8fHZvaWQgMD09PXIpcmV0dXJuLTF9cmV0dXJuIHQuaW5kZXgtZS5pbmRleH0pLCJ2YWx1ZSIpfTt2YXIgVD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuLHIpe3ZhciBpPXt9O3JldHVybiBuPWoobixyKSxTLmVhY2goZSxmdW5jdGlvbihyLG8pe3QoaSxyLG4ocixvLGUpKX0pLGl9fTtTLmdyb3VwQnk9VChmdW5jdGlvbih0LGUsbil7Uy5oYXModCxuKT90W25dLnB1c2goZSk6dFtuXT1bZV19KSxTLmluZGV4Qnk9VChmdW5jdGlvbih0LGUsbil7dFtuXT1lfSksUy5jb3VudEJ5PVQoZnVuY3Rpb24odCxlLG4pe1MuaGFzKHQsbik/dFtuXSsrOnRbbl09MX0pLFMudG9BcnJheT1mdW5jdGlvbih0KXtyZXR1cm4gdD9TLmlzQXJyYXkodCk/Zy5jYWxsKHQpOkModCk/Uy5tYXAodCxTLmlkZW50aXR5KTpTLnZhbHVlcyh0KTpbXX0sUy5zaXplPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10PzA6Qyh0KT90Lmxlbmd0aDpTLmtleXModCkubGVuZ3RofSxTLnBhcnRpdGlvbj1mdW5jdGlvbih0LGUsbil7ZT1qKGUsbik7dmFyIHI9W10saT1bXTtyZXR1cm4gUy5lYWNoKHQsZnVuY3Rpb24odCxuLG8peyhlKHQsbixvKT9yOmkpLnB1c2godCl9KSxbcixpXX0sUy5maXJzdD1TLmhlYWQ9Uy50YWtlPWZ1bmN0aW9uKHQsZSxuKXtpZihudWxsIT10KXJldHVybiBudWxsPT1lfHxuP3RbMF06Uy5pbml0aWFsKHQsdC5sZW5ndGgtZSl9LFMuaW5pdGlhbD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGcuY2FsbCh0LDAsTWF0aC5tYXgoMCx0Lmxlbmd0aC0obnVsbD09ZXx8bj8xOmUpKSl9LFMubGFzdD1mdW5jdGlvbih0LGUsbil7aWYobnVsbCE9dClyZXR1cm4gbnVsbD09ZXx8bj90W3QubGVuZ3RoLTFdOlMucmVzdCh0LE1hdGgubWF4KDAsdC5sZW5ndGgtZSkpfSxTLnJlc3Q9Uy50YWlsPVMuZHJvcD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGcuY2FsbCh0LG51bGw9PWV8fG4/MTplKX0sUy5jb21wYWN0PWZ1bmN0aW9uKHQpe3JldHVybiBTLmZpbHRlcih0LFMuaWRlbnRpdHkpfTt2YXIgST1mdW5jdGlvbiBLKHQsZSxuLHIpe2Zvcih2YXIgaT1bXSxvPTAscz1yfHwwLHU9QSh0KTtzPHU7cysrKXt2YXIgYT10W3NdO2lmKEMoYSkmJihTLmlzQXJyYXkoYSl8fFMuaXNBcmd1bWVudHMoYSkpKXtlfHwoYT1LKGEsZSxuKSk7dmFyIGw9MCxjPWEubGVuZ3RoO2ZvcihpLmxlbmd0aCs9YztsPGM7KWlbbysrXT1hW2wrK119ZWxzZSBufHwoaVtvKytdPWEpfXJldHVybiBpfTtTLmZsYXR0ZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gSSh0LGUsITEpfSxTLndpdGhvdXQ9ZnVuY3Rpb24odCl7cmV0dXJuIFMuZGlmZmVyZW5jZSh0LGcuY2FsbChhcmd1bWVudHMsMSkpfSxTLnVuaXE9Uy51bmlxdWU9ZnVuY3Rpb24odCxlLG4scil7Uy5pc0Jvb2xlYW4oZSl8fChyPW4sbj1lLGU9ITEpLG51bGwhPW4mJihuPWoobixyKSk7Zm9yKHZhciBpPVtdLG89W10scz0wLHU9QSh0KTtzPHU7cysrKXt2YXIgYT10W3NdLGw9bj9uKGEscyx0KTphO2U/KHMmJm89PT1sfHxpLnB1c2goYSksbz1sKTpuP1MuY29udGFpbnMobyxsKXx8KG8ucHVzaChsKSxpLnB1c2goYSkpOlMuY29udGFpbnMoaSxhKXx8aS5wdXNoKGEpfXJldHVybiBpfSxTLnVuaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIFMudW5pcShJKGFyZ3VtZW50cywhMCwhMCkpfSxTLmludGVyc2VjdGlvbj1mdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj1hcmd1bWVudHMubGVuZ3RoLHI9MCxpPUEodCk7cjxpO3IrKyl7dmFyIG89dFtyXTtpZighUy5jb250YWlucyhlLG8pKXtmb3IodmFyIHM9MTtzPG4mJlMuY29udGFpbnMoYXJndW1lbnRzW3NdLG8pO3MrKyk7cz09PW4mJmUucHVzaChvKX19cmV0dXJuIGV9LFMuZGlmZmVyZW5jZT1mdW5jdGlvbih0KXt2YXIgZT1JKGFyZ3VtZW50cywhMCwhMCwxKTtyZXR1cm4gUy5maWx0ZXIodCxmdW5jdGlvbih0KXtyZXR1cm4hUy5jb250YWlucyhlLHQpfSl9LFMuemlwPWZ1bmN0aW9uKCl7cmV0dXJuIFMudW56aXAoYXJndW1lbnRzKX0sUy51bnppcD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dCYmUy5tYXgodCxBKS5sZW5ndGh8fDAsbj1BcnJheShlKSxyPTA7cjxlO3IrKyluW3JdPVMucGx1Y2sodCxyKTtyZXR1cm4gbn0sUy5vYmplY3Q9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49e30scj0wLGk9QSh0KTtyPGk7cisrKWU/blt0W3JdXT1lW3JdOm5bdFtyXVswXV09dFtyXVsxXTtyZXR1cm4gbn0sUy5maW5kSW5kZXg9cygxKSxTLmZpbmRMYXN0SW5kZXg9cygtMSksUy5zb3J0ZWRJbmRleD1mdW5jdGlvbih0LGUsbixyKXtuPWoobixyLDEpO2Zvcih2YXIgaT1uKGUpLG89MCxzPUEodCk7bzxzOyl7dmFyIHU9TWF0aC5mbG9vcigobytzKS8yKTtuKHRbdV0pPGk/bz11KzE6cz11fXJldHVybiBvfSxTLmluZGV4T2Y9dSgxLFMuZmluZEluZGV4LFMuc29ydGVkSW5kZXgpLFMubGFzdEluZGV4T2Y9dSgtMSxTLmZpbmRMYXN0SW5kZXgpLFMucmFuZ2U9ZnVuY3Rpb24odCxlLG4pe251bGw9PWUmJihlPXR8fDAsdD0wKSxuPW58fDE7Zm9yKHZhciByPU1hdGgubWF4KE1hdGguY2VpbCgoZS10KS9uKSwwKSxpPUFycmF5KHIpLG89MDtvPHI7bysrLHQrPW4paVtvXT10O3JldHVybiBpfTt2YXIgTj1mdW5jdGlvbih0LGUsbixyLGkpe2lmKCEociBpbnN0YW5jZW9mIGUpKXJldHVybiB0LmFwcGx5KG4saSk7dmFyIG89RSh0LnByb3RvdHlwZSkscz10LmFwcGx5KG8saSk7cmV0dXJuIFMuaXNPYmplY3Qocyk/czpvfTtTLmJpbmQ9ZnVuY3Rpb24odCxlKXtpZihiJiZ0LmJpbmQ9PT1iKXJldHVybiBiLmFwcGx5KHQsZy5jYWxsKGFyZ3VtZW50cywxKSk7aWYoIVMuaXNGdW5jdGlvbih0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJCaW5kIG11c3QgYmUgY2FsbGVkIG9uIGEgZnVuY3Rpb24iKTt2YXIgbj1nLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBmdW5jdGlvbiByKCl7cmV0dXJuIE4odCxyLGUsdGhpcyxuLmNvbmNhdChnLmNhbGwoYXJndW1lbnRzKSkpfX0sUy5wYXJ0aWFsPWZ1bmN0aW9uKHQpe3ZhciBlPWcuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uIG4oKXtmb3IodmFyIHI9MCxpPWUubGVuZ3RoLG89QXJyYXkoaSkscz0wO3M8aTtzKyspb1tzXT1lW3NdPT09Uz9hcmd1bWVudHNbcisrXTplW3NdO2Zvcig7cjxhcmd1bWVudHMubGVuZ3RoOylvLnB1c2goYXJndW1lbnRzW3IrK10pO3JldHVybiBOKHQsbix0aGlzLHRoaXMsbyl9fSxTLmJpbmRBbGw9ZnVuY3Rpb24odCl7dmFyIGUsbixyPWFyZ3VtZW50cy5sZW5ndGg7aWYocjw9MSl0aHJvdyBuZXcgRXJyb3IoImJpbmRBbGwgbXVzdCBiZSBwYXNzZWQgZnVuY3Rpb24gbmFtZXMiKTtmb3IoZT0xO2U8cjtlKyspbj1hcmd1bWVudHNbZV0sdFtuXT1TLmJpbmQodFtuXSx0KTtyZXR1cm4gdH0sUy5tZW1vaXplPWZ1bmN0aW9uKHQsZSl7dmFyIG49ZnVuY3Rpb24gcihuKXt2YXIgaT1yLmNhY2hlLG89IiIrKGU/ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6bik7cmV0dXJuIFMuaGFzKGksbyl8fChpW29dPXQuYXBwbHkodGhpcyxhcmd1bWVudHMpKSxpW29dfTtyZXR1cm4gbi5jYWNoZT17fSxufSxTLmRlbGF5PWZ1bmN0aW9uKHQsZSl7dmFyIG49Zy5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KG51bGwsbil9LGUpfSxTLmRlZmVyPVMucGFydGlhbChTLmRlbGF5LFMsMSksUy50aHJvdHRsZT1mdW5jdGlvbih0LGUsbil7dmFyIHIsaSxvLHM9bnVsbCx1PTA7bnx8KG49e30pO3ZhciBhPWZ1bmN0aW9uKCl7dT1uLmxlYWRpbmc9PT0hMT8wOlMubm93KCkscz1udWxsLG89dC5hcHBseShyLGkpLHN8fChyPWk9bnVsbCl9O3JldHVybiBmdW5jdGlvbigpe3ZhciBsPVMubm93KCk7dXx8bi5sZWFkaW5nIT09ITF8fCh1PWwpO3ZhciBjPWUtKGwtdSk7cmV0dXJuIHI9dGhpcyxpPWFyZ3VtZW50cyxjPD0wfHxjPmU/KHMmJihjbGVhclRpbWVvdXQocykscz1udWxsKSx1PWwsbz10LmFwcGx5KHIsaSksc3x8KHI9aT1udWxsKSk6c3x8bi50cmFpbGluZz09PSExfHwocz1zZXRUaW1lb3V0KGEsYykpLG99fSxTLmRlYm91bmNlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcixpLG8scyx1LGE9ZnVuY3Rpb24gbCgpe3ZhciBhPVMubm93KCktczthPGUmJmE+PTA/cj1zZXRUaW1lb3V0KGwsZS1hKToocj1udWxsLG58fCh1PXQuYXBwbHkobyxpKSxyfHwobz1pPW51bGwpKSl9O3JldHVybiBmdW5jdGlvbigpe289dGhpcyxpPWFyZ3VtZW50cyxzPVMubm93KCk7dmFyIGw9biYmIXI7cmV0dXJuIHJ8fChyPXNldFRpbWVvdXQoYSxlKSksbCYmKHU9dC5hcHBseShvLGkpLG89aT1udWxsKSx1fX0sUy53cmFwPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFMucGFydGlhbChlLHQpfSxTLm5lZ2F0ZT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4hdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxTLmNvbXBvc2U9ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMsZT10Lmxlbmd0aC0xO3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgbj1lLHI9dFtlXS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7bi0tOylyPXRbbl0uY2FsbCh0aGlzLHIpO3JldHVybiByfX0sUy5hZnRlcj1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbigpe2lmKC0tdDwxKXJldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LFMuYmVmb3JlPWZ1bmN0aW9uKHQsZSl7dmFyIG47cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuLS10PjAmJihuPWUuYXBwbHkodGhpcyxhcmd1bWVudHMpKSx0PD0xJiYoZT1udWxsKSxufX0sUy5vbmNlPVMucGFydGlhbChTLmJlZm9yZSwyKTt2YXIgTD0he3RvU3RyaW5nOm51bGx9LnByb3BlcnR5SXNFbnVtZXJhYmxlKCJ0b1N0cmluZyIpLFI9WyJ2YWx1ZU9mIiwiaXNQcm90b3R5cGVPZiIsInRvU3RyaW5nIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJoYXNPd25Qcm9wZXJ0eSIsInRvTG9jYWxlU3RyaW5nIl07Uy5rZXlzPWZ1bmN0aW9uKHQpe2lmKCFTLmlzT2JqZWN0KHQpKXJldHVybltdO2lmKF8pcmV0dXJuIF8odCk7dmFyIGU9W107Zm9yKHZhciBuIGluIHQpUy5oYXModCxuKSYmZS5wdXNoKG4pO3JldHVybiBMJiZhKHQsZSksZX0sUy5hbGxLZXlzPWZ1bmN0aW9uKHQpe2lmKCFTLmlzT2JqZWN0KHQpKXJldHVybltdO3ZhciBlPVtdO2Zvcih2YXIgbiBpbiB0KWUucHVzaChuKTtyZXR1cm4gTCYmYSh0LGUpLGV9LFMudmFsdWVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1TLmtleXModCksbj1lLmxlbmd0aCxyPUFycmF5KG4pLGk9MDtpPG47aSsrKXJbaV09dFtlW2ldXTtyZXR1cm4gcn0sUy5tYXBPYmplY3Q9ZnVuY3Rpb24odCxlLG4pe2U9aihlLG4pO2Zvcih2YXIgcixpPVMua2V5cyh0KSxvPWkubGVuZ3RoLHM9e30sdT0wO3U8bzt1Kyspcj1pW3VdLHNbcl09ZSh0W3JdLHIsdCk7cmV0dXJuIHN9LFMucGFpcnM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVMua2V5cyh0KSxuPWUubGVuZ3RoLHI9QXJyYXkobiksaT0wO2k8bjtpKyspcltpXT1bZVtpXSx0W2VbaV1dXTtyZXR1cm4gcn0sUy5pbnZlcnQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXt9LG49Uy5rZXlzKHQpLHI9MCxpPW4ubGVuZ3RoO3I8aTtyKyspZVt0W25bcl1dXT1uW3JdO3JldHVybiBlfSxTLmZ1bmN0aW9ucz1TLm1ldGhvZHM9ZnVuY3Rpb24odCl7dmFyIGU9W107Zm9yKHZhciBuIGluIHQpUy5pc0Z1bmN0aW9uKHRbbl0pJiZlLnB1c2gobik7cmV0dXJuIGUuc29ydCgpfSxTLmV4dGVuZD1PKFMuYWxsS2V5cyksUy5leHRlbmRPd249Uy5hc3NpZ249TyhTLmtleXMpLFMuZmluZEtleT1mdW5jdGlvbih0LGUsbil7ZT1qKGUsbik7Zm9yKHZhciByLGk9Uy5rZXlzKHQpLG89MCxzPWkubGVuZ3RoO288cztvKyspaWYocj1pW29dLGUodFtyXSxyLHQpKXJldHVybiByfSxTLnBpY2s9ZnVuY3Rpb24odCxlLG4pe3ZhciByLGksbz17fSxzPXQ7aWYobnVsbD09cylyZXR1cm4gbztTLmlzRnVuY3Rpb24oZSk/KGk9Uy5hbGxLZXlzKHMpLHI9ayhlLG4pKTooaT1JKGFyZ3VtZW50cywhMSwhMSwxKSxyPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZSBpbiBufSxzPU9iamVjdChzKSk7Zm9yKHZhciB1PTAsYT1pLmxlbmd0aDt1PGE7dSsrKXt2YXIgbD1pW3VdLGM9c1tsXTtyKGMsbCxzKSYmKG9bbF09Yyl9cmV0dXJuIG99LFMub21pdD1mdW5jdGlvbih0LGUsbil7aWYoUy5pc0Z1bmN0aW9uKGUpKWU9Uy5uZWdhdGUoZSk7ZWxzZXt2YXIgcj1TLm1hcChJKGFyZ3VtZW50cywhMSwhMSwxKSxTdHJpbmcpO2U9ZnVuY3Rpb24odCxlKXtyZXR1cm4hUy5jb250YWlucyhyLGUpfX1yZXR1cm4gUy5waWNrKHQsZSxuKX0sUy5kZWZhdWx0cz1PKFMuYWxsS2V5cywhMCksUy5jcmVhdGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1FKHQpO3JldHVybiBlJiZTLmV4dGVuZE93bihuLGUpLG59LFMuY2xvbmU9ZnVuY3Rpb24odCl7cmV0dXJuIFMuaXNPYmplY3QodCk/Uy5pc0FycmF5KHQpP3Quc2xpY2UoKTpTLmV4dGVuZCh7fSx0KTp0fSxTLnRhcD1mdW5jdGlvbih0LGUpe3JldHVybiBlKHQpLHR9LFMuaXNNYXRjaD1mdW5jdGlvbih0LGUpe3ZhciBuPVMua2V5cyhlKSxyPW4ubGVuZ3RoO2lmKG51bGw9PXQpcmV0dXJuIXI7Zm9yKHZhciBpPU9iamVjdCh0KSxvPTA7bzxyO28rKyl7dmFyIHM9bltvXTtpZihlW3NdIT09aVtzXXx8IShzIGluIGkpKXJldHVybiExfXJldHVybiEwfTt2YXIgcT1mdW5jdGlvbiBYKHQsZSxuLHIpe2lmKHQ9PT1lKXJldHVybiAwIT09dHx8MS90PT09MS9lO2lmKG51bGw9PXR8fG51bGw9PWUpcmV0dXJuIHQ9PT1lO3QgaW5zdGFuY2VvZiBTJiYodD10Ll93cmFwcGVkKSxlIGluc3RhbmNlb2YgUyYmKGU9ZS5fd3JhcHBlZCk7dmFyIGk9di5jYWxsKHQpO2lmKGkhPT12LmNhbGwoZSkpcmV0dXJuITE7c3dpdGNoKGkpe2Nhc2UiW29iamVjdCBSZWdFeHBdIjpjYXNlIltvYmplY3QgU3RyaW5nXSI6cmV0dXJuIiIrdD09IiIrZTtjYXNlIltvYmplY3QgTnVtYmVyXSI6cmV0dXJuK3QhPT0rdD8rZSE9PStlOjA9PT0rdD8xLyt0PT09MS9lOit0PT09K2U7Y2FzZSJbb2JqZWN0IERhdGVdIjpjYXNlIltvYmplY3QgQm9vbGVhbl0iOnJldHVybit0PT09K2V9dmFyIHM9IltvYmplY3QgQXJyYXldIj09PWk7aWYoIXMpe2lmKCJvYmplY3QiIT0oInVuZGVmaW5lZCI9PXR5cGVvZiB0PyJ1bmRlZmluZWQiOm8odCkpfHwib2JqZWN0IiE9KCJ1bmRlZmluZWQiPT10eXBlb2YgZT8idW5kZWZpbmVkIjpvKGUpKSlyZXR1cm4hMTt2YXIgdT10LmNvbnN0cnVjdG9yLGE9ZS5jb25zdHJ1Y3RvcjtpZih1IT09YSYmIShTLmlzRnVuY3Rpb24odSkmJnUgaW5zdGFuY2VvZiB1JiZTLmlzRnVuY3Rpb24oYSkmJmEgaW5zdGFuY2VvZiBhKSYmImNvbnN0cnVjdG9yImluIHQmJiJjb25zdHJ1Y3RvciJpbiBlKXJldHVybiExfW49bnx8W10scj1yfHxbXTtmb3IodmFyIGw9bi5sZW5ndGg7bC0tOylpZihuW2xdPT09dClyZXR1cm4gcltsXT09PWU7aWYobi5wdXNoKHQpLHIucHVzaChlKSxzKXtpZihsPXQubGVuZ3RoLGwhPT1lLmxlbmd0aClyZXR1cm4hMTtmb3IoO2wtLTspaWYoIVgodFtsXSxlW2xdLG4scikpcmV0dXJuITF9ZWxzZXt2YXIgYyxmPVMua2V5cyh0KTtpZihsPWYubGVuZ3RoLFMua2V5cyhlKS5sZW5ndGghPT1sKXJldHVybiExO2Zvcig7bC0tOylpZihjPWZbbF0sIVMuaGFzKGUsYyl8fCFYKHRbY10sZVtjXSxuLHIpKXJldHVybiExfXJldHVybiBuLnBvcCgpLHIucG9wKCksITB9O1MuaXNFcXVhbD1mdW5jdGlvbih0LGUpe3JldHVybiBxKHQsZSl9LFMuaXNFbXB0eT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dHx8KEModCkmJihTLmlzQXJyYXkodCl8fFMuaXNTdHJpbmcodCl8fFMuaXNBcmd1bWVudHModCkpPzA9PT10Lmxlbmd0aDowPT09Uy5rZXlzKHQpLmxlbmd0aCl9LFMuaXNFbGVtZW50PWZ1bmN0aW9uKHQpe3JldHVybiEoIXR8fDEhPT10Lm5vZGVUeXBlKX0sUy5pc0FycmF5PXl8fGZ1bmN0aW9uKHQpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT12LmNhbGwodCl9LFMuaXNPYmplY3Q9ZnVuY3Rpb24odCl7dmFyIGU9InVuZGVmaW5lZCI9PXR5cGVvZiB0PyJ1bmRlZmluZWQiOm8odCk7cmV0dXJuImZ1bmN0aW9uIj09PWV8fCJvYmplY3QiPT09ZSYmISF0fSxTLmVhY2goWyJBcmd1bWVudHMiLCJGdW5jdGlvbiIsIlN0cmluZyIsIk51bWJlciIsIkRhdGUiLCJSZWdFeHAiLCJFcnJvciJdLGZ1bmN0aW9uKHQpe1NbImlzIit0XT1mdW5jdGlvbihlKXtyZXR1cm4gdi5jYWxsKGUpPT09IltvYmplY3QgIit0KyJdIn19KSxTLmlzQXJndW1lbnRzKGFyZ3VtZW50cyl8fChTLmlzQXJndW1lbnRzPWZ1bmN0aW9uKHQpe3JldHVybiBTLmhhcyh0LCJjYWxsZWUiKX0pLCJmdW5jdGlvbiIhPXR5cGVvZi8uLyYmIm9iamVjdCIhPSgidW5kZWZpbmVkIj09dHlwZW9mIEludDhBcnJheT8idW5kZWZpbmVkIjpvKEludDhBcnJheSkpJiYoUy5pc0Z1bmN0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0fHwhMX0pLFMuaXNGaW5pdGU9ZnVuY3Rpb24odCl7cmV0dXJuIGlzRmluaXRlKHQpJiYhaXNOYU4ocGFyc2VGbG9hdCh0KSl9LFMuaXNOYU49ZnVuY3Rpb24odCl7cmV0dXJuIFMuaXNOdW1iZXIodCkmJnQhPT0rdH0sUy5pc0Jvb2xlYW49ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT0hMHx8dD09PSExfHwiW29iamVjdCBCb29sZWFuXSI9PT12LmNhbGwodCl9LFMuaXNOdWxsPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT09dH0sUy5pc1VuZGVmaW5lZD1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dH0sUy5oYXM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbCE9dCYmbS5jYWxsKHQsZSl9LFMubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBsLl89Yyx0aGlzfSxTLmlkZW50aXR5PWZ1bmN0aW9uKHQpe3JldHVybiB0fSxTLmNvbnN0YW50PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0fX0sUy5ub29wPWZ1bmN0aW9uKCl7fSxTLnByb3BlcnR5PU0sUy5wcm9wZXJ0eU9mPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P2Z1bmN0aW9uKCl7fTpmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX19LFMubWF0Y2hlcj1TLm1hdGNoZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9Uy5leHRlbmRPd24oe30sdCksZnVuY3Rpb24oZSl7cmV0dXJuIFMuaXNNYXRjaChlLHQpfX0sUy50aW1lcz1mdW5jdGlvbih0LGUsbil7dmFyIHI9QXJyYXkoTWF0aC5tYXgoMCx0KSk7ZT1rKGUsbiwxKTtmb3IodmFyIGk9MDtpPHQ7aSsrKXJbaV09ZShpKTtyZXR1cm4gcn0sUy5yYW5kb209ZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbD09ZSYmKGU9dCx0PTApLHQrTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihlLXQrMSkpfSxTLm5vdz1EYXRlLm5vd3x8ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX07dmFyIEY9eyImIjoiJmFtcDsiLCI8IjoiJmx0OyIsIj4iOiImZ3Q7IiwnIic6IiZxdW90OyIsIiciOiImI3gyNzsiLCJgIjoiJiN4NjA7In0sUD1TLmludmVydChGKSxCPWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfSxuPSIoPzoiK1Mua2V5cyh0KS5qb2luKCJ8IikrIikiLHI9UmVnRXhwKG4pLGk9UmVnRXhwKG4sImciKTtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIHQ9bnVsbD09dD8iIjoiIit0LHIudGVzdCh0KT90LnJlcGxhY2UoaSxlKTp0fX07Uy5lc2NhcGU9QihGKSxTLnVuZXNjYXBlPUIoUCksUy5yZXN1bHQ9ZnVuY3Rpb24odCxlLG4pe3ZhciByPW51bGw9PXQ/dm9pZCAwOnRbZV07cmV0dXJuIHZvaWQgMD09PXImJihyPW4pLFMuaXNGdW5jdGlvbihyKT9yLmNhbGwodCk6cn07dmFyIFc9MDtTLnVuaXF1ZUlkPWZ1bmN0aW9uKHQpe3ZhciBlPSsrVysiIjtyZXR1cm4gdD90K2U6ZX0sUy50ZW1wbGF0ZVNldHRpbmdzPXtldmFsdWF0ZTovPCUoW1xzXFNdKz8pJT4vZyxpbnRlcnBvbGF0ZTovPCU9KFtcc1xTXSs/KSU+L2csZXNjYXBlOi88JS0oW1xzXFNdKz8pJT4vZ307dmFyIEQ9LyguKV4vLEg9eyInIjoiJyIsIlxcIjoiXFwiLCJcciI6InIiLCJcbiI6Im4iLCJcdTIwMjgiOiJ1MjAyOCIsIlx1MjAyOSI6InUyMDI5In0sVT0vXFx8J3xccnxcbnxcdTIwMjh8XHUyMDI5L2csVj1mdW5jdGlvbih0KXtyZXR1cm4iXFwiK0hbdF19O1MudGVtcGxhdGU9ZnVuY3Rpb24odCxlLG4peyFlJiZuJiYoZT1uKSxlPVMuZGVmYXVsdHMoe30sZSxTLnRlbXBsYXRlU2V0dGluZ3MpO3ZhciByPVJlZ0V4cChbKGUuZXNjYXBlfHxEKS5zb3VyY2UsKGUuaW50ZXJwb2xhdGV8fEQpLnNvdXJjZSwoZS5ldmFsdWF0ZXx8RCkuc291cmNlXS5qb2luKCJ8IikrInwkIiwiZyIpLGk9MCxvPSJfX3ArPSciO3QucmVwbGFjZShyLGZ1bmN0aW9uKGUsbixyLHMsdSl7cmV0dXJuIG8rPXQuc2xpY2UoaSx1KS5yZXBsYWNlKFUsViksaT11K2UubGVuZ3RoLG4/bys9IicrXG4oKF9fdD0oIituKyIpKT09bnVsbD8nJzpfLmVzY2FwZShfX3QpKStcbiciOnI/bys9IicrXG4oKF9fdD0oIityKyIpKT09bnVsbD8nJzpfX3QpK1xuJyI6cyYmKG8rPSInO1xuIitzKyJcbl9fcCs9JyIpLGV9KSxvKz0iJztcbiIsZS52YXJpYWJsZXx8KG89IndpdGgob2JqfHx7fSl7XG4iK28rIn1cbiIpLG89InZhciBfX3QsX19wPScnLF9faj1BcnJheS5wcm90b3R5cGUuam9pbixwcmludD1mdW5jdGlvbigpe19fcCs9X19qLmNhbGwoYXJndW1lbnRzLCcnKTt9O1xuIitvKyJyZXR1cm4gX19wO1xuIjt0cnl7dmFyIHM9bmV3IEZ1bmN0aW9uKGUudmFyaWFibGV8fCJvYmoiLCJfIixvKX1jYXRjaCh1KXt0aHJvdyB1LnNvdXJjZT1vLHV9dmFyIGE9ZnVuY3Rpb24odCl7cmV0dXJuIHMuY2FsbCh0aGlzLHQsUyl9LGw9ZS52YXJpYWJsZXx8Im9iaiI7cmV0dXJuIGEuc291cmNlPSJmdW5jdGlvbigiK2wrIil7XG4iK28rIn0iLGF9LFMuY2hhaW49ZnVuY3Rpb24odCl7dmFyIGU9Uyh0KTtyZXR1cm4gZS5fY2hhaW49ITAsZX07dmFyICQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5fY2hhaW4/UyhlKS5jaGFpbigpOmV9O1MubWl4aW49ZnVuY3Rpb24odCl7Uy5lYWNoKFMuZnVuY3Rpb25zKHQpLGZ1bmN0aW9uKGUpe3ZhciBuPVNbZV09dFtlXTtTLnByb3RvdHlwZVtlXT1mdW5jdGlvbigpe3ZhciB0PVt0aGlzLl93cmFwcGVkXTtyZXR1cm4gcC5hcHBseSh0LGFyZ3VtZW50cyksJCh0aGlzLG4uYXBwbHkoUyx0KSl9fSl9LFMubWl4aW4oUyksUy5lYWNoKFsicG9wIiwicHVzaCIsInJldmVyc2UiLCJzaGlmdCIsInNvcnQiLCJzcGxpY2UiLCJ1bnNoaWZ0Il0sZnVuY3Rpb24odCl7dmFyIGU9Zlt0XTtTLnByb3RvdHlwZVt0XT1mdW5jdGlvbigpe3ZhciBuPXRoaXMuX3dyYXBwZWQ7cmV0dXJuIGUuYXBwbHkobixhcmd1bWVudHMpLCJzaGlmdCIhPT10JiYic3BsaWNlIiE9PXR8fDAhPT1uLmxlbmd0aHx8ZGVsZXRlIG5bMF0sJCh0aGlzLG4pfX0pLFMuZWFjaChbImNvbmNhdCIsImpvaW4iLCJzbGljZSJdLGZ1bmN0aW9uKHQpe3ZhciBlPWZbdF07Uy5wcm90b3R5cGVbdF09ZnVuY3Rpb24oKXtyZXR1cm4gJCh0aGlzLGUuYXBwbHkodGhpcy5fd3JhcHBlZCxhcmd1bWVudHMpKX19KSxTLnByb3RvdHlwZS52YWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl93cmFwcGVkfSxTLnByb3RvdHlwZS52YWx1ZU9mPVMucHJvdG90eXBlLnRvSlNPTj1TLnByb3RvdHlwZS52YWx1ZSxTLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiIiK3RoaXMuX3dyYXBwZWR9LHI9W10saT1mdW5jdGlvbigpe3JldHVybiBTfS5hcHBseShlLHIpLCEodm9pZCAwIT09aSYmKHQuZXhwb3J0cz1pKSl9KS5jYWxsKHZvaWQgMCl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9bigyMiksaT1uKDIzKSxvPW4oNDIpLHM9big0MSksdT1bXSxhPXUuc2xpY2UsbD1mdW5jdGlvbih0LGUpe2V8fChlPXt9KSxlLm1vZGVsJiYodGhpcy5tb2RlbD1lLm1vZGVsKSx2b2lkIDAhPT1lLmNvbXBhcmF0b3ImJih0aGlzLmNvbXBhcmF0b3I9ZS5jb21wYXJhdG9yKSx0aGlzLl9yZXNldCgpLHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdCYmdGhpcy5yZXNldCh0LG8uZXh0ZW5kKHtzaWxlbnQ6ITB9LGUpKX0sYz17YWRkOiEwLHJlbW92ZTohMCxtZXJnZTohMH0sZj17YWRkOiEwLHJlbW92ZTohMX07by5leHRlbmQobC5wcm90b3R5cGUscix7bW9kZWw6cyxpbml0aWFsaXplOmZ1bmN0aW9uKCl7fSx0b0pTT046ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRvSlNPTih0KX0pfSxzeW5jOmZ1bmN0aW9uKCl7cmV0dXJuIEJhY2tib25lLnN5bmMuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxhZGQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5zZXQodCxvLmV4dGVuZCh7bWVyZ2U6ITF9LGUsZikpfSxyZW1vdmU6ZnVuY3Rpb24odCxlKXt2YXIgbj0hby5pc0FycmF5KHQpO3Q9bj9bdF06by5jbG9uZSh0KSxlfHwoZT17fSk7Zm9yKHZhciByPTAsaT10Lmxlbmd0aDtyPGk7cisrKXt2YXIgcz10W3JdPXRoaXMuZ2V0KHRbcl0pO2lmKHMpe3ZhciB1PXRoaXMubW9kZWxJZChzLmF0dHJpYnV0ZXMpO251bGwhPXUmJmRlbGV0ZSB0aGlzLl9ieUlkW3VdLGRlbGV0ZSB0aGlzLl9ieUlkW3MuY2lkXTt2YXIgYT10aGlzLmluZGV4T2Yocyk7dGhpcy5tb2RlbHMuc3BsaWNlKGEsMSksdGhpcy5sZW5ndGgtLSxlLnNpbGVudHx8KGUuaW5kZXg9YSxzLnRyaWdnZXIoInJlbW92ZSIscyx0aGlzLGUpKSx0aGlzLl9yZW1vdmVSZWZlcmVuY2UocyxlKX19cmV0dXJuIG4/dFswXTp0fSxzZXQ6ZnVuY3Rpb24odCxlKXtlPW8uZGVmYXVsdHMoe30sZSxjKSxlLnBhcnNlJiYodD10aGlzLnBhcnNlKHQsZSkpO3ZhciBuPSFvLmlzQXJyYXkodCk7dD1uP3Q/W3RdOltdOnQuc2xpY2UoKTtmb3IodmFyIHIsaSxzLHUsYSxsPWUuYXQsZj10aGlzLmNvbXBhcmF0b3ImJm51bGw9PWwmJmUuc29ydCE9PSExLGg9by5pc1N0cmluZyh0aGlzLmNvbXBhcmF0b3IpP3RoaXMuY29tcGFyYXRvcjpudWxsLGQ9W10scD1bXSxnPXt9LHY9ZS5hZGQsbT1lLm1lcmdlLHk9ZS5yZW1vdmUsXz0hKGZ8fCF2fHwheSkmJltdLGI9MCx4PXQubGVuZ3RoO2I8eDtiKyspe2lmKHM9dFtiXSx1PXRoaXMuZ2V0KHMpKXkmJihnW3UuY2lkXT0hMCksbSYmcyE9PXUmJihzPXRoaXMuX2lzTW9kZWwocyk/cy5hdHRyaWJ1dGVzOnMsZS5wYXJzZSYmKHM9dS5wYXJzZShzLGUpKSx1LnNldChzLGUpLGYmJiFhJiZ1Lmhhc0NoYW5nZWQoaCkmJihhPSEwKSksdFtiXT11O2Vsc2UgaWYodil7aWYoaT10W2JdPXRoaXMuX3ByZXBhcmVNb2RlbChzLGUpLCFpKWNvbnRpbnVlO2QucHVzaChpKSx0aGlzLl9hZGRSZWZlcmVuY2UoaSxlKX1pPXV8fGksaSYmKHI9dGhpcy5tb2RlbElkKGkuYXR0cmlidXRlcyksIV98fCFpLmlzTmV3KCkmJmdbcl18fF8ucHVzaChpKSxnW3JdPSEwKX1pZih5KXtmb3IodmFyIGI9MCx4PXRoaXMubGVuZ3RoO2I8eDtiKyspZ1soaT10aGlzLm1vZGVsc1tiXSkuY2lkXXx8cC5wdXNoKGkpO3AubGVuZ3RoJiZ0aGlzLnJlbW92ZShwLGUpfWlmKGQubGVuZ3RofHxfJiZfLmxlbmd0aClpZihmJiYoYT0hMCksdGhpcy5sZW5ndGgrPWQubGVuZ3RoLG51bGwhPWwpZm9yKHZhciBiPTAseD1kLmxlbmd0aDtiPHg7YisrKXRoaXMubW9kZWxzLnNwbGljZShsK2IsMCxkW2JdKTtlbHNle18mJih0aGlzLm1vZGVscy5sZW5ndGg9MCk7Zm9yKHZhciB3PV98fGQsYj0wLHg9dy5sZW5ndGg7Yjx4O2IrKyl0aGlzLm1vZGVscy5wdXNoKHdbYl0pfWlmKGEmJnRoaXMuc29ydCh7c2lsZW50OiEwfSksIWUuc2lsZW50KXtmb3IodmFyIFM9bnVsbCE9bD9vLmNsb25lKGUpOmUsYj0wLHg9ZC5sZW5ndGg7Yjx4O2IrKyludWxsIT1sJiYoUy5pbmRleD1sK2IpLChpPWRbYl0pLnRyaWdnZXIoImFkZCIsaSx0aGlzLFMpOyhhfHxfJiZfLmxlbmd0aCkmJnRoaXMudHJpZ2dlcigic29ydCIsdGhpcyxlKX1yZXR1cm4gbj90WzBdOnR9LHJlc2V0OmZ1bmN0aW9uKHQsZSl7ZXx8KGU9e30pO2Zvcih2YXIgbj0wLHI9dGhpcy5tb2RlbHMubGVuZ3RoO248cjtuKyspdGhpcy5fcmVtb3ZlUmVmZXJlbmNlKHRoaXMubW9kZWxzW25dLGUpO3JldHVybiBlLnByZXZpb3VzTW9kZWxzPXRoaXMubW9kZWxzLHRoaXMuX3Jlc2V0KCksdD10aGlzLmFkZCh0LG8uZXh0ZW5kKHtzaWxlbnQ6ITB9LGUpKSxlLnNpbGVudHx8dGhpcy50cmlnZ2VyKCJyZXNldCIsdGhpcyxlKSx0fSxwdXNoOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYWRkKHQsby5leHRlbmQoe2F0OnRoaXMubGVuZ3RofSxlKSl9LHBvcDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmF0KHRoaXMubGVuZ3RoLTEpO3JldHVybiB0aGlzLnJlbW92ZShlLHQpLGV9LHVuc2hpZnQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5hZGQodCxvLmV4dGVuZCh7YXQ6MH0sZSkpfSxzaGlmdDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmF0KDApO3JldHVybiB0aGlzLnJlbW92ZShlLHQpLGV9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkodGhpcy5tb2RlbHMsYXJndW1lbnRzKX0sZ2V0OmZ1bmN0aW9uKHQpe2lmKG51bGwhPXQpe3ZhciBlPXRoaXMubW9kZWxJZCh0aGlzLl9pc01vZGVsKHQpP3QuYXR0cmlidXRlczp0KTtyZXR1cm4gdGhpcy5fYnlJZFt0XXx8dGhpcy5fYnlJZFtlXXx8dGhpcy5fYnlJZFt0LmNpZF19fSxhdDpmdW5jdGlvbih0KXtyZXR1cm4gdDwwJiYodCs9dGhpcy5sZW5ndGgpLHRoaXMubW9kZWxzW3RdfSx3aGVyZTpmdW5jdGlvbih0LGUpe3JldHVybiBvLmlzRW1wdHkodCk/ZT92b2lkIDA6W106dGhpc1tlPyJmaW5kIjoiZmlsdGVyIl0oZnVuY3Rpb24oZSl7Zm9yKHZhciBuIGluIHQpaWYodFtuXSE9PWUuZ2V0KG4pKXJldHVybiExO3JldHVybiEwfSl9LGZpbmRXaGVyZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy53aGVyZSh0LCEwKX0sc29ydDpmdW5jdGlvbih0KXtpZighdGhpcy5jb21wYXJhdG9yKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IHNvcnQgYSBzZXQgd2l0aG91dCBhIGNvbXBhcmF0b3IiKTtyZXR1cm4gdHx8KHQ9e30pLG8uaXNTdHJpbmcodGhpcy5jb21wYXJhdG9yKXx8MT09PXRoaXMuY29tcGFyYXRvci5sZW5ndGg/dGhpcy5tb2RlbHM9dGhpcy5zb3J0QnkodGhpcy5jb21wYXJhdG9yLHRoaXMpOnRoaXMubW9kZWxzLnNvcnQoby5iaW5kKHRoaXMuY29tcGFyYXRvcix0aGlzKSksdC5zaWxlbnR8fHRoaXMudHJpZ2dlcigic29ydCIsdGhpcyx0KSx0aGlzfSxwbHVjazpmdW5jdGlvbih0KXtyZXR1cm4gby5pbnZva2UodGhpcy5tb2RlbHMsImdldCIsdCl9LGZldGNoOmZ1bmN0aW9uKHQpe3Q9dD9vLmNsb25lKHQpOnt9LHZvaWQgMD09PXQucGFyc2UmJih0LnBhcnNlPSEwKTt2YXIgZT10LnN1Y2Nlc3Msbj10aGlzO3JldHVybiB0LnN1Y2Nlc3M9ZnVuY3Rpb24ocil7blt0LnJlc2V0PyJyZXNldCI6InNldCJdKHIsdCksZSYmZShuLHIsdCksbi50cmlnZ2VyKCJzeW5jIixuLHIsdCl9LHdyYXBFcnJvcih0aGlzLHQpLHRoaXMuc3luYygicmVhZCIsdGhpcyx0KX0sY3JlYXRlOmZ1bmN0aW9uKHQsZSl7aWYoZT1lP28uY2xvbmUoZSk6e30sISh0PXRoaXMuX3ByZXBhcmVNb2RlbCh0LGUpKSlyZXR1cm4hMTtlLndhaXR8fHRoaXMuYWRkKHQsZSk7dmFyIG49dGhpcyxyPWUuc3VjY2VzcztyZXR1cm4gZS5zdWNjZXNzPWZ1bmN0aW9uKHQsaSl7ZS53YWl0JiZuLmFkZCh0LGUpLHImJnIodCxpLGUpfSx0LnNhdmUobnVsbCxlKSx0fSxwYXJzZTpmdW5jdGlvbih0LGUpe3JldHVybiB0fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLm1vZGVscyx7bW9kZWw6dGhpcy5tb2RlbCxjb21wYXJhdG9yOnRoaXMuY29tcGFyYXRvcn0pfSxtb2RlbElkOmZ1bmN0aW9uKHQpe3JldHVybiB0W3RoaXMubW9kZWwucHJvdG90eXBlLmlkQXR0cmlidXRlfHwiaWQiXX0sX3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5sZW5ndGg9MCx0aGlzLm1vZGVscz1bXSx0aGlzLl9ieUlkPXt9fSxfcHJlcGFyZU1vZGVsOmZ1bmN0aW9uKHQsZSl7aWYodGhpcy5faXNNb2RlbCh0KSlyZXR1cm4gdC5jb2xsZWN0aW9ufHwodC5jb2xsZWN0aW9uPXRoaXMpLHQ7ZT1lP28uY2xvbmUoZSk6e30sZS5jb2xsZWN0aW9uPXRoaXM7dmFyIG49bmV3IHRoaXMubW9kZWwodCxlKTtyZXR1cm4gbi52YWxpZGF0aW9uRXJyb3I/KHRoaXMudHJpZ2dlcigiaW52YWxpZCIsdGhpcyxuLnZhbGlkYXRpb25FcnJvcixlKSwhMSk6bn0sX2lzTW9kZWw6ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBzfSxfYWRkUmVmZXJlbmNlOmZ1bmN0aW9uKHQsZSl7dGhpcy5fYnlJZFt0LmNpZF09dDt2YXIgbj10aGlzLm1vZGVsSWQodC5hdHRyaWJ1dGVzKTtudWxsIT1uJiYodGhpcy5fYnlJZFtuXT10KSx0Lm9uKCJhbGwiLHRoaXMuX29uTW9kZWxFdmVudCx0aGlzKX0sX3JlbW92ZVJlZmVyZW5jZTpmdW5jdGlvbih0LGUpe3RoaXM9PT10LmNvbGxlY3Rpb24mJmRlbGV0ZSB0LmNvbGxlY3Rpb24sdC5vZmYoImFsbCIsdGhpcy5fb25Nb2RlbEV2ZW50LHRoaXMpfSxfb25Nb2RlbEV2ZW50OmZ1bmN0aW9uKHQsZSxuLHIpe2lmKCJhZGQiIT09dCYmInJlbW92ZSIhPT10fHxuPT09dGhpcyl7aWYoImRlc3Ryb3kiPT09dCYmdGhpcy5yZW1vdmUoZSxyKSwiY2hhbmdlIj09PXQpe3ZhciBpPXRoaXMubW9kZWxJZChlLnByZXZpb3VzQXR0cmlidXRlcygpKSxvPXRoaXMubW9kZWxJZChlLmF0dHJpYnV0ZXMpO2khPT1vJiYobnVsbCE9aSYmZGVsZXRlIHRoaXMuX2J5SWRbaV0sbnVsbCE9byYmKHRoaXMuX2J5SWRbb109ZSkpfXRoaXMudHJpZ2dlci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX0pO3ZhciBoPVsiZm9yRWFjaCIsImVhY2giLCJtYXAiLCJjb2xsZWN0IiwicmVkdWNlIiwiZm9sZGwiLCJpbmplY3QiLCJyZWR1Y2VSaWdodCIsImZvbGRyIiwiZmluZCIsImRldGVjdCIsImZpbHRlciIsInNlbGVjdCIsInJlamVjdCIsImV2ZXJ5IiwiYWxsIiwic29tZSIsImFueSIsImluY2x1ZGUiLCJjb250YWlucyIsImludm9rZSIsIm1heCIsIm1pbiIsInRvQXJyYXkiLCJzaXplIiwiZmlyc3QiLCJoZWFkIiwidGFrZSIsImluaXRpYWwiLCJyZXN0IiwidGFpbCIsImRyb3AiLCJsYXN0Iiwid2l0aG91dCIsImRpZmZlcmVuY2UiLCJpbmRleE9mIiwic2h1ZmZsZSIsImxhc3RJbmRleE9mIiwiaXNFbXB0eSIsImNoYWluIiwic2FtcGxlIiwicGFydGl0aW9uIl07by5lYWNoKGgsZnVuY3Rpb24odCl7b1t0XSYmKGwucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7dmFyIGU9YS5jYWxsKGFyZ3VtZW50cyk7cmV0dXJuIGUudW5zaGlmdCh0aGlzLm1vZGVscyksb1t0XS5hcHBseShvLGUpfSl9KTt2YXIgZD1bImdyb3VwQnkiLCJjb3VudEJ5Iiwic29ydEJ5IiwiaW5kZXhCeSJdO28uZWFjaChkLGZ1bmN0aW9uKHQpe29bdF0mJihsLnByb3RvdHlwZVt0XT1mdW5jdGlvbihlLG4pe3ZhciByPW8uaXNGdW5jdGlvbihlKT9lOmZ1bmN0aW9uKHQpe3JldHVybiB0LmdldChlKX07cmV0dXJuIG9bdF0odGhpcy5tb2RlbHMscixuKX0pfSksbC5leHRlbmQ9aSx0LmV4cG9ydHM9bH0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpewpyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbD8ic3ltYm9sIjp0eXBlb2YgdH07IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbigpe3JldHVybntrZXlzOk9iamVjdC5rZXlzfHxmdW5jdGlvbih0KXtpZigib2JqZWN0IiE9PSgidW5kZWZpbmVkIj09dHlwZW9mIHQ/InVuZGVmaW5lZCI6cih0KSkmJiJmdW5jdGlvbiIhPXR5cGVvZiB0fHxudWxsPT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJrZXlzKCkgY2FsbGVkIG9uIGEgbm9uLW9iamVjdCIpO3ZhciBlLG49W107Zm9yKGUgaW4gdCl0Lmhhc093blByb3BlcnR5KGUpJiYobltuLmxlbmd0aF09ZSk7cmV0dXJuIG59LHVuaXF1ZUlkOmZ1bmN0aW9uKHQpe3ZhciBlPSsrYSsiIjtyZXR1cm4gdD90K2U6ZX0saGFzOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHMuY2FsbCh0LGUpfSxlYWNoOmZ1bmN0aW9uKHQsZSxuKXtpZihudWxsIT10KWlmKG8mJnQuZm9yRWFjaD09PW8pdC5mb3JFYWNoKGUsbik7ZWxzZSBpZih0Lmxlbmd0aD09PSt0Lmxlbmd0aClmb3IodmFyIHI9MCxpPXQubGVuZ3RoO3I8aTtyKyspZS5jYWxsKG4sdFtyXSxyLHQpO2Vsc2UgZm9yKHZhciBzIGluIHQpdGhpcy5oYXModCxzKSYmZS5jYWxsKG4sdFtzXSxzLHQpfSxvbmNlOmZ1bmN0aW9uKHQpe3ZhciBlLG49ITE7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG4/ZToobj0hMCxlPXQuYXBwbHkodGhpcyxhcmd1bWVudHMpLHQ9bnVsbCxlKX19fX12YXIgaSxvPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLHM9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSx1PUFycmF5LnByb3RvdHlwZS5zbGljZSxhPTAsbD1uKCk7aT17b246ZnVuY3Rpb24odCxlLG4pe3JldHVybiBmKHRoaXMsIm9uIix0LFtlLG5dKSYmZT8odGhpcy5fZXZlbnRzfHwodGhpcy5fZXZlbnRzPXt9KSwodGhpcy5fZXZlbnRzW3RdfHwodGhpcy5fZXZlbnRzW3RdPVtdKSkucHVzaCh7Y2FsbGJhY2s6ZSxjb250ZXh0Om4sY3R4Om58fHRoaXN9KSx0aGlzKTp0aGlzfSxvbmNlOmZ1bmN0aW9uIHAodCxlLG4pe2lmKCFmKHRoaXMsIm9uY2UiLHQsW2Usbl0pfHwhZSlyZXR1cm4gdGhpczt2YXIgcj10aGlzLHA9bC5vbmNlKGZ1bmN0aW9uKCl7ci5vZmYodCxwKSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pO3JldHVybiBwLl9jYWxsYmFjaz1lLHRoaXMub24odCxwLG4pfSxvZmY6ZnVuY3Rpb24odCxlLG4pe3ZhciByLGksbyxzLHUsYSxjLGg7aWYoIXRoaXMuX2V2ZW50c3x8IWYodGhpcywib2ZmIix0LFtlLG5dKSlyZXR1cm4gdGhpcztpZighdCYmIWUmJiFuKXJldHVybiB0aGlzLl9ldmVudHM9e30sdGhpcztmb3Iocz10P1t0XTpsLmtleXModGhpcy5fZXZlbnRzKSx1PTAsYT1zLmxlbmd0aDt1PGE7dSsrKWlmKHQ9c1t1XSxvPXRoaXMuX2V2ZW50c1t0XSl7aWYodGhpcy5fZXZlbnRzW3RdPXI9W10sZXx8bilmb3IoYz0wLGg9by5sZW5ndGg7YzxoO2MrKylpPW9bY10sKGUmJmUhPT1pLmNhbGxiYWNrJiZlIT09aS5jYWxsYmFjay5fY2FsbGJhY2t8fG4mJm4hPT1pLmNvbnRleHQpJiZyLnB1c2goaSk7ci5sZW5ndGh8fGRlbGV0ZSB0aGlzLl9ldmVudHNbdF19cmV0dXJuIHRoaXN9LHRyaWdnZXI6ZnVuY3Rpb24odCl7aWYoIXRoaXMuX2V2ZW50cylyZXR1cm4gdGhpczt2YXIgZT11LmNhbGwoYXJndW1lbnRzLDEpO2lmKCFmKHRoaXMsInRyaWdnZXIiLHQsZSkpcmV0dXJuIHRoaXM7dmFyIG49dGhpcy5fZXZlbnRzW3RdLHI9dGhpcy5fZXZlbnRzLmFsbDtyZXR1cm4gbiYmaChuLGUpLHImJmgocixhcmd1bWVudHMpLHRoaXN9LHN0b3BMaXN0ZW5pbmc6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXMuX2xpc3RlbmVycztpZighaSlyZXR1cm4gdGhpczt2YXIgbz0hZSYmIW47Im9iamVjdCI9PT0oInVuZGVmaW5lZCI9PXR5cGVvZiBlPyJ1bmRlZmluZWQiOnIoZSkpJiYobj10aGlzKSx0JiYoKGk9e30pW3QuX2xpc3RlbmVySWRdPXQpO2Zvcih2YXIgcyBpbiBpKWlbc10ub2ZmKGUsbix0aGlzKSxvJiZkZWxldGUgdGhpcy5fbGlzdGVuZXJzW3NdO3JldHVybiB0aGlzfX07dmFyIGM9L1xzKy8sZj1mdW5jdGlvbih0LGUsbixpKXtpZighbilyZXR1cm4hMDtpZigib2JqZWN0Ij09PSgidW5kZWZpbmVkIj09dHlwZW9mIG4/InVuZGVmaW5lZCI6cihuKSkpe2Zvcih2YXIgbyBpbiBuKXRbZV0uYXBwbHkodCxbbyxuW29dXS5jb25jYXQoaSkpO3JldHVybiExfWlmKGMudGVzdChuKSl7Zm9yKHZhciBzPW4uc3BsaXQoYyksdT0wLGE9cy5sZW5ndGg7dTxhO3UrKyl0W2VdLmFwcGx5KHQsW3NbdV1dLmNvbmNhdChpKSk7cmV0dXJuITF9cmV0dXJuITB9LGg9ZnVuY3Rpb24odCxlKXt2YXIgbixyPS0xLGk9dC5sZW5ndGgsbz1lWzBdLHM9ZVsxXSx1PWVbMl07c3dpdGNoKGUubGVuZ3RoKXtjYXNlIDA6Zm9yKDsrK3I8aTspKG49dFtyXSkuY2FsbGJhY2suY2FsbChuLmN0eCk7cmV0dXJuO2Nhc2UgMTpmb3IoOysrcjxpOykobj10W3JdKS5jYWxsYmFjay5jYWxsKG4uY3R4LG8pO3JldHVybjtjYXNlIDI6Zm9yKDsrK3I8aTspKG49dFtyXSkuY2FsbGJhY2suY2FsbChuLmN0eCxvLHMpO3JldHVybjtjYXNlIDM6Zm9yKDsrK3I8aTspKG49dFtyXSkuY2FsbGJhY2suY2FsbChuLmN0eCxvLHMsdSk7cmV0dXJuO2RlZmF1bHQ6Zm9yKDsrK3I8aTspKG49dFtyXSkuY2FsbGJhY2suYXBwbHkobi5jdHgsZSl9fSxkPXtsaXN0ZW5Ubzoib24iLGxpc3RlblRvT25jZToib25jZSJ9O2wuZWFjaChkLGZ1bmN0aW9uKHQsZSl7aVtlXT1mdW5jdGlvbihlLG4saSl7cmV0dXJuKHRoaXMuX2xpc3RlbmVyc3x8KHRoaXMuX2xpc3RlbmVycz17fSkpW2UuX2xpc3RlbmVySWR8fChlLl9saXN0ZW5lcklkPWwudW5pcXVlSWQoImwiKSldPWUsIm9iamVjdCI9PT0oInVuZGVmaW5lZCI9PXR5cGVvZiBuPyJ1bmRlZmluZWQiOnIobikpJiYoaT10aGlzKSxlW3RdKG4saSx0aGlzKSx0aGlzfX0pLGkuYmluZD1pLm9uLGkudW5iaW5kPWkub2ZmLGkubWl4aW49ZnVuY3Rpb24odCl7dmFyIGU9WyJvbiIsIm9uY2UiLCJvZmYiLCJ0cmlnZ2VyIiwic3RvcExpc3RlbmluZyIsImxpc3RlblRvIiwibGlzdGVuVG9PbmNlIiwiYmluZCIsInVuYmluZCJdO3JldHVybiBsLmVhY2goZSxmdW5jdGlvbihlKXt0W2VdPXRoaXNbZV19LHRoaXMpLHR9LCJ1bmRlZmluZWQiIT10eXBlb2YgdCYmdC5leHBvcnRzJiYoZT10LmV4cG9ydHM9aSksZS5CYWNrYm9uZUV2ZW50cz1pfSh2b2lkIDApfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJiJzeW1ib2wiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJiJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2w/InN5bWJvbCI6dHlwZW9mIHR9OyFmdW5jdGlvbigpe2Z1bmN0aW9uIG4oKXtyZXR1cm57a2V5czpPYmplY3Qua2V5c3x8ZnVuY3Rpb24odCl7aWYoIm9iamVjdCIhPT0oInVuZGVmaW5lZCI9PXR5cGVvZiB0PyJ1bmRlZmluZWQiOnIodCkpJiYiZnVuY3Rpb24iIT10eXBlb2YgdHx8bnVsbD09PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigia2V5cygpIGNhbGxlZCBvbiBhIG5vbi1vYmplY3QiKTt2YXIgZSxuPVtdO2ZvcihlIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShlKSYmKG5bbi5sZW5ndGhdPWUpO3JldHVybiBufSx1bmlxdWVJZDpmdW5jdGlvbih0KXt2YXIgZT0rK2ErIiI7cmV0dXJuIHQ/dCtlOmV9LGhhczpmdW5jdGlvbih0LGUpe3JldHVybiBzLmNhbGwodCxlKX0sZWFjaDpmdW5jdGlvbih0LGUsbil7aWYobnVsbCE9dClpZihvJiZ0LmZvckVhY2g9PT1vKXQuZm9yRWFjaChlLG4pO2Vsc2UgaWYodC5sZW5ndGg9PT0rdC5sZW5ndGgpZm9yKHZhciByPTAsaT10Lmxlbmd0aDtyPGk7cisrKWUuY2FsbChuLHRbcl0scix0KTtlbHNlIGZvcih2YXIgcyBpbiB0KXRoaXMuaGFzKHQscykmJmUuY2FsbChuLHRbc10scyx0KX0sb25jZTpmdW5jdGlvbih0KXt2YXIgZSxuPSExO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBuP2U6KG49ITAsZT10LmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0PW51bGwsZSl9fX19dmFyIGksbz1BcnJheS5wcm90b3R5cGUuZm9yRWFjaCxzPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksdT1BcnJheS5wcm90b3R5cGUuc2xpY2UsYT0wLGw9bigpO2k9e29uOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZih0aGlzLCJvbiIsdCxbZSxuXSkmJmU/KHRoaXMuX2V2ZW50c3x8KHRoaXMuX2V2ZW50cz17fSksKHRoaXMuX2V2ZW50c1t0XXx8KHRoaXMuX2V2ZW50c1t0XT1bXSkpLnB1c2goe2NhbGxiYWNrOmUsY29udGV4dDpuLGN0eDpufHx0aGlzfSksdGhpcyk6dGhpc30sb25jZTpmdW5jdGlvbiBwKHQsZSxuKXtpZighZih0aGlzLCJvbmNlIix0LFtlLG5dKXx8IWUpcmV0dXJuIHRoaXM7dmFyIHI9dGhpcyxwPWwub25jZShmdW5jdGlvbigpe3Iub2ZmKHQscCksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KTtyZXR1cm4gcC5fY2FsbGJhY2s9ZSx0aGlzLm9uKHQscCxuKX0sb2ZmOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcixpLG8scyx1LGEsYyxoO2lmKCF0aGlzLl9ldmVudHN8fCFmKHRoaXMsIm9mZiIsdCxbZSxuXSkpcmV0dXJuIHRoaXM7aWYoIXQmJiFlJiYhbilyZXR1cm4gdGhpcy5fZXZlbnRzPXt9LHRoaXM7Zm9yKHM9dD9bdF06bC5rZXlzKHRoaXMuX2V2ZW50cyksdT0wLGE9cy5sZW5ndGg7dTxhO3UrKylpZih0PXNbdV0sbz10aGlzLl9ldmVudHNbdF0pe2lmKHRoaXMuX2V2ZW50c1t0XT1yPVtdLGV8fG4pZm9yKGM9MCxoPW8ubGVuZ3RoO2M8aDtjKyspaT1vW2NdLChlJiZlIT09aS5jYWxsYmFjayYmZSE9PWkuY2FsbGJhY2suX2NhbGxiYWNrfHxuJiZuIT09aS5jb250ZXh0KSYmci5wdXNoKGkpO3IubGVuZ3RofHxkZWxldGUgdGhpcy5fZXZlbnRzW3RdfXJldHVybiB0aGlzfSx0cmlnZ2VyOmZ1bmN0aW9uKHQpe2lmKCF0aGlzLl9ldmVudHMpcmV0dXJuIHRoaXM7dmFyIGU9dS5jYWxsKGFyZ3VtZW50cywxKTtpZighZih0aGlzLCJ0cmlnZ2VyIix0LGUpKXJldHVybiB0aGlzO3ZhciBuPXRoaXMuX2V2ZW50c1t0XSxyPXRoaXMuX2V2ZW50cy5hbGw7cmV0dXJuIG4mJmgobixlKSxyJiZoKHIsYXJndW1lbnRzKSx0aGlzfSxzdG9wTGlzdGVuaW5nOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLl9saXN0ZW5lcnM7aWYoIWkpcmV0dXJuIHRoaXM7dmFyIG89IWUmJiFuOyJvYmplY3QiPT09KCJ1bmRlZmluZWQiPT10eXBlb2YgZT8idW5kZWZpbmVkIjpyKGUpKSYmKG49dGhpcyksdCYmKChpPXt9KVt0Ll9saXN0ZW5lcklkXT10KTtmb3IodmFyIHMgaW4gaSlpW3NdLm9mZihlLG4sdGhpcyksbyYmZGVsZXRlIHRoaXMuX2xpc3RlbmVyc1tzXTtyZXR1cm4gdGhpc319O3ZhciBjPS9ccysvLGY9ZnVuY3Rpb24odCxlLG4saSl7aWYoIW4pcmV0dXJuITA7aWYoIm9iamVjdCI9PT0oInVuZGVmaW5lZCI9PXR5cGVvZiBuPyJ1bmRlZmluZWQiOnIobikpKXtmb3IodmFyIG8gaW4gbil0W2VdLmFwcGx5KHQsW28sbltvXV0uY29uY2F0KGkpKTtyZXR1cm4hMX1pZihjLnRlc3Qobikpe2Zvcih2YXIgcz1uLnNwbGl0KGMpLHU9MCxhPXMubGVuZ3RoO3U8YTt1KyspdFtlXS5hcHBseSh0LFtzW3VdXS5jb25jYXQoaSkpO3JldHVybiExfXJldHVybiEwfSxoPWZ1bmN0aW9uKHQsZSl7dmFyIG4scj0tMSxpPXQubGVuZ3RoLG89ZVswXSxzPWVbMV0sdT1lWzJdO3N3aXRjaChlLmxlbmd0aCl7Y2FzZSAwOmZvcig7KytyPGk7KShuPXRbcl0pLmNhbGxiYWNrLmNhbGwobi5jdHgpO3JldHVybjtjYXNlIDE6Zm9yKDsrK3I8aTspKG49dFtyXSkuY2FsbGJhY2suY2FsbChuLmN0eCxvKTtyZXR1cm47Y2FzZSAyOmZvcig7KytyPGk7KShuPXRbcl0pLmNhbGxiYWNrLmNhbGwobi5jdHgsbyxzKTtyZXR1cm47Y2FzZSAzOmZvcig7KytyPGk7KShuPXRbcl0pLmNhbGxiYWNrLmNhbGwobi5jdHgsbyxzLHUpO3JldHVybjtkZWZhdWx0OmZvcig7KytyPGk7KShuPXRbcl0pLmNhbGxiYWNrLmFwcGx5KG4uY3R4LGUpfX0sZD17bGlzdGVuVG86Im9uIixsaXN0ZW5Ub09uY2U6Im9uY2UifTtsLmVhY2goZCxmdW5jdGlvbih0LGUpe2lbZV09ZnVuY3Rpb24oZSxuLGkpe3JldHVybih0aGlzLl9saXN0ZW5lcnN8fCh0aGlzLl9saXN0ZW5lcnM9e30pKVtlLl9saXN0ZW5lcklkfHwoZS5fbGlzdGVuZXJJZD1sLnVuaXF1ZUlkKCJsIikpXT1lLCJvYmplY3QiPT09KCJ1bmRlZmluZWQiPT10eXBlb2Ygbj8idW5kZWZpbmVkIjpyKG4pKSYmKGk9dGhpcyksZVt0XShuLGksdGhpcyksdGhpc319KSxpLmJpbmQ9aS5vbixpLnVuYmluZD1pLm9mZixpLm1peGluPWZ1bmN0aW9uKHQpe3ZhciBlPVsib24iLCJvbmNlIiwib2ZmIiwidHJpZ2dlciIsInN0b3BMaXN0ZW5pbmciLCJsaXN0ZW5UbyIsImxpc3RlblRvT25jZSIsImJpbmQiLCJ1bmJpbmQiXTtyZXR1cm4gbC5lYWNoKGUsZnVuY3Rpb24oZSl7dFtlXT10aGlzW2VdfSx0aGlzKSx0fSwidW5kZWZpbmVkIiE9dHlwZW9mIHQmJnQuZXhwb3J0cyYmKGU9dC5leHBvcnRzPWkpLGUuQmFja2JvbmVFdmVudHM9aX0odm9pZCAwKX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9big1Nyl9LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcixpLG89ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbD8ic3ltYm9sIjp0eXBlb2YgdH07IWZ1bmN0aW9uKHMpeyJvYmplY3QiPT09byhlKT90LmV4cG9ydHM9cygpOihyPXMsaT0iZnVuY3Rpb24iPT10eXBlb2Ygcj9yLmNhbGwoZSxuLGUsdCk6ciwhKHZvaWQgMCE9PWkmJih0LmV4cG9ydHM9aSkpKX0oZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIHQ9e2hhczpmdW5jdGlvbih0LGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKX0sZXh0ZW5kOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0xO2U8YXJndW1lbnRzLmxlbmd0aDsrK2Upe3ZhciBuPWFyZ3VtZW50c1tlXTtpZihuKWZvcih2YXIgciBpbiBuKXRbcl09bltyXX1yZXR1cm4gdH19O3JldHVybiBmdW5jdGlvbihlLG4pe3ZhciByLGk9dGhpcztyPWUmJnQuaGFzKGUsImNvbnN0cnVjdG9yIik/ZS5jb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3JldHVybiBpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sdC5leHRlbmQocixpLG4pO3ZhciBvPWZ1bmN0aW9uKCl7dGhpcy5jb25zdHJ1Y3Rvcj1yfTtyZXR1cm4gby5wcm90b3R5cGU9aS5wcm90b3R5cGUsci5wcm90b3R5cGU9bmV3IG8sZSYmdC5leHRlbmQoci5wcm90b3R5cGUsZSksci5fX3N1cGVyX189aS5wcm90b3R5cGUscn19KX0sZnVuY3Rpb24odCxlLG4pe3ZhciByLGksbz0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sPyJzeW1ib2wiOnR5cGVvZiB0fTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHQpe2Z1bmN0aW9uIGUoZSxuLHIsaSxvLHMpe2Zvcig7bz49MCYmbzxzO28rPXQpe3ZhciB1PWk/aVtvXTpvO3I9bihyLGVbdV0sdSxlKX1yZXR1cm4gcn1yZXR1cm4gZnVuY3Rpb24obixyLGksbyl7cj1rKHIsbyw0KTt2YXIgcz0hQyhuKSYmUy5rZXlzKG4pLHU9KHN8fG4pLmxlbmd0aCxhPXQ+MD8wOnUtMTtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aDwzJiYoaT1uW3M/c1thXTphXSxhKz10KSxlKG4scixpLHMsYSx1KX19ZnVuY3Rpb24gcyh0KXtyZXR1cm4gZnVuY3Rpb24oZSxuLHIpe249aihuLHIpO2Zvcih2YXIgaT1BKGUpLG89dD4wPzA6aS0xO28+PTAmJm88aTtvKz10KWlmKG4oZVtvXSxvLGUpKXJldHVybiBvO3JldHVybi0xfX1mdW5jdGlvbiB1KHQsZSxuKXtyZXR1cm4gZnVuY3Rpb24ocixpLG8pe3ZhciBzPTAsdT1BKHIpO2lmKCJudW1iZXIiPT10eXBlb2Ygbyl0PjA/cz1vPj0wP286TWF0aC5tYXgobyt1LHMpOnU9bz49MD9NYXRoLm1pbihvKzEsdSk6byt1KzE7ZWxzZSBpZihuJiZvJiZ1KXJldHVybiBvPW4ocixpKSxyW29dPT09aT9vOi0xO2lmKGkhPT1pKXJldHVybiBvPWUoZy5jYWxsKHIscyx1KSxTLmlzTmFOKSxvPj0wP28rczotMTtmb3Iobz10PjA/czp1LTE7bz49MCYmbzx1O28rPXQpaWYocltvXT09PWkpcmV0dXJuIG87cmV0dXJuLTF9fWZ1bmN0aW9uIGEodCxlKXt2YXIgbj1SLmxlbmd0aCxyPXQuY29uc3RydWN0b3IsaT1TLmlzRnVuY3Rpb24ocikmJnIucHJvdG90eXBlfHxoLG89ImNvbnN0cnVjdG9yIjtmb3IoUy5oYXModCxvKSYmIVMuY29udGFpbnMoZSxvKSYmZS5wdXNoKG8pO24tLTspbz1SW25dLG8gaW4gdCYmdFtvXSE9PWlbb10mJiFTLmNvbnRhaW5zKGUsbykmJmUucHVzaChvKX12YXIgbD10aGlzLGM9bC5fLGY9QXJyYXkucHJvdG90eXBlLGg9T2JqZWN0LnByb3RvdHlwZSxkPUZ1bmN0aW9uLnByb3RvdHlwZSxwPWYucHVzaCxnPWYuc2xpY2Usdj1oLnRvU3RyaW5nLG09aC5oYXNPd25Qcm9wZXJ0eSx5PUFycmF5LmlzQXJyYXksXz1PYmplY3Qua2V5cyxiPWQuYmluZCx4PU9iamVjdC5jcmVhdGUsdz1mdW5jdGlvbigpe30sUz1mdW5jdGlvbiBHKHQpe3JldHVybiB0IGluc3RhbmNlb2YgRz90OnRoaXMgaW5zdGFuY2VvZiBHP3ZvaWQodGhpcy5fd3JhcHBlZD10KTpuZXcgRyh0KX07InVuZGVmaW5lZCIhPXR5cGVvZiB0JiZ0LmV4cG9ydHMmJihlPXQuZXhwb3J0cz1TKSxlLl89UyxTLlZFUlNJT049IjEuOC4zIjt2YXIgaz1mdW5jdGlvbih0LGUsbil7aWYodm9pZCAwPT09ZSlyZXR1cm4gdDtzd2l0Y2gobnVsbD09bj8zOm4pe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHQuY2FsbChlLG4pfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKG4scil7cmV0dXJuIHQuY2FsbChlLG4scil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24obixyLGkpe3JldHVybiB0LmNhbGwoZSxuLHIsaSl9O2Nhc2UgNDpyZXR1cm4gZnVuY3Rpb24obixyLGksbyl7cmV0dXJuIHQuY2FsbChlLG4scixpLG8pfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseShlLGFyZ3VtZW50cyl9fSxqPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbnVsbD09dD9TLmlkZW50aXR5OlMuaXNGdW5jdGlvbih0KT9rKHQsZSxuKTpTLmlzT2JqZWN0KHQpP1MubWF0Y2hlcih0KTpTLnByb3BlcnR5KHQpfTtTLml0ZXJhdGVlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGoodCxlLDEvMCl9O3ZhciBPPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg7aWYocjwyfHxudWxsPT1uKXJldHVybiBuO2Zvcih2YXIgaT0xO2k8cjtpKyspZm9yKHZhciBvPWFyZ3VtZW50c1tpXSxzPXQobyksdT1zLmxlbmd0aCxhPTA7YTx1O2ErKyl7dmFyIGw9c1thXTtlJiZ2b2lkIDAhPT1uW2xdfHwobltsXT1vW2xdKX1yZXR1cm4gbn19LEU9ZnVuY3Rpb24odCl7aWYoIVMuaXNPYmplY3QodCkpcmV0dXJue307aWYoeClyZXR1cm4geCh0KTt3LnByb3RvdHlwZT10O3ZhciBlPW5ldyB3O3JldHVybiB3LnByb3RvdHlwZT1udWxsLGV9LE09ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP3ZvaWQgMDplW3RdfX0sej1NYXRoLnBvdygyLDUzKS0xLEE9TSgibGVuZ3RoIiksQz1mdW5jdGlvbih0KXt2YXIgZT1BKHQpO3JldHVybiJudW1iZXIiPT10eXBlb2YgZSYmZT49MCYmZTw9en07Uy5lYWNoPVMuZm9yRWFjaD1mdW5jdGlvbih0LGUsbil7ZT1rKGUsbik7dmFyIHIsaTtpZihDKHQpKWZvcihyPTAsaT10Lmxlbmd0aDtyPGk7cisrKWUodFtyXSxyLHQpO2Vsc2V7dmFyIG89Uy5rZXlzKHQpO2ZvcihyPTAsaT1vLmxlbmd0aDtyPGk7cisrKWUodFtvW3JdXSxvW3JdLHQpfXJldHVybiB0fSxTLm1hcD1TLmNvbGxlY3Q9ZnVuY3Rpb24odCxlLG4pe2U9aihlLG4pO2Zvcih2YXIgcj0hQyh0KSYmUy5rZXlzKHQpLGk9KHJ8fHQpLmxlbmd0aCxvPUFycmF5KGkpLHM9MDtzPGk7cysrKXt2YXIgdT1yP3Jbc106cztvW3NdPWUodFt1XSx1LHQpfXJldHVybiBvfSxTLnJlZHVjZT1TLmZvbGRsPVMuaW5qZWN0PW4oMSksUy5yZWR1Y2VSaWdodD1TLmZvbGRyPW4oLTEpLFMuZmluZD1TLmRldGVjdD1mdW5jdGlvbih0LGUsbil7dmFyIHI7aWYocj1DKHQpP1MuZmluZEluZGV4KHQsZSxuKTpTLmZpbmRLZXkodCxlLG4pLHZvaWQgMCE9PXImJnIhPT0tMSlyZXR1cm4gdFtyXX0sUy5maWx0ZXI9Uy5zZWxlY3Q9ZnVuY3Rpb24odCxlLG4pe3ZhciByPVtdO3JldHVybiBlPWooZSxuKSxTLmVhY2godCxmdW5jdGlvbih0LG4saSl7ZSh0LG4saSkmJnIucHVzaCh0KX0pLHJ9LFMucmVqZWN0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gUy5maWx0ZXIodCxTLm5lZ2F0ZShqKGUpKSxuKX0sUy5ldmVyeT1TLmFsbD1mdW5jdGlvbih0LGUsbil7ZT1qKGUsbik7Zm9yKHZhciByPSFDKHQpJiZTLmtleXModCksaT0ocnx8dCkubGVuZ3RoLG89MDtvPGk7bysrKXt2YXIgcz1yP3Jbb106bztpZighZSh0W3NdLHMsdCkpcmV0dXJuITF9cmV0dXJuITB9LFMuc29tZT1TLmFueT1mdW5jdGlvbih0LGUsbil7ZT1qKGUsbik7Zm9yKHZhciByPSFDKHQpJiZTLmtleXModCksaT0ocnx8dCkubGVuZ3RoLG89MDtvPGk7bysrKXt2YXIgcz1yP3Jbb106bztpZihlKHRbc10scyx0KSlyZXR1cm4hMH1yZXR1cm4hMX0sUy5jb250YWlucz1TLmluY2x1ZGVzPVMuaW5jbHVkZT1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gQyh0KXx8KHQ9Uy52YWx1ZXModCkpLCgibnVtYmVyIiE9dHlwZW9mIG58fHIpJiYobj0wKSxTLmluZGV4T2YodCxlLG4pPj0wfSxTLmludm9rZT1mdW5jdGlvbih0LGUpe3ZhciBuPWcuY2FsbChhcmd1bWVudHMsMikscj1TLmlzRnVuY3Rpb24oZSk7cmV0dXJuIFMubWFwKHQsZnVuY3Rpb24odCl7dmFyIGk9cj9lOnRbZV07cmV0dXJuIG51bGw9PWk/aTppLmFwcGx5KHQsbil9KX0sUy5wbHVjaz1mdW5jdGlvbih0LGUpe3JldHVybiBTLm1hcCh0LFMucHJvcGVydHkoZSkpfSxTLndoZXJlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFMuZmlsdGVyKHQsUy5tYXRjaGVyKGUpKX0sUy5maW5kV2hlcmU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gUy5maW5kKHQsUy5tYXRjaGVyKGUpKX0sUy5tYXg9ZnVuY3Rpb24odCxlLG4pe3ZhciByLGksbz0tKDEvMCkscz0tKDEvMCk7aWYobnVsbD09ZSYmbnVsbCE9dCl7dD1DKHQpP3Q6Uy52YWx1ZXModCk7Zm9yKHZhciB1PTAsYT10Lmxlbmd0aDt1PGE7dSsrKXI9dFt1XSxyPm8mJihvPXIpfWVsc2UgZT1qKGUsbiksUy5lYWNoKHQsZnVuY3Rpb24odCxuLHIpe2k9ZSh0LG4sciksKGk+c3x8aT09PS0oMS8wKSYmbz09PS0oMS8wKSkmJihvPXQscz1pKX0pO3JldHVybiBvfSxTLm1pbj1mdW5jdGlvbih0LGUsbil7dmFyIHIsaSxvPTEvMCxzPTEvMDtpZihudWxsPT1lJiZudWxsIT10KXt0PUModCk/dDpTLnZhbHVlcyh0KTtmb3IodmFyIHU9MCxhPXQubGVuZ3RoO3U8YTt1Kyspcj10W3VdLHI8byYmKG89cil9ZWxzZSBlPWooZSxuKSxTLmVhY2godCxmdW5jdGlvbih0LG4scil7aT1lKHQsbixyKSwoaTxzfHxpPT09MS8wJiZvPT09MS8wKSYmKG89dCxzPWkpfSk7cmV0dXJuIG99LFMuc2h1ZmZsZT1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj1DKHQpP3Q6Uy52YWx1ZXModCkscj1uLmxlbmd0aCxpPUFycmF5KHIpLG89MDtvPHI7bysrKWU9Uy5yYW5kb20oMCxvKSxlIT09byYmKGlbb109aVtlXSksaVtlXT1uW29dO3JldHVybiBpfSxTLnNhbXBsZT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIG51bGw9PWV8fG4/KEModCl8fCh0PVMudmFsdWVzKHQpKSx0W1MucmFuZG9tKHQubGVuZ3RoLTEpXSk6Uy5zaHVmZmxlKHQpLnNsaWNlKDAsTWF0aC5tYXgoMCxlKSl9LFMuc29ydEJ5PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZT1qKGUsbiksUy5wbHVjayhTLm1hcCh0LGZ1bmN0aW9uKHQsbixyKXtyZXR1cm57dmFsdWU6dCxpbmRleDpuLGNyaXRlcmlhOmUodCxuLHIpfX0pLnNvcnQoZnVuY3Rpb24odCxlKXt2YXIgbj10LmNyaXRlcmlhLHI9ZS5jcml0ZXJpYTtpZihuIT09cil7aWYobj5yfHx2b2lkIDA9PT1uKXJldHVybiAxO2lmKG48cnx8dm9pZCAwPT09cilyZXR1cm4tMX1yZXR1cm4gdC5pbmRleC1lLmluZGV4fSksInZhbHVlIil9O3ZhciBUPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLG4scil7dmFyIGk9e307cmV0dXJuIG49aihuLHIpLFMuZWFjaChlLGZ1bmN0aW9uKHIsbyl7dChpLHIsbihyLG8sZSkpfSksaX19O1MuZ3JvdXBCeT1UKGZ1bmN0aW9uKHQsZSxuKXtTLmhhcyh0LG4pP3Rbbl0ucHVzaChlKTp0W25dPVtlXX0pLFMuaW5kZXhCeT1UKGZ1bmN0aW9uKHQsZSxuKXt0W25dPWV9KSxTLmNvdW50Qnk9VChmdW5jdGlvbih0LGUsbil7Uy5oYXModCxuKT90W25dKys6dFtuXT0xfSksUy50b0FycmF5PWZ1bmN0aW9uKHQpe3JldHVybiB0P1MuaXNBcnJheSh0KT9nLmNhbGwodCk6Qyh0KT9TLm1hcCh0LFMuaWRlbnRpdHkpOlMudmFsdWVzKHQpOltdfSxTLnNpemU9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/MDpDKHQpP3QubGVuZ3RoOlMua2V5cyh0KS5sZW5ndGh9LFMucGFydGl0aW9uPWZ1bmN0aW9uKHQsZSxuKXtlPWooZSxuKTt2YXIgcj1bXSxpPVtdO3JldHVybiBTLmVhY2godCxmdW5jdGlvbih0LG4sbyl7KGUodCxuLG8pP3I6aSkucHVzaCh0KX0pLFtyLGldfSxTLmZpcnN0PVMuaGVhZD1TLnRha2U9ZnVuY3Rpb24odCxlLG4pe2lmKG51bGwhPXQpcmV0dXJuIG51bGw9PWV8fG4/dFswXTpTLmluaXRpYWwodCx0Lmxlbmd0aC1lKX0sUy5pbml0aWFsPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZy5jYWxsKHQsMCxNYXRoLm1heCgwLHQubGVuZ3RoLShudWxsPT1lfHxuPzE6ZSkpKX0sUy5sYXN0PWZ1bmN0aW9uKHQsZSxuKXtpZihudWxsIT10KXJldHVybiBudWxsPT1lfHxuP3RbdC5sZW5ndGgtMV06Uy5yZXN0KHQsTWF0aC5tYXgoMCx0Lmxlbmd0aC1lKSl9LFMucmVzdD1TLnRhaWw9Uy5kcm9wPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZy5jYWxsKHQsbnVsbD09ZXx8bj8xOmUpfSxTLmNvbXBhY3Q9ZnVuY3Rpb24odCl7cmV0dXJuIFMuZmlsdGVyKHQsUy5pZGVudGl0eSl9O3ZhciBJPWZ1bmN0aW9uIEsodCxlLG4scil7Zm9yKHZhciBpPVtdLG89MCxzPXJ8fDAsdT1BKHQpO3M8dTtzKyspe3ZhciBhPXRbc107aWYoQyhhKSYmKFMuaXNBcnJheShhKXx8Uy5pc0FyZ3VtZW50cyhhKSkpe2V8fChhPUsoYSxlLG4pKTt2YXIgbD0wLGM9YS5sZW5ndGg7Zm9yKGkubGVuZ3RoKz1jO2w8YzspaVtvKytdPWFbbCsrXX1lbHNlIG58fChpW28rK109YSl9cmV0dXJuIGl9O1MuZmxhdHRlbj1mdW5jdGlvbih0LGUpe3JldHVybiBJKHQsZSwhMSl9LFMud2l0aG91dD1mdW5jdGlvbih0KXtyZXR1cm4gUy5kaWZmZXJlbmNlKHQsZy5jYWxsKGFyZ3VtZW50cywxKSl9LFMudW5pcT1TLnVuaXF1ZT1mdW5jdGlvbih0LGUsbixyKXtTLmlzQm9vbGVhbihlKXx8KHI9bixuPWUsZT0hMSksbnVsbCE9biYmKG49aihuLHIpKTtmb3IodmFyIGk9W10sbz1bXSxzPTAsdT1BKHQpO3M8dTtzKyspe3ZhciBhPXRbc10sbD1uP24oYSxzLHQpOmE7ZT8ocyYmbz09PWx8fGkucHVzaChhKSxvPWwpOm4/Uy5jb250YWlucyhvLGwpfHwoby5wdXNoKGwpLGkucHVzaChhKSk6Uy5jb250YWlucyhpLGEpfHxpLnB1c2goYSl9cmV0dXJuIGl9LFMudW5pb249ZnVuY3Rpb24oKXtyZXR1cm4gUy51bmlxKEkoYXJndW1lbnRzLCEwLCEwKSl9LFMuaW50ZXJzZWN0aW9uPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPWFyZ3VtZW50cy5sZW5ndGgscj0wLGk9QSh0KTtyPGk7cisrKXt2YXIgbz10W3JdO2lmKCFTLmNvbnRhaW5zKGUsbykpe2Zvcih2YXIgcz0xO3M8biYmUy5jb250YWlucyhhcmd1bWVudHNbc10sbyk7cysrKTtzPT09biYmZS5wdXNoKG8pfX1yZXR1cm4gZX0sUy5kaWZmZXJlbmNlPWZ1bmN0aW9uKHQpe3ZhciBlPUkoYXJndW1lbnRzLCEwLCEwLDEpO3JldHVybiBTLmZpbHRlcih0LGZ1bmN0aW9uKHQpe3JldHVybiFTLmNvbnRhaW5zKGUsdCl9KX0sUy56aXA9ZnVuY3Rpb24oKXtyZXR1cm4gUy51bnppcChhcmd1bWVudHMpfSxTLnVuemlwPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10JiZTLm1heCh0LEEpLmxlbmd0aHx8MCxuPUFycmF5KGUpLHI9MDtyPGU7cisrKW5bcl09Uy5wbHVjayh0LHIpO3JldHVybiBufSxTLm9iamVjdD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj17fSxyPTAsaT1BKHQpO3I8aTtyKyspZT9uW3Rbcl1dPWVbcl06blt0W3JdWzBdXT10W3JdWzFdO3JldHVybiBufSxTLmZpbmRJbmRleD1zKDEpLFMuZmluZExhc3RJbmRleD1zKC0xKSxTLnNvcnRlZEluZGV4PWZ1bmN0aW9uKHQsZSxuLHIpe249aihuLHIsMSk7Zm9yKHZhciBpPW4oZSksbz0wLHM9QSh0KTtvPHM7KXt2YXIgdT1NYXRoLmZsb29yKChvK3MpLzIpO24odFt1XSk8aT9vPXUrMTpzPXV9cmV0dXJuIG99LFMuaW5kZXhPZj11KDEsUy5maW5kSW5kZXgsUy5zb3J0ZWRJbmRleCksUy5sYXN0SW5kZXhPZj11KC0xLFMuZmluZExhc3RJbmRleCksUy5yYW5nZT1mdW5jdGlvbih0LGUsbil7bnVsbD09ZSYmKGU9dHx8MCx0PTApLG49bnx8MTtmb3IodmFyIHI9TWF0aC5tYXgoTWF0aC5jZWlsKChlLXQpL24pLDApLGk9QXJyYXkociksbz0wO288cjtvKyssdCs9bilpW29dPXQ7cmV0dXJuIGl9O3ZhciBOPWZ1bmN0aW9uKHQsZSxuLHIsaSl7aWYoIShyIGluc3RhbmNlb2YgZSkpcmV0dXJuIHQuYXBwbHkobixpKTt2YXIgbz1FKHQucHJvdG90eXBlKSxzPXQuYXBwbHkobyxpKTtyZXR1cm4gUy5pc09iamVjdChzKT9zOm99O1MuYmluZD1mdW5jdGlvbih0LGUpe2lmKGImJnQuYmluZD09PWIpcmV0dXJuIGIuYXBwbHkodCxnLmNhbGwoYXJndW1lbnRzLDEpKTtpZighUy5pc0Z1bmN0aW9uKHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkJpbmQgbXVzdCBiZSBjYWxsZWQgb24gYSBmdW5jdGlvbiIpO3ZhciBuPWcuY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIGZ1bmN0aW9uIHIoKXtyZXR1cm4gTih0LHIsZSx0aGlzLG4uY29uY2F0KGcuY2FsbChhcmd1bWVudHMpKSl9fSxTLnBhcnRpYWw9ZnVuY3Rpb24odCl7dmFyIGU9Zy5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24gbigpe2Zvcih2YXIgcj0wLGk9ZS5sZW5ndGgsbz1BcnJheShpKSxzPTA7czxpO3MrKylvW3NdPWVbc109PT1TP2FyZ3VtZW50c1tyKytdOmVbc107Zm9yKDtyPGFyZ3VtZW50cy5sZW5ndGg7KW8ucHVzaChhcmd1bWVudHNbcisrXSk7cmV0dXJuIE4odCxuLHRoaXMsdGhpcyxvKX19LFMuYmluZEFsbD1mdW5jdGlvbih0KXt2YXIgZSxuLHI9YXJndW1lbnRzLmxlbmd0aDtpZihyPD0xKXRocm93IG5ldyBFcnJvcigiYmluZEFsbCBtdXN0IGJlIHBhc3NlZCBmdW5jdGlvbiBuYW1lcyIpO2ZvcihlPTE7ZTxyO2UrKyluPWFyZ3VtZW50c1tlXSx0W25dPVMuYmluZCh0W25dLHQpO3JldHVybiB0fSxTLm1lbW9pemU9ZnVuY3Rpb24odCxlKXt2YXIgbj1mdW5jdGlvbiByKG4pe3ZhciBpPXIuY2FjaGUsbz0iIisoZT9lLmFwcGx5KHRoaXMsYXJndW1lbnRzKTpuKTtyZXR1cm4gUy5oYXMoaSxvKXx8KGlbb109dC5hcHBseSh0aGlzLGFyZ3VtZW50cykpLGlbb119O3JldHVybiBuLmNhY2hlPXt9LG59LFMuZGVsYXk9ZnVuY3Rpb24odCxlKXt2YXIgbj1nLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkobnVsbCxuKX0sZSl9LFMuZGVmZXI9Uy5wYXJ0aWFsKFMuZGVsYXksUywxKSxTLnRocm90dGxlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcixpLG8scz1udWxsLHU9MDtufHwobj17fSk7dmFyIGE9ZnVuY3Rpb24oKXt1PW4ubGVhZGluZz09PSExPzA6Uy5ub3coKSxzPW51bGwsbz10LmFwcGx5KHIsaSksc3x8KHI9aT1udWxsKX07cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGw9Uy5ub3coKTt1fHxuLmxlYWRpbmchPT0hMXx8KHU9bCk7dmFyIGM9ZS0obC11KTtyZXR1cm4gcj10aGlzLGk9YXJndW1lbnRzLGM8PTB8fGM+ZT8ocyYmKGNsZWFyVGltZW91dChzKSxzPW51bGwpLHU9bCxvPXQuYXBwbHkocixpKSxzfHwocj1pPW51bGwpKTpzfHxuLnRyYWlsaW5nPT09ITF8fChzPXNldFRpbWVvdXQoYSxjKSksb319LFMuZGVib3VuY2U9ZnVuY3Rpb24odCxlLG4pe3ZhciByLGksbyxzLHUsYT1mdW5jdGlvbiBsKCl7dmFyIGE9Uy5ub3coKS1zO2E8ZSYmYT49MD9yPXNldFRpbWVvdXQobCxlLWEpOihyPW51bGwsbnx8KHU9dC5hcHBseShvLGkpLHJ8fChvPWk9bnVsbCkpKX07cmV0dXJuIGZ1bmN0aW9uKCl7bz10aGlzLGk9YXJndW1lbnRzLHM9Uy5ub3coKTt2YXIgbD1uJiYhcjtyZXR1cm4gcnx8KHI9c2V0VGltZW91dChhLGUpKSxsJiYodT10LmFwcGx5KG8saSksbz1pPW51bGwpLHV9fSxTLndyYXA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gUy5wYXJ0aWFsKGUsdCl9LFMubmVnYXRlPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiF0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LFMuY29tcG9zZT1mdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cyxlPXQubGVuZ3RoLTE7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciBuPWUscj10W2VdLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtuLS07KXI9dFtuXS5jYWxsKHRoaXMscik7cmV0dXJuIHJ9fSxTLmFmdGVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoLS10PDEpcmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0sUy5iZWZvcmU9ZnVuY3Rpb24odCxlKXt2YXIgbjtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4tLXQ+MCYmKG49ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpLHQ8PTEmJihlPW51bGwpLG59fSxTLm9uY2U9Uy5wYXJ0aWFsKFMuYmVmb3JlLDIpO3ZhciBMPSF7dG9TdHJpbmc6bnVsbH0ucHJvcGVydHlJc0VudW1lcmFibGUoInRvU3RyaW5nIiksUj1bInZhbHVlT2YiLCJpc1Byb3RvdHlwZU9mIiwidG9TdHJpbmciLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsImhhc093blByb3BlcnR5IiwidG9Mb2NhbGVTdHJpbmciXTtTLmtleXM9ZnVuY3Rpb24odCl7aWYoIVMuaXNPYmplY3QodCkpcmV0dXJuW107aWYoXylyZXR1cm4gXyh0KTt2YXIgZT1bXTtmb3IodmFyIG4gaW4gdClTLmhhcyh0LG4pJiZlLnB1c2gobik7cmV0dXJuIEwmJmEodCxlKSxlfSxTLmFsbEtleXM9ZnVuY3Rpb24odCl7aWYoIVMuaXNPYmplY3QodCkpcmV0dXJuW107dmFyIGU9W107Zm9yKHZhciBuIGluIHQpZS5wdXNoKG4pO3JldHVybiBMJiZhKHQsZSksZX0sUy52YWx1ZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVMua2V5cyh0KSxuPWUubGVuZ3RoLHI9QXJyYXkobiksaT0wO2k8bjtpKyspcltpXT10W2VbaV1dO3JldHVybiByfSxTLm1hcE9iamVjdD1mdW5jdGlvbih0LGUsbil7ZT1qKGUsbik7Zm9yKHZhciByLGk9Uy5rZXlzKHQpLG89aS5sZW5ndGgscz17fSx1PTA7dTxvO3UrKylyPWlbdV0sc1tyXT1lKHRbcl0scix0KTtyZXR1cm4gc30sUy5wYWlycz1mdW5jdGlvbih0KXtmb3IodmFyIGU9Uy5rZXlzKHQpLG49ZS5sZW5ndGgscj1BcnJheShuKSxpPTA7aTxuO2krKylyW2ldPVtlW2ldLHRbZVtpXV1dO3JldHVybiByfSxTLmludmVydD1mdW5jdGlvbih0KXtmb3IodmFyIGU9e30sbj1TLmtleXModCkscj0wLGk9bi5sZW5ndGg7cjxpO3IrKyllW3RbbltyXV1dPW5bcl07cmV0dXJuIGV9LFMuZnVuY3Rpb25zPVMubWV0aG9kcz1mdW5jdGlvbih0KXt2YXIgZT1bXTtmb3IodmFyIG4gaW4gdClTLmlzRnVuY3Rpb24odFtuXSkmJmUucHVzaChuKTtyZXR1cm4gZS5zb3J0KCl9LFMuZXh0ZW5kPU8oUy5hbGxLZXlzKSxTLmV4dGVuZE93bj1TLmFzc2lnbj1PKFMua2V5cyksUy5maW5kS2V5PWZ1bmN0aW9uKHQsZSxuKXtlPWooZSxuKTtmb3IodmFyIHIsaT1TLmtleXModCksbz0wLHM9aS5sZW5ndGg7bzxzO28rKylpZihyPWlbb10sZSh0W3JdLHIsdCkpcmV0dXJuIHJ9LFMucGljaz1mdW5jdGlvbih0LGUsbil7dmFyIHIsaSxvPXt9LHM9dDtpZihudWxsPT1zKXJldHVybiBvO1MuaXNGdW5jdGlvbihlKT8oaT1TLmFsbEtleXMocykscj1rKGUsbikpOihpPUkoYXJndW1lbnRzLCExLCExLDEpLHI9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBlIGluIG59LHM9T2JqZWN0KHMpKTtmb3IodmFyIHU9MCxhPWkubGVuZ3RoO3U8YTt1Kyspe3ZhciBsPWlbdV0sYz1zW2xdO3IoYyxsLHMpJiYob1tsXT1jKX1yZXR1cm4gb30sUy5vbWl0PWZ1bmN0aW9uKHQsZSxuKXtpZihTLmlzRnVuY3Rpb24oZSkpZT1TLm5lZ2F0ZShlKTtlbHNle3ZhciByPVMubWFwKEkoYXJndW1lbnRzLCExLCExLDEpLFN0cmluZyk7ZT1mdW5jdGlvbih0LGUpe3JldHVybiFTLmNvbnRhaW5zKHIsZSl9fXJldHVybiBTLnBpY2sodCxlLG4pfSxTLmRlZmF1bHRzPU8oUy5hbGxLZXlzLCEwKSxTLmNyZWF0ZT1mdW5jdGlvbih0LGUpe3ZhciBuPUUodCk7cmV0dXJuIGUmJlMuZXh0ZW5kT3duKG4sZSksbn0sUy5jbG9uZT1mdW5jdGlvbih0KXtyZXR1cm4gUy5pc09iamVjdCh0KT9TLmlzQXJyYXkodCk/dC5zbGljZSgpOlMuZXh0ZW5kKHt9LHQpOnR9LFMudGFwPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUodCksdH0sUy5pc01hdGNoPWZ1bmN0aW9uKHQsZSl7dmFyIG49Uy5rZXlzKGUpLHI9bi5sZW5ndGg7aWYobnVsbD09dClyZXR1cm4hcjtmb3IodmFyIGk9T2JqZWN0KHQpLG89MDtvPHI7bysrKXt2YXIgcz1uW29dO2lmKGVbc10hPT1pW3NdfHwhKHMgaW4gaSkpcmV0dXJuITF9cmV0dXJuITB9O3ZhciBxPWZ1bmN0aW9uIFgodCxlLG4scil7aWYodD09PWUpcmV0dXJuIDAhPT10fHwxL3Q9PT0xL2U7aWYobnVsbD09dHx8bnVsbD09ZSlyZXR1cm4gdD09PWU7dCBpbnN0YW5jZW9mIFMmJih0PXQuX3dyYXBwZWQpLGUgaW5zdGFuY2VvZiBTJiYoZT1lLl93cmFwcGVkKTt2YXIgaT12LmNhbGwodCk7aWYoaSE9PXYuY2FsbChlKSlyZXR1cm4hMTtzd2l0Y2goaSl7Y2FzZSJbb2JqZWN0IFJlZ0V4cF0iOmNhc2UiW29iamVjdCBTdHJpbmddIjpyZXR1cm4iIit0PT0iIitlO2Nhc2UiW29iamVjdCBOdW1iZXJdIjpyZXR1cm4rdCE9PSt0PytlIT09K2U6MD09PSt0PzEvK3Q9PT0xL2U6K3Q9PT0rZTtjYXNlIltvYmplY3QgRGF0ZV0iOmNhc2UiW29iamVjdCBCb29sZWFuXSI6cmV0dXJuK3Q9PT0rZX12YXIgcz0iW29iamVjdCBBcnJheV0iPT09aTtpZighcyl7aWYoIm9iamVjdCIhPSgidW5kZWZpbmVkIj09dHlwZW9mIHQ/InVuZGVmaW5lZCI6byh0KSl8fCJvYmplY3QiIT0oInVuZGVmaW5lZCI9PXR5cGVvZiBlPyJ1bmRlZmluZWQiOm8oZSkpKXJldHVybiExO3ZhciB1PXQuY29uc3RydWN0b3IsYT1lLmNvbnN0cnVjdG9yO2lmKHUhPT1hJiYhKFMuaXNGdW5jdGlvbih1KSYmdSBpbnN0YW5jZW9mIHUmJlMuaXNGdW5jdGlvbihhKSYmYSBpbnN0YW5jZW9mIGEpJiYiY29uc3RydWN0b3IiaW4gdCYmImNvbnN0cnVjdG9yImluIGUpcmV0dXJuITF9bj1ufHxbXSxyPXJ8fFtdO2Zvcih2YXIgbD1uLmxlbmd0aDtsLS07KWlmKG5bbF09PT10KXJldHVybiByW2xdPT09ZTtpZihuLnB1c2godCksci5wdXNoKGUpLHMpe2lmKGw9dC5sZW5ndGgsbCE9PWUubGVuZ3RoKXJldHVybiExO2Zvcig7bC0tOylpZighWCh0W2xdLGVbbF0sbixyKSlyZXR1cm4hMX1lbHNle3ZhciBjLGY9Uy5rZXlzKHQpO2lmKGw9Zi5sZW5ndGgsUy5rZXlzKGUpLmxlbmd0aCE9PWwpcmV0dXJuITE7Zm9yKDtsLS07KWlmKGM9ZltsXSwhUy5oYXMoZSxjKXx8IVgodFtjXSxlW2NdLG4scikpcmV0dXJuITF9cmV0dXJuIG4ucG9wKCksci5wb3AoKSwhMH07Uy5pc0VxdWFsPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHEodCxlKX0sUy5pc0VtcHR5PWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10fHwoQyh0KSYmKFMuaXNBcnJheSh0KXx8Uy5pc1N0cmluZyh0KXx8Uy5pc0FyZ3VtZW50cyh0KSk/MD09PXQubGVuZ3RoOjA9PT1TLmtleXModCkubGVuZ3RoKX0sUy5pc0VsZW1lbnQ9ZnVuY3Rpb24odCl7cmV0dXJuISghdHx8MSE9PXQubm9kZVR5cGUpfSxTLmlzQXJyYXk9eXx8ZnVuY3Rpb24odCl7cmV0dXJuIltvYmplY3QgQXJyYXldIj09PXYuY2FsbCh0KX0sUy5pc09iamVjdD1mdW5jdGlvbih0KXt2YXIgZT0idW5kZWZpbmVkIj09dHlwZW9mIHQ/InVuZGVmaW5lZCI6byh0KTtyZXR1cm4iZnVuY3Rpb24iPT09ZXx8Im9iamVjdCI9PT1lJiYhIXR9LFMuZWFjaChbIkFyZ3VtZW50cyIsIkZ1bmN0aW9uIiwiU3RyaW5nIiwiTnVtYmVyIiwiRGF0ZSIsIlJlZ0V4cCIsIkVycm9yIl0sZnVuY3Rpb24odCl7U1siaXMiK3RdPWZ1bmN0aW9uKGUpe3JldHVybiB2LmNhbGwoZSk9PT0iW29iamVjdCAiK3QrIl0ifX0pLFMuaXNBcmd1bWVudHMoYXJndW1lbnRzKXx8KFMuaXNBcmd1bWVudHM9ZnVuY3Rpb24odCl7cmV0dXJuIFMuaGFzKHQsImNhbGxlZSIpfSksImZ1bmN0aW9uIiE9dHlwZW9mLy4vJiYib2JqZWN0IiE9KCJ1bmRlZmluZWQiPT10eXBlb2YgSW50OEFycmF5PyJ1bmRlZmluZWQiOm8oSW50OEFycmF5KSkmJihTLmlzRnVuY3Rpb249ZnVuY3Rpb24odCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHR8fCExfSksUy5pc0Zpbml0ZT1mdW5jdGlvbih0KXtyZXR1cm4gaXNGaW5pdGUodCkmJiFpc05hTihwYXJzZUZsb2F0KHQpKX0sUy5pc05hTj1mdW5jdGlvbih0KXtyZXR1cm4gUy5pc051bWJlcih0KSYmdCE9PSt0fSxTLmlzQm9vbGVhbj1mdW5jdGlvbih0KXtyZXR1cm4gdD09PSEwfHx0PT09ITF8fCJbb2JqZWN0IEJvb2xlYW5dIj09PXYuY2FsbCh0KX0sUy5pc051bGw9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PT10fSxTLmlzVW5kZWZpbmVkPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10fSxTLmhhcz1mdW5jdGlvbih0LGUpe3JldHVybiBudWxsIT10JiZtLmNhbGwodCxlKX0sUy5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGwuXz1jLHRoaXN9LFMuaWRlbnRpdHk9ZnVuY3Rpb24odCl7cmV0dXJuIHR9LFMuY29uc3RhbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHR9fSxTLm5vb3A9ZnVuY3Rpb24oKXt9LFMucHJvcGVydHk9TSxTLnByb3BlcnR5T2Y9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/ZnVuY3Rpb24oKXt9OmZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfX0sUy5tYXRjaGVyPVMubWF0Y2hlcz1mdW5jdGlvbih0KXtyZXR1cm4gdD1TLmV4dGVuZE93bih7fSx0KSxmdW5jdGlvbihlKXtyZXR1cm4gUy5pc01hdGNoKGUsdCl9fSxTLnRpbWVzPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1BcnJheShNYXRoLm1heCgwLHQpKTtlPWsoZSxuLDEpO2Zvcih2YXIgaT0wO2k8dDtpKyspcltpXT1lKGkpO3JldHVybiByfSxTLnJhbmRvbT1mdW5jdGlvbih0LGUpe3JldHVybiBudWxsPT1lJiYoZT10LHQ9MCksdCtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKGUtdCsxKSl9LFMubm93PURhdGUubm93fHxmdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfTt2YXIgRj17IiYiOiImYW1wOyIsIjwiOiImbHQ7IiwiPiI6IiZndDsiLCciJzoiJnF1b3Q7IiwiJyI6IiYjeDI3OyIsImAiOiImI3g2MDsifSxQPVMuaW52ZXJ0KEYpLEI9ZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19LG49Iig/OiIrUy5rZXlzKHQpLmpvaW4oInwiKSsiKSIscj1SZWdFeHAobiksaT1SZWdFeHAobiwiZyIpO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gdD1udWxsPT10PyIiOiIiK3Qsci50ZXN0KHQpP3QucmVwbGFjZShpLGUpOnR9fTtTLmVzY2FwZT1CKEYpLFMudW5lc2NhcGU9QihQKSxTLnJlc3VsdD1mdW5jdGlvbih0LGUsbil7dmFyIHI9bnVsbD09dD92b2lkIDA6dFtlXTtyZXR1cm4gdm9pZCAwPT09ciYmKHI9biksUy5pc0Z1bmN0aW9uKHIpP3IuY2FsbCh0KTpyfTt2YXIgVz0wO1MudW5pcXVlSWQ9ZnVuY3Rpb24odCl7dmFyIGU9KytXKyIiO3JldHVybiB0P3QrZTplfSxTLnRlbXBsYXRlU2V0dGluZ3M9e2V2YWx1YXRlOi88JShbXHNcU10rPyklPi9nLGludGVycG9sYXRlOi88JT0oW1xzXFNdKz8pJT4vZyxlc2NhcGU6LzwlLShbXHNcU10rPyklPi9nfTt2YXIgRD0vKC4pXi8sSD17IiciOiInIiwiXFwiOiJcXCIsIlxyIjoiciIsIlxuIjoibiIsIlx1MjAyOCI6InUyMDI4IiwiXHUyMDI5IjoidTIwMjkifSxVPS9cXHwnfFxyfFxufFx1MjAyOHxcdTIwMjkvZyxWPWZ1bmN0aW9uKHQpe3JldHVybiJcXCIrSFt0XX07Uy50ZW1wbGF0ZT1mdW5jdGlvbih0LGUsbil7IWUmJm4mJihlPW4pLGU9Uy5kZWZhdWx0cyh7fSxlLFMudGVtcGxhdGVTZXR0aW5ncyk7dmFyIHI9UmVnRXhwKFsoZS5lc2NhcGV8fEQpLnNvdXJjZSwoZS5pbnRlcnBvbGF0ZXx8RCkuc291cmNlLChlLmV2YWx1YXRlfHxEKS5zb3VyY2VdLmpvaW4oInwiKSsifCQiLCJnIiksaT0wLG89Il9fcCs9JyI7dC5yZXBsYWNlKHIsZnVuY3Rpb24oZSxuLHIscyx1KXtyZXR1cm4gbys9dC5zbGljZShpLHUpLnJlcGxhY2UoVSxWKSxpPXUrZS5sZW5ndGgsbj9vKz0iJytcbigoX190PSgiK24rIikpPT1udWxsPycnOl8uZXNjYXBlKF9fdCkpK1xuJyI6cj9vKz0iJytcbigoX190PSgiK3IrIikpPT1udWxsPycnOl9fdCkrXG4nIjpzJiYobys9Iic7XG4iK3MrIlxuX19wKz0nIiksZX0pLG8rPSInO1xuIixlLnZhcmlhYmxlfHwobz0id2l0aChvYmp8fHt9KXtcbiIrbysifVxuIiksbz0idmFyIF9fdCxfX3A9JycsX19qPUFycmF5LnByb3RvdHlwZS5qb2luLHByaW50PWZ1bmN0aW9uKCl7X19wKz1fX2ouY2FsbChhcmd1bWVudHMsJycpO307XG4iK28rInJldHVybiBfX3A7XG4iO3RyeXt2YXIgcz1uZXcgRnVuY3Rpb24oZS52YXJpYWJsZXx8Im9iaiIsIl8iLG8pfWNhdGNoKHUpe3Rocm93IHUuc291cmNlPW8sdX12YXIgYT1mdW5jdGlvbih0KXtyZXR1cm4gcy5jYWxsKHRoaXMsdCxTKX0sbD1lLnZhcmlhYmxlfHwib2JqIjtyZXR1cm4gYS5zb3VyY2U9ImZ1bmN0aW9uKCIrbCsiKXtcbiIrbysifSIsYX0sUy5jaGFpbj1mdW5jdGlvbih0KXt2YXIgZT1TKHQpO3JldHVybiBlLl9jaGFpbj0hMCxlfTt2YXIgJD1mdW5jdGlvbih0LGUpe3JldHVybiB0Ll9jaGFpbj9TKGUpLmNoYWluKCk6ZX07Uy5taXhpbj1mdW5jdGlvbih0KXtTLmVhY2goUy5mdW5jdGlvbnModCksZnVuY3Rpb24oZSl7dmFyIG49U1tlXT10W2VdO1MucHJvdG90eXBlW2VdPWZ1bmN0aW9uKCl7dmFyIHQ9W3RoaXMuX3dyYXBwZWRdO3JldHVybiBwLmFwcGx5KHQsYXJndW1lbnRzKSwkKHRoaXMsbi5hcHBseShTLHQpKX19KX0sUy5taXhpbihTKSxTLmVhY2goWyJwb3AiLCJwdXNoIiwicmV2ZXJzZSIsInNoaWZ0Iiwic29ydCIsInNwbGljZSIsInVuc2hpZnQiXSxmdW5jdGlvbih0KXt2YXIgZT1mW3RdO1MucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7dmFyIG49dGhpcy5fd3JhcHBlZDtyZXR1cm4gZS5hcHBseShuLGFyZ3VtZW50cyksInNoaWZ0IiE9PXQmJiJzcGxpY2UiIT09dHx8MCE9PW4ubGVuZ3RofHxkZWxldGUgblswXSwkKHRoaXMsbil9fSksUy5lYWNoKFsiY29uY2F0Iiwiam9pbiIsInNsaWNlIl0sZnVuY3Rpb24odCl7dmFyIGU9Zlt0XTtTLnByb3RvdHlwZVt0XT1mdW5jdGlvbigpe3JldHVybiAkKHRoaXMsZS5hcHBseSh0aGlzLl93cmFwcGVkLGFyZ3VtZW50cykpfX0pLFMucHJvdG90eXBlLnZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dyYXBwZWR9LFMucHJvdG90eXBlLnZhbHVlT2Y9Uy5wcm90b3R5cGUudG9KU09OPVMucHJvdG90eXBlLnZhbHVlLFMucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIiIrdGhpcy5fd3JhcHBlZH0scj1bXSxpPWZ1bmN0aW9uKCl7cmV0dXJuIFN9LmFwcGx5KGUsciksISh2b2lkIDAhPT1pJiYodC5leHBvcnRzPWkpKX0pLmNhbGwodm9pZCAwKX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ImRlZmF1bHQiOnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1uKDExKSxvPXIoaSkscz1uKDI0KSx1PXIocyksYT12b2lkIDA7ZVsiZGVmYXVsdCJdPWE9e3BhcnNlOmZ1bmN0aW9uKHQpe3ZhciBlPVtdO2lmKCJbb2JqZWN0IEFycmF5XSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkpdmFyIG49dDtlbHNlIHZhciBuPXQuc3BsaXQoIlxuIik7aWYoblswXS5zbGljZSgwLDYpPT09ITEpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIENMVVNUQUwgSGVhZGVyIik7Zm9yKHZhciByPTAsaT0xLG89MDtyPG4ubGVuZ3RoOyl7cisrO3ZhciBzPW5bcl07aWYobnVsbCE9cyYmMCE9PXMubGVuZ3RoKWlmKDAhPT1zLnRyaW0oKS5sZW5ndGgpe2lmKCF1WyJkZWZhdWx0Il0uY29udGFpbnMocywiKiIpKXsxPT09aSYmKG89MCxpPTApO3ZhciBhPS9eKD86XHMqKShcUyspKD86XHMrKShcUyspKD86XHMqKShcZCopKD86XHMqfCQpL2csbD1hLmV4ZWMocyk7aWYobnVsbCE9bCl7dmFyIGM9bFsxXS50cmltKCksZj1sWzJdLnRyaW0oKTtpZihvPj1lLmxlbmd0aCl7dmFyIGg9dVsiZGVmYXVsdCJdLmdldE1ldGEoYy50cmltKCkpO2M9aC5uYW1lO3ZhciBkPW5ldyB1WyJkZWZhdWx0Il0ubW9kZWwoZixjLG8pO2QuaWRzPWguaWRzfHx7fSxkLmRldGFpbHM9aC5kZXRhaWxzfHx7fTt2YXIgcD1PYmplY3Qua2V5cyhkLmlkcyk7cC5sZW5ndGg+MCYmKGQuaWQ9ZC5pZHNbcFswXV0pLGUucHVzaChkKX1lbHNlIGVbb10uc2VxKz1mO28rK31lbHNlIGNvbnNvbGUubG9nKCJwYXJzZSBlcnJvciIscyl9fWVsc2UgaT0xO2Vsc2UgaT0xfXJldHVybiBlfX0sb1siZGVmYXVsdCJdLm1peGluKGEpfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OnsiZGVmYXVsdCI6dH19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBpPW4oMjQpLG89cihpKSxzPW4oNjkpLHU9cihzKSxhPW4oMTEpLGw9cihhKSxjPXZvaWQgMDtlWyJkZWZhdWx0Il09Yz17Z2V0TWV0YTpvWyJkZWZhdWx0Il0uZ2V0TWV0YSxleHRlbmQ6ZnVuY3Rpb24odCl7dmFyIGU9KDAsdVsiZGVmYXVsdCJdKShjKTtyZXR1cm4gYy5nZXRNZXRhPXQsZX0scGFyc2U6ZnVuY3Rpb24odCl7dmFyIGU9W107aWYoIXR8fDA9PT10Lmxlbmd0aClyZXR1cm5bXTsiW29iamVjdCBBcnJheV0iIT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpJiYodD10LnNwbGl0KCJcbiIpKTtmb3IodmFyIG49YyxyPW4uZ2V0TWV0YSxpPTA7aTx0Lmxlbmd0aDtpKyspe3ZhciBzPXRbaV07aWYoIj4iPT09c1swXXx8IjsiPT09c1swXSl7dmFyIHU9cy5zbGljZSgxKS50cmltKCksYT1yKHUudHJpbSgpKTt1PWEubmFtZTt2YXIgbD1hLmlkfHxlLmxlbmd0aCxmPW5ldyBvWyJkZWZhdWx0Il0ubW9kZWwoIiIsYS5uYW1lLGwpO2YuaWRzPWEuaWRzfHx7fSxmLmRldGFpbHM9YS5kZXRhaWxzfHx7fSxlLnB1c2goZil9ZWxzZSBmLnNlcSs9c31yZXR1cm4gZX0sd3JpdGU6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49IiIscj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgaT10W3JdO251bGwhPWUmJihpPWUoaSkpLG4rPSI+IitpLm5hbWUrIlxuIixuKz1vWyJkZWZhdWx0Il0uc3BsaXROQ2hhcnMoaS5zZXEsODApLmpvaW4oIlxuIiksbis9IlxuIn1yZXR1cm4gbn19LGxbImRlZmF1bHQiXS5taXhpbihjKX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ImRlZmF1bHQiOnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1uKDExKSxvPXIoaSkscz1uKDQzKSx1PXIocyksYT1uKDY0KSxsPXIoYSksYz1mdW5jdGlvbigpe307b1siZGVmYXVsdCJdLm1peGluKGMpLGVbImRlZmF1bHQiXT1jLGMucGFyc2VMaW5lcz1mdW5jdGlvbih0KXt2YXIgZT10LnNwbGl0KCJcbiIpLG49e30scj1bXTtuLnR5cGU9Yy5fZ3Vlc3NUeXBlKGUpO3ZhciBpPTA7aWYoImphbHZpZXciPT09bi50eXBlKXt2YXIgbz1sWyJkZWZhdWx0Il0ucmVhZEhlYWRlcihlKTtpPW8ub2Zmc2V0LG4uY29sb3JzPW8uY29sb3JzLHI9by5mZWF0dXJlc31mb3IodmFyIHM9aTtzPGUubGVuZ3RoO3MrKyl7dmFyIHU9ZVtzXTswIT09dS5sZW5ndGgmJiIjIiE9PXVbMF0mJih1PWMucGFyc2VMaW5lKHUpLHZvaWQgMCE9PXUmJnIucHVzaCh1KSl9cmV0dXJue2ZlYXR1cmVzOnIsY29uZmlnOm59fSxjLl9ndWVzc1R5cGU9ZnVuY3Rpb24odCl7cmV0dXJuIiMjZ2ZmLXZlcnNpb24gMyI9PT10WzBdLnN1YnN0cmluZygwLDE1KT8iZ2ZmMyI6dFswXS5pbmRleE9mKCIjIik8MCYmMj09PXRbMF0uc3BsaXQoIlx0IikubGVuZ3RoPyJqYWx2aWV3IjoiZ2ZmMyJ9LGMucGFyc2VTZXFzPWMucGFyc2U9ZnVuY3Rpb24odCl7dmFyIGU9Yy5wYXJzZUxpbmVzKHQpLG49e307cmV0dXJuIGUuZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT10LnNlcW5hbWU7dm9pZCAwPT09bltlXSYmKG5bZV09W10pLGRlbGV0ZSB0LnNlcW5hbWUsbltlXS5wdXNoKHQpfSksZGVsZXRlIGUuZmVhdHVyZXMsZS5zZXFzPW4sZX0sYy5wYXJzZUxpbmU9ZnVuY3Rpb24odCl7dmFyIGU9e30sbj10LnNwbGl0KC9ccysvKTtpZigxIT09bi5sZW5ndGgpe2Uuc2VxbmFtZT1uWzBdLGUuc291cmNlPW5bMV0sZS5mZWF0dXJlPW5bMl0sZS5zdGFydD1wYXJzZUludChuWzNdKSxlLmVuZD1wYXJzZUludChuWzRdKSxlLnNjb3JlPW5bNV0sZS5zdHJhbmQ9bls2XSxlLmZyYW1lPW5bN107dmFyIHI9bi5zbGljZSg4KS5qb2luKCIgIik7cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24odCl7InN0cmluZyI9PXR5cGVvZiBlW3RdJiYoZVt0XT1lW3RdLnRyaW0oKSksIi4iPT09ZVt0XSYmKGVbdF09dm9pZCAwKX0pLGUuc2NvcmUmJihlLnNjb3JlPXBhcnNlRmxvYXQoZS5zY29yZSkpLGUuZnJhbWUmJihlLmZyYW1lPXBhcnNlSW50KGUuZnJhbWUpKSxlLmF0dHJpYnV0ZXM9dVsiZGVmYXVsdCJdLmV4dHJhY3RLZXlzKHIpLGV9fSxjLmV4cG9ydExpbmU9ZnVuY3Rpb24odCl7dmFyIGU9T2JqZWN0LmtleXModC5hdHRyaWJ1dGVzKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUrIj0iK3QuYXR0cmlidXRlc1tlXX0pLmpvaW4oIjsiKSxuPVt0LnNlcW5hbWUsdC5zb3VyY2UsdC5mZWF0dXJlLHQuc3RhcnQsdC5lbmQsdC5zY29yZSx0LnN0cmFuZCx0LmZyYW1lLGVdO3JldHVybiBuPW4ubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10PyIuIjp0fSksbi5qb2luKCJcdCIpfSxjLmV4cG9ydExpbmVzPWZ1bmN0aW9uKHQpe3JldHVybiIjI2dmZi12ZXJzaW9uIDNcbiIrdC5tYXAoYy5leHBvcnRMaW5lKS5qb2luKCJcbiIpfSxjLmV4cG9ydFNlcXM9Y1siZXhwb3J0Il09ZnVuY3Rpb24odCl7dmFyIGU9W10sbj1mdW5jdGlvbih0KXt0LnNlcW5hbWU9cixlLnB1c2godCl9O2Zvcih2YXIgciBpbiB0KXRbcl0uZm9yRWFjaChuKTtyZXR1cm4gYy5leHBvcnRMaW5lcyhlKX0sYy51dGlscz11WyJkZWZhdWx0Il19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciByPW4oNDMpLGk9e307ZVsiZGVmYXVsdCJdPWksaS5yZWFkSGVhZGVyPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuPXt9LHI9MCxvPVtdO3I8dC5sZW5ndGg7cisrKXt2YXIgcz10W3JdO2lmKHMuaW5kZXhPZigiIyIpPj0wKWJyZWFrO3ZhciB1PXMuc3BsaXQoL1x0LyksYT11WzBdLnRyaW0oKTtpZigiR0ZGIj09PWEpYnJlYWs7aWYoMj09PXUubGVuZ3RoKWlmKCJzdGFydGdyb3VwIj09PWEpZT11WzFdLnRyaW0oKTtlbHNle2lmKCJlbmRncm91cCI9PT1hKXtlPSIiO2NvbnRpbnVlfW5bdVswXV09aS5wYXJzZUNvbG9yKHVbMV0pfWVsc2UgaWYodS5sZW5ndGg+PTUpe3ZhciBsPWkucGFyc2VMaW5lKHUpO2UmJihsLmF0dHJpYnV0ZXMuUGFyZW50PWUpLG8ucHVzaChsKX19cmV0dXJue29mZnNldDpyLGNvbG9yczpuLGZlYXR1cmVzOm99fSxpLnBhcnNlQ29sb3I9ZnVuY3Rpb24odCl7cmV0dXJuIHQuaW5kZXhPZigiLCIpPj0wPygwLHIucmdiVG9IZXgpKHQuc3BsaXQoIiwiKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHBhcnNlSW50KHQpfSkpOjY9PT10Lmxlbmd0aCYmcGFyc2VJbnQodC5jaGFyQXQoMCksMTYpPD0xNiYmImJpc3F1ZSIhPT10PyIjIit0OnR9LGkucGFyc2VMaW5lPWZ1bmN0aW9uKHQpe3ZhciBlPXthdHRyaWJ1dGVzOnt9fTtyZXR1cm4gZS5hdHRyaWJ1dGVzLk5hbWU9dFswXS50cmltKCksZS5zZXFuYW1lPXRbMV0udHJpbSgpLGUuc3RhcnQ9cGFyc2VJbnQodFszXSksZS5lbmQ9cGFyc2VJbnQodFs0XSksZS5mZWF0dXJlPXRbNV0udHJpbSgpLCJJRF9OT1RfU1BFQ0lGSUVEIj09PWUuc2VxbmFtZSYmKGUuc2VxbmFtZT10WzJdLnRyaW0oKSksZX19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6eyJkZWZhdWx0Ijp0fX12YXIgaT1uKDExKSxvPXIoaSkscz1mdW5jdGlvbiB1KHQpe3JldHVybiB0aGlzLmNvbnN0cnVjdG9yIT11P25ldyB1KHQpOih0aGlzLm1hdHJpeD17fSx0aGlzLnBhcnNpbmdPcmRlcj1bXSx2b2lkIDAhPXQmJnRoaXMucGFyc2UodCksdGhpcyl9O29bImRlZmF1bHQiXS5taXhpbihzKSx0LmV4cG9ydHM9cyxzLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0KXtyZXR1cm4gdC5zcGxpdCgiXG4iKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3RoaXMucGFyc2VMaW5lKHQpfS5iaW5kKHRoaXMpKSx0aGlzLmJ1aWxkTWF0cml4KCksdGhpcy5tYXRyaXh9LHMucmVhZD1mdW5jdGlvbih0LGUpe3JldHVybihuZXcgcykucmVhZCh0LGUpfSxzLnBhcnNlPWZ1bmN0aW9uKHQpe3JldHVybihuZXcgcykucGFyc2UodCl9LHMucHJvdG90eXBlLnBhcnNlTGluZT1mdW5jdGlvbih0KXt2YXIgZT10LmNoYXJBdCgwKTtpZigiIyIhPT1lKXt0aGlzLnBhcnNpbmdPcmRlci5wdXNoKGUpO2Zvcih2YXIgbj10LnN1YnN0cmluZygxKSxyPW4uc3BsaXQoL1xzKy8pLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdC5sZW5ndGg+MH0pLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gcGFyc2VJbnQodCl9KSxpPXt9LG89MDtvPHIubGVuZ3RoO28rKylpW3RoaXMucGFyc2luZ09yZGVyW29dXT1yW29dO3RoaXMubWF0cml4W2VdPWl9fSxzLnByb3RvdHlwZVsiZXhwb3J0Il09ZnVuY3Rpb24oKXtyZXR1cm4gc1siZXhwb3J0Il0odGhpcy5tYXRyaXgpfSxzWyJleHBvcnQiXT1mdW5jdGlvbih0KXt2YXIgZT1bXSxuPTE7Im1hdHJpeCJpbiB0JiYodD10Lm1hdHJpeCk7Zm9yKHZhciByIGluIHQpe2Zvcih2YXIgaT1yLG89T2JqZWN0LmtleXModFtyXSkscz0wO3M8bjtzKyspaSs9Ilx0Iit0W3JdW29bc11dO2UucHVzaChpKSxuKyt9cmV0dXJuIGUuam9pbigiXG4iKX0scy5wcm90b3R5cGUuYnVpbGRNYXRyaXg9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5wYXJzaW5nT3JkZXIubGVuZ3RoLTE7dD49MDt0LS0pe3ZhciBlPXRoaXMucGFyc2luZ09yZGVyW3RdLG49dGhpcy5tYXRyaXhbZV07Zm9yKHZhciByIGluIG4pdGhpcy5tYXRyaXhbcl1bZV09bltyXX19fSxmdW5jdGlvbih0LGUpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKHQpe2Zvcih2YXIgZT1bXSxuPXt9LGk9dC5zcGxpdCgvXHMqKDt8XCh8XCl8XFt8XF18LHw6fD0pXHMqLyksbz0wO288aS5sZW5ndGg7bysrKXt2YXIgcz1pW29dLHU9dm9pZCAwO3N3aXRjaChzKXtjYXNlIigiOnU9e30sbi5jaGlsZHJlbj1bdV0sZS5wdXNoKG4pLG49dTticmVhaztjYXNlIiwiOnU9e30sZVtlLmxlbmd0aC0xXS5jaGlsZHJlbi5wdXNoKHUpLG49dTticmVhaztjYXNlIikiOm49ZS5wb3AoKTticmVhaztjYXNlIjoiOmJyZWFrO2RlZmF1bHQ6dmFyIGE9aVtvLTFdO2lmKCIpIj09YXx8IigiPT1hfHwiLCI9PWEpbi5uYW1lPXM7ZWxzZSBpZigiOiI9PWEpInVuZGVmaW5lZCI9PXR5cGVvZiBzPyJ1bmRlZmluZWQiOnIocyksaXNOYU4ocyl8fChuLmJyYW5jaF9sZW5ndGg9cGFyc2VGbG9hdChzKSk7ZWxzZSBpZigiPSI9PWEpe3ZhciBsPWlbby0yXTtzd2l0Y2gobCl7Y2FzZSJEIjpuLmR1cGxpY2F0aW9uPXM7YnJlYWs7Y2FzZSJHIjpuLmdlbmVfaWQ9czticmVhaztjYXNlIlQiOm4udGF4b25faWQ9c319fX1yZXR1cm4gbn1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHI9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbD8ic3ltYm9sIjp0eXBlb2YgdH07ZVsiZGVmYXVsdCJdPW59LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6eyJkZWZhdWx0Ijp0fX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksZS5wYXJzZU5oeD1lLnBhcnNlPXZvaWQgMDt2YXIgaT1uKDY4KSxvPXIoaSkscz1uKDY2KSx1PXIocyksYT17fTthLnBhcnNlPW9bImRlZmF1bHQiXSxhLnBhcnNlTmh4PXVbImRlZmF1bHQiXSxlWyJkZWZhdWx0Il09YSxlLnBhcnNlPW9bImRlZmF1bHQiXSxlLnBhcnNlTmh4PXVbImRlZmF1bHQiXX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbih0KXtmb3IodmFyIGU9W10sbj17fSxyPXQuc3BsaXQoL1xzKig7fFwofFwpfCx8OilccyovKSxpPTA7aTxyLmxlbmd0aDtpKyspe3ZhciBvPXJbaV0scz12b2lkIDA7c3dpdGNoKG8pe2Nhc2UiKCI6cz17fSxuLmNoaWxkcmVuPVtzXSxlLnB1c2gobiksbj1zO2JyZWFrO2Nhc2UiLCI6cz17fSxlW2UubGVuZ3RoLTFdLmNoaWxkcmVuLnB1c2gocyksbj1zO2JyZWFrO2Nhc2UiKSI6bj1lLnBvcCgpO2JyZWFrO2Nhc2UiOiI6YnJlYWs7ZGVmYXVsdDp2YXIgdT1yW2ktMV07IikiPT11fHwiKCI9PXV8fCIsIj09dT9uLm5hbWU9bzoiOiI9PXUmJihuLmJyYW5jaF9sZW5ndGg9cGFyc2VGbG9hdChvKSl9fXJldHVybiBufU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxlWyJkZWZhdWx0Il09bn0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbih0LGUsbil7Zm9yKHZhciByPVtdLGk9dDxlLG89bj9pP2UrMTplLTE6ZSxzPXQ7aT9zPG86cz5vO2k/cysrOnMtLSlyLnB1c2gocyk7cmV0dXJuIHJ9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLGVbImRlZmF1bHQiXT1mdW5jdGlvbih0KXt0PXR8fHt9O2Zvcih2YXIgZT1uKDAsYXJndW1lbnRzLmxlbmd0aCwhMSkscj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgaT1lW3JdO2lmKGFyZ3VtZW50c1tpXSlmb3IodmFyIG89MDtvPGFyZ3VtZW50c1tpXS5sZW5ndGg7bysrKXt2YXIgcz1hcmd1bWVudHNbaV1bb107YXJndW1lbnRzW2ldLmhhc093blByb3BlcnR5KHMpJiYodFtzXT1hcmd1bWVudHNbaV1bc10pfX1yZXR1cm4gdH19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbD8ic3ltYm9sIjp0eXBlb2YgdH07IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbigpe3JldHVybntrZXlzOk9iamVjdC5rZXlzfHxmdW5jdGlvbih0KXtpZigib2JqZWN0IiE9PSgidW5kZWZpbmVkIj09dHlwZW9mIHQ/InVuZGVmaW5lZCI6cih0KSkmJiJmdW5jdGlvbiIhPXR5cGVvZiB0fHxudWxsPT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJrZXlzKCkgY2FsbGVkIG9uIGEgbm9uLW9iamVjdCIpOwp2YXIgZSxuPVtdO2ZvcihlIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShlKSYmKG5bbi5sZW5ndGhdPWUpO3JldHVybiBufSx1bmlxdWVJZDpmdW5jdGlvbih0KXt2YXIgZT0rK2ErIiI7cmV0dXJuIHQ/dCtlOmV9LGhhczpmdW5jdGlvbih0LGUpe3JldHVybiBzLmNhbGwodCxlKX0sZWFjaDpmdW5jdGlvbih0LGUsbil7aWYobnVsbCE9dClpZihvJiZ0LmZvckVhY2g9PT1vKXQuZm9yRWFjaChlLG4pO2Vsc2UgaWYodC5sZW5ndGg9PT0rdC5sZW5ndGgpZm9yKHZhciByPTAsaT10Lmxlbmd0aDtyPGk7cisrKWUuY2FsbChuLHRbcl0scix0KTtlbHNlIGZvcih2YXIgcyBpbiB0KXRoaXMuaGFzKHQscykmJmUuY2FsbChuLHRbc10scyx0KX0sb25jZTpmdW5jdGlvbih0KXt2YXIgZSxuPSExO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBuP2U6KG49ITAsZT10LmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0PW51bGwsZSl9fX19dmFyIGksbz1BcnJheS5wcm90b3R5cGUuZm9yRWFjaCxzPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksdT1BcnJheS5wcm90b3R5cGUuc2xpY2UsYT0wLGw9bigpO2k9e29uOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZih0aGlzLCJvbiIsdCxbZSxuXSkmJmU/KHRoaXMuX2V2ZW50c3x8KHRoaXMuX2V2ZW50cz17fSksKHRoaXMuX2V2ZW50c1t0XXx8KHRoaXMuX2V2ZW50c1t0XT1bXSkpLnB1c2goe2NhbGxiYWNrOmUsY29udGV4dDpuLGN0eDpufHx0aGlzfSksdGhpcyk6dGhpc30sb25jZTpmdW5jdGlvbiBwKHQsZSxuKXtpZighZih0aGlzLCJvbmNlIix0LFtlLG5dKXx8IWUpcmV0dXJuIHRoaXM7dmFyIHI9dGhpcyxwPWwub25jZShmdW5jdGlvbigpe3Iub2ZmKHQscCksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KTtyZXR1cm4gcC5fY2FsbGJhY2s9ZSx0aGlzLm9uKHQscCxuKX0sb2ZmOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcixpLG8scyx1LGEsYyxoO2lmKCF0aGlzLl9ldmVudHN8fCFmKHRoaXMsIm9mZiIsdCxbZSxuXSkpcmV0dXJuIHRoaXM7aWYoIXQmJiFlJiYhbilyZXR1cm4gdGhpcy5fZXZlbnRzPXt9LHRoaXM7Zm9yKHM9dD9bdF06bC5rZXlzKHRoaXMuX2V2ZW50cyksdT0wLGE9cy5sZW5ndGg7dTxhO3UrKylpZih0PXNbdV0sbz10aGlzLl9ldmVudHNbdF0pe2lmKHRoaXMuX2V2ZW50c1t0XT1yPVtdLGV8fG4pZm9yKGM9MCxoPW8ubGVuZ3RoO2M8aDtjKyspaT1vW2NdLChlJiZlIT09aS5jYWxsYmFjayYmZSE9PWkuY2FsbGJhY2suX2NhbGxiYWNrfHxuJiZuIT09aS5jb250ZXh0KSYmci5wdXNoKGkpO3IubGVuZ3RofHxkZWxldGUgdGhpcy5fZXZlbnRzW3RdfXJldHVybiB0aGlzfSx0cmlnZ2VyOmZ1bmN0aW9uKHQpe2lmKCF0aGlzLl9ldmVudHMpcmV0dXJuIHRoaXM7dmFyIGU9dS5jYWxsKGFyZ3VtZW50cywxKTtpZighZih0aGlzLCJ0cmlnZ2VyIix0LGUpKXJldHVybiB0aGlzO3ZhciBuPXRoaXMuX2V2ZW50c1t0XSxyPXRoaXMuX2V2ZW50cy5hbGw7cmV0dXJuIG4mJmgobixlKSxyJiZoKHIsYXJndW1lbnRzKSx0aGlzfSxzdG9wTGlzdGVuaW5nOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLl9saXN0ZW5lcnM7aWYoIWkpcmV0dXJuIHRoaXM7dmFyIG89IWUmJiFuOyJvYmplY3QiPT09KCJ1bmRlZmluZWQiPT10eXBlb2YgZT8idW5kZWZpbmVkIjpyKGUpKSYmKG49dGhpcyksdCYmKChpPXt9KVt0Ll9saXN0ZW5lcklkXT10KTtmb3IodmFyIHMgaW4gaSlpW3NdLm9mZihlLG4sdGhpcyksbyYmZGVsZXRlIHRoaXMuX2xpc3RlbmVyc1tzXTtyZXR1cm4gdGhpc319O3ZhciBjPS9ccysvLGY9ZnVuY3Rpb24odCxlLG4saSl7aWYoIW4pcmV0dXJuITA7aWYoIm9iamVjdCI9PT0oInVuZGVmaW5lZCI9PXR5cGVvZiBuPyJ1bmRlZmluZWQiOnIobikpKXtmb3IodmFyIG8gaW4gbil0W2VdLmFwcGx5KHQsW28sbltvXV0uY29uY2F0KGkpKTtyZXR1cm4hMX1pZihjLnRlc3Qobikpe2Zvcih2YXIgcz1uLnNwbGl0KGMpLHU9MCxhPXMubGVuZ3RoO3U8YTt1KyspdFtlXS5hcHBseSh0LFtzW3VdXS5jb25jYXQoaSkpO3JldHVybiExfXJldHVybiEwfSxoPWZ1bmN0aW9uKHQsZSl7dmFyIG4scj0tMSxpPXQubGVuZ3RoLG89ZVswXSxzPWVbMV0sdT1lWzJdO3N3aXRjaChlLmxlbmd0aCl7Y2FzZSAwOmZvcig7KytyPGk7KShuPXRbcl0pLmNhbGxiYWNrLmNhbGwobi5jdHgpO3JldHVybjtjYXNlIDE6Zm9yKDsrK3I8aTspKG49dFtyXSkuY2FsbGJhY2suY2FsbChuLmN0eCxvKTtyZXR1cm47Y2FzZSAyOmZvcig7KytyPGk7KShuPXRbcl0pLmNhbGxiYWNrLmNhbGwobi5jdHgsbyxzKTtyZXR1cm47Y2FzZSAzOmZvcig7KytyPGk7KShuPXRbcl0pLmNhbGxiYWNrLmNhbGwobi5jdHgsbyxzLHUpO3JldHVybjtkZWZhdWx0OmZvcig7KytyPGk7KShuPXRbcl0pLmNhbGxiYWNrLmFwcGx5KG4uY3R4LGUpfX0sZD17bGlzdGVuVG86Im9uIixsaXN0ZW5Ub09uY2U6Im9uY2UifTtsLmVhY2goZCxmdW5jdGlvbih0LGUpe2lbZV09ZnVuY3Rpb24oZSxuLGkpe3JldHVybih0aGlzLl9saXN0ZW5lcnN8fCh0aGlzLl9saXN0ZW5lcnM9e30pKVtlLl9saXN0ZW5lcklkfHwoZS5fbGlzdGVuZXJJZD1sLnVuaXF1ZUlkKCJsIikpXT1lLCJvYmplY3QiPT09KCJ1bmRlZmluZWQiPT10eXBlb2Ygbj8idW5kZWZpbmVkIjpyKG4pKSYmKGk9dGhpcyksZVt0XShuLGksdGhpcyksdGhpc319KSxpLmJpbmQ9aS5vbixpLnVuYmluZD1pLm9mZixpLm1peGluPWZ1bmN0aW9uKHQpe3ZhciBlPVsib24iLCJvbmNlIiwib2ZmIiwidHJpZ2dlciIsInN0b3BMaXN0ZW5pbmciLCJsaXN0ZW5UbyIsImxpc3RlblRvT25jZSIsImJpbmQiLCJ1bmJpbmQiXTtyZXR1cm4gbC5lYWNoKGUsZnVuY3Rpb24oZSl7dFtlXT10aGlzW2VdfSx0aGlzKSx0fSwidW5kZWZpbmVkIiE9dHlwZW9mIHQmJnQuZXhwb3J0cyYmKGU9dC5leHBvcnRzPWkpLGUuQmFja2JvbmVFdmVudHM9aX0odm9pZCAwKX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9big3MCl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dC5leHBvcnRzLnNlcT1uKDczKX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnNlcT10LHRoaXMubmFtZT1lLHRoaXMuaWQ9bix0aGlzLm1ldGE9e319fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3QuZXhwb3J0cz1uKDgxKX0sZnVuY3Rpb24odCxlLG4pe3ZhciByLGksbz0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sPyJzeW1ib2wiOnR5cGVvZiB0fTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHQpe2Z1bmN0aW9uIGUoZSxuLHIsaSxvLHMpe2Zvcig7bz49MCYmbzxzO28rPXQpe3ZhciB1PWk/aVtvXTpvO3I9bihyLGVbdV0sdSxlKX1yZXR1cm4gcn1yZXR1cm4gZnVuY3Rpb24obixyLGksbyl7cj1rKHIsbyw0KTt2YXIgcz0hQyhuKSYmUy5rZXlzKG4pLHU9KHN8fG4pLmxlbmd0aCxhPXQ+MD8wOnUtMTtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aDwzJiYoaT1uW3M/c1thXTphXSxhKz10KSxlKG4scixpLHMsYSx1KX19ZnVuY3Rpb24gcyh0KXtyZXR1cm4gZnVuY3Rpb24oZSxuLHIpe249aihuLHIpO2Zvcih2YXIgaT1BKGUpLG89dD4wPzA6aS0xO28+PTAmJm88aTtvKz10KWlmKG4oZVtvXSxvLGUpKXJldHVybiBvO3JldHVybi0xfX1mdW5jdGlvbiB1KHQsZSxuKXtyZXR1cm4gZnVuY3Rpb24ocixpLG8pe3ZhciBzPTAsdT1BKHIpO2lmKCJudW1iZXIiPT10eXBlb2Ygbyl0PjA/cz1vPj0wP286TWF0aC5tYXgobyt1LHMpOnU9bz49MD9NYXRoLm1pbihvKzEsdSk6byt1KzE7ZWxzZSBpZihuJiZvJiZ1KXJldHVybiBvPW4ocixpKSxyW29dPT09aT9vOi0xO2lmKGkhPT1pKXJldHVybiBvPWUoZy5jYWxsKHIscyx1KSxTLmlzTmFOKSxvPj0wP28rczotMTtmb3Iobz10PjA/czp1LTE7bz49MCYmbzx1O28rPXQpaWYocltvXT09PWkpcmV0dXJuIG87cmV0dXJuLTF9fWZ1bmN0aW9uIGEodCxlKXt2YXIgbj1SLmxlbmd0aCxyPXQuY29uc3RydWN0b3IsaT1TLmlzRnVuY3Rpb24ocikmJnIucHJvdG90eXBlfHxoLG89ImNvbnN0cnVjdG9yIjtmb3IoUy5oYXModCxvKSYmIVMuY29udGFpbnMoZSxvKSYmZS5wdXNoKG8pO24tLTspbz1SW25dLG8gaW4gdCYmdFtvXSE9PWlbb10mJiFTLmNvbnRhaW5zKGUsbykmJmUucHVzaChvKX12YXIgbD10aGlzLGM9bC5fLGY9QXJyYXkucHJvdG90eXBlLGg9T2JqZWN0LnByb3RvdHlwZSxkPUZ1bmN0aW9uLnByb3RvdHlwZSxwPWYucHVzaCxnPWYuc2xpY2Usdj1oLnRvU3RyaW5nLG09aC5oYXNPd25Qcm9wZXJ0eSx5PUFycmF5LmlzQXJyYXksXz1PYmplY3Qua2V5cyxiPWQuYmluZCx4PU9iamVjdC5jcmVhdGUsdz1mdW5jdGlvbigpe30sUz1mdW5jdGlvbiBHKHQpe3JldHVybiB0IGluc3RhbmNlb2YgRz90OnRoaXMgaW5zdGFuY2VvZiBHP3ZvaWQodGhpcy5fd3JhcHBlZD10KTpuZXcgRyh0KX07InVuZGVmaW5lZCIhPXR5cGVvZiB0JiZ0LmV4cG9ydHMmJihlPXQuZXhwb3J0cz1TKSxlLl89UyxTLlZFUlNJT049IjEuOC4zIjt2YXIgaz1mdW5jdGlvbih0LGUsbil7aWYodm9pZCAwPT09ZSlyZXR1cm4gdDtzd2l0Y2gobnVsbD09bj8zOm4pe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHQuY2FsbChlLG4pfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKG4scil7cmV0dXJuIHQuY2FsbChlLG4scil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24obixyLGkpe3JldHVybiB0LmNhbGwoZSxuLHIsaSl9O2Nhc2UgNDpyZXR1cm4gZnVuY3Rpb24obixyLGksbyl7cmV0dXJuIHQuY2FsbChlLG4scixpLG8pfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseShlLGFyZ3VtZW50cyl9fSxqPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbnVsbD09dD9TLmlkZW50aXR5OlMuaXNGdW5jdGlvbih0KT9rKHQsZSxuKTpTLmlzT2JqZWN0KHQpP1MubWF0Y2hlcih0KTpTLnByb3BlcnR5KHQpfTtTLml0ZXJhdGVlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGoodCxlLDEvMCl9O3ZhciBPPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg7aWYocjwyfHxudWxsPT1uKXJldHVybiBuO2Zvcih2YXIgaT0xO2k8cjtpKyspZm9yKHZhciBvPWFyZ3VtZW50c1tpXSxzPXQobyksdT1zLmxlbmd0aCxhPTA7YTx1O2ErKyl7dmFyIGw9c1thXTtlJiZ2b2lkIDAhPT1uW2xdfHwobltsXT1vW2xdKX1yZXR1cm4gbn19LEU9ZnVuY3Rpb24odCl7aWYoIVMuaXNPYmplY3QodCkpcmV0dXJue307aWYoeClyZXR1cm4geCh0KTt3LnByb3RvdHlwZT10O3ZhciBlPW5ldyB3O3JldHVybiB3LnByb3RvdHlwZT1udWxsLGV9LE09ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP3ZvaWQgMDplW3RdfX0sej1NYXRoLnBvdygyLDUzKS0xLEE9TSgibGVuZ3RoIiksQz1mdW5jdGlvbih0KXt2YXIgZT1BKHQpO3JldHVybiJudW1iZXIiPT10eXBlb2YgZSYmZT49MCYmZTw9en07Uy5lYWNoPVMuZm9yRWFjaD1mdW5jdGlvbih0LGUsbil7ZT1rKGUsbik7dmFyIHIsaTtpZihDKHQpKWZvcihyPTAsaT10Lmxlbmd0aDtyPGk7cisrKWUodFtyXSxyLHQpO2Vsc2V7dmFyIG89Uy5rZXlzKHQpO2ZvcihyPTAsaT1vLmxlbmd0aDtyPGk7cisrKWUodFtvW3JdXSxvW3JdLHQpfXJldHVybiB0fSxTLm1hcD1TLmNvbGxlY3Q9ZnVuY3Rpb24odCxlLG4pe2U9aihlLG4pO2Zvcih2YXIgcj0hQyh0KSYmUy5rZXlzKHQpLGk9KHJ8fHQpLmxlbmd0aCxvPUFycmF5KGkpLHM9MDtzPGk7cysrKXt2YXIgdT1yP3Jbc106cztvW3NdPWUodFt1XSx1LHQpfXJldHVybiBvfSxTLnJlZHVjZT1TLmZvbGRsPVMuaW5qZWN0PW4oMSksUy5yZWR1Y2VSaWdodD1TLmZvbGRyPW4oLTEpLFMuZmluZD1TLmRldGVjdD1mdW5jdGlvbih0LGUsbil7dmFyIHI7aWYocj1DKHQpP1MuZmluZEluZGV4KHQsZSxuKTpTLmZpbmRLZXkodCxlLG4pLHZvaWQgMCE9PXImJnIhPT0tMSlyZXR1cm4gdFtyXX0sUy5maWx0ZXI9Uy5zZWxlY3Q9ZnVuY3Rpb24odCxlLG4pe3ZhciByPVtdO3JldHVybiBlPWooZSxuKSxTLmVhY2godCxmdW5jdGlvbih0LG4saSl7ZSh0LG4saSkmJnIucHVzaCh0KX0pLHJ9LFMucmVqZWN0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gUy5maWx0ZXIodCxTLm5lZ2F0ZShqKGUpKSxuKX0sUy5ldmVyeT1TLmFsbD1mdW5jdGlvbih0LGUsbil7ZT1qKGUsbik7Zm9yKHZhciByPSFDKHQpJiZTLmtleXModCksaT0ocnx8dCkubGVuZ3RoLG89MDtvPGk7bysrKXt2YXIgcz1yP3Jbb106bztpZighZSh0W3NdLHMsdCkpcmV0dXJuITF9cmV0dXJuITB9LFMuc29tZT1TLmFueT1mdW5jdGlvbih0LGUsbil7ZT1qKGUsbik7Zm9yKHZhciByPSFDKHQpJiZTLmtleXModCksaT0ocnx8dCkubGVuZ3RoLG89MDtvPGk7bysrKXt2YXIgcz1yP3Jbb106bztpZihlKHRbc10scyx0KSlyZXR1cm4hMH1yZXR1cm4hMX0sUy5jb250YWlucz1TLmluY2x1ZGVzPVMuaW5jbHVkZT1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gQyh0KXx8KHQ9Uy52YWx1ZXModCkpLCgibnVtYmVyIiE9dHlwZW9mIG58fHIpJiYobj0wKSxTLmluZGV4T2YodCxlLG4pPj0wfSxTLmludm9rZT1mdW5jdGlvbih0LGUpe3ZhciBuPWcuY2FsbChhcmd1bWVudHMsMikscj1TLmlzRnVuY3Rpb24oZSk7cmV0dXJuIFMubWFwKHQsZnVuY3Rpb24odCl7dmFyIGk9cj9lOnRbZV07cmV0dXJuIG51bGw9PWk/aTppLmFwcGx5KHQsbil9KX0sUy5wbHVjaz1mdW5jdGlvbih0LGUpe3JldHVybiBTLm1hcCh0LFMucHJvcGVydHkoZSkpfSxTLndoZXJlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFMuZmlsdGVyKHQsUy5tYXRjaGVyKGUpKX0sUy5maW5kV2hlcmU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gUy5maW5kKHQsUy5tYXRjaGVyKGUpKX0sUy5tYXg9ZnVuY3Rpb24odCxlLG4pe3ZhciByLGksbz0tKDEvMCkscz0tKDEvMCk7aWYobnVsbD09ZSYmbnVsbCE9dCl7dD1DKHQpP3Q6Uy52YWx1ZXModCk7Zm9yKHZhciB1PTAsYT10Lmxlbmd0aDt1PGE7dSsrKXI9dFt1XSxyPm8mJihvPXIpfWVsc2UgZT1qKGUsbiksUy5lYWNoKHQsZnVuY3Rpb24odCxuLHIpe2k9ZSh0LG4sciksKGk+c3x8aT09PS0oMS8wKSYmbz09PS0oMS8wKSkmJihvPXQscz1pKX0pO3JldHVybiBvfSxTLm1pbj1mdW5jdGlvbih0LGUsbil7dmFyIHIsaSxvPTEvMCxzPTEvMDtpZihudWxsPT1lJiZudWxsIT10KXt0PUModCk/dDpTLnZhbHVlcyh0KTtmb3IodmFyIHU9MCxhPXQubGVuZ3RoO3U8YTt1Kyspcj10W3VdLHI8byYmKG89cil9ZWxzZSBlPWooZSxuKSxTLmVhY2godCxmdW5jdGlvbih0LG4scil7aT1lKHQsbixyKSwoaTxzfHxpPT09MS8wJiZvPT09MS8wKSYmKG89dCxzPWkpfSk7cmV0dXJuIG99LFMuc2h1ZmZsZT1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj1DKHQpP3Q6Uy52YWx1ZXModCkscj1uLmxlbmd0aCxpPUFycmF5KHIpLG89MDtvPHI7bysrKWU9Uy5yYW5kb20oMCxvKSxlIT09byYmKGlbb109aVtlXSksaVtlXT1uW29dO3JldHVybiBpfSxTLnNhbXBsZT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIG51bGw9PWV8fG4/KEModCl8fCh0PVMudmFsdWVzKHQpKSx0W1MucmFuZG9tKHQubGVuZ3RoLTEpXSk6Uy5zaHVmZmxlKHQpLnNsaWNlKDAsTWF0aC5tYXgoMCxlKSl9LFMuc29ydEJ5PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZT1qKGUsbiksUy5wbHVjayhTLm1hcCh0LGZ1bmN0aW9uKHQsbixyKXtyZXR1cm57dmFsdWU6dCxpbmRleDpuLGNyaXRlcmlhOmUodCxuLHIpfX0pLnNvcnQoZnVuY3Rpb24odCxlKXt2YXIgbj10LmNyaXRlcmlhLHI9ZS5jcml0ZXJpYTtpZihuIT09cil7aWYobj5yfHx2b2lkIDA9PT1uKXJldHVybiAxO2lmKG48cnx8dm9pZCAwPT09cilyZXR1cm4tMX1yZXR1cm4gdC5pbmRleC1lLmluZGV4fSksInZhbHVlIil9O3ZhciBUPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLG4scil7dmFyIGk9e307cmV0dXJuIG49aihuLHIpLFMuZWFjaChlLGZ1bmN0aW9uKHIsbyl7dChpLHIsbihyLG8sZSkpfSksaX19O1MuZ3JvdXBCeT1UKGZ1bmN0aW9uKHQsZSxuKXtTLmhhcyh0LG4pP3Rbbl0ucHVzaChlKTp0W25dPVtlXX0pLFMuaW5kZXhCeT1UKGZ1bmN0aW9uKHQsZSxuKXt0W25dPWV9KSxTLmNvdW50Qnk9VChmdW5jdGlvbih0LGUsbil7Uy5oYXModCxuKT90W25dKys6dFtuXT0xfSksUy50b0FycmF5PWZ1bmN0aW9uKHQpe3JldHVybiB0P1MuaXNBcnJheSh0KT9nLmNhbGwodCk6Qyh0KT9TLm1hcCh0LFMuaWRlbnRpdHkpOlMudmFsdWVzKHQpOltdfSxTLnNpemU9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/MDpDKHQpP3QubGVuZ3RoOlMua2V5cyh0KS5sZW5ndGh9LFMucGFydGl0aW9uPWZ1bmN0aW9uKHQsZSxuKXtlPWooZSxuKTt2YXIgcj1bXSxpPVtdO3JldHVybiBTLmVhY2godCxmdW5jdGlvbih0LG4sbyl7KGUodCxuLG8pP3I6aSkucHVzaCh0KX0pLFtyLGldfSxTLmZpcnN0PVMuaGVhZD1TLnRha2U9ZnVuY3Rpb24odCxlLG4pe2lmKG51bGwhPXQpcmV0dXJuIG51bGw9PWV8fG4/dFswXTpTLmluaXRpYWwodCx0Lmxlbmd0aC1lKX0sUy5pbml0aWFsPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZy5jYWxsKHQsMCxNYXRoLm1heCgwLHQubGVuZ3RoLShudWxsPT1lfHxuPzE6ZSkpKX0sUy5sYXN0PWZ1bmN0aW9uKHQsZSxuKXtpZihudWxsIT10KXJldHVybiBudWxsPT1lfHxuP3RbdC5sZW5ndGgtMV06Uy5yZXN0KHQsTWF0aC5tYXgoMCx0Lmxlbmd0aC1lKSl9LFMucmVzdD1TLnRhaWw9Uy5kcm9wPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZy5jYWxsKHQsbnVsbD09ZXx8bj8xOmUpfSxTLmNvbXBhY3Q9ZnVuY3Rpb24odCl7cmV0dXJuIFMuZmlsdGVyKHQsUy5pZGVudGl0eSl9O3ZhciBJPWZ1bmN0aW9uIEsodCxlLG4scil7Zm9yKHZhciBpPVtdLG89MCxzPXJ8fDAsdT1BKHQpO3M8dTtzKyspe3ZhciBhPXRbc107aWYoQyhhKSYmKFMuaXNBcnJheShhKXx8Uy5pc0FyZ3VtZW50cyhhKSkpe2V8fChhPUsoYSxlLG4pKTt2YXIgbD0wLGM9YS5sZW5ndGg7Zm9yKGkubGVuZ3RoKz1jO2w8YzspaVtvKytdPWFbbCsrXX1lbHNlIG58fChpW28rK109YSl9cmV0dXJuIGl9O1MuZmxhdHRlbj1mdW5jdGlvbih0LGUpe3JldHVybiBJKHQsZSwhMSl9LFMud2l0aG91dD1mdW5jdGlvbih0KXtyZXR1cm4gUy5kaWZmZXJlbmNlKHQsZy5jYWxsKGFyZ3VtZW50cywxKSl9LFMudW5pcT1TLnVuaXF1ZT1mdW5jdGlvbih0LGUsbixyKXtTLmlzQm9vbGVhbihlKXx8KHI9bixuPWUsZT0hMSksbnVsbCE9biYmKG49aihuLHIpKTtmb3IodmFyIGk9W10sbz1bXSxzPTAsdT1BKHQpO3M8dTtzKyspe3ZhciBhPXRbc10sbD1uP24oYSxzLHQpOmE7ZT8ocyYmbz09PWx8fGkucHVzaChhKSxvPWwpOm4/Uy5jb250YWlucyhvLGwpfHwoby5wdXNoKGwpLGkucHVzaChhKSk6Uy5jb250YWlucyhpLGEpfHxpLnB1c2goYSl9cmV0dXJuIGl9LFMudW5pb249ZnVuY3Rpb24oKXtyZXR1cm4gUy51bmlxKEkoYXJndW1lbnRzLCEwLCEwKSl9LFMuaW50ZXJzZWN0aW9uPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPWFyZ3VtZW50cy5sZW5ndGgscj0wLGk9QSh0KTtyPGk7cisrKXt2YXIgbz10W3JdO2lmKCFTLmNvbnRhaW5zKGUsbykpe2Zvcih2YXIgcz0xO3M8biYmUy5jb250YWlucyhhcmd1bWVudHNbc10sbyk7cysrKTtzPT09biYmZS5wdXNoKG8pfX1yZXR1cm4gZX0sUy5kaWZmZXJlbmNlPWZ1bmN0aW9uKHQpe3ZhciBlPUkoYXJndW1lbnRzLCEwLCEwLDEpO3JldHVybiBTLmZpbHRlcih0LGZ1bmN0aW9uKHQpe3JldHVybiFTLmNvbnRhaW5zKGUsdCl9KX0sUy56aXA9ZnVuY3Rpb24oKXtyZXR1cm4gUy51bnppcChhcmd1bWVudHMpfSxTLnVuemlwPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10JiZTLm1heCh0LEEpLmxlbmd0aHx8MCxuPUFycmF5KGUpLHI9MDtyPGU7cisrKW5bcl09Uy5wbHVjayh0LHIpO3JldHVybiBufSxTLm9iamVjdD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj17fSxyPTAsaT1BKHQpO3I8aTtyKyspZT9uW3Rbcl1dPWVbcl06blt0W3JdWzBdXT10W3JdWzFdO3JldHVybiBufSxTLmZpbmRJbmRleD1zKDEpLFMuZmluZExhc3RJbmRleD1zKC0xKSxTLnNvcnRlZEluZGV4PWZ1bmN0aW9uKHQsZSxuLHIpe249aihuLHIsMSk7Zm9yKHZhciBpPW4oZSksbz0wLHM9QSh0KTtvPHM7KXt2YXIgdT1NYXRoLmZsb29yKChvK3MpLzIpO24odFt1XSk8aT9vPXUrMTpzPXV9cmV0dXJuIG99LFMuaW5kZXhPZj11KDEsUy5maW5kSW5kZXgsUy5zb3J0ZWRJbmRleCksUy5sYXN0SW5kZXhPZj11KC0xLFMuZmluZExhc3RJbmRleCksUy5yYW5nZT1mdW5jdGlvbih0LGUsbil7bnVsbD09ZSYmKGU9dHx8MCx0PTApLG49bnx8MTtmb3IodmFyIHI9TWF0aC5tYXgoTWF0aC5jZWlsKChlLXQpL24pLDApLGk9QXJyYXkociksbz0wO288cjtvKyssdCs9bilpW29dPXQ7cmV0dXJuIGl9O3ZhciBOPWZ1bmN0aW9uKHQsZSxuLHIsaSl7aWYoIShyIGluc3RhbmNlb2YgZSkpcmV0dXJuIHQuYXBwbHkobixpKTt2YXIgbz1FKHQucHJvdG90eXBlKSxzPXQuYXBwbHkobyxpKTtyZXR1cm4gUy5pc09iamVjdChzKT9zOm99O1MuYmluZD1mdW5jdGlvbih0LGUpe2lmKGImJnQuYmluZD09PWIpcmV0dXJuIGIuYXBwbHkodCxnLmNhbGwoYXJndW1lbnRzLDEpKTtpZighUy5pc0Z1bmN0aW9uKHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkJpbmQgbXVzdCBiZSBjYWxsZWQgb24gYSBmdW5jdGlvbiIpO3ZhciBuPWcuY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIGZ1bmN0aW9uIHIoKXtyZXR1cm4gTih0LHIsZSx0aGlzLG4uY29uY2F0KGcuY2FsbChhcmd1bWVudHMpKSl9fSxTLnBhcnRpYWw9ZnVuY3Rpb24odCl7dmFyIGU9Zy5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24gbigpe2Zvcih2YXIgcj0wLGk9ZS5sZW5ndGgsbz1BcnJheShpKSxzPTA7czxpO3MrKylvW3NdPWVbc109PT1TP2FyZ3VtZW50c1tyKytdOmVbc107Zm9yKDtyPGFyZ3VtZW50cy5sZW5ndGg7KW8ucHVzaChhcmd1bWVudHNbcisrXSk7cmV0dXJuIE4odCxuLHRoaXMsdGhpcyxvKX19LFMuYmluZEFsbD1mdW5jdGlvbih0KXt2YXIgZSxuLHI9YXJndW1lbnRzLmxlbmd0aDtpZihyPD0xKXRocm93IG5ldyBFcnJvcigiYmluZEFsbCBtdXN0IGJlIHBhc3NlZCBmdW5jdGlvbiBuYW1lcyIpO2ZvcihlPTE7ZTxyO2UrKyluPWFyZ3VtZW50c1tlXSx0W25dPVMuYmluZCh0W25dLHQpO3JldHVybiB0fSxTLm1lbW9pemU9ZnVuY3Rpb24odCxlKXt2YXIgbj1mdW5jdGlvbiByKG4pe3ZhciBpPXIuY2FjaGUsbz0iIisoZT9lLmFwcGx5KHRoaXMsYXJndW1lbnRzKTpuKTtyZXR1cm4gUy5oYXMoaSxvKXx8KGlbb109dC5hcHBseSh0aGlzLGFyZ3VtZW50cykpLGlbb119O3JldHVybiBuLmNhY2hlPXt9LG59LFMuZGVsYXk9ZnVuY3Rpb24odCxlKXt2YXIgbj1nLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkobnVsbCxuKX0sZSl9LFMuZGVmZXI9Uy5wYXJ0aWFsKFMuZGVsYXksUywxKSxTLnRocm90dGxlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcixpLG8scz1udWxsLHU9MDtufHwobj17fSk7dmFyIGE9ZnVuY3Rpb24oKXt1PW4ubGVhZGluZz09PSExPzA6Uy5ub3coKSxzPW51bGwsbz10LmFwcGx5KHIsaSksc3x8KHI9aT1udWxsKX07cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGw9Uy5ub3coKTt1fHxuLmxlYWRpbmchPT0hMXx8KHU9bCk7dmFyIGM9ZS0obC11KTtyZXR1cm4gcj10aGlzLGk9YXJndW1lbnRzLGM8PTB8fGM+ZT8ocyYmKGNsZWFyVGltZW91dChzKSxzPW51bGwpLHU9bCxvPXQuYXBwbHkocixpKSxzfHwocj1pPW51bGwpKTpzfHxuLnRyYWlsaW5nPT09ITF8fChzPXNldFRpbWVvdXQoYSxjKSksb319LFMuZGVib3VuY2U9ZnVuY3Rpb24odCxlLG4pe3ZhciByLGksbyxzLHUsYT1mdW5jdGlvbiBsKCl7dmFyIGE9Uy5ub3coKS1zO2E8ZSYmYT49MD9yPXNldFRpbWVvdXQobCxlLWEpOihyPW51bGwsbnx8KHU9dC5hcHBseShvLGkpLHJ8fChvPWk9bnVsbCkpKX07cmV0dXJuIGZ1bmN0aW9uKCl7bz10aGlzLGk9YXJndW1lbnRzLHM9Uy5ub3coKTt2YXIgbD1uJiYhcjtyZXR1cm4gcnx8KHI9c2V0VGltZW91dChhLGUpKSxsJiYodT10LmFwcGx5KG8saSksbz1pPW51bGwpLHV9fSxTLndyYXA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gUy5wYXJ0aWFsKGUsdCl9LFMubmVnYXRlPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiF0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LFMuY29tcG9zZT1mdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cyxlPXQubGVuZ3RoLTE7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciBuPWUscj10W2VdLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtuLS07KXI9dFtuXS5jYWxsKHRoaXMscik7cmV0dXJuIHJ9fSxTLmFmdGVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoLS10PDEpcmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0sUy5iZWZvcmU9ZnVuY3Rpb24odCxlKXt2YXIgbjtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4tLXQ+MCYmKG49ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpLHQ8PTEmJihlPW51bGwpLG59fSxTLm9uY2U9Uy5wYXJ0aWFsKFMuYmVmb3JlLDIpO3ZhciBMPSF7dG9TdHJpbmc6bnVsbH0ucHJvcGVydHlJc0VudW1lcmFibGUoInRvU3RyaW5nIiksUj1bInZhbHVlT2YiLCJpc1Byb3RvdHlwZU9mIiwidG9TdHJpbmciLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsImhhc093blByb3BlcnR5IiwidG9Mb2NhbGVTdHJpbmciXTtTLmtleXM9ZnVuY3Rpb24odCl7aWYoIVMuaXNPYmplY3QodCkpcmV0dXJuW107aWYoXylyZXR1cm4gXyh0KTt2YXIgZT1bXTtmb3IodmFyIG4gaW4gdClTLmhhcyh0LG4pJiZlLnB1c2gobik7cmV0dXJuIEwmJmEodCxlKSxlfSxTLmFsbEtleXM9ZnVuY3Rpb24odCl7aWYoIVMuaXNPYmplY3QodCkpcmV0dXJuW107dmFyIGU9W107Zm9yKHZhciBuIGluIHQpZS5wdXNoKG4pO3JldHVybiBMJiZhKHQsZSksZX0sUy52YWx1ZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVMua2V5cyh0KSxuPWUubGVuZ3RoLHI9QXJyYXkobiksaT0wO2k8bjtpKyspcltpXT10W2VbaV1dO3JldHVybiByfSxTLm1hcE9iamVjdD1mdW5jdGlvbih0LGUsbil7ZT1qKGUsbik7Zm9yKHZhciByLGk9Uy5rZXlzKHQpLG89aS5sZW5ndGgscz17fSx1PTA7dTxvO3UrKylyPWlbdV0sc1tyXT1lKHRbcl0scix0KTtyZXR1cm4gc30sUy5wYWlycz1mdW5jdGlvbih0KXtmb3IodmFyIGU9Uy5rZXlzKHQpLG49ZS5sZW5ndGgscj1BcnJheShuKSxpPTA7aTxuO2krKylyW2ldPVtlW2ldLHRbZVtpXV1dO3JldHVybiByfSxTLmludmVydD1mdW5jdGlvbih0KXtmb3IodmFyIGU9e30sbj1TLmtleXModCkscj0wLGk9bi5sZW5ndGg7cjxpO3IrKyllW3RbbltyXV1dPW5bcl07cmV0dXJuIGV9LFMuZnVuY3Rpb25zPVMubWV0aG9kcz1mdW5jdGlvbih0KXt2YXIgZT1bXTtmb3IodmFyIG4gaW4gdClTLmlzRnVuY3Rpb24odFtuXSkmJmUucHVzaChuKTtyZXR1cm4gZS5zb3J0KCl9LFMuZXh0ZW5kPU8oUy5hbGxLZXlzKSxTLmV4dGVuZE93bj1TLmFzc2lnbj1PKFMua2V5cyksUy5maW5kS2V5PWZ1bmN0aW9uKHQsZSxuKXtlPWooZSxuKTtmb3IodmFyIHIsaT1TLmtleXModCksbz0wLHM9aS5sZW5ndGg7bzxzO28rKylpZihyPWlbb10sZSh0W3JdLHIsdCkpcmV0dXJuIHJ9LFMucGljaz1mdW5jdGlvbih0LGUsbil7dmFyIHIsaSxvPXt9LHM9dDtpZihudWxsPT1zKXJldHVybiBvO1MuaXNGdW5jdGlvbihlKT8oaT1TLmFsbEtleXMocykscj1rKGUsbikpOihpPUkoYXJndW1lbnRzLCExLCExLDEpLHI9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBlIGluIG59LHM9T2JqZWN0KHMpKTtmb3IodmFyIHU9MCxhPWkubGVuZ3RoO3U8YTt1Kyspe3ZhciBsPWlbdV0sYz1zW2xdO3IoYyxsLHMpJiYob1tsXT1jKX1yZXR1cm4gb30sUy5vbWl0PWZ1bmN0aW9uKHQsZSxuKXtpZihTLmlzRnVuY3Rpb24oZSkpZT1TLm5lZ2F0ZShlKTtlbHNle3ZhciByPVMubWFwKEkoYXJndW1lbnRzLCExLCExLDEpLFN0cmluZyk7ZT1mdW5jdGlvbih0LGUpe3JldHVybiFTLmNvbnRhaW5zKHIsZSl9fXJldHVybiBTLnBpY2sodCxlLG4pfSxTLmRlZmF1bHRzPU8oUy5hbGxLZXlzLCEwKSxTLmNyZWF0ZT1mdW5jdGlvbih0LGUpe3ZhciBuPUUodCk7cmV0dXJuIGUmJlMuZXh0ZW5kT3duKG4sZSksbn0sUy5jbG9uZT1mdW5jdGlvbih0KXtyZXR1cm4gUy5pc09iamVjdCh0KT9TLmlzQXJyYXkodCk/dC5zbGljZSgpOlMuZXh0ZW5kKHt9LHQpOnR9LFMudGFwPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUodCksdH0sUy5pc01hdGNoPWZ1bmN0aW9uKHQsZSl7dmFyIG49Uy5rZXlzKGUpLHI9bi5sZW5ndGg7aWYobnVsbD09dClyZXR1cm4hcjtmb3IodmFyIGk9T2JqZWN0KHQpLG89MDtvPHI7bysrKXt2YXIgcz1uW29dO2lmKGVbc10hPT1pW3NdfHwhKHMgaW4gaSkpcmV0dXJuITF9cmV0dXJuITB9O3ZhciBxPWZ1bmN0aW9uIFgodCxlLG4scil7aWYodD09PWUpcmV0dXJuIDAhPT10fHwxL3Q9PT0xL2U7aWYobnVsbD09dHx8bnVsbD09ZSlyZXR1cm4gdD09PWU7dCBpbnN0YW5jZW9mIFMmJih0PXQuX3dyYXBwZWQpLGUgaW5zdGFuY2VvZiBTJiYoZT1lLl93cmFwcGVkKTt2YXIgaT12LmNhbGwodCk7aWYoaSE9PXYuY2FsbChlKSlyZXR1cm4hMTtzd2l0Y2goaSl7Y2FzZSJbb2JqZWN0IFJlZ0V4cF0iOmNhc2UiW29iamVjdCBTdHJpbmddIjpyZXR1cm4iIit0PT0iIitlO2Nhc2UiW29iamVjdCBOdW1iZXJdIjpyZXR1cm4rdCE9PSt0PytlIT09K2U6MD09PSt0PzEvK3Q9PT0xL2U6K3Q9PT0rZTtjYXNlIltvYmplY3QgRGF0ZV0iOmNhc2UiW29iamVjdCBCb29sZWFuXSI6cmV0dXJuK3Q9PT0rZX12YXIgcz0iW29iamVjdCBBcnJheV0iPT09aTtpZighcyl7aWYoIm9iamVjdCIhPSgidW5kZWZpbmVkIj09dHlwZW9mIHQ/InVuZGVmaW5lZCI6byh0KSl8fCJvYmplY3QiIT0oInVuZGVmaW5lZCI9PXR5cGVvZiBlPyJ1bmRlZmluZWQiOm8oZSkpKXJldHVybiExO3ZhciB1PXQuY29uc3RydWN0b3IsYT1lLmNvbnN0cnVjdG9yO2lmKHUhPT1hJiYhKFMuaXNGdW5jdGlvbih1KSYmdSBpbnN0YW5jZW9mIHUmJlMuaXNGdW5jdGlvbihhKSYmYSBpbnN0YW5jZW9mIGEpJiYiY29uc3RydWN0b3IiaW4gdCYmImNvbnN0cnVjdG9yImluIGUpcmV0dXJuITF9bj1ufHxbXSxyPXJ8fFtdO2Zvcih2YXIgbD1uLmxlbmd0aDtsLS07KWlmKG5bbF09PT10KXJldHVybiByW2xdPT09ZTtpZihuLnB1c2godCksci5wdXNoKGUpLHMpe2lmKGw9dC5sZW5ndGgsbCE9PWUubGVuZ3RoKXJldHVybiExO2Zvcig7bC0tOylpZighWCh0W2xdLGVbbF0sbixyKSlyZXR1cm4hMX1lbHNle3ZhciBjLGY9Uy5rZXlzKHQpO2lmKGw9Zi5sZW5ndGgsUy5rZXlzKGUpLmxlbmd0aCE9PWwpcmV0dXJuITE7Zm9yKDtsLS07KWlmKGM9ZltsXSwhUy5oYXMoZSxjKXx8IVgodFtjXSxlW2NdLG4scikpcmV0dXJuITF9cmV0dXJuIG4ucG9wKCksci5wb3AoKSwhMH07Uy5pc0VxdWFsPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHEodCxlKX0sUy5pc0VtcHR5PWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10fHwoQyh0KSYmKFMuaXNBcnJheSh0KXx8Uy5pc1N0cmluZyh0KXx8Uy5pc0FyZ3VtZW50cyh0KSk/MD09PXQubGVuZ3RoOjA9PT1TLmtleXModCkubGVuZ3RoKX0sUy5pc0VsZW1lbnQ9ZnVuY3Rpb24odCl7cmV0dXJuISghdHx8MSE9PXQubm9kZVR5cGUpfSxTLmlzQXJyYXk9eXx8ZnVuY3Rpb24odCl7cmV0dXJuIltvYmplY3QgQXJyYXldIj09PXYuY2FsbCh0KX0sUy5pc09iamVjdD1mdW5jdGlvbih0KXt2YXIgZT0idW5kZWZpbmVkIj09dHlwZW9mIHQ/InVuZGVmaW5lZCI6byh0KTtyZXR1cm4iZnVuY3Rpb24iPT09ZXx8Im9iamVjdCI9PT1lJiYhIXR9LFMuZWFjaChbIkFyZ3VtZW50cyIsIkZ1bmN0aW9uIiwiU3RyaW5nIiwiTnVtYmVyIiwiRGF0ZSIsIlJlZ0V4cCIsIkVycm9yIl0sZnVuY3Rpb24odCl7U1siaXMiK3RdPWZ1bmN0aW9uKGUpe3JldHVybiB2LmNhbGwoZSk9PT0iW29iamVjdCAiK3QrIl0ifX0pLFMuaXNBcmd1bWVudHMoYXJndW1lbnRzKXx8KFMuaXNBcmd1bWVudHM9ZnVuY3Rpb24odCl7cmV0dXJuIFMuaGFzKHQsImNhbGxlZSIpfSksImZ1bmN0aW9uIiE9dHlwZW9mLy4vJiYib2JqZWN0IiE9KCJ1bmRlZmluZWQiPT10eXBlb2YgSW50OEFycmF5PyJ1bmRlZmluZWQiOm8oSW50OEFycmF5KSkmJihTLmlzRnVuY3Rpb249ZnVuY3Rpb24odCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHR8fCExfSksUy5pc0Zpbml0ZT1mdW5jdGlvbih0KXtyZXR1cm4gaXNGaW5pdGUodCkmJiFpc05hTihwYXJzZUZsb2F0KHQpKX0sUy5pc05hTj1mdW5jdGlvbih0KXtyZXR1cm4gUy5pc051bWJlcih0KSYmdCE9PSt0fSxTLmlzQm9vbGVhbj1mdW5jdGlvbih0KXtyZXR1cm4gdD09PSEwfHx0PT09ITF8fCJbb2JqZWN0IEJvb2xlYW5dIj09PXYuY2FsbCh0KX0sUy5pc051bGw9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PT10fSxTLmlzVW5kZWZpbmVkPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10fSxTLmhhcz1mdW5jdGlvbih0LGUpe3JldHVybiBudWxsIT10JiZtLmNhbGwodCxlKX0sUy5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGwuXz1jLHRoaXN9LFMuaWRlbnRpdHk9ZnVuY3Rpb24odCl7cmV0dXJuIHR9LFMuY29uc3RhbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHR9fSxTLm5vb3A9ZnVuY3Rpb24oKXt9LFMucHJvcGVydHk9TSxTLnByb3BlcnR5T2Y9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/ZnVuY3Rpb24oKXt9OmZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfX0sUy5tYXRjaGVyPVMubWF0Y2hlcz1mdW5jdGlvbih0KXtyZXR1cm4gdD1TLmV4dGVuZE93bih7fSx0KSxmdW5jdGlvbihlKXtyZXR1cm4gUy5pc01hdGNoKGUsdCl9fSxTLnRpbWVzPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1BcnJheShNYXRoLm1heCgwLHQpKTtlPWsoZSxuLDEpO2Zvcih2YXIgaT0wO2k8dDtpKyspcltpXT1lKGkpO3JldHVybiByfSxTLnJhbmRvbT1mdW5jdGlvbih0LGUpe3JldHVybiBudWxsPT1lJiYoZT10LHQ9MCksdCtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKGUtdCsxKSl9LFMubm93PURhdGUubm93fHxmdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfTt2YXIgRj17IiYiOiImYW1wOyIsIjwiOiImbHQ7IiwiPiI6IiZndDsiLCciJzoiJnF1b3Q7IiwiJyI6IiYjeDI3OyIsImAiOiImI3g2MDsifSxQPVMuaW52ZXJ0KEYpLEI9ZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19LG49Iig/OiIrUy5rZXlzKHQpLmpvaW4oInwiKSsiKSIscj1SZWdFeHAobiksaT1SZWdFeHAobiwiZyIpO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gdD1udWxsPT10PyIiOiIiK3Qsci50ZXN0KHQpP3QucmVwbGFjZShpLGUpOnR9fTtTLmVzY2FwZT1CKEYpLFMudW5lc2NhcGU9QihQKSxTLnJlc3VsdD1mdW5jdGlvbih0LGUsbil7dmFyIHI9bnVsbD09dD92b2lkIDA6dFtlXTtyZXR1cm4gdm9pZCAwPT09ciYmKHI9biksUy5pc0Z1bmN0aW9uKHIpP3IuY2FsbCh0KTpyfTt2YXIgVz0wO1MudW5pcXVlSWQ9ZnVuY3Rpb24odCl7dmFyIGU9KytXKyIiO3JldHVybiB0P3QrZTplfSxTLnRlbXBsYXRlU2V0dGluZ3M9e2V2YWx1YXRlOi88JShbXHNcU10rPyklPi9nLGludGVycG9sYXRlOi88JT0oW1xzXFNdKz8pJT4vZyxlc2NhcGU6LzwlLShbXHNcU10rPyklPi9nfTt2YXIgRD0vKC4pXi8sSD17IiciOiInIiwiXFwiOiJcXCIsIlxyIjoiciIsIlxuIjoibiIsIlx1MjAyOCI6InUyMDI4IiwiXHUyMDI5IjoidTIwMjkifSxVPS9cXHwnfFxyfFxufFx1MjAyOHxcdTIwMjkvZyxWPWZ1bmN0aW9uKHQpe3JldHVybiJcXCIrSFt0XX07Uy50ZW1wbGF0ZT1mdW5jdGlvbih0LGUsbil7IWUmJm4mJihlPW4pLGU9Uy5kZWZhdWx0cyh7fSxlLFMudGVtcGxhdGVTZXR0aW5ncyk7dmFyIHI9UmVnRXhwKFsoZS5lc2NhcGV8fEQpLnNvdXJjZSwoZS5pbnRlcnBvbGF0ZXx8RCkuc291cmNlLChlLmV2YWx1YXRlfHxEKS5zb3VyY2VdLmpvaW4oInwiKSsifCQiLCJnIiksaT0wLG89Il9fcCs9JyI7dC5yZXBsYWNlKHIsZnVuY3Rpb24oZSxuLHIscyx1KXtyZXR1cm4gbys9dC5zbGljZShpLHUpLnJlcGxhY2UoVSxWKSxpPXUrZS5sZW5ndGgsbj9vKz0iJytcbigoX190PSgiK24rIikpPT1udWxsPycnOl8uZXNjYXBlKF9fdCkpK1xuJyI6cj9vKz0iJytcbigoX190PSgiK3IrIikpPT1udWxsPycnOl9fdCkrXG4nIjpzJiYobys9Iic7XG4iK3MrIlxuX19wKz0nIiksZX0pLG8rPSInO1xuIixlLnZhcmlhYmxlfHwobz0id2l0aChvYmp8fHt9KXtcbiIrbysifVxuIiksbz0idmFyIF9fdCxfX3A9JycsX19qPUFycmF5LnByb3RvdHlwZS5qb2luLHByaW50PWZ1bmN0aW9uKCl7X19wKz1fX2ouY2FsbChhcmd1bWVudHMsJycpO307XG4iK28rInJldHVybiBfX3A7XG4iO3RyeXt2YXIgcz1uZXcgRnVuY3Rpb24oZS52YXJpYWJsZXx8Im9iaiIsIl8iLG8pfWNhdGNoKHUpe3Rocm93IHUuc291cmNlPW8sdX12YXIgYT1mdW5jdGlvbih0KXtyZXR1cm4gcy5jYWxsKHRoaXMsdCxTKX0sbD1lLnZhcmlhYmxlfHwib2JqIjtyZXR1cm4gYS5zb3VyY2U9ImZ1bmN0aW9uKCIrbCsiKXtcbiIrbysifSIsYX0sUy5jaGFpbj1mdW5jdGlvbih0KXt2YXIgZT1TKHQpO3JldHVybiBlLl9jaGFpbj0hMCxlfTt2YXIgJD1mdW5jdGlvbih0LGUpe3JldHVybiB0Ll9jaGFpbj9TKGUpLmNoYWluKCk6ZX07Uy5taXhpbj1mdW5jdGlvbih0KXtTLmVhY2goUy5mdW5jdGlvbnModCksZnVuY3Rpb24oZSl7dmFyIG49U1tlXT10W2VdO1MucHJvdG90eXBlW2VdPWZ1bmN0aW9uKCl7dmFyIHQ9W3RoaXMuX3dyYXBwZWRdO3JldHVybiBwLmFwcGx5KHQsYXJndW1lbnRzKSwkKHRoaXMsbi5hcHBseShTLHQpKX19KX0sUy5taXhpbihTKSxTLmVhY2goWyJwb3AiLCJwdXNoIiwicmV2ZXJzZSIsInNoaWZ0Iiwic29ydCIsInNwbGljZSIsInVuc2hpZnQiXSxmdW5jdGlvbih0KXt2YXIgZT1mW3RdO1MucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7dmFyIG49dGhpcy5fd3JhcHBlZDtyZXR1cm4gZS5hcHBseShuLGFyZ3VtZW50cyksInNoaWZ0IiE9PXQmJiJzcGxpY2UiIT09dHx8MCE9PW4ubGVuZ3RofHxkZWxldGUgblswXSwkKHRoaXMsbil9fSksUy5lYWNoKFsiY29uY2F0Iiwiam9pbiIsInNsaWNlIl0sZnVuY3Rpb24odCl7dmFyIGU9Zlt0XTtTLnByb3RvdHlwZVt0XT1mdW5jdGlvbigpe3JldHVybiAkKHRoaXMsZS5hcHBseSh0aGlzLl93cmFwcGVkLGFyZ3VtZW50cykpfX0pLFMucHJvdG90eXBlLnZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dyYXBwZWR9LFMucHJvdG90eXBlLnZhbHVlT2Y9Uy5wcm90b3R5cGUudG9KU09OPVMucHJvdG90eXBlLnZhbHVlLFMucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIiIrdGhpcy5fd3JhcHBlZH0scj1bXSxpPWZ1bmN0aW9uKCl7cmV0dXJuIFN9LmFwcGx5KGUsciksISh2b2lkIDAhPT1pJiYodC5leHBvcnRzPWkpKX0pLmNhbGwodm9pZCAwKX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7dC5leHBvcnRzPXtyZW5kZXJfeF9heGlzX2xhYmVsOmZ1bmN0aW9uKCl7dmFyIHQ9Ik1vZGVsIFBvc2l0aW9uIjt0aGlzLmRpc3BsYXlfYWxpX21hcCYmKHQ9IkFsaWdubWVudCBDb2x1bW4iKSx0aGlzLmNhbGxlZF9vbi5maW5kKCIubG9nb194YXhpcyIpLnJlbW92ZSgpLHRoaXMuY2FsbGVkX29uLnByZXBlbmQoJzxkaXYgY2xhc3M9ImxvZ29feGF4aXMiIGNsYXNzPSJjZW50ZXJlZCIgc3R5bGU9Im1hcmdpbi1sZWZ0OjQwcHgiPjxwIGNsYXNzPSJ4YXhpc190ZXh0IiBzdHlsZT0id2lkdGg6MTBlbTttYXJnaW46MWVtIGF1dG8iPicrdCsiPC9wPjwvZGl2PiIpfSxyZW5kZXJfeV9heGlzX2xhYmVsOmZ1bmN0aW9uKCl7dGhpcy5kb21fZWxlbWVudC5wYXJlbnQoKS5iZWZvcmUoJzxjYW52YXMgY2xhc3M9ImxvZ29feWF4aXMiIGhlaWdodD0iJyt0aGlzLm9wdGlvbnMuaGVpZ2h0KyciIHdpZHRoPSI1NSI+PC9jYW52YXM+Jyk7dmFyIHQ9dGhpcy5jYWxsZWRfb24uZmluZCgiLmxvZ29feWF4aXMiKSxlPShNYXRoLmFicyh0aGlzLmRhdGEubWF4X2hlaWdodCksaXNOYU4odGhpcy5kYXRhLm1pbl9oZWlnaHRfb2JzKT8wOnBhcnNlSW50KHRoaXMuZGF0YS5taW5faGVpZ2h0X29icywxMCksbnVsbCksbj0iSW5mb3JtYXRpb24gQ29udGVudCAoYml0cykiO2U9dFswXS5nZXRDb250ZXh0KCIyZCIpLGUuYmVnaW5QYXRoKCksZS5tb3ZlVG8oNTUsMSksZS5saW5lVG8oNDAsMSksZS5tb3ZlVG8oNTUsdGhpcy5pbmZvX2NvbnRlbnRfaGVpZ2h0KSxlLmxpbmVUbyg0MCx0aGlzLmluZm9fY29udGVudF9oZWlnaHQpLGUubW92ZVRvKDU1LHRoaXMuaW5mb19jb250ZW50X2hlaWdodC8yKSxlLmxpbmVUbyg0MCx0aGlzLmluZm9fY29udGVudF9oZWlnaHQvMiksZS5saW5lV2lkdGg9MSxlLnN0cm9rZVN0eWxlPSIjNjY2NjY2IixlLnN0cm9rZSgpLGUuZmlsbFN0eWxlPSIjNjY2NjY2IixlLnRleHRBbGlnbj0icmlnaHQiLGUuZm9udD0iYm9sZCAxMHB4IEFyaWFsIixlLnRleHRCYXNlbGluZT0idG9wIixlLmZpbGxUZXh0KHBhcnNlRmxvYXQodGhpcy5kYXRhLm1heF9oZWlnaHQpLnRvRml4ZWQoMSksMzgsMCksZS50ZXh0QmFzZWxpbmU9Im1pZGRsZSIsZS5maWxsVGV4dChwYXJzZUZsb2F0KHRoaXMuZGF0YS5tYXhfaGVpZ2h0LzIpLnRvRml4ZWQoMSksMzgsdGhpcy5pbmZvX2NvbnRlbnRfaGVpZ2h0LzIpLGUuZmlsbFRleHQoIjAiLDM4LHRoaXMuaW5mb19jb250ZW50X2hlaWdodCksInNjb3JlIj09PXRoaXMuZGF0YS5oZWlnaHRfY2FsYyYmKG49IlNjb3JlIChiaXRzKSIpLGUuc2F2ZSgpLGUudHJhbnNsYXRlKDUsdGhpcy5oZWlnaHQvMi0yMCksZS5yb3RhdGUoLU1hdGguUEkvMiksZS50ZXh0QWxpZ249ImNlbnRlciIsZS5mb250PSJub3JtYWwgMTJweCBBcmlhbCIsZS5maWxsVGV4dChuLDEsMCksZS5yZXN0b3JlKCksZS5maWxsVGV4dCgib2NjdXBhbmN5Iiw1NSx0aGlzLmluZm9fY29udGVudF9oZWlnaHQrNyksdGhpcy5zaG93X2luc2VydHMmJihlLmZpbGxUZXh0KCJpbnMuIHByb2IuIiw1MCwyODApLGUuZmlsbFRleHQoImlucy4gbGVuLiIsNDYsMjk2KSl9fX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7dmFyIG49bnVsbDt0LmV4cG9ydHM9ZnVuY3Rpb24oKXtpZighbil7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7bj0hKCF0LmdldENvbnRleHR8fCF0LmdldENvbnRleHQoIjJkIikpfXJldHVybiBufX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7dC5leHBvcnRzPXtBOiIjRkY5OTY2IixDOiIjMDA5OTk5IixEOiIjRkYwMDAwIixFOiIjQ0MwMDMzIixGOiIjMDBGRjAwIixHOiIjZjJmMjBjIixIOiIjNjYwMDMzIixJOiIjQ0M5OTMzIixLOiIjNjYzMzAwIixMOiIjRkY5OTMzIixNOiIjQ0M5OUNDIixOOiIjMzM2NjY2IixQOiIjMDA5OUZGIixROiIjNjY2NkNDIixSOiIjOTkwMDAwIixTOiIjMDAwMEZGIixUOiIjMDBGRkZGIixWOiIjRkZDQzMzIixXOiIjNjZDQzY2IixZOiIjMDA2NjAwIn19LGZ1bmN0aW9uKHQsZSl7InVzZSBzdHJpY3QiO3QuZXhwb3J0cz17QToiI2NiZjc1MSIsQzoiIzVlYzBjYyIsRzoiI2ZmZGY1OSIsVDoiI2I1MWYxNiIsVToiI2I1MWYxNiJ9fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByPW4oNSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXt0LmZpbmQoIi5sb2dvX3NldHRpbmdzX3N3aXRjaCwgLmxvZ29fc2V0dGluZ3MgLmNsb3NlIikub24oImNsaWNrIixmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCkscigiLmxvZ29fc2V0dGluZ3MiKS50b2dnbGUoKX0pLHQuZmluZCgiLmxvZ29fcmVzZXQiKS5vbigiY2xpY2siLGZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKSxlLmNoYW5nZVpvb20oe3RhcmdldDplLmRlZmF1bHRfem9vbX0pfSksdC5maW5kKCIubG9nb19jaGFuZ2UiKS5vbigiY2xpY2siLGZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKX0pLHQuZmluZCgiLmxvZ29fem9vbWluIikub24oImNsaWNrIixmdW5jdGlvbih0KXt0LnByZXZlbnREZWZhdWx0KCksZS5jaGFuZ2Vab29tKHtkaXN0YW5jZTouMSxkaXJlY3Rpb246IisifSl9KSx0LmZpbmQoIi5sb2dvX3pvb21vdXQiKS5vbigiY2xpY2siLGZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKSxlLmNoYW5nZVpvb20oe2Rpc3RhbmNlOi4xLGRpcmVjdGlvbjoiLSJ9KX0pLHQuZmluZCgiLmxvZ29fc2NhbGUiKS5vbigiY2hhbmdlIixmdW5jdGlvbih0KXtlLnRvZ2dsZVNjYWxlKHRoaXMudmFsdWUpfSksdC5maW5kKCIubG9nb19jb2xvciIpLm9uKCJjaGFuZ2UiLGZ1bmN0aW9uKHQpe2UudG9nZ2xlQ29sb3JzY2hlbWUodGhpcy52YWx1ZSl9KSx0LmZpbmQoIi5sb2dvX2FsaV9tYXAiKS5vbigiY2hhbmdlIixmdW5jdGlvbih0KXtlLnRvZ2dsZUFsaU1hcCh0aGlzLnZhbHVlKX0pLHQuZmluZCgiLmxvZ29fcG9zaXRpb24iKS5vbigiY2hhbmdlIixmdW5jdGlvbigpe3RoaXMudmFsdWUubWF0Y2goL15cZCskL20pJiZlLnNjcm9sbFRvQ29sdW1uKHRoaXMudmFsdWUsMSl9KSxuLm9uKCJkYmxjbGljayIsZnVuY3Rpb24obil7Y29uc29sZS5sb2coImRibGNsaWNrIixlKSxvZmZzZXQ9ZS5sb2dvX2dyYXBoaWMub2Zmc2V0KCkseD1wYXJzZUludChuLnBhZ2VYLW9mZnNldC5sZWZ0LDEwKSx3aW5kb3dfcG9zaXRpb249bi5wYWdlWC10LnBhcmVudCgpLm9mZnNldCgpLmxlZnQsY29sPWUuY29sdW1uRnJvbUNvb3JkaW5hdGVzKHgpLGNvbnNvbGUubG9nKCJjb2wiLGNvbCksY3VycmVudD1lLnpvb20sY3VycmVudDwxP2UuY2hhbmdlWm9vbSh7dGFyZ2V0OjEsb2Zmc2V0OndpbmRvd19wb3NpdGlvbixjb2x1bW46Y29sfSk6ZS5jaGFuZ2Vab29tKHt0YXJnZXQ6LjMsb2Zmc2V0OndpbmRvd19wb3NpdGlvbixjb2x1bW46Y29sfSl9KSxyKGRvY3VtZW50KS5vbih0LmF0dHIoImlkIikrIi5zY3JvbGxlZFRvIixmdW5jdGlvbih0LG4scixpKXtlLnJlbmRlcih7dGFyZ2V0Om59KX0pLHIoZG9jdW1lbnQpLm9uKCJrZXlkb3duIixmdW5jdGlvbih0KXt0LmN0cmxLZXl8fCg2MSE9PXQud2hpY2gmJjEwNyE9PXQud2hpY2h8fCh6b29tKz0uMSxlLmNoYW5nZVpvb20oe2Rpc3RhbmNlOi4xLGRpcmVjdGlvbjoiKyJ9KSksMTA5IT09dC53aGljaCYmMCE9PXQud2hpY2h8fCh6b29tLT0uMSxlLmNoYW5nZVpvb20oe2Rpc3RhbmNlOi4xLGRpcmVjdGlvbjoiLSJ9KSkpfSl9fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO189big3NSk7dmFyIHI9big3NyksaT1uKDg0KSxvPW4oODMpLHM9bigyKSx1PW4oNzYpLGE9big4MCksbD1uKDgyKSxjPW4oNSk7dC5leHBvcnRzPXMuZXh0ZW5kKHtvcHRpb25zOnt4YXhpczohMCx5YXhpczohMCxoZWlnaHQ6MzAwLGNvbHVtbl93aWR0aDozNCxkZWJ1ZzohMCxzY2FsZV9oZWlnaHRfZW5hYmxlZDohMCxzY2FsZWRfbWF4OiEwLHpvb21fYnV0dG9uczohMCxjb2xvcnNjaGVtZToiZGVmYXVsdCIsZGF0YTp2b2lkIDAsc3RhcnQ6MSxlbmQ6dm9pZCAwLHpvb206LjQsY29sb3JzOnZvaWQgMCxkaXZpZGVyOiExLHNob3dfcHJvYnM6ITEsZGl2aWRlcl9zdGVwOjUsc2hvd19kaXZpZGVyOiExLGJvcmRlcjohMSxzZXR0aW5nczohMSxzY3JvbGxlcjohMCxwb3NpdGlvbk1hcmtlcjohMH0sbG9hZERlZmF1bHQ6ZnVuY3Rpb24odCl7dGhpcy5kYXRhPXQuZGF0YSx0aGlzLmRpc3BsYXlfYWxpX21hcD0wLHRoaXMuYWxwaGFiZXQ9dC5kYXRhLmFscGhhYmV0fHwiZG5hIix0aGlzLnN0YXJ0PXQuc3RhcnQsdGhpcy56b29tPXBhcnNlRmxvYXQodC56b29tKXx8LjQsdGhpcy5kZWZhdWx0X3pvb209dGhpcy56b29tLHRoaXMuY29sdW1uX3dpZHRoPXQuY29sdW1uX3dpZHRoLHRoaXMuaGVpZ2h0PXQuaGVpZ2h0LHRoaXMuY2FudmFzX3dpZHRoPTVlMyx0aGlzLnNjYWxlX2hlaWdodF9lbmFibGVkPXQuc2NhbGVfaGVpZ2h0X2VuYWJsZWQsdGhpcy5zY3JvbGxtZT1udWxsLHRoaXMucHJldmlvdXNfdGFyZ2V0PTAsdGhpcy5yZW5kZXJlZD1bXSx0aGlzLnByZXZpb3VzX3pvb209MCx2b2lkIDA9PXRoaXMuZGF0YS5tYXhfaGVpZ2h0JiYodGhpcy5kYXRhLm1heF9oZWlnaHQ9dGhpcy5jYWxjTWF4SGVpZ2h0KHRoaXMuZGF0YS5oZWlnaHRBcnIpKSx0aGlzLmRhdGEuaW5zZXJ0X3Byb2JzJiZ0aGlzLmRhdGEuZGVsZXRlX3Byb2JzfHwodGhpcy5vcHRpb25zLnNob3dfcHJvYnM9ITEpLHQuc2NhbGVkX21heD90aGlzLmRhdGEubWF4X2hlaWdodD10LmRhdGEubWF4X2hlaWdodF9vYnN8fHRoaXMuZGF0YS5tYXhfaGVpZ2h0fHwyOnRoaXMuZGF0YS5tYXhfaGVpZ2h0PXQuZGF0YS5tYXhfaGVpZ2h0X3RoZW9yeXx8dGhpcy5kYXRhLm1heF9oZWlnaHR8fDIsdC5jb2xvcnM/dGhpcy5jaGFuZ2VDb2xvcnModC5jb2xvcnMpOiJhYSI9PT10aGlzLmFscGhhYmV0Pyh0aGlzLmFhX2NvbG9ycz1uKDc4KSx0aGlzLmNoYW5nZUNvbG9ycyh0aGlzLmFhX2NvbG9ycykpOih0aGlzLmRuYV9jb2xvcnM9big3OSksdGhpcy5jaGFuZ2VDb2xvcnModGhpcy5kbmFfY29sb3JzKSl9LGluaXRpYWxpemU6ZnVuY3Rpb24odCl7aWYoIXIoKSlyZXR1cm4gdm9pZCh0aGlzLmVsLnRleHRDb250ZW50PSJZb3VyIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IGNhbnZhcy4iKTt2b2lkIDA9PXQuZGF0YSYmKHRoaXMuZWwudGV4dENvbnRlbnQ9Ik5vIGRhdGEgYWRkZWQuIiksXy5leHRlbmQodGhpcy5vcHRpb25zLHQpO3ZhciBlPXRoaXMub3B0aW9ucztpZih0aGlzLmxvYWREZWZhdWx0KGUpLHRoaXMub3B0aW9ucy5zaG93X3Byb2JzP3RoaXMuZGF0YS5wcm9jZXNzaW5nJiYvXm9ic2VydmVkfHdlaWdodGVkLy50ZXN0KHRoaXMuZGF0YS5wcm9jZXNzaW5nKT8odGhpcy5zaG93X2luc2VydHM9MCx0aGlzLmluZm9fY29udGVudF9oZWlnaHQ9dGhpcy5oZWlnaHQtMTQpOih0aGlzLnNob3dfaW5zZXJ0cz0xLHRoaXMuaW5mb19jb250ZW50X2hlaWdodD10aGlzLmhlaWdodC00NCk6dGhpcy5pbmZvX2NvbnRlbnRfaGVpZ2h0PXRoaXMuaGVpZ2h0LHRoaXMuJGVsPWModGhpcy5lbCksdGhpcy5pbml0RGl2cygpLHRoaXMub3B0aW9ucy5zZXR0aW5ncyl7dmFyIG49bCh0aGlzLGUpO3RoaXMuJGVsLmFwcGVuZChuKX1hKHRoaXMuJGVsLHRoaXMsdGhpcy5sb2dvX2dyYXBoaWMpfSxpbml0RGl2czpmdW5jdGlvbigpe3ZhciB0PWYoImRpdiIpO3QuY2xhc3NOYW1lPSJsb2dvX2dyYXBoaWMiLHRoaXMubG9nb19ncmFwaGljPWModCk7dmFyIGU9ZigiZGl2Iik7aWYoZS5jbGFzc05hbWU9ImxvZ29fY29udGFpbmVyIixlLnN0eWxlLmhlaWdodD10aGlzLmhlaWdodCx0aGlzLmNvbnRhaW5lcj1jKGUpLHRoaXMuY29udGFpbmVyLmFwcGVuZCh0KSx0aGlzLiRlbC5hcHBlbmQoZSksdGhpcy5vcHRpb25zLmRpdmlkZXIpe3ZhciBuPWYoImRpdiIpO24uY2xhc3NOYW1lPSJsb2dvX2RpdmlkZXIiLHRoaXMuJGVsLmFwcGVuZChuKX10aGlzLmRvbV9lbGVtZW50PWModCksdGhpcy5jYWxsZWRfb249dGhpcy4kZWwsdGhpcy5vcHRpb25zLnhheGlzJiZ1LnJlbmRlcl94X2F4aXNfbGFiZWwuY2FsbCh0aGlzKSx0aGlzLm9wdGlvbnMueWF4aXM/dS5yZW5kZXJfeV9heGlzX2xhYmVsLmNhbGwodGhpcyk6dGhpcy5jb250YWluZXJbMF0uc3R5bGUubWFyZ2luTGVmdD0iMHB4In0scmVuZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIGkuY2FsbCh0aGlzKSx0aGlzfSxjaGFuZ2VDb2xvcnM6ZnVuY3Rpb24odCl7dGhpcy5jb2xvcnM9dCx2b2lkIDAhPXQmJnZvaWQgMCE9dC50eXBlJiYodGhpcy5jb2xvcnNjaGVtZT0iZHluYW1pYyIpLHRoaXMuYnVpbGRBbHBoYWJldCgpfSxidWlsZEFscGhhYmV0OmZ1bmN0aW9uKCl7dGhpcy5sZXR0ZXJzPXt9O3ZhciB0PXRoaXMuY29sb3JzO2lmKCJkeW5hbWljIj09dGhpcy5jb2xvcnNjaGVtZSl7dmFyIGU9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaIi5zcGxpdCgiIik7dD17fSxlLmZvckVhY2goZnVuY3Rpb24oZSl7dFtlXT0iIn0pfWZvcih2YXIgbiBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkobikpe3ZhciByPXtjb2xvcjp0W25dfTt0aGlzLmxldHRlcnNbbl09bmV3IG8obixyKX19LHRvZ2dsZUNvbG9yc2NoZW1lOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY3VycmVudENvbHVtbigpO3Q/ImRlZmF1bHQiPT09dD90aGlzLmNvbG9yc2NoZW1lPSJkZWZhdWx0Ijp0aGlzLmNvbG9yc2NoZW1lPSJjb25zZW5zdXMiOiJkZWZhdWx0Ij09PXRoaXMuY29sb3JzY2hlbWU/dGhpcy5jb2xvcnNjaGVtZT0iY29uc2Vuc3VzIjp0aGlzLmNvbG9yc2NoZW1lPSJkZWZhdWx0Iix0aGlzLnJlbmRlcmVkPVtdLHRoaXMuc2Nyb2xsbWUucmVmbG93KCksdGhpcy5zY3JvbGxUb0NvbHVtbihlKzEpLHRoaXMuc2Nyb2xsVG9Db2x1bW4oZSl9LHRvZ2dsZVNjYWxlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY3VycmVudENvbHVtbigpO3Q/Im9icyI9PT10P3RoaXMuZGF0YS5tYXhfaGVpZ2h0PXRoaXMuZGF0YS5tYXhfaGVpZ2h0X29iczp0aGlzLmRhdGEubWF4X2hlaWdodD10aGlzLmRhdGEubWF4X2hlaWdodF90aGVvcnk6dGhpcy5kYXRhLm1heF9oZWlnaHQ9PT10aGlzLmRhdGEubWF4X2hlaWdodF9vYnM/dGhpcy5kYXRhLm1heF9oZWlnaHQ9dGhpcy5kYXRhLm1heF9oZWlnaHRfdGhlb3J5OnRoaXMuZGF0YS5tYXhfaGVpZ2h0PXRoaXMuZGF0YS5tYXhfaGVpZ2h0X29icyx0aGlzLnJlbmRlcmVkPVtdLHRoaXMubG9nb1lBeGlzJiZ0aGlzLmxvZ29ZQXhpcy5yZW1vdmUoKSx1LnJlbmRlcl95X2F4aXNfbGFiZWwuY2FsbCh0aGlzKSx0aGlzLnNjcm9sbG1lLnJlZmxvdygpLHRoaXMuc2Nyb2xsVG9Db2x1bW4oZSsxKSx0aGlzLnNjcm9sbFRvQ29sdW1uKGUpfSx0b2dnbGVBbGlNYXA6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jdXJyZW50Q29sdW1uKCk7dD8ibW9kZWwiPT09dD90aGlzLmRpc3BsYXlfYWxpX21hcD0wOnRoaXMuZGlzcGxheV9hbGlfbWFwPTE6MT09PXRoaXMuZGlzcGxheV9hbGlfbWFwP3RoaXMuZGlzcGxheV9hbGlfbWFwPTA6dGhpcy5kaXNwbGF5X2FsaV9tYXA9MSx1LnJlbmRlcl94X2F4aXNfbGFiZWwodGhpcyksdGhpcy5yZW5kZXJlZD1bXSx0aGlzLnNjcm9sbG1lLnJlZmxvdygpLHRoaXMuc2Nyb2xsVG9Db2x1bW4oZSsxKSx0aGlzLnNjcm9sbFRvQ29sdW1uKGUpfSxjdXJyZW50Q29sdW1uOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5zY3JvbGxtZS5zY3JvbGxlci5nZXRWYWx1ZXMoKS5sZWZ0LGU9dGhpcy5jb2x1bW5fd2lkdGgqdGhpcy56b29tLG49dC9lLHI9dGhpcy5jb250YWluZXIud2lkdGgoKS9lLzI7cmV0dXJuIE1hdGguY2VpbChuK3IpfSxjaGFuZ2Vab29tOmZ1bmN0aW9uKHQpe3ZhciBlPS4zLG49bnVsbDtpZih0LnRhcmdldD9lPXQudGFyZ2V0OnQuZGlzdGFuY2UmJihlPShwYXJzZUZsb2F0KHRoaXMuem9vbSktcGFyc2VGbG9hdCh0LmRpc3RhbmNlKSkudG9GaXhlZCgxKSwiKyI9PT10LmRpcmVjdGlvbiYmKGU9KHBhcnNlRmxvYXQodGhpcy56b29tKStwYXJzZUZsb2F0KHQuZGlzdGFuY2UpKS50b0ZpeGVkKDEpKSksZT4xP2U9MTplPC4xJiYoZT0uMSksbj10aGlzLmxvZ29fZ3JhcGhpYy53aWR0aCgpKmUvdGhpcy56b29tLG4+dGhpcy5jb250YWluZXIud2lkdGgoKSlpZih0LmNvbHVtbil7dGhpcy56b29tPWUsdGhpcy5yZW5kZXIoe3pvb206dGhpcy56b29tfSksdGhpcy5zY3JvbGxtZS5yZWZsb3coKTt2YXIgcj10aGlzLmNvb3JkaW5hdGVzRnJvbUNvbHVtbih0LmNvbHVtbik7dGhpcy5zY3JvbGxtZS5zY3JvbGxlci5zY3JvbGxUbyhyLXQub2Zmc2V0KX1lbHNle3ZhciBpPXRoaXMuY3VycmVudENvbHVtbigpO3RoaXMuem9vbT1lLHRoaXMucmVuZGVyKHt6b29tOnRoaXMuem9vbX0pLHRoaXMuc2Nyb2xsbWUucmVmbG93KCksdGhpcy5zY3JvbGxUb0NvbHVtbihpKX1yZXR1cm4gdGhpcy56b29tfSxjb2x1bW5Gcm9tQ29vcmRpbmF0ZXM6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGguY2VpbCh0Lyh0aGlzLmNvbHVtbl93aWR0aCp0aGlzLnpvb20pKX0sY29vcmRpbmF0ZXNGcm9tQ29sdW1uOmZ1bmN0aW9uKHQpe3JldHVybih0LTEpKih0aGlzLmNvbHVtbl93aWR0aCp0aGlzLnpvb20pK3RoaXMuY29sdW1uX3dpZHRoKnRoaXMuem9vbS8yfSxzY3JvbGxUb0NvbHVtbjpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMubG9nb19jb250YWluZXIud2lkdGgoKS8yLHI9dGhpcy5jb29yZGluYXRlc0Zyb21Db2x1bW4odCk7dGhpcy5zY3JvbGxtZS5zY3JvbGxlci5zY3JvbGxUbyhyLW4sMCxlKX0sY2FsY01heEhlaWdodDpmdW5jdGlvbih0KXtyZXR1cm4gdC5yZWR1Y2UoZnVuY3Rpb24odCxlKXt2YXIgbj0wO2Zvcih2YXIgciBpbiBlKW4rPWVbcl07cmV0dXJuIG4+dD9uOnR9LDApfX0pO3ZhciBmPWZ1bmN0aW9uKHQpe3JldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHQpfX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj1uKDUpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3ZhciBuPXIoJzxmb3JtIGNsYXNzPSJsb2dvX2Zvcm0iPjxmaWVsZHNldD48bGFiZWwgZm9yPSJwb3NpdGlvbiI+Q29sdW1uIG51bWJlcjwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIG5hbWU9InBvc2l0aW9uIiBjbGFzcz0ibG9nb19wb3NpdGlvbiI+PC9pbnB1dD48YnV0dG9uIGNsYXNzPSJidXR0b24gbG9nb19jaGFuZ2UiPkdvPC9idXR0b24+PC9maWVsZHNldD48L2Zvcm0+JyksaT1yKCc8ZGl2IGNsYXNzPSJsb2dvX3NldHRpbmdzIj48L2Rpdj4nKTtpZihpLmFwcGVuZCgnPHNwYW4gY2xhc3M9ImNsb3NlIj54PC9zcGFuPicpLHQuc2NhbGVfaGVpZ2h0X2VuYWJsZWQmJnQuZGF0YS5tYXhfaGVpZ2h0X29iczx0LmRhdGEubWF4X2hlaWdodF90aGVvcnkpe3ZhciBvPSIiLHM9IiIsdT0iIixhPSIiO3QuZGF0YS5tYXhfaGVpZ2h0X29icz09PXQuZGF0YS5tYXhfaGVpZ2h0P289ImNoZWNrZWQiOnM9ImNoZWNrZWQifXZhciBsPSc8ZmllbGRzZXQ+PGxlZ2VuZD5TY2FsZTwvbGVnZW5kPjxsYWJlbD48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9InNjYWxlIiBjbGFzcz0ibG9nb19zY2FsZSIgdmFsdWU9Im9icyIgJytvKyIvPk1heGltdW0gT2JzZXJ2ZWQgIithKyc8L2xhYmVsPjwvYnI+PGxhYmVsPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0ic2NhbGUiIGNsYXNzPSJsb2dvX3NjYWxlIiB2YWx1ZT0idGhlb3J5IiAnK3MrIi8+TWF4aW11bSBUaGVvcmV0aWNhbCAiK3UrIjwvbGFiZWw+PC9maWVsZHNldD4iO2lmKGkuYXBwZW5kKGwpLCJzY29yZSIhPT10LmRhdGEuaGVpZ2h0X2NhbGMmJiJhYSI9PT10LmRhdGEuYWxwaGFiZXQmJnQuZGF0YS5wcm9ic19hcnIpe3ZhciBjPW51bGwsZj1udWxsLGg9IiIsZD0iIjsiZGVmYXVsdCI9PT10LmNvbG9yc2NoZW1lP2M9ImNoZWNrZWQiOmY9ImNoZWNrZWQiLGUuaGVscCYmKGg9JzxhIGNsYXNzPSJoZWxwIiBocmVmPSIvaGVscCNjb2xvcnNfZGVmYXVsdCIgdGl0bGU9IkVhY2ggbGV0dGVyIHJlY2VpdmVzIGl0cyBvd24gY29sb3IuIj48c3BhbiBhcmlhLWhpZGRlbj0idHJ1ZSIgZGF0YS1pY29uPSI/Ij48L3NwYW4+PHNwYW4gY2xhc3M9InJlYWRlci10ZXh0Ij5oZWxwPC9zcGFuPjwvYT4nLGQ9JzxhIGNsYXNzPSJoZWxwIiBocmVmPSIvaGVscCNjb2xvcnNfY29uc2Vuc3VzIiB0aXRsZT0iTGV0dGVycyBhcmUgY29sb3JlZCBhcyBpbiBDbHVzdGFseCBhbmQgSmFsdmlldywgd2l0aCBjb2xvcnMgZGVwZW5kaW5nIG9uIGNvbXBvc2l0aW9uIG9mIHRoZSBjb2x1bW4uIj48c3BhbiBhcmlhLWhpZGRlbj0idHJ1ZSIgZGF0YS1pY29uPSI/Ij48L3NwYW4+PHNwYW4gY2xhc3M9InJlYWRlci10ZXh0Ij5oZWxwPC9zcGFuPjwvYT4nKTt2YXIgcD0nPGZpZWxkc2V0PjxsZWdlbmQ+Q29sb3IgU2NoZW1lPC9sZWdlbmQ+PGxhYmVsPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iY29sb3IiIGNsYXNzPSJsb2dvX2NvbG9yIiB2YWx1ZT0iZGVmYXVsdCIgJytjKyIvPkRlZmF1bHQgIitoKyc8L2xhYmVsPjwvYnI+PGxhYmVsPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iY29sb3IiIGNsYXNzPSJsb2dvX2NvbG9yIiB2YWx1ZT0iY29uc2Vuc3VzIiAnK2YrIi8+Q29uc2Vuc3VzIENvbG9ycyAiK2QrIjwvbGFiZWw+PC9maWVsZHNldD4iO2kuYXBwZW5kKHApfWlmKHQuZGF0YS5hbGlfbWFwKXt2YXIgZz1udWxsLHY9bnVsbCxtPSIiLHk9IiI7MD09PXQuZGlzcGxheV9hbGlfbWFwP2c9ImNoZWNrZWQiOnY9ImNoZWNrZWQiLGUuaGVscCYmKG09JzxhIGNsYXNzPSJoZWxwIiBocmVmPSIvaGVscCNjb29yZHNfbW9kZWwiIHRpdGxlPSJUaGUgY29vcmRpbmF0ZXMgYWxvbmcgdGhlIHRvcCBvZiB0aGUgcGxvdCBzaG93IHRoZSBtb2RlbCBwb3NpdGlvbi4iPjxzcGFuIGFyaWEtaGlkZGVuPSJ0cnVlIiBkYXRhLWljb249Ij8iPjwvc3Bhbj48c3BhbiBjbGFzcz0icmVhZGVyLXRleHQiPmhlbHA8L3NwYW4+PC9hPicseT0nPGEgY2xhc3M9ImhlbHAiIGhyZWY9Ii9oZWxwI2Nvb3Jkc19hbGkiIHRpdGxlPSJUaGUgY29vcmRpbmF0ZXMgYWxvbmcgdGhlIHRvcCBvZiB0aGUgcGxvdCBzaG93IHRoZSBjb2x1bW4gaW4gdGhlIGFsaWdubWVudCBhc3NvY2lhdGVkIHdpdGggdGhlIG1vZGVsIj48c3BhbiBhcmlhLWhpZGRlbj0idHJ1ZSIgZGF0YS1pY29uPSI/Ij48L3NwYW4+PHNwYW4gY2xhc3M9InJlYWRlci10ZXh0Ij5oZWxwPC9zcGFuPjwvYT4nKTt2YXIgXz0nPGZpZWxkc2V0PjxsZWdlbmQ+Q29vcmRpbmF0ZXM8L2xlZ2VuZD48bGFiZWw+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJjb29yZHMiIGNsYXNzPSJsb2dvX2FsaV9tYXAiIHZhbHVlPSJtb2RlbCIgJytnKyIvPk1vZGVsICIrbSsnPC9sYWJlbD48L2JyPjxsYWJlbD48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9ImNvb3JkcyIgY2xhc3M9ImxvZ29fYWxpX21hcCIgdmFsdWU9ImFsaWdubWVudCIgJyt2KyIvPkFsaWdubWVudCAiK3krIjwvbGFiZWw+PC9maWVsZHNldD4iO2kuYXBwZW5kKF8pfXZhciBiPXIoJzxkaXYgY2xhc3M9ImxvZ29fY29udHJvbHMiPjwvZGl2PicpO3JldHVybiB0Lnpvb21fZW5hYmxlZCYmYi5hcHBlbmQoJzxidXR0b24gY2xhc3M9ImxvZ29fem9vbW91dCBidXR0b24iPi08L2J1dHRvbj48YnV0dG9uIGNsYXNzPSJsb2dvX3pvb21pbiBidXR0b24iPis8L2J1dHRvbj4nKSxpLmNoaWxkcmVuKCkubGVuZ3RoPjAmJihiLmFwcGVuZCgnPGJ1dHRvbiBjbGFzcz0ibG9nb19zZXR0aW5nc19zd2l0Y2ggYnV0dG9uIj5TZXR0aW5nczwvYnV0dG9uPicpLGIuYXBwZW5kKGkpKSxuLmFwcGVuZChiKSxufX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7ZT1lfHx7fSx0aGlzLnZhbHVlPXQsdGhpcy53aWR0aD1wYXJzZUludChlLndpZHRoLDEwKXx8MTAwLCJXIj09PXRoaXMudmFsdWUmJih0aGlzLndpZHRoKz0zMCp0aGlzLndpZHRoLzEwMCksdGhpcy5oZWlnaHQ9cGFyc2VJbnQoZS5oZWlnaHQsMTApfHwxMDAsdGhpcy5jb2xvcj1lLmNvbG9yfHwiIzAwMDAwMCIsdGhpcy5mb250U2l6ZT1lLmZvbnRTaXplfHwxMzgsdGhpcy5zY2FsZWQ9ZnVuY3Rpb24oKXt9LHRoaXMuZHJhdz1mdW5jdGlvbih0LGUsbixyLGksbyl7dmFyIHM9ZS90aGlzLmhlaWdodCx1PW4vdGhpcy53aWR0aCxhPXQuZm9udDt0LnRyYW5zZm9ybSh1LDAsMCxzLHIsaSksdC5maWxsU3R5bGU9b3x8dGhpcy5jb2xvcix0LnRleHRBbGlnbj0iY2VudGVyIix0LmZvbnQ9ImJvbGQgIit0aGlzLmZvbnRTaXplKyJweCBBcmlhbCIsdC5maWxsVGV4dCh0aGlzLnZhbHVlLDAsMCksdC5zZXRUcmFuc2Zvcm0oMSwwLDAsMSwwLDApLHQuZmlsbFN0eWxlPSIjMDAwMDAwIix0LmZvbnQ9YX19fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCxlLG4scixpKXt2YXIgbz1zKHQpLmZpbmQoIiNjYW52XyIrcik7cmV0dXJuIG8ubGVuZ3RofHwocyh0KS5hcHBlbmQoJzxjYW52YXMgY2xhc3M9ImNhbnZhc19sb2dvIiBpZD0iY2Fudl8nK3IrJyIgIGhlaWdodD0iJytlKyciIHdpZHRoPSInK24rJyIgc3R5bGU9ImxlZnQ6JytpKnIrJ3B4Ij48L2NhbnZhcz4nKSwKbz1zKHQpLmZpbmQoIiNjYW52XyIrcikpLHMobykuYXR0cigid2lkdGgiLG4pLmF0dHIoImhlaWdodCIsZSksb1swXX12YXIgaT1uKDg2KSxvPW4oODUpLHM9big1KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYodGhpcy5kYXRhKXt0PXR8fHt9O3ZhciBlPXQuem9vbXx8dGhpcy56b29tLG49dC50YXJnZXR8fDEscz0odC5zY2FsZWR8fG51bGwsdGhpcy5kb21fZWxlbWVudC5wYXJlbnQoKS5hdHRyKCJ3aWR0aCIpKSx1PTEsYT1udWxsLGw9bnVsbCxjPTA7aWYodGhpcy5wcmV2aW91c190YXJnZXQ9bix0LnN0YXJ0JiYodGhpcy5zdGFydD10LnN0YXJ0KSx0LmVuZCYmKHRoaXMuZW5kPXQuZW5kKSxlPD0uMT9lPS4xOmU+PTEmJihlPTEpLHRoaXMuem9vbT1lLGE9dGhpcy5lbmR8fHRoaXMuZGF0YS5oZWlnaHRBcnIubGVuZ3RoLGw9dGhpcy5zdGFydHx8MSxhPWE+dGhpcy5kYXRhLmhlaWdodEFyci5sZW5ndGg/dGhpcy5kYXRhLmhlaWdodEFyci5sZW5ndGg6YSxhPWE8bD9sOmEsbD1sPmE/YTpsLGw9bD4xP2w6MSx0aGlzLnk9dGhpcy5oZWlnaHQtMjAsdGhpcy5tYXhfd2lkdGg9dGhpcy5jb2x1bW5fd2lkdGgqKGEtbCsxKSxzPnRoaXMubWF4X3dpZHRoJiYoZT0xLHRoaXMuem9vbV9lbmFibGVkPSExKSx0aGlzLnpvb209ZSx0aGlzLnpvb21lZF9jb2x1bW49dGhpcy5jb2x1bW5fd2lkdGgqZSx0aGlzLnRvdGFsX3dpZHRoPXRoaXMuem9vbWVkX2NvbHVtbiooYS1sKzEpLGU8MSlmb3IoO3RoaXMudG90YWxfd2lkdGg8cyYmKHRoaXMuem9vbSs9LjEsdGhpcy56b29tZWRfY29sdW1uPXRoaXMuY29sdW1uX3dpZHRoKnRoaXMuem9vbSx0aGlzLnRvdGFsX3dpZHRoPXRoaXMuem9vbWVkX2NvbHVtbiooYS1sKzEpLHRoaXMuem9vbV9lbmFibGVkPSExLCEoZT49MSkpOyk7bj50aGlzLnRvdGFsX3dpZHRoJiYobj10aGlzLnRvdGFsX3dpZHRoKSx0aGlzLmRvbV9lbGVtZW50LmF0dHIoe3dpZHRoOnRoaXMudG90YWxfd2lkdGgrInB4In0pLmNzcyh7d2lkdGg6dGhpcy50b3RhbF93aWR0aCsicHgifSksdGhpcy5jYW52YXNfd2lkdGg9dGhpcy50b3RhbF93aWR0aDt2YXIgZj1NYXRoLmNlaWwodGhpcy50b3RhbF93aWR0aC90aGlzLmNhbnZhc193aWR0aCk7Zm9yKHRoaXMuY29sdW1uc19wZXJfY2FudmFzPU1hdGguY2VpbCh0aGlzLmNhbnZhc193aWR0aC90aGlzLnpvb21lZF9jb2x1bW4pLHRoaXMucHJldmlvdXNfem9vbSE9PXRoaXMuem9vbSYmKHRoaXMuZG9tX2VsZW1lbnQuZmluZCgiY2FudmFzIikucmVtb3ZlKCksdGhpcy5wcmV2aW91c196b29tPXRoaXMuem9vbSx0aGlzLnJlbmRlcmVkPVtdKSx0aGlzLmNhbnZhc2VzPVtdLHRoaXMuY29udGV4dHM9W10sYz0wO2M8ZjtjKyspe3ZhciBoPXRoaXMuY29sdW1uc19wZXJfY2FudmFzKmMrbCxkPWgrdGhpcy5jb2x1bW5zX3Blcl9jYW52YXMtMTtkPmEmJihkPWEpO3ZhciBwPShkLWgrMSkqdGhpcy56b29tZWRfY29sdW1uO3A+dSYmKHU9cCk7dmFyIGc9dSpjLHY9ZytwO2lmKG48dit2LzImJm4+Zy1nLzIpaWYodGhpcy5jYW52YXNlc1tjXT1yKHRoaXMuZG9tX2VsZW1lbnQsdGhpcy5oZWlnaHQscCxjLHUpLHRoaXMuY29udGV4dHNbY109dGhpcy5jYW52YXNlc1tjXS5nZXRDb250ZXh0KCIyZCIpLHRoaXMuY29udGV4dHNbY10uc2V0VHJhbnNmb3JtKDEsMCwwLDEsMCwwKSx0aGlzLmNvbnRleHRzW2NdLmNsZWFyUmVjdCgwLDAscCx0aGlzLmhlaWdodCksdGhpcy5jb250ZXh0c1tjXS5maWxsU3R5bGU9IiNmZmZmZmYiLHRoaXMuY29udGV4dHNbY10uZmlsbFJlY3QoMCwwLHYsdGhpcy5oZWlnaHQpLHRoaXMuem9vbWVkX2NvbHVtbj4xMil7dmFyIG09cGFyc2VJbnQoMTAqZSwxMCk7bT1tPjEwPzEwOm0sdGhpcy5kZWJ1ZyYmby5jYWxsKHRoaXMsaCxkLGMsMSksaS5jYWxsKHRoaXMsaCxkLGMsbSl9ZWxzZSBvLmNhbGwodGhpcyxoLGQsYyl9IXRoaXMuc2Nyb2xsbWUmJnRoaXMub3B0aW9ucy5zY3JvbGxlciYmKHRoaXMuc2Nyb2xsbWU9bmV3IEVhc3lTY3JvbGxlcih0aGlzLmRvbV9lbGVtZW50WzBdLHtzY3JvbGxpbmdYOjEsc2Nyb2xsaW5nWTowLGV2ZW50VGFyZ2V0OnRoaXMuY2FsbGVkX29ufSkpLDEhPT1uJiZ0aGlzLnNjcm9sbG1lLnJlZmxvdygpfX19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0LGUsbixyLGksbyxzLHUpe3ZhciBhPSIjZmZmZmZmIjt1PyhpPi4xP2E9IiNkNzMwMWYiOmk+LjA1P2E9IiNmYzhkNTkiOmk+LjAzJiYoYT0iI2ZkY2M4YSIpLHQuZmlsbFN0eWxlPWEsdC5maWxsUmVjdChlLG4rMTUsciwxMCksYT0iI2ZmZmZmZiIsbz45P2E9IiNkNzMwMWYiOm8+Nz9hPSIjZmM4ZDU5IjpvPjQmJihhPSIjZmRjYzhhIiksdC5maWxsU3R5bGU9YSx0LmZpbGxSZWN0KGUsbiszMCxyLDEwKSk6bis9MzAsYT0iI2ZmZmZmZiIsczwuNzU/YT0iIzIxNzFiNSI6czwuODU/YT0iIzZiYWVkNiI6czwuOTUmJihhPSIjYmRkN2U3IiksdC5maWxsU3R5bGU9YSx0LmZpbGxSZWN0KGUsbixyLDEwKX12YXIgaT1uKDQ0KSxvPW4oNDYpLHM9big0NSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuLHUpe3ZhciBhPTAsbD10LGM9bnVsbCxmPTAsaD1NYXRoLmFicyh0aGlzLmRhdGEubWF4X2hlaWdodCksZD1NYXRoLmFicyh0aGlzLmRhdGEubWluX2hlaWdodF9vYnMpLHA9aCtkLGc9TWF0aC5yb3VuZCgxMDAqTWF0aC5hYnModGhpcy5kYXRhLm1heF9oZWlnaHQpL3ApLHY9TWF0aC5yb3VuZCh0aGlzLmluZm9fY29udGVudF9oZWlnaHQqZy8xMDApLG09KHRoaXMuaW5mb19jb250ZW50X2hlaWdodC12LDEwKTtmb3IoZj10O2Y8PWU7ZisrKXtpZih0aGlzLmRhdGEubW1saW5lJiYxPT09dGhpcy5kYXRhLm1tbGluZVtmLTFdKXRoaXMuY29udGV4dHNbbl0uZmlsbFN0eWxlPSIjY2NjY2NjIix0aGlzLmNvbnRleHRzW25dLmZpbGxSZWN0KGEsMTAsdGhpcy56b29tZWRfY29sdW1uLHRoaXMuaGVpZ2h0LTQwKTtlbHNle3ZhciB5PXRoaXMuZGF0YS5oZWlnaHRBcnJbZi0xXSxfPTAsYj0oeS5sZW5ndGgsMCk7Zm9yKHZhciBiIGluIHkpe3ZhciB4PVtiLHlbYl1dO2lmKHhbMV0+LjAxKXt2YXIgdz1wYXJzZUZsb2F0KHhbMV0pL3RoaXMuZGF0YS5tYXhfaGVpZ2h0LFM9YSxrPSh0aGlzLmluZm9fY29udGVudF9oZWlnaHQtMikqdyxqPXRoaXMuaW5mb19jb250ZW50X2hlaWdodC0yLV8tayxPPW51bGw7Tz0iZHluYW1pYyI9PT10aGlzLmNvbG9yc2NoZW1lP3RoaXMuY29sb3JzLmdldENvbG9yKHhbMF0se3BvczpmLTF9KToiY29uc2Vuc3VzIj09PXRoaXMuY29sb3JzY2hlbWU/dGhpcy5jbWFwW2YtMV1beFswXV18fCIjN2E3YTdhIjp0aGlzLmNvbG9yc1t4WzBdXSx1Pyh0aGlzLmNvbnRleHRzW25dLnN0cm9rZVN0eWxlPU8sdGhpcy5jb250ZXh0c1tuXS5zdHJva2VSZWN0KFMsaix0aGlzLnpvb21lZF9jb2x1bW4saykpOih0aGlzLmNvbnRleHRzW25dLmZpbGxTdHlsZT1PLHRoaXMuY29udGV4dHNbbl0uZmlsbFJlY3QoUyxqLHRoaXMuem9vbWVkX2NvbHVtbixrKSksXys9a319fXRoaXMuem9vbTwuMj9tPTIwOnRoaXMuem9vbTwuMyYmKG09MTApLHRoaXMub3B0aW9ucy5wb3NpdGlvbk1hcmtlciYmZiVtPT09MCYmKHRoaXMub3B0aW9ucy5zaG93X3Byb2JzJiZvKHRoaXMuY29udGV4dHNbbl0sYSt0aGlzLnpvb21lZF9jb2x1bW4sdGhpcy5oZWlnaHQtMzAscGFyc2VGbG9hdCh0aGlzLmhlaWdodCksIiNkZGRkZGQiKSxvKHRoaXMuY29udGV4dHNbbl0sYSt0aGlzLnpvb21lZF9jb2x1bW4sMCw1KSxjPXRoaXMuZGlzcGxheV9hbGlfbWFwP3RoaXMuZGF0YS5hbGlfbWFwW2YtMV06bCxzKHRoaXMuY29udGV4dHNbbl0sYS0yLDEwLHRoaXMuem9vbWVkX2NvbHVtbixjLDEwLCEwKSksdGhpcy5vcHRpb25zLnNob3dfcHJvYnMmJnIodGhpcy5jb250ZXh0c1tuXSxhLHRoaXMuaGVpZ2h0LTQyLHRoaXMuem9vbWVkX2NvbHVtbix0aGlzLmRhdGEuaW5zZXJ0X3Byb2JzW2YtMV0sdGhpcy5kYXRhLmluc2VydF9sZW5ndGhzW2YtMV0sdGhpcy5kYXRhLmRlbGV0ZV9wcm9ic1tmLTFdLHRoaXMuc2hvd19pbnNlcnRzKSx0aGlzLm9wdGlvbnMuc2hvd19wcm9icyYmKHRoaXMuc2hvd19pbnNlcnRzP2kodGhpcy5jb250ZXh0c1tuXSx0aGlzLmhlaWdodC00NSx0aGlzLnRvdGFsX3dpZHRoKTppKHRoaXMuY29udGV4dHNbbl0sdGhpcy5oZWlnaHQtMTUsdGhpcy50b3RhbF93aWR0aCkpLHRoaXMub3B0aW9ucy5ib3JkZXImJmkodGhpcy5jb250ZXh0c1tuXSwwLHRoaXMudG90YWxfd2lkdGgpLGErPXRoaXMuem9vbWVkX2NvbHVtbixsKyt9fX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQsZSxuLHIsbyxzLHUpe3ZhciBhPW4tNCxsPSIjZmZmZmZmIixjPSIjNTU1NTU1Ijt1JiYoYT1uLTM1KSxvPC43NT8obD0iIzIxNzFiNSIsYz0iI2ZmZmZmZiIpOm88Ljg1P2w9IiM2YmFlZDYiOm88Ljk1JiYobD0iI2JkZDdlNyIpLGkodCxlLGEsbyxzLHIsbCxjKX1mdW5jdGlvbiBpKHQsZSxuLHIsaSxvLHMsdSl7dC5mb250PWkrInB4IEFyaWFsIix0LmZpbGxTdHlsZT1zLHQuZmlsbFJlY3QoZSxuLTEwLG8sMTQpLHQudGV4dEFsaWduPSJjZW50ZXIiLHQuZmlsbFN0eWxlPXUsdC5maWxsVGV4dChyLGUrby8yLG4pfWZ1bmN0aW9uIG8odCxlKXt2YXIgbj1lLnJhbGlnbj9lLngrdC56b29tZWRfY29sdW1uOmUueCxyPWUucmFsaWduP2UueCsyOmUueDtsKHQuY29udGV4dHNbZS5jb250ZXh0X251bV0sbix0LmhlaWdodC0zMCwtMzAtdC5oZWlnaHQsIiNkZGRkZGQiKSxsKHQuY29udGV4dHNbZS5jb250ZXh0X251bV0sbiwwLDUpLGModC5jb250ZXh0c1tlLmNvbnRleHRfbnVtXSxyLDEwLHQuem9vbWVkX2NvbHVtbixlLmNvbHVtbl9udW0sZS5mb250c2l6ZSxlLnJhbGlnbil9ZnVuY3Rpb24gcyh0LGUsbixyLG8scyl7dmFyIHU9bi0yMCxhPSIjZmZmZmZmIixjPSIjNTU1NTU1IjtvPi4xPyhhPSIjZDczMDFmIixjPSIjZmZmZmZmIik6bz4uMDU/YT0iI2ZjOGQ1OSI6bz4uMDMmJihhPSIjZmRjYzhhIiksaSh0LGUsdSxvLHMscixhLGMpLG8+LjAzJiZsKHQsZStyLG4tMzAsLTMwLW4sYSl9ZnVuY3Rpb24gdSh0LGUsbixyLG8scyl7dmFyIHU9IiNmZmZmZmYiLGE9IiM1NTU1NTUiO28+OT8odT0iI2Q3MzAxZiIsYT0iI2ZmZmZmZiIpOm8+Nz91PSIjZmM4ZDU5IjpvPjQmJih1PSIjZmRjYzhhIiksaSh0LGUsbixvLHMscix1LGEpfXZhciBhPW4oNDQpLGw9big0NiksYz1uKDQ1KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4saSl7dmFyIGM9MCxmPXQsaD1udWxsLGQ9MCxwPU1hdGguYWJzKHRoaXMuZGF0YS5tYXhfaGVpZ2h0KSxnPWlzTmFOKHRoaXMuZGF0YS5taW5faGVpZ2h0X29icyk/MDpwYXJzZUludCh0aGlzLmRhdGEubWluX2hlaWdodF9vYnMsMTApLHY9cCtNYXRoLmFicyhnKSxtPU1hdGgucm91bmQoMTAwKk1hdGguYWJzKHRoaXMuZGF0YS5tYXhfaGVpZ2h0KS92KSx5PU1hdGgucm91bmQodGhpcy5pbmZvX2NvbnRlbnRfaGVpZ2h0Km0vMTAwKSxfPXRoaXMuaW5mb19jb250ZW50X2hlaWdodC15O2Zvcih5L3RoaXMuaW5mb19jb250ZW50X2hlaWdodCxfL3RoaXMuaW5mb19jb250ZW50X2hlaWdodCxlKzM8PXRoaXMuZW5kJiYoZSs9MyksZD10O2Q8PWU7ZCsrKXtpZih0aGlzLmRhdGEubW1saW5lJiYxPT09dGhpcy5kYXRhLm1tbGluZVtkLTFdKXRoaXMuY29udGV4dHNbbl0uZmlsbFN0eWxlPSIjY2NjY2NjIix0aGlzLmNvbnRleHRzW25dLmZpbGxSZWN0KGMsMTAsdGhpcy56b29tZWRfY29sdW1uLHRoaXMuaGVpZ2h0LTQwKTtlbHNle3ZhciBiPXRoaXMuZGF0YS5oZWlnaHRBcnJbZC0xXSx4PVtdO2lmKGIpe3ZhciB3PTAsUz0oYi5sZW5ndGgsMCksaz1udWxsO2Zvcih2YXIgUyBpbiBiKXt2YXIgaj1iW1NdLE89W1Msal0sRT1jK3RoaXMuem9vbWVkX2NvbHVtbi8yLE09bnVsbDtpZihPWzFdPi4wMSl7TT1wYXJzZUZsb2F0KE9bMV0pL3RoaXMuZGF0YS5tYXhfaGVpZ2h0O3ZhciB6PXRoaXMuaW5mb19jb250ZW50X2hlaWdodC0yLXcsQT0odGhpcy5pbmZvX2NvbnRlbnRfaGVpZ2h0LTIpKk07eFtTXT1bQSx0aGlzLnpvb21lZF9jb2x1bW4sRSx6XSx3Kz1BfX1mb3IodmFyIFMgaW4gYil4W1NdJiZ0aGlzLmxldHRlcnNbU10mJihrPSJkeW5hbWljIj09PXRoaXMuY29sb3JzY2hlbWU/dGhpcy5jb2xvcnMuZ2V0Q29sb3IoUyx7cG9zOmQtMX0pOiJjb25zZW5zdXMiPT09dGhpcy5jb2xvcnNjaGVtZT90aGlzLmNtYXBbZC0xXVtTXXx8IiM3YTdhN2EiOm51bGwsdGhpcy5sZXR0ZXJzW1NdLmRyYXcodGhpcy5jb250ZXh0c1tuXSx4W1NdWzBdLHhbU11bMV0seFtTXVsyXSx4W1NdWzNdLGspKX19aD10aGlzLmRpc3BsYXlfYWxpX21hcD90aGlzLmRhdGEuYWxpX21hcFtkLTFdOmYsdGhpcy5vcHRpb25zLnNob3dfZGl2aWRlciYmKHRoaXMuem9vbTwuNz9kJXRoaXMub3B0aW9ucy5kaXZpZGVyX3N0ZXA9PT0wJiZvKHRoaXMse2NvbnRleHRfbnVtOm4seDpjLGZvbnRzaXplOjEwLGNvbHVtbl9udW06aCxyYWxpZ246ITB9KTpvKHRoaXMse2NvbnRleHRfbnVtOm4seDpjLGZvbnRzaXplOmksY29sdW1uX251bTpofSkpLHRoaXMub3B0aW9ucy5zaG93X3Byb2JzJiYocih0aGlzLmNvbnRleHRzW25dLGMsdGhpcy5oZWlnaHQsdGhpcy56b29tZWRfY29sdW1uLHRoaXMuZGF0YS5kZWxldGVfcHJvYnNbZC0xXSxpLHRoaXMuc2hvd19pbnNlcnRzKSxsKHRoaXMuY29udGV4dHNbbl0sYyx0aGlzLmhlaWdodC0xNSw1KSx0aGlzLnNob3dfaW5zZXJ0cyYmKHModGhpcy5jb250ZXh0c1tuXSxjLHRoaXMuaGVpZ2h0LHRoaXMuem9vbWVkX2NvbHVtbix0aGlzLmRhdGEuaW5zZXJ0X3Byb2JzW2QtMV0saSksdSh0aGlzLmNvbnRleHRzW25dLGMsdGhpcy5oZWlnaHQtNSx0aGlzLnpvb21lZF9jb2x1bW4sdGhpcy5kYXRhLmluc2VydF9sZW5ndGhzW2QtMV0saSksbCh0aGlzLmNvbnRleHRzW25dLGMsdGhpcy5oZWlnaHQtNDUsNSksbCh0aGlzLmNvbnRleHRzW25dLGMsdGhpcy5oZWlnaHQtMzAsNSkpKSxjKz10aGlzLnpvb21lZF9jb2x1bW4sZisrfXRoaXMub3B0aW9ucy5zaG93X3Byb2JzJiYodGhpcy5zaG93X2luc2VydHMmJihhKHRoaXMuY29udGV4dHNbbl0sdGhpcy5oZWlnaHQtMzAsdGhpcy50b3RhbF93aWR0aCksYSh0aGlzLmNvbnRleHRzW25dLHRoaXMuaGVpZ2h0LTQ1LHRoaXMudG90YWxfd2lkdGgpKSxhKHRoaXMuY29udGV4dHNbbl0sdGhpcy5oZWlnaHQtMTUsdGhpcy50b3RhbF93aWR0aCkpLHRoaXMub3B0aW9ucy5ib3JkZXImJmEodGhpcy5jb250ZXh0c1tuXSwwLHRoaXMudG90YWxfd2lkdGgpfX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7dmFyIG49d2luZG93LkhUTUxDYW52YXNFbGVtZW50JiZ3aW5kb3cuSFRNTENhbnZhc0VsZW1lbnQucHJvdG90eXBlLHI9d2luZG93LkJsb2ImJmZ1bmN0aW9uKCl7dHJ5e3JldHVybiBCb29sZWFuKG5ldyBCbG9iKX1jYXRjaCh0KXtyZXR1cm4hMX19KCksaT1yJiZ3aW5kb3cuVWludDhBcnJheSYmZnVuY3Rpb24oKXt0cnl7cmV0dXJuIDEwMD09PW5ldyBCbG9iKFtuZXcgVWludDhBcnJheSgxMDApXSkuc2l6ZX1jYXRjaCh0KXtyZXR1cm4hMX19KCksbz13aW5kb3cuQmxvYkJ1aWxkZXJ8fHdpbmRvdy5XZWJLaXRCbG9iQnVpbGRlcnx8d2luZG93Lk1vekJsb2JCdWlsZGVyfHx3aW5kb3cuTVNCbG9iQnVpbGRlcixzPShyfHxvKSYmd2luZG93LmF0b2ImJndpbmRvdy5BcnJheUJ1ZmZlciYmd2luZG93LlVpbnQ4QXJyYXkmJmZ1bmN0aW9uKHQpe3ZhciBlLG4scyx1LGEsbDtmb3IoZT10LnNwbGl0KCIsIilbMF0uaW5kZXhPZigiYmFzZTY0Iik+PTA/YXRvYih0LnNwbGl0KCIsIilbMV0pOmRlY29kZVVSSUNvbXBvbmVudCh0LnNwbGl0KCIsIilbMV0pLG49bmV3IEFycmF5QnVmZmVyKGUubGVuZ3RoKSxzPW5ldyBVaW50OEFycmF5KG4pLHU9MDt1PGUubGVuZ3RoO3UrPTEpc1t1XT1lLmNoYXJDb2RlQXQodSk7cmV0dXJuIGE9dC5zcGxpdCgiLCIpWzBdLnNwbGl0KCI6IilbMV0uc3BsaXQoIjsiKVswXSxyP25ldyBCbG9iKFtpP3M6bl0se3R5cGU6YX0pOihsPW5ldyBvLGwuYXBwZW5kKG4pLGwuZ2V0QmxvYihhKSl9O3dpbmRvdy5IVE1MQ2FudmFzRWxlbWVudCYmIW4udG9CbG9iJiYobi5tb3pHZXRBc0ZpbGU/bi50b0Jsb2I9ZnVuY3Rpb24odCxlLHIpe3QociYmbi50b0RhdGFVUkwmJnM/cyh0aGlzLnRvRGF0YVVSTChlLHIpKTp0aGlzLm1vekdldEFzRmlsZSgiYmxvYiIsZSkpfTpuLnRvRGF0YVVSTCYmcyYmKG4udG9CbG9iPWZ1bmN0aW9uKHQsZSxuKXt0KHModGhpcy50b0RhdGFVUkwoZSxuKSkpfSkpLHQuZXhwb3J0cz1zfSxmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0IjsvKiEgQHNvdXJjZSBodHRwOi8vcHVybC5lbGlncmV5LmNvbS9naXRodWIvRmlsZVNhdmVyLmpzL2Jsb2IvbWFzdGVyL0ZpbGVTYXZlci5qcyAqLwp2YXIgZT1lfHwidW5kZWZpbmVkIiE9dHlwZW9mIG5hdmlnYXRvciYmbmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2ImJm5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iLmJpbmQobmF2aWdhdG9yKXx8ZnVuY3Rpb24odCl7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBuYXZpZ2F0b3J8fCEvTVNJRSBbMS05XVwuLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKXt2YXIgZT10LmRvY3VtZW50LG49ZnVuY3Rpb24oKXtyZXR1cm4gdC5VUkx8fHQud2Via2l0VVJMfHx0fSxyPWUuY3JlYXRlRWxlbWVudE5TKCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiwiYSIpLGk9IXQuZXh0ZXJuYWxIb3N0JiYiZG93bmxvYWQiaW4gcixvPWZ1bmN0aW9uKG4pe3ZhciByPWUuY3JlYXRlRXZlbnQoIk1vdXNlRXZlbnRzIik7ci5pbml0TW91c2VFdmVudCgiY2xpY2siLCEwLCExLHQsMCwwLDAsMCwwLCExLCExLCExLCExLDAsbnVsbCksbi5kaXNwYXRjaEV2ZW50KHIpfSxzPXQud2Via2l0UmVxdWVzdEZpbGVTeXN0ZW0sdT10LnJlcXVlc3RGaWxlU3lzdGVtfHxzfHx0Lm1velJlcXVlc3RGaWxlU3lzdGVtLGE9ZnVuY3Rpb24oZSl7KHQuc2V0SW1tZWRpYXRlfHx0LnNldFRpbWVvdXQpKGZ1bmN0aW9uKCl7dGhyb3cgZX0sMCl9LGw9ImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSIsYz0wLGY9W10saD1mdW5jdGlvbigpe2Zvcih2YXIgdD1mLmxlbmd0aDt0LS07KXt2YXIgZT1mW3RdOyJzdHJpbmciPT10eXBlb2YgZT9uKCkucmV2b2tlT2JqZWN0VVJMKGUpOmUucmVtb3ZlKCl9Zi5sZW5ndGg9MH0sZD1mdW5jdGlvbih0LGUsbil7ZT1bXS5jb25jYXQoZSk7Zm9yKHZhciByPWUubGVuZ3RoO3ItLTspe3ZhciBpPXRbIm9uIitlW3JdXTtpZigiZnVuY3Rpb24iPT10eXBlb2YgaSl0cnl7aS5jYWxsKHQsbnx8dCl9Y2F0Y2gobyl7YShvKX19fSxwPWZ1bmN0aW9uKGUsYSl7dmFyIGgscCxnLHY9dGhpcyxtPWUudHlwZSx5PSExLF89ZnVuY3Rpb24oKXt2YXIgdD1uKCkuY3JlYXRlT2JqZWN0VVJMKGUpO3JldHVybiBmLnB1c2godCksdH0sYj1mdW5jdGlvbigpe2Qodiwid3JpdGVzdGFydCBwcm9ncmVzcyB3cml0ZSB3cml0ZWVuZCIuc3BsaXQoIiAiKSl9LHg9ZnVuY3Rpb24oKXsheSYmaHx8KGg9XyhlKSkscD9wLmxvY2F0aW9uLmhyZWY9aDp3aW5kb3cub3BlbihoLCJfYmxhbmsiKSx2LnJlYWR5U3RhdGU9di5ET05FLGIoKX0sdz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtpZih2LnJlYWR5U3RhdGUhPT12LkRPTkUpcmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0sUz17Y3JlYXRlOiEwLGV4Y2x1c2l2ZTohMX07cmV0dXJuIHYucmVhZHlTdGF0ZT12LklOSVQsYXx8KGE9ImRvd25sb2FkIiksaT8oaD1fKGUpLHIuaHJlZj1oLHIuZG93bmxvYWQ9YSxvKHIpLHYucmVhZHlTdGF0ZT12LkRPTkUsdm9pZCBiKCkpOih0LmNocm9tZSYmbSYmbSE9PWwmJihnPWUuc2xpY2V8fGUud2Via2l0U2xpY2UsZT1nLmNhbGwoZSwwLGUuc2l6ZSxsKSx5PSEwKSxzJiYiZG93bmxvYWQiIT09YSYmKGErPSIuZG93bmxvYWQiKSwobT09PWx8fHMpJiYocD10KSx1PyhjKz1lLnNpemUsdm9pZCB1KHQuVEVNUE9SQVJZLGMsdyhmdW5jdGlvbih0KXt0LnJvb3QuZ2V0RGlyZWN0b3J5KCJzYXZlZCIsUyx3KGZ1bmN0aW9uKHQpe3ZhciBuPWZ1bmN0aW9uKCl7dC5nZXRGaWxlKGEsUyx3KGZ1bmN0aW9uKHQpe3QuY3JlYXRlV3JpdGVyKHcoZnVuY3Rpb24obil7bi5vbndyaXRlZW5kPWZ1bmN0aW9uKGUpe3AubG9jYXRpb24uaHJlZj10LnRvVVJMKCksZi5wdXNoKHQpLHYucmVhZHlTdGF0ZT12LkRPTkUsZCh2LCJ3cml0ZWVuZCIsZSl9LG4ub25lcnJvcj1mdW5jdGlvbigpe3ZhciB0PW4uZXJyb3I7dC5jb2RlIT09dC5BQk9SVF9FUlImJngoKX0sIndyaXRlc3RhcnQgcHJvZ3Jlc3Mgd3JpdGUgYWJvcnQiLnNwbGl0KCIgIikuZm9yRWFjaChmdW5jdGlvbih0KXtuWyJvbiIrdF09dlsib24iK3RdfSksbi53cml0ZShlKSx2LmFib3J0PWZ1bmN0aW9uKCl7bi5hYm9ydCgpLHYucmVhZHlTdGF0ZT12LkRPTkV9LHYucmVhZHlTdGF0ZT12LldSSVRJTkd9KSx4KX0pLHgpfTt0LmdldEZpbGUoYSx7Y3JlYXRlOiExfSx3KGZ1bmN0aW9uKHQpe3QucmVtb3ZlKCksbigpfSksdyhmdW5jdGlvbih0KXt0LmNvZGU9PT10Lk5PVF9GT1VORF9FUlI/bigpOngoKX0pKX0pLHgpfSkseCkpOnZvaWQgeCgpKX0sZz1wLnByb3RvdHlwZSx2PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBwKHQsZSl9O3JldHVybiBnLmFib3J0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0LnJlYWR5U3RhdGU9dC5ET05FLGQodCwiYWJvcnQiKX0sZy5yZWFkeVN0YXRlPWcuSU5JVD0wLGcuV1JJVElORz0xLGcuRE9ORT0yLGcuZXJyb3I9Zy5vbndyaXRlc3RhcnQ9Zy5vbnByb2dyZXNzPWcub253cml0ZT1nLm9uYWJvcnQ9Zy5vbmVycm9yPWcub253cml0ZWVuZD1udWxsLHQuYWRkRXZlbnRMaXN0ZW5lcigidW5sb2FkIixoLCExKSx2LnVubG9hZD1mdW5jdGlvbigpe2goKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoInVubG9hZCIsaCwhMSl9LHZ9fSgidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGZ8fCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3d8fCh2b2lkIDApLmNvbnRlbnQpLG49d2luZG93LmRlZmluZTsidW5kZWZpbmVkIj09dHlwZW9mIG4mJiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93LmFsbW9uZCYmImRlZmluZSJpbiB3aW5kb3cuYWxtb25kJiYobj13aW5kb3cuYWxtb25kLmRlZmluZSksInVuZGVmaW5lZCIhPXR5cGVvZiB0JiZudWxsIT09dD90LmV4cG9ydHM9ZToidW5kZWZpbmVkIiE9dHlwZW9mIG4mJm51bGwhPT1uJiZudWxsIT1uLmFtZCYmbigic2F2ZUFzIixbXSxmdW5jdGlvbigpe3JldHVybiBlfSl9KS5jYWxsKGUsbigyMCkodCkpfSxmdW5jdGlvbih0LGUpeyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgdD1bXTtyZXR1cm4gdC50b1N0cmluZz1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTx0aGlzLmxlbmd0aDtlKyspe3ZhciBuPXRoaXNbZV07blsyXT90LnB1c2goIkBtZWRpYSAiK25bMl0rInsiK25bMV0rIn0iKTp0LnB1c2goblsxXSl9cmV0dXJuIHQuam9pbigiIil9LHQuaT1mdW5jdGlvbihlLG4peyJzdHJpbmciPT10eXBlb2YgZSYmKGU9W1tudWxsLGUsIiJdXSk7Zm9yKHZhciByPXt9LGk9MDtpPHRoaXMubGVuZ3RoO2krKyl7dmFyIG89dGhpc1tpXVswXTsibnVtYmVyIj09dHlwZW9mIG8mJihyW29dPSEwKX1mb3IoaT0wO2k8ZS5sZW5ndGg7aSsrKXt2YXIgcz1lW2ldOyJudW1iZXIiPT10eXBlb2Ygc1swXSYmcltzWzBdXXx8KG4mJiFzWzJdP3NbMl09bjpuJiYoc1syXT0iKCIrc1syXSsiKSBhbmQgKCIrbisiKSIpLHQucHVzaChzKSl9fSx0fX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjshZnVuY3Rpb24obil7ZnVuY3Rpb24gcih0LGUpe2lmKCEodGhpcyBpbnN0YW5jZW9mIHIpKXJldHVybiBuZXcgcih0LGUpO3RoaXMuZG9tYWluPVtdLHRoaXMucmFuZ2U9W10sQXJyYXkuaXNBcnJheSh0KSYmKHRoaXMuZG9tYWluPXQpLEFycmF5LmlzQXJyYXkoZSkmJih0aGlzLnJhbmdlPWUpO3ZhciBuPWZ1bmN0aW9uKHQpe2lmKCJudW1iZXIiIT10eXBlb2YgdClyZXR1cm4gbnVsbDt2YXIgZT10aGlzLmRvbWFpblswXSxuPXRoaXMuZG9tYWluWzFdLHI9dGhpcy5yYW5nZVswXSxpPXRoaXMucmFuZ2VbMV07cmV0dXJuIm51bWJlciIhPT1yJiYibnVtYmVyIiE9dHlwZW9mIGkmJihyPWUsaT1uKSxyKyhpLXIpLyhuLWUpKih0LWUpfS5iaW5kKHRoaXMpO3JldHVybiBuLmRvbWFpbj1mdW5jdGlvbih0KXtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KSYmKHRoaXMuZG9tYWluPXQpLG59LmJpbmQodGhpcyksbi5yYW5nZT1mdW5jdGlvbih0KXtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KSYmKHRoaXMucmFuZ2U9dCksbn0uYmluZCh0aGlzKSxufSJ1bmRlZmluZWQiIT10eXBlb2YgdCYmdC5leHBvcnRzJiYoZT10LmV4cG9ydHM9ciksZS5MaW5lYXJTY2FsZT1yfSh2b2lkIDApfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3QuZXhwb3J0cz1uKDkyKX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcixpLG87aT1uKDUpLG89bigyKSx0LmV4cG9ydHM9cj1vLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0KXt0aGlzLl9ub2Rlcz1bXSx0aGlzLm5hbWU9dC5uYW1lfHwiIix0aGlzLmVsLmNsYXNzTmFtZSs9InNtZW51YmFyIn0scmVuZGVyOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuZWwuZmlyc3RDaGlsZDt0Oyl0aGlzLmVsLnJlbW92ZUNoaWxkKHQpLHQ9dGhpcy5lbC5maXJzdENoaWxkO3RoaXMuZWwuYXBwZW5kQ2hpbGQodGhpcy5idWlsZERPTSgpKX0sc2V0TmFtZTpmdW5jdGlvbih0KXt0aGlzLm5hbWU9dH0sYWRkTm9kZTpmdW5jdGlvbih0LGUsbil7dmFyIHI7bnVsbCE9biYmKHI9bi5zdHlsZSksbnVsbD09dGhpcy5fbm9kZXMmJih0aGlzLl9ub2Rlcz1bXSksdGhpcy5fbm9kZXMucHVzaCh7bGFiZWw6dCxjYWxsYmFjazplLHN0eWxlOnJ9KX0sZ2V0Tm9kZTpmdW5jdGlvbih0KXt2YXIgZT12b2lkIDA7cmV0dXJuIHRoaXMuX25vZGVzLmZvckVhY2goZnVuY3Rpb24obil7bi5sYWJlbD09PXQmJihlPW4pfSksZX0sbW9kaWZ5Tm9kZTpmdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcy5nZXROb2RlKHQpO3IuY2FsbGJhY2s9ZXx8ci5jYWxsYmFjayxuPW58fHt9LHIuc3R5bGU9bi5zdHlsZXx8ci5zdHlsZX0scmVuYW1lTm9kZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZ2V0Tm9kZSh0KTtuLmxhYmVsPWV8fG4ubGFiZWx9LHJlbW92ZU5vZGU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXROb2RlKHQpO3RoaXMuX25vZGVzLnNwbGljZSh0aGlzLl9ub2Rlcy5pbmRleE9mKGUpLDEpfSxyZW1vdmVBbGxOb2RlczpmdW5jdGlvbigpe3RoaXMuX25vZGVzPVtdfSxidWlsZERPTTpmdW5jdGlvbigpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTtyZXR1cm4gdC5hcHBlbmRDaGlsZCh0aGlzLl9idWlsZE0oe25vZGVzOnRoaXMuX25vZGVzLG5hbWU6dGhpcy5uYW1lfSkpLHR9LF9idWlsZE06ZnVuY3Rpb24odCl7dmFyIGUsbixyLG8scyx1LGEsbD10Lm5vZGVzLGM9dC5uYW1lLGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zi5jbGFzc05hbWU9InNtZW51LWRyb3Bkb3duIHNtZW51LWRyb3Bkb3duLXRpcCIsZi5zdHlsZS5kaXNwbGF5PSJub25lIjt2YXIgaD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ1bCIpO2guY2xhc3NOYW1lPSJzbWVudS1kcm9wZG93bi1tZW51Ijtmb3IodmFyIGQ9MCxwPWwubGVuZ3RoO2Q8cDtkKyspe3M9bFtkXSxvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpIiksby50ZXh0Q29udGVudD1zLmxhYmVsLGE9cy5zdHlsZTtmb3IociBpbiBhKXU9YVtyXSxvLnN0eWxlW3JdPXU7by5hZGRFdmVudExpc3RlbmVyKCJjbGljayIscy5jYWxsYmFjayksdGhpcy50cmlnZ2VyKCJuZXc6bm9kZSIsbyksaC5hcHBlbmRDaGlsZChvKX1yZXR1cm4gdGhpcy50cmlnZ2VyKCJuZXc6bWVudSIsaCksZi5hcHBlbmRDaGlsZChoKSxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKSxlLnRleHRDb250ZW50PWMsZS5jbGFzc05hbWU9InNtZW51YmFyX2FsaW5rIix0aGlzLnRyaWdnZXIoIm5ldzpidXR0b24iLGUpLGkoZSkub24oImNsaWNrIixmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHQuX3Nob3dNZW51KG4sZixlKSx3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBpKGRvY3VtZW50LmJvZHkpLm9uZSgiY2xpY2siLGZ1bmN0aW9uKHQpe3JldHVybiBmLnN0eWxlLmRpc3BsYXk9Im5vbmUifSl9LDUpfX0odGhpcykpLG49ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLG4uYXBwZW5kQ2hpbGQoZiksbi5hcHBlbmRDaGlsZChlKSxufSxfc2hvd01lbnU6ZnVuY3Rpb24odCxlLG4pe3ZhciByO2Uuc3R5bGUuZGlzcGxheT0iYmxvY2siLGUuc3R5bGUucG9zaXRpb249ImFic29sdXRlIixyPW4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksZS5zdHlsZS5sZWZ0PXIubGVmdCsicHgiLGUuc3R5bGUudG9wPXIudG9wK24ub2Zmc2V0SGVpZ2h0KyJweCJ9fSl9LGZ1bmN0aW9uKHQsZSl7InVzZSBzdHJpY3QiO3QuZXhwb3J0cz17QToiIzAwYTM1YyIsUjoiIzAwZmMwMyIsTjoiIzAwZWIxNCIsRDoiIzAwZWIxNCIsQzoiIzAwMDBmZiIsUToiIzAwZjEwZSIsRToiIzAwZjEwZSIsRzoiIzAwOWQ2MiIsSDoiIzAwZDUyYSIsSToiIzAwNTRhYiIsTDoiIzAwN2I4NCIsSzoiIzAwZmYwMCIsTToiIzAwOTc2OCIsRjoiIzAwODc3OCIsUDoiIzAwZTAxZiIsUzoiIzAwZDUyYSIsVDoiIzAwZGIyNCIsVzoiIzAwYTg1NyIsWToiIzAwZTYxOSIsVjoiIzAwNWZhMCIsQjoiIzAwZWIxNCIsWDoiIzAwYjY0OSIsWjoiIzAwZjEwZSJ9fSxmdW5jdGlvbih0LGUpeyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9e0E6IiNCQkJCQkIiLEI6ImdyZXkiLEM6InllbGxvdyIsRDoicmVkIixFOiJyZWQiLEY6Im1hZ2VudGEiLEc6ImJyb3duIixIOiIjMDBGRkZGIixJOiIjQkJCQkJCIixKOiIjZmZmIixLOiIjMDBGRkZGIixMOiIjQkJCQkJCIixNOiIjQkJCQkJCIixOOiJncmVlbiIsTzoiI2ZmZiIsUDoiYnJvd24iLFE6ImdyZWVuIixSOiIjMDBGRkZGIixTOiJncmVlbiIsVDoiZ3JlZW4iLFU6IiNmZmYiLFY6IiNCQkJCQkIiLFc6Im1hZ2VudGEiLFg6ImdyZXkiLFk6Im1hZ2VudGEiLFo6ImdyZXkiLEdhcDoiZ3JleSJ9fSxmdW5jdGlvbih0LGUpeyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9e0E6Im9yYW5nZSIsQjoiI2ZmZiIsQzoiZ3JlZW4iLEQ6InJlZCIsRToicmVkIixGOiJibHVlIixHOiJvcmFuZ2UiLEg6InJlZCIsSToiZ3JlZW4iLEo6IiNmZmYiLEs6InJlZCIsTDoiZ3JlZW4iLE06ImdyZWVuIixOOiIjZmZmIixPOiIjZmZmIixQOiJvcmFuZ2UiLFE6IiNmZmYiLFI6InJlZCIsUzoib3JhbmdlIixUOiJvcmFuZ2UiLFU6IiNmZmYiLFY6ImdyZWVuIixXOiJibHVlIixYOiIjZmZmIixZOiJibHVlIixaOiIjZmZmIixHYXA6IiNmZmYifX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7dC5leHBvcnRzPXtBOiIjODBhMGYwIixSOiIjZjAxNTA1IixOOiIjMDBmZjAwIixEOiIjYzA0OGMwIixDOiIjZjA4MDgwIixROiIjMDBmZjAwIixFOiIjYzA0OGMwIixHOiIjZjA5MDQ4IixIOiIjMTVhNGE0IixJOiIjODBhMGYwIixMOiIjODBhMGYwIixLOiIjZjAxNTA1IixNOiIjODBhMGYwIixGOiIjODBhMGYwIixQOiIjZmZmZjAwIixTOiIjMDBmZjAwIixUOiIjMDBmZjAwIixXOiIjODBhMGYwIixZOiIjMTVhNGE0IixWOiIjODBhMGYwIixCOiIjZmZmIixYOiIjZmZmIixaOiIjZmZmIn19LGZ1bmN0aW9uKHQsZSl7InVzZSBzdHJpY3QiO3QuZXhwb3J0cz17QToiI2U3MThlNyIsUjoiIzZmOTA2ZiIsTjoiIzFiZTQxYiIsRDoiIzc3ODg3NyIsQzoiIzIzZGMyMyIsUToiIzkyNmQ5MiIsRToiI2ZmMDBmZiIsRzoiIzAwZmYwMCIsSDoiIzc1OGE3NSIsSToiIzhhNzU4YSIsTDoiI2FlNTFhZSIsSzoiI2EwNWZhMCIsTToiI2VmMTBlZiIsRjoiIzk4Njc5OCIsUDoiIzAwZmYwMCIsUzoiIzM2YzkzNiIsVDoiIzQ3Yjg0NyIsVzoiIzhhNzU4YSIsWToiIzIxZGUyMSIsVjoiIzg1N2E4NSIsQjoiIzQ5YjY0OSIsWDoiIzc1OGE3NSIsWjoiI2M5MzZjOSJ9fSxmdW5jdGlvbih0LGUpeyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9e0E6IiNhZDAwNTIiLEI6IiMwYzAwZjMiLEM6IiNjMjAwM2QiLEQ6IiMwYzAwZjMiLEU6IiMwYzAwZjMiLEY6IiNjYjAwMzQiLEc6IiM2YTAwOTUiLEg6IiMxNTAwZWEiLEk6IiNmZjAwMDAiLEo6IiNmZmYiLEs6IiMwMDAwZmYiLEw6IiNlYTAwMTUiLE06IiNiMDAwNGYiLE46IiMwYzAwZjMiLE86IiNmZmYiLFA6IiM0NjAwYjkiLFE6IiMwYzAwZjMiLFI6IiMwMDAwZmYiLFM6IiM1ZTAwYTEiLFQ6IiM2MTAwOWUiLFU6IiNmZmYiLFY6IiNmNjAwMDkiLFc6IiM1YjAwYTQiLFg6IiM2ODAwOTciLFk6IiM0ZjAwYjAiLFo6IiMwYzAwZjMifX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe2lmKG51bGw9PXR8fCJvYmplY3QiIT0oInVuZGVmaW5lZCI9PXR5cGVvZiB0PyJ1bmRlZmluZWQiOmkodCkpKXJldHVybiB0O3ZhciBlPXQuY29uc3RydWN0b3IoKTtmb3IodmFyIG4gaW4gdCl0Lmhhc093blByb3BlcnR5KG4pJiYoZVtuXT10W25dKTtyZXR1cm4gZX12YXIgaT0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sPyJzeW1ib2wiOnR5cGVvZiB0fSxvPW4oMTA1KSxzPW8uc3RhdCx1PW8uZHluLGE9big5MyksbD1uKDk0KSxjPW4oOTUpLGY9big5NiksaD1uKDk3KSxkPW4oOTgpLHA9bigxMDApLGc9bigxMDEpLHY9bigxMDIpLG09bigxMDQpLHk9bigxMDYpLF89bigxMDcpLGI9bigxMDgpLHg9bigxMDkpLHc9e2J1cmllZDphLGJ1cmllZF9pbmRleDphLGNpbmVtYTpsLGNsdXN0YWwyOmYsY2x1c3RhbDpjLGhlbGl4OmgsaGVsaXhfcHJvcGVuc2l0eTpoLGh5ZHJvOmQsbGVzazpwLG1hZTpnLG51Y2xlb3RpZGU6dixwdXJpbmU6bSxwdXJpbmVfcHlyaW1pZGluZTptLHN0cmFuZDp5LHN0cmFuZF9wcm9wZW5zaXR5OnksdGF5bG9yOl8sdHVybjpiLHR1cm5fcHJvcGVuc2l0eTpiLHphcHBvOnh9LFM9bigxMDMpLGs9e3BpZDpTfSxqPWZ1bmN0aW9uKHQpe3RoaXMubWFwcz1yKHcpLHRoaXMuZHluPXIoayksdGhpcy5vcHQ9dH07dC5leHBvcnRzPWosai5nZXRTY2hlbWU9ZnVuY3Rpb24odCl7cmV0dXJuIHdbdF19LGoucHJvdG90eXBlLmdldFNjaGVtZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm1hcHNbdF07cmV0dXJuIHZvaWQgMD09PWUmJihlPXt9LHZvaWQgMCE9dGhpcy5keW5bdF0pP25ldyB1KHRoaXMuZHluW3RdLHRoaXMub3B0KTpuZXcgcyhlKX0sai5wcm90b3R5cGUuYWRkU3RhdGljU2NoZW1lPWZ1bmN0aW9uKHQsZSl7dGhpcy5tYXBzW3RdPWV9LGoucHJvdG90eXBlLmFkZER5blNjaGVtZT1mdW5jdGlvbih0LGUpe3RoaXMuZHluW3RdPWV9fSxmdW5jdGlvbih0LGUpeyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9e0E6IiBvcmFuZ2UiLEI6IiAjZmZmIixDOiIgZ3JlZW4iLEQ6IiByZWQiLEU6IiByZWQiLEY6IiBncmVlbiIsRzoiIG9yYW5nZSIsSDoiIG1hZ2VudGEiLEk6IiBncmVlbiIsSjoiICNmZmYiLEs6IiByZWQiLEw6IiBncmVlbiIsTToiIGdyZWVuIixOOiIgbWFnZW50YSIsTzoiICNmZmYiLFA6IiBncmVlbiIsUToiIG1hZ2VudGEiLFI6IiByZWQiLFM6IiBvcmFuZ2UiLFQ6IiBvcmFuZ2UiLFU6IiAjZmZmIixWOiIgZ3JlZW4iLFc6IiBncmVlbiIsWDoiICNmZmYiLFk6IiBncmVlbiIsWjoiICNmZmYiLEdhcDoiICNmZmYifX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7dC5leHBvcnRzPXtBOiIgIzc3ZGQ4OCIsQjoiICNmZmYiLEM6IiAjOTllZTY2IixEOiIgIzU1YmIzMyIsRToiICM1NWJiMzMiLEY6IiAjOTk5OWZmIixHOiIgIzc3ZGQ4OCIsSDoiICM1NTU1ZmYiLEk6IiAjNjZiYmZmIixKOiIgI2ZmZiIsSzoiICNmZmNjNzciLEw6IiAjNjZiYmZmIixNOiIgIzY2YmJmZiIsTjoiICM1NWJiMzMiLE86IiAjZmZmIixQOiIgI2VlYWFhYSIsUToiICM1NWJiMzMiLFI6IiAjZmZjYzc3IixTOiIgI2ZmNDQ1NSIsVDoiICNmZjQ0NTUiLFU6IiAjZmZmIixWOiIgIzY2YmJmZiIsVzoiICM5OTk5ZmYiLFg6IiAjZmZmIixZOiIgIzk5OTlmZiIsWjoiICNmZmYiLEdhcDoiICNmZmYifX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7dC5leHBvcnRzPXtBOiIgIzY0RjczRiIsQzoiICNGRkIzNDAiLEc6IiAjRUI0MTNDIixUOiIgIzNDODhFRSIsVToiICMzQzg4RUUifX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7dmFyIG47dC5leHBvcnRzPW49e30sbi5pbml0PWZ1bmN0aW9uKCl7dGhpcy5jb25zPXRoaXMub3B0LmNvbnNlcnZhdGlvbigpfSxuLnJ1bj1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuY29uc1tlLnBvc107cmV0dXJuIG4+Ljg/IiM2NDY0ZmYiOm4+LjY/IiM5ZGE1ZmYiOm4+LjQ/IiNjY2NjY2MiOiIjZmZmZmZmIn19LGZ1bmN0aW9uKHQsZSl7InVzZSBzdHJpY3QiO3QuZXhwb3J0cz17QToiICNGRjgzRkEiLEM6IiAjNDBFMEQwIixHOiIgI0ZGODNGQSIsUjoiICNGRjgzRkEiLFQ6IiAjNDBFMEQwIixVOiIgIzQwRTBEMCIsWToiICM0MEUwRDAifX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7dmFyIG49ZnVuY3Rpb24odCl7dGhpcy5kZWZhdWx0Q29sb3I9IiNmZmZmZmYiLHRoaXMudHlwZT0ic3RhdGljIix0aGlzLm1hcD10LHRoaXMuZ2V0Q29sb3I9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMubWFwW3RdP3RoaXMubWFwW3RdOnRoaXMuZGVmYXVsdENvbG9yfX0scj1mdW5jdGlvbih0LGUpe3RoaXMudHlwZT0iZHluIix0aGlzLm9wdD1lLHZvaWQgMCE9PXQuaW5pdD8odC5pbml0LmNhbGwodGhpcyksdGhpcy5nZXRDb2xvcj10LnJ1bix0aGlzLnJlc2V0PXQuaW5pdCk6dGhpcy5nZXRDb2xvcj10fTt0LmV4cG9ydHMuc3RhdD1uLHQuZXhwb3J0cy5keW49cn0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7dC5leHBvcnRzPXtBOiIjNTg1OGE3IixSOiIjNmI2Yjk0IixOOiIjNjQ2NDliIixEOiIjMjEyMWRlIixDOiIjOWQ5ZDYyIixROiIjOGM4YzczIixFOiIjMDAwMGZmIixHOiIjNDk0OWI2IixIOiIjNjA2MDlmIixJOiIjZWNlYzEzIixMOiIjYjJiMjRkIixLOiIjNDc0N2I4IixNOiIjODI4MjdkIixGOiIjYzJjMjNkIixQOiIjMjMyM2RjIixTOiIjNDk0OWI2IixUOiIjOWQ5ZDYyIixXOiIjYzBjMDNmIixZOiIjZDNkMzJjIixWOiIjZmZmZjAwIixCOiIjNDM0M2JjIixYOiIjNzk3OTg2IixaOiIjNDc0N2I4In19LGZ1bmN0aW9uKHQsZSl7InVzZSBzdHJpY3QiO3QuZXhwb3J0cz17QToiI2NjZmYwMCIsUjoiIzAwMDBmZiIsTjoiI2NjMDBmZiIsRDoiI2ZmMDAwMCIsQzoiI2ZmZmYwMCIsUToiI2ZmMDBjYyIsRToiI2ZmMDA2NiIsRzoiI2ZmOTkwMCIsSDoiIzAwNjZmZiIsSToiIzY2ZmYwMCIsTDoiIzMzZmYwMCIsSzoiIzY2MDBmZiIsTToiIzAwZmYwMCIsRjoiIzAwZmY2NiIsUDoiI2ZmY2MwMCIsUzoiI2ZmMzMwMCIsVDoiI2ZmNjYwMCIsVzoiIzAwY2NmZiIsWToiIzAwZmZjYyIsVjoiIzk5ZmYwMCIsQjoiI2ZmZiIsWDoiI2ZmZiIsWjoiI2ZmZiJ9fSxmdW5jdGlvbih0LGUpeyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9e0E6IiMyY2QzZDMiLFI6IiM3MDhmOGYiLE46IiNmZjAwMDAiLEQ6IiNlODE3MTciLEM6IiNhODU3NTciLFE6IiMzZmMwYzAiLEU6IiM3Nzg4ODgiLEc6IiNmZjAwMDAiLEg6IiM3MDhmOGYiLEk6IiMwMGZmZmYiLEw6IiMxY2UzZTMiLEs6IiM3ZTgxODEiLE06IiMxZWUxZTEiLEY6IiMxZWUxZTEiLFA6IiNmNjA5MDkiLFM6IiNlMTFlMWUiLFQ6IiM3MzhjOGMiLFc6IiM3MzhjOGMiLFk6IiM5ZDYyNjIiLFY6IiMwN2Y4ZjgiLEI6IiNmMzBjMGMiLFg6IiM3YzgzODMiLFo6IiM1YmE0YTQifX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7dC5leHBvcnRzPXtBOiIjZmZhZmFmIixSOiIjNjQ2NGZmIixOOiIjMDBmZjAwIixEOiIjZmYwMDAwIixDOiIjZmZmZjAwIixROiIjMDBmZjAwIixFOiIjZmYwMDAwIixHOiIjZmYwMGZmIixIOiIjNjQ2NGZmIixJOiIjZmZhZmFmIixMOiIjZmZhZmFmIixLOiIjNjQ2NGZmIixNOiIjZmZhZmFmIixGOiIjZmZjODAwIixQOiIjZmYwMGZmIixTOiIjMDBmZjAwIixUOiIjMDBmZjAwIixXOiIjZmZjODAwIixZOiIjZmZjODAwIixWOiIjZmZhZmFmIixCOiIjZmZmIixYOiIjZmZmIixaOiIjZmZmIn19LGZ1bmN0aW9uKHQsZSxuKXt2YXIgcixpLG89ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbD8ic3ltYm9sIjp0eXBlb2YgdH07KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gbih0KXtmdW5jdGlvbiBlKGUsbixyLGksbyxzKXtmb3IoO28+PTAmJm88cztvKz10KXt2YXIgdT1pP2lbb106bztyPW4ocixlW3VdLHUsZSl9cmV0dXJuIHJ9cmV0dXJuIGZ1bmN0aW9uKG4scixpLG8pe3I9ayhyLG8sNCk7dmFyIHM9IUMobikmJlMua2V5cyhuKSx1PShzfHxuKS5sZW5ndGgsYT10PjA/MDp1LTE7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8MyYmKGk9bltzP3NbYV06YV0sYSs9dCksZShuLHIsaSxzLGEsdSl9fWZ1bmN0aW9uIHModCl7cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtuPWoobixyKTtmb3IodmFyIGk9QShlKSxvPXQ+MD8wOmktMTtvPj0wJiZvPGk7bys9dClpZihuKGVbb10sbyxlKSlyZXR1cm4gbztyZXR1cm4tMX19ZnVuY3Rpb24gdSh0LGUsbil7cmV0dXJuIGZ1bmN0aW9uKHIsaSxvKXt2YXIgcz0wLHU9QShyKTtpZigibnVtYmVyIj09dHlwZW9mIG8pdD4wP3M9bz49MD9vOk1hdGgubWF4KG8rdSxzKTp1PW8+PTA/TWF0aC5taW4obysxLHUpOm8rdSsxO2Vsc2UgaWYobiYmbyYmdSlyZXR1cm4gbz1uKHIsaSkscltvXT09PWk/bzotMTtpZihpIT09aSlyZXR1cm4gbz1lKGcuY2FsbChyLHMsdSksUy5pc05hTiksbz49MD9vK3M6LTE7Zm9yKG89dD4wP3M6dS0xO28+PTAmJm88dTtvKz10KWlmKHJbb109PT1pKXJldHVybiBvO3JldHVybi0xfX1mdW5jdGlvbiBhKHQsZSl7dmFyIG49Ui5sZW5ndGgscj10LmNvbnN0cnVjdG9yLGk9Uy5pc0Z1bmN0aW9uKHIpJiZyLnByb3RvdHlwZXx8aCxvPSJjb25zdHJ1Y3RvciI7Zm9yKFMuaGFzKHQsbykmJiFTLmNvbnRhaW5zKGUsbykmJmUucHVzaChvKTtuLS07KW89UltuXSxvIGluIHQmJnRbb10hPT1pW29dJiYhUy5jb250YWlucyhlLG8pJiZlLnB1c2gobyl9dmFyIGw9dGhpcyxjPWwuXyxmPUFycmF5LnByb3RvdHlwZSxoPU9iamVjdC5wcm90b3R5cGUsZD1GdW5jdGlvbi5wcm90b3R5cGUscD1mLnB1c2gsZz1mLnNsaWNlLHY9aC50b1N0cmluZyxtPWguaGFzT3duUHJvcGVydHkseT1BcnJheS5pc0FycmF5LF89T2JqZWN0LmtleXMsYj1kLmJpbmQseD1PYmplY3QuY3JlYXRlLHc9ZnVuY3Rpb24oKXt9LFM9ZnVuY3Rpb24gRyh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIEc/dDp0aGlzIGluc3RhbmNlb2YgRz92b2lkKHRoaXMuX3dyYXBwZWQ9dCk6bmV3IEcodCl9OyJ1bmRlZmluZWQiIT10eXBlb2YgdCYmdC5leHBvcnRzJiYoZT10LmV4cG9ydHM9UyksZS5fPVMsUy5WRVJTSU9OPSIxLjguMyI7dmFyIGs9ZnVuY3Rpb24odCxlLG4pe2lmKHZvaWQgMD09PWUpcmV0dXJuIHQ7c3dpdGNoKG51bGw9PW4/MzpuKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiB0LmNhbGwoZSxuKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihuLHIpe3JldHVybiB0LmNhbGwoZSxuLHIpfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKG4scixpKXtyZXR1cm4gdC5jYWxsKGUsbixyLGkpfTtjYXNlIDQ6cmV0dXJuIGZ1bmN0aW9uKG4scixpLG8pe3JldHVybiB0LmNhbGwoZSxuLHIsaSxvKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkoZSxhcmd1bWVudHMpfX0saj1mdW5jdGlvbih0LGUsbil7cmV0dXJuIG51bGw9PXQ/Uy5pZGVudGl0eTpTLmlzRnVuY3Rpb24odCk/ayh0LGUsbik6Uy5pc09iamVjdCh0KT9TLm1hdGNoZXIodCk6Uy5wcm9wZXJ0eSh0KX07Uy5pdGVyYXRlZT1mdW5jdGlvbih0LGUpe3JldHVybiBqKHQsZSwxLzApfTt2YXIgTz1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoO2lmKHI8Mnx8bnVsbD09bilyZXR1cm4gbjtmb3IodmFyIGk9MTtpPHI7aSsrKWZvcih2YXIgbz1hcmd1bWVudHNbaV0scz10KG8pLHU9cy5sZW5ndGgsYT0wO2E8dTthKyspe3ZhciBsPXNbYV07ZSYmdm9pZCAwIT09bltsXXx8KG5bbF09b1tsXSl9cmV0dXJuIG59fSxFPWZ1bmN0aW9uKHQpe2lmKCFTLmlzT2JqZWN0KHQpKXJldHVybnt9O2lmKHgpcmV0dXJuIHgodCk7dy5wcm90b3R5cGU9dDt2YXIgZT1uZXcgdztyZXR1cm4gdy5wcm90b3R5cGU9bnVsbCxlfSxNPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT92b2lkIDA6ZVt0XX19LHo9TWF0aC5wb3coMiw1MyktMSxBPU0oImxlbmd0aCIpLEM9ZnVuY3Rpb24odCl7dmFyIGU9QSh0KTtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGUmJmU+PTAmJmU8PXp9O1MuZWFjaD1TLmZvckVhY2g9ZnVuY3Rpb24odCxlLG4pe2U9ayhlLG4pO3ZhciByLGk7aWYoQyh0KSlmb3Iocj0wLGk9dC5sZW5ndGg7cjxpO3IrKyllKHRbcl0scix0KTtlbHNle3ZhciBvPVMua2V5cyh0KTtmb3Iocj0wLGk9by5sZW5ndGg7cjxpO3IrKyllKHRbb1tyXV0sb1tyXSx0KX1yZXR1cm4gdH0sUy5tYXA9Uy5jb2xsZWN0PWZ1bmN0aW9uKHQsZSxuKXtlPWooZSxuKTtmb3IodmFyIHI9IUModCkmJlMua2V5cyh0KSxpPShyfHx0KS5sZW5ndGgsbz1BcnJheShpKSxzPTA7czxpO3MrKyl7dmFyIHU9cj9yW3NdOnM7b1tzXT1lKHRbdV0sdSx0KX1yZXR1cm4gb30sUy5yZWR1Y2U9Uy5mb2xkbD1TLmluamVjdD1uKDEpLFMucmVkdWNlUmlnaHQ9Uy5mb2xkcj1uKC0xKSxTLmZpbmQ9Uy5kZXRlY3Q9ZnVuY3Rpb24odCxlLG4pe3ZhciByO2lmKHI9Qyh0KT9TLmZpbmRJbmRleCh0LGUsbik6Uy5maW5kS2V5KHQsZSxuKSx2b2lkIDAhPT1yJiZyIT09LTEpcmV0dXJuIHRbcl19LFMuZmlsdGVyPVMuc2VsZWN0PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1bXTtyZXR1cm4gZT1qKGUsbiksUy5lYWNoKHQsZnVuY3Rpb24odCxuLGkpe2UodCxuLGkpJiZyLnB1c2godCl9KSxyfSxTLnJlamVjdD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIFMuZmlsdGVyKHQsUy5uZWdhdGUoaihlKSksbil9LFMuZXZlcnk9Uy5hbGw9ZnVuY3Rpb24odCxlLG4pe2U9aihlLG4pO2Zvcih2YXIgcj0hQyh0KSYmUy5rZXlzKHQpLGk9KHJ8fHQpLmxlbmd0aCxvPTA7bzxpO28rKyl7dmFyIHM9cj9yW29dOm87aWYoIWUodFtzXSxzLHQpKXJldHVybiExfXJldHVybiEwfSxTLnNvbWU9Uy5hbnk9ZnVuY3Rpb24odCxlLG4pe2U9aihlLG4pO2Zvcih2YXIgcj0hQyh0KSYmUy5rZXlzKHQpLGk9KHJ8fHQpLmxlbmd0aCxvPTA7bzxpO28rKyl7dmFyIHM9cj9yW29dOm87aWYoZSh0W3NdLHMsdCkpcmV0dXJuITB9cmV0dXJuITF9LFMuY29udGFpbnM9Uy5pbmNsdWRlcz1TLmluY2x1ZGU9ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIEModCl8fCh0PVMudmFsdWVzKHQpKSwoIm51bWJlciIhPXR5cGVvZiBufHxyKSYmKG49MCksUy5pbmRleE9mKHQsZSxuKT49MH0sUy5pbnZva2U9ZnVuY3Rpb24odCxlKXt2YXIgbj1nLmNhbGwoYXJndW1lbnRzLDIpLHI9Uy5pc0Z1bmN0aW9uKGUpO3JldHVybiBTLm1hcCh0LGZ1bmN0aW9uKHQpe3ZhciBpPXI/ZTp0W2VdO3JldHVybiBudWxsPT1pP2k6aS5hcHBseSh0LG4pfSl9LFMucGx1Y2s9ZnVuY3Rpb24odCxlKXtyZXR1cm4gUy5tYXAodCxTLnByb3BlcnR5KGUpKX0sUy53aGVyZT1mdW5jdGlvbih0LGUpe3JldHVybiBTLmZpbHRlcih0LFMubWF0Y2hlcihlKSl9LFMuZmluZFdoZXJlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFMuZmluZCh0LFMubWF0Y2hlcihlKSl9LFMubWF4PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcixpLG89LSgxLzApLHM9LSgxLzApO2lmKG51bGw9PWUmJm51bGwhPXQpe3Q9Qyh0KT90OlMudmFsdWVzKHQpO2Zvcih2YXIgdT0wLGE9dC5sZW5ndGg7dTxhO3UrKylyPXRbdV0scj5vJiYobz1yKX1lbHNlIGU9aihlLG4pLFMuZWFjaCh0LGZ1bmN0aW9uKHQsbixyKXtpPWUodCxuLHIpLChpPnN8fGk9PT0tKDEvMCkmJm89PT0tKDEvMCkpJiYobz10LHM9aSl9KTtyZXR1cm4gb30sUy5taW49ZnVuY3Rpb24odCxlLG4pe3ZhciByLGksbz0xLzAscz0xLzA7aWYobnVsbD09ZSYmbnVsbCE9dCl7dD1DKHQpP3Q6Uy52YWx1ZXModCk7Zm9yKHZhciB1PTAsYT10Lmxlbmd0aDt1PGE7dSsrKXI9dFt1XSxyPG8mJihvPXIpfWVsc2UgZT1qKGUsbiksUy5lYWNoKHQsZnVuY3Rpb24odCxuLHIpe2k9ZSh0LG4sciksKGk8c3x8aT09PTEvMCYmbz09PTEvMCkmJihvPXQscz1pKX0pO3JldHVybiBvfSxTLnNodWZmbGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49Qyh0KT90OlMudmFsdWVzKHQpLHI9bi5sZW5ndGgsaT1BcnJheShyKSxvPTA7bzxyO28rKyllPVMucmFuZG9tKDAsbyksZSE9PW8mJihpW29dPWlbZV0pLGlbZV09bltvXTtyZXR1cm4gaX0sUy5zYW1wbGU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBudWxsPT1lfHxuPyhDKHQpfHwodD1TLnZhbHVlcyh0KSksdFtTLnJhbmRvbSh0Lmxlbmd0aC0xKV0pOlMuc2h1ZmZsZSh0KS5zbGljZSgwLE1hdGgubWF4KDAsZSkpfSxTLnNvcnRCeT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGU9aihlLG4pLFMucGx1Y2soUy5tYXAodCxmdW5jdGlvbih0LG4scil7cmV0dXJue3ZhbHVlOnQsaW5kZXg6bixjcml0ZXJpYTplKHQsbixyKX19KS5zb3J0KGZ1bmN0aW9uKHQsZSl7dmFyIG49dC5jcml0ZXJpYSxyPWUuY3JpdGVyaWE7aWYobiE9PXIpe2lmKG4+cnx8dm9pZCAwPT09bilyZXR1cm4gMTtpZihuPHJ8fHZvaWQgMD09PXIpcmV0dXJuLTF9cmV0dXJuIHQuaW5kZXgtZS5pbmRleH0pLCJ2YWx1ZSIpfTt2YXIgVD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuLHIpe3ZhciBpPXt9O3JldHVybiBuPWoobixyKSxTLmVhY2goZSxmdW5jdGlvbihyLG8pe3QoaSxyLG4ocixvLGUpKX0pLGl9fTtTLmdyb3VwQnk9VChmdW5jdGlvbih0LGUsbil7Uy5oYXModCxuKT90W25dLnB1c2goZSk6dFtuXT1bZV19KSxTLmluZGV4Qnk9VChmdW5jdGlvbih0LGUsbil7dFtuXT1lfSksUy5jb3VudEJ5PVQoZnVuY3Rpb24odCxlLG4pe1MuaGFzKHQsbik/dFtuXSsrOnRbbl09MX0pLFMudG9BcnJheT1mdW5jdGlvbih0KXtyZXR1cm4gdD9TLmlzQXJyYXkodCk/Zy5jYWxsKHQpOkModCk/Uy5tYXAodCxTLmlkZW50aXR5KTpTLnZhbHVlcyh0KTpbXX0sUy5zaXplPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10PzA6Qyh0KT90Lmxlbmd0aDpTLmtleXModCkubGVuZ3RofSxTLnBhcnRpdGlvbj1mdW5jdGlvbih0LGUsbil7ZT1qKGUsbik7dmFyIHI9W10saT1bXTtyZXR1cm4gUy5lYWNoKHQsZnVuY3Rpb24odCxuLG8peyhlKHQsbixvKT9yOmkpLnB1c2godCl9KSxbcixpXX0sUy5maXJzdD1TLmhlYWQ9Uy50YWtlPWZ1bmN0aW9uKHQsZSxuKXtpZihudWxsIT10KXJldHVybiBudWxsPT1lfHxuP3RbMF06Uy5pbml0aWFsKHQsdC5sZW5ndGgtZSl9LFMuaW5pdGlhbD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGcuY2FsbCh0LDAsTWF0aC5tYXgoMCx0Lmxlbmd0aC0obnVsbD09ZXx8bj8xOmUpKSl9LFMubGFzdD1mdW5jdGlvbih0LGUsbil7aWYobnVsbCE9dClyZXR1cm4gbnVsbD09ZXx8bj90W3QubGVuZ3RoLTFdOlMucmVzdCh0LE1hdGgubWF4KDAsdC5sZW5ndGgtZSkpfSxTLnJlc3Q9Uy50YWlsPVMuZHJvcD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGcuY2FsbCh0LG51bGw9PWV8fG4/MTplKX0sUy5jb21wYWN0PWZ1bmN0aW9uKHQpe3JldHVybiBTLmZpbHRlcih0LFMuaWRlbnRpdHkpfTt2YXIgST1mdW5jdGlvbiBLKHQsZSxuLHIpe2Zvcih2YXIgaT1bXSxvPTAscz1yfHwwLHU9QSh0KTtzPHU7cysrKXt2YXIgYT10W3NdO2lmKEMoYSkmJihTLmlzQXJyYXkoYSl8fFMuaXNBcmd1bWVudHMoYSkpKXtlfHwoYT1LKGEsZSxuKSk7dmFyIGw9MCxjPWEubGVuZ3RoO2ZvcihpLmxlbmd0aCs9YztsPGM7KWlbbysrXT1hW2wrK119ZWxzZSBufHwoaVtvKytdPWEpfXJldHVybiBpfTtTLmZsYXR0ZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gSSh0LGUsITEpfSxTLndpdGhvdXQ9ZnVuY3Rpb24odCl7cmV0dXJuIFMuZGlmZmVyZW5jZSh0LGcuY2FsbChhcmd1bWVudHMsMSkpfSxTLnVuaXE9Uy51bmlxdWU9ZnVuY3Rpb24odCxlLG4scil7Uy5pc0Jvb2xlYW4oZSl8fChyPW4sbj1lLGU9ITEpLG51bGwhPW4mJihuPWoobixyKSk7Zm9yKHZhciBpPVtdLG89W10scz0wLHU9QSh0KTtzPHU7cysrKXt2YXIgYT10W3NdLGw9bj9uKGEscyx0KTphO2U/KHMmJm89PT1sfHxpLnB1c2goYSksbz1sKTpuP1MuY29udGFpbnMobyxsKXx8KG8ucHVzaChsKSxpLnB1c2goYSkpOlMuY29udGFpbnMoaSxhKXx8aS5wdXNoKGEpfXJldHVybiBpfSxTLnVuaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIFMudW5pcShJKGFyZ3VtZW50cywhMCwhMCkpfSxTLmludGVyc2VjdGlvbj1mdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj1hcmd1bWVudHMubGVuZ3RoLHI9MCxpPUEodCk7cjxpO3IrKyl7dmFyIG89dFtyXTtpZighUy5jb250YWlucyhlLG8pKXtmb3IodmFyIHM9MTtzPG4mJlMuY29udGFpbnMoYXJndW1lbnRzW3NdLG8pO3MrKyk7cz09PW4mJmUucHVzaChvKX19cmV0dXJuIGV9LFMuZGlmZmVyZW5jZT1mdW5jdGlvbih0KXt2YXIgZT1JKGFyZ3VtZW50cywhMCwhMCwxKTtyZXR1cm4gUy5maWx0ZXIodCxmdW5jdGlvbih0KXtyZXR1cm4hUy5jb250YWlucyhlLHQpfSl9LFMuemlwPWZ1bmN0aW9uKCl7cmV0dXJuIFMudW56aXAoYXJndW1lbnRzKX0sUy51bnppcD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dCYmUy5tYXgodCxBKS5sZW5ndGh8fDAsbj1BcnJheShlKSxyPTA7cjxlO3IrKyluW3JdPVMucGx1Y2sodCxyKTtyZXR1cm4gbn0sUy5vYmplY3Q9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49e30scj0wLGk9QSh0KTtyPGk7cisrKWU/blt0W3JdXT1lW3JdOm5bdFtyXVswXV09dFtyXVsxXTtyZXR1cm4gbn0sUy5maW5kSW5kZXg9cygxKSxTLmZpbmRMYXN0SW5kZXg9cygtMSksUy5zb3J0ZWRJbmRleD1mdW5jdGlvbih0LGUsbixyKXtuPWoobixyLDEpO2Zvcih2YXIgaT1uKGUpLG89MCxzPUEodCk7bzxzOyl7dmFyIHU9TWF0aC5mbG9vcigobytzKS8yKTtuKHRbdV0pPGk/bz11KzE6cz11fXJldHVybiBvfSxTLmluZGV4T2Y9dSgxLFMuZmluZEluZGV4LFMuc29ydGVkSW5kZXgpLFMubGFzdEluZGV4T2Y9dSgtMSxTLmZpbmRMYXN0SW5kZXgpLFMucmFuZ2U9ZnVuY3Rpb24odCxlLG4pe251bGw9PWUmJihlPXR8fDAsdD0wKSxuPW58fDE7Zm9yKHZhciByPU1hdGgubWF4KE1hdGguY2VpbCgoZS10KS9uKSwwKSxpPUFycmF5KHIpLG89MDtvPHI7bysrLHQrPW4paVtvXT10O3JldHVybiBpfTt2YXIgTj1mdW5jdGlvbih0LGUsbixyLGkpe2lmKCEociBpbnN0YW5jZW9mIGUpKXJldHVybiB0LmFwcGx5KG4saSk7dmFyIG89RSh0LnByb3RvdHlwZSkscz10LmFwcGx5KG8saSk7cmV0dXJuIFMuaXNPYmplY3Qocyk/czpvfTtTLmJpbmQ9ZnVuY3Rpb24odCxlKXtpZihiJiZ0LmJpbmQ9PT1iKXJldHVybiBiLmFwcGx5KHQsZy5jYWxsKGFyZ3VtZW50cywxKSk7aWYoIVMuaXNGdW5jdGlvbih0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJCaW5kIG11c3QgYmUgY2FsbGVkIG9uIGEgZnVuY3Rpb24iKTt2YXIgbj1nLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBmdW5jdGlvbiByKCl7cmV0dXJuIE4odCxyLGUsdGhpcyxuLmNvbmNhdChnLmNhbGwoYXJndW1lbnRzKSkpfX0sUy5wYXJ0aWFsPWZ1bmN0aW9uKHQpe3ZhciBlPWcuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uIG4oKXtmb3IodmFyIHI9MCxpPWUubGVuZ3RoLG89QXJyYXkoaSkscz0wO3M8aTtzKyspb1tzXT1lW3NdPT09Uz9hcmd1bWVudHNbcisrXTplW3NdO2Zvcig7cjxhcmd1bWVudHMubGVuZ3RoOylvLnB1c2goYXJndW1lbnRzW3IrK10pO3JldHVybiBOKHQsbix0aGlzLHRoaXMsbyl9fSxTLmJpbmRBbGw9ZnVuY3Rpb24odCl7dmFyIGUsbixyPWFyZ3VtZW50cy5sZW5ndGg7aWYocjw9MSl0aHJvdyBuZXcgRXJyb3IoImJpbmRBbGwgbXVzdCBiZSBwYXNzZWQgZnVuY3Rpb24gbmFtZXMiKTtmb3IoZT0xO2U8cjtlKyspbj1hcmd1bWVudHNbZV0sdFtuXT1TLmJpbmQodFtuXSx0KTtyZXR1cm4gdH0sUy5tZW1vaXplPWZ1bmN0aW9uKHQsZSl7dmFyIG49ZnVuY3Rpb24gcihuKXt2YXIgaT1yLmNhY2hlLG89IiIrKGU/ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6bik7cmV0dXJuIFMuaGFzKGksbyl8fChpW29dPXQuYXBwbHkodGhpcyxhcmd1bWVudHMpKSxpW29dfTtyZXR1cm4gbi5jYWNoZT17fSxufSxTLmRlbGF5PWZ1bmN0aW9uKHQsZSl7dmFyIG49Zy5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KG51bGwsbil9LGUpfSxTLmRlZmVyPVMucGFydGlhbChTLmRlbGF5LFMsMSksUy50aHJvdHRsZT1mdW5jdGlvbih0LGUsbil7dmFyIHIsaSxvLHM9bnVsbCx1PTA7bnx8KG49e30pO3ZhciBhPWZ1bmN0aW9uKCl7dT1uLmxlYWRpbmc9PT0hMT8wOlMubm93KCkscz1udWxsLG89dC5hcHBseShyLGkpLHN8fChyPWk9bnVsbCl9O3JldHVybiBmdW5jdGlvbigpe3ZhciBsPVMubm93KCk7dXx8bi5sZWFkaW5nIT09ITF8fCh1PWwpO3ZhciBjPWUtKGwtdSk7cmV0dXJuIHI9dGhpcyxpPWFyZ3VtZW50cyxjPD0wfHxjPmU/KHMmJihjbGVhclRpbWVvdXQocykscz1udWxsKSx1PWwsbz10LmFwcGx5KHIsaSksc3x8KHI9aT1udWxsKSk6c3x8bi50cmFpbGluZz09PSExfHwocz1zZXRUaW1lb3V0KGEsYykpLG99fSxTLmRlYm91bmNlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcixpLG8scyx1LGE9ZnVuY3Rpb24gbCgpe3ZhciBhPVMubm93KCktczthPGUmJmE+PTA/cj1zZXRUaW1lb3V0KGwsZS1hKToocj1udWxsLG58fCh1PXQuYXBwbHkobyxpKSxyfHwobz1pPW51bGwpKSl9O3JldHVybiBmdW5jdGlvbigpe289dGhpcyxpPWFyZ3VtZW50cyxzPVMubm93KCk7dmFyIGw9biYmIXI7cmV0dXJuIHJ8fChyPXNldFRpbWVvdXQoYSxlKSksbCYmKHU9dC5hcHBseShvLGkpLG89aT1udWxsKSx1fX0sUy53cmFwPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFMucGFydGlhbChlLHQpfSxTLm5lZ2F0ZT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4hdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxTLmNvbXBvc2U9ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMsZT10Lmxlbmd0aC0xO3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgbj1lLHI9dFtlXS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7bi0tOylyPXRbbl0uY2FsbCh0aGlzLHIpO3JldHVybiByfX0sUy5hZnRlcj1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbigpe2lmKC0tdDwxKXJldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LFMuYmVmb3JlPWZ1bmN0aW9uKHQsZSl7dmFyIG47cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuLS10PjAmJihuPWUuYXBwbHkodGhpcyxhcmd1bWVudHMpKSx0PD0xJiYoZT1udWxsKSxufX0sUy5vbmNlPVMucGFydGlhbChTLmJlZm9yZSwyKTt2YXIgTD0he3RvU3RyaW5nOm51bGx9LnByb3BlcnR5SXNFbnVtZXJhYmxlKCJ0b1N0cmluZyIpLFI9WyJ2YWx1ZU9mIiwiaXNQcm90b3R5cGVPZiIsInRvU3RyaW5nIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJoYXNPd25Qcm9wZXJ0eSIsInRvTG9jYWxlU3RyaW5nIl07Uy5rZXlzPWZ1bmN0aW9uKHQpe2lmKCFTLmlzT2JqZWN0KHQpKXJldHVybltdO2lmKF8pcmV0dXJuIF8odCk7dmFyIGU9W107Zm9yKHZhciBuIGluIHQpUy5oYXModCxuKSYmZS5wdXNoKG4pO3JldHVybiBMJiZhKHQsZSksZX0sUy5hbGxLZXlzPWZ1bmN0aW9uKHQpe2lmKCFTLmlzT2JqZWN0KHQpKXJldHVybltdO3ZhciBlPVtdO2Zvcih2YXIgbiBpbiB0KWUucHVzaChuKTtyZXR1cm4gTCYmYSh0LGUpLGV9LFMudmFsdWVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1TLmtleXModCksbj1lLmxlbmd0aCxyPUFycmF5KG4pLGk9MDtpPG47aSsrKXJbaV09dFtlW2ldXTtyZXR1cm4gcn0sUy5tYXBPYmplY3Q9ZnVuY3Rpb24odCxlLG4pe2U9aihlLG4pO2Zvcih2YXIgcixpPVMua2V5cyh0KSxvPWkubGVuZ3RoLHM9e30sdT0wO3U8bzt1Kyspcj1pW3VdLHNbcl09ZSh0W3JdLHIsdCk7cmV0dXJuIHN9LFMucGFpcnM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVMua2V5cyh0KSxuPWUubGVuZ3RoLHI9QXJyYXkobiksaT0wO2k8bjtpKyspcltpXT1bZVtpXSx0W2VbaV1dXTtyZXR1cm4gcn0sUy5pbnZlcnQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXt9LG49Uy5rZXlzKHQpLHI9MCxpPW4ubGVuZ3RoO3I8aTtyKyspZVt0W25bcl1dXT1uW3JdO3JldHVybiBlfSxTLmZ1bmN0aW9ucz1TLm1ldGhvZHM9ZnVuY3Rpb24odCl7dmFyIGU9W107Zm9yKHZhciBuIGluIHQpUy5pc0Z1bmN0aW9uKHRbbl0pJiZlLnB1c2gobik7cmV0dXJuIGUuc29ydCgpfSxTLmV4dGVuZD1PKFMuYWxsS2V5cyksUy5leHRlbmRPd249Uy5hc3NpZ249TyhTLmtleXMpLFMuZmluZEtleT1mdW5jdGlvbih0LGUsbil7ZT1qKGUsbik7Zm9yKHZhciByLGk9Uy5rZXlzKHQpLG89MCxzPWkubGVuZ3RoO288cztvKyspaWYocj1pW29dLGUodFtyXSxyLHQpKXJldHVybiByfSxTLnBpY2s9ZnVuY3Rpb24odCxlLG4pe3ZhciByLGksbz17fSxzPXQ7aWYobnVsbD09cylyZXR1cm4gbztTLmlzRnVuY3Rpb24oZSk/KGk9Uy5hbGxLZXlzKHMpLHI9ayhlLG4pKTooaT1JKGFyZ3VtZW50cywhMSwhMSwxKSxyPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZSBpbiBufSxzPU9iamVjdChzKSk7Zm9yKHZhciB1PTAsYT1pLmxlbmd0aDt1PGE7dSsrKXt2YXIgbD1pW3VdLGM9c1tsXTtyKGMsbCxzKSYmKG9bbF09Yyl9cmV0dXJuIG99LFMub21pdD1mdW5jdGlvbih0LGUsbil7aWYoUy5pc0Z1bmN0aW9uKGUpKWU9Uy5uZWdhdGUoZSk7ZWxzZXt2YXIgcj1TLm1hcChJKGFyZ3VtZW50cywhMSwhMSwxKSxTdHJpbmcpO2U9ZnVuY3Rpb24odCxlKXtyZXR1cm4hUy5jb250YWlucyhyLGUpfX1yZXR1cm4gUy5waWNrKHQsZSxuKX0sUy5kZWZhdWx0cz1PKFMuYWxsS2V5cywhMCksUy5jcmVhdGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1FKHQpO3JldHVybiBlJiZTLmV4dGVuZE93bihuLGUpLG59LFMuY2xvbmU9ZnVuY3Rpb24odCl7cmV0dXJuIFMuaXNPYmplY3QodCk/Uy5pc0FycmF5KHQpP3Quc2xpY2UoKTpTLmV4dGVuZCh7fSx0KTp0fSxTLnRhcD1mdW5jdGlvbih0LGUpe3JldHVybiBlKHQpLHR9LFMuaXNNYXRjaD1mdW5jdGlvbih0LGUpe3ZhciBuPVMua2V5cyhlKSxyPW4ubGVuZ3RoO2lmKG51bGw9PXQpcmV0dXJuIXI7Zm9yKHZhciBpPU9iamVjdCh0KSxvPTA7bzxyO28rKyl7dmFyIHM9bltvXTtpZihlW3NdIT09aVtzXXx8IShzIGluIGkpKXJldHVybiExfXJldHVybiEwfTt2YXIgcT1mdW5jdGlvbiBYKHQsZSxuLHIpe2lmKHQ9PT1lKXJldHVybiAwIT09dHx8MS90PT09MS9lO2lmKG51bGw9PXR8fG51bGw9PWUpcmV0dXJuIHQ9PT1lO3QgaW5zdGFuY2VvZiBTJiYodD10Ll93cmFwcGVkKSxlIGluc3RhbmNlb2YgUyYmKGU9ZS5fd3JhcHBlZCk7dmFyIGk9di5jYWxsKHQpO2lmKGkhPT12LmNhbGwoZSkpcmV0dXJuITE7c3dpdGNoKGkpe2Nhc2UiW29iamVjdCBSZWdFeHBdIjpjYXNlIltvYmplY3QgU3RyaW5nXSI6cmV0dXJuIiIrdD09IiIrZTtjYXNlIltvYmplY3QgTnVtYmVyXSI6cmV0dXJuK3QhPT0rdD8rZSE9PStlOjA9PT0rdD8xLyt0PT09MS9lOit0PT09K2U7Y2FzZSJbb2JqZWN0IERhdGVdIjpjYXNlIltvYmplY3QgQm9vbGVhbl0iOnJldHVybit0PT09K2V9dmFyIHM9IltvYmplY3QgQXJyYXldIj09PWk7aWYoIXMpe2lmKCJvYmplY3QiIT0oInVuZGVmaW5lZCI9PXR5cGVvZiB0PyJ1bmRlZmluZWQiOm8odCkpfHwib2JqZWN0IiE9KCJ1bmRlZmluZWQiPT10eXBlb2YgZT8idW5kZWZpbmVkIjpvKGUpKSlyZXR1cm4hMTt2YXIgdT10LmNvbnN0cnVjdG9yLGE9ZS5jb25zdHJ1Y3RvcjtpZih1IT09YSYmIShTLmlzRnVuY3Rpb24odSkmJnUgaW5zdGFuY2VvZiB1JiZTLmlzRnVuY3Rpb24oYSkmJmEgaW5zdGFuY2VvZiBhKSYmImNvbnN0cnVjdG9yImluIHQmJiJjb25zdHJ1Y3RvciJpbiBlKXJldHVybiExfW49bnx8W10scj1yfHxbXTtmb3IodmFyIGw9bi5sZW5ndGg7bC0tOylpZihuW2xdPT09dClyZXR1cm4gcltsXT09PWU7aWYobi5wdXNoKHQpLHIucHVzaChlKSxzKXtpZihsPXQubGVuZ3RoLGwhPT1lLmxlbmd0aClyZXR1cm4hMTtmb3IoO2wtLTspaWYoIVgodFtsXSxlW2xdLG4scikpcmV0dXJuITF9ZWxzZXt2YXIgYyxmPVMua2V5cyh0KTtpZihsPWYubGVuZ3RoLFMua2V5cyhlKS5sZW5ndGghPT1sKXJldHVybiExO2Zvcig7bC0tOylpZihjPWZbbF0sIVMuaGFzKGUsYyl8fCFYKHRbY10sZVtjXSxuLHIpKXJldHVybiExfXJldHVybiBuLnBvcCgpLHIucG9wKCksITB9O1MuaXNFcXVhbD1mdW5jdGlvbih0LGUpe3JldHVybiBxKHQsZSl9LFMuaXNFbXB0eT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dHx8KEModCkmJihTLmlzQXJyYXkodCl8fFMuaXNTdHJpbmcodCl8fFMuaXNBcmd1bWVudHModCkpPzA9PT10Lmxlbmd0aDowPT09Uy5rZXlzKHQpLmxlbmd0aCl9LFMuaXNFbGVtZW50PWZ1bmN0aW9uKHQpe3JldHVybiEoIXR8fDEhPT10Lm5vZGVUeXBlKX0sUy5pc0FycmF5PXl8fGZ1bmN0aW9uKHQpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT12LmNhbGwodCl9LFMuaXNPYmplY3Q9ZnVuY3Rpb24odCl7dmFyIGU9InVuZGVmaW5lZCI9PXR5cGVvZiB0PyJ1bmRlZmluZWQiOm8odCk7cmV0dXJuImZ1bmN0aW9uIj09PWV8fCJvYmplY3QiPT09ZSYmISF0fSxTLmVhY2goWyJBcmd1bWVudHMiLCJGdW5jdGlvbiIsIlN0cmluZyIsIk51bWJlciIsIkRhdGUiLCJSZWdFeHAiLCJFcnJvciJdLGZ1bmN0aW9uKHQpe1NbImlzIit0XT1mdW5jdGlvbihlKXtyZXR1cm4gdi5jYWxsKGUpPT09IltvYmplY3QgIit0KyJdIn19KSxTLmlzQXJndW1lbnRzKGFyZ3VtZW50cyl8fChTLmlzQXJndW1lbnRzPWZ1bmN0aW9uKHQpe3JldHVybiBTLmhhcyh0LCJjYWxsZWUiKX0pLCJmdW5jdGlvbiIhPXR5cGVvZi8uLyYmIm9iamVjdCIhPSgidW5kZWZpbmVkIj09dHlwZW9mIEludDhBcnJheT8idW5kZWZpbmVkIjpvKEludDhBcnJheSkpJiYoUy5pc0Z1bmN0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0fHwhMX0pLFMuaXNGaW5pdGU9ZnVuY3Rpb24odCl7cmV0dXJuIGlzRmluaXRlKHQpJiYhaXNOYU4ocGFyc2VGbG9hdCh0KSl9LFMuaXNOYU49ZnVuY3Rpb24odCl7cmV0dXJuIFMuaXNOdW1iZXIodCkmJnQhPT0rdH0sUy5pc0Jvb2xlYW49ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT0hMHx8dD09PSExfHwiW29iamVjdCBCb29sZWFuXSI9PT12LmNhbGwodCl9LFMuaXNOdWxsPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT09dH0sUy5pc1VuZGVmaW5lZD1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dH0sUy5oYXM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbCE9dCYmbS5jYWxsKHQsZSl9LFMubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBsLl89Yyx0aGlzfSxTLmlkZW50aXR5PWZ1bmN0aW9uKHQpe3JldHVybiB0fSxTLmNvbnN0YW50PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0fX0sUy5ub29wPWZ1bmN0aW9uKCl7fSxTLnByb3BlcnR5PU0sUy5wcm9wZXJ0eU9mPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P2Z1bmN0aW9uKCl7fTpmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX19LFMubWF0Y2hlcj1TLm1hdGNoZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9Uy5leHRlbmRPd24oe30sdCksZnVuY3Rpb24oZSl7cmV0dXJuIFMuaXNNYXRjaChlLHQpfX0sUy50aW1lcz1mdW5jdGlvbih0LGUsbil7dmFyIHI9QXJyYXkoTWF0aC5tYXgoMCx0KSk7ZT1rKGUsbiwxKTtmb3IodmFyIGk9MDtpPHQ7aSsrKXJbaV09ZShpKTtyZXR1cm4gcn0sUy5yYW5kb209ZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbD09ZSYmKGU9dCx0PTApLHQrTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihlLXQrMSkpfSxTLm5vdz1EYXRlLm5vd3x8ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX07dmFyIEY9eyImIjoiJmFtcDsiLCI8IjoiJmx0OyIsIj4iOiImZ3Q7IiwnIic6IiZxdW90OyIsIiciOiImI3gyNzsiLCJgIjoiJiN4NjA7In0sUD1TLmludmVydChGKSxCPWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfSxuPSIoPzoiK1Mua2V5cyh0KS5qb2luKCJ8IikrIikiLHI9UmVnRXhwKG4pLGk9UmVnRXhwKG4sImciKTtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIHQ9bnVsbD09dD8iIjoiIit0LHIudGVzdCh0KT90LnJlcGxhY2UoaSxlKTp0fX07Uy5lc2NhcGU9QihGKSxTLnVuZXNjYXBlPUIoUCksUy5yZXN1bHQ9ZnVuY3Rpb24odCxlLG4pe3ZhciByPW51bGw9PXQ/dm9pZCAwOnRbZV07cmV0dXJuIHZvaWQgMD09PXImJihyPW4pLFMuaXNGdW5jdGlvbihyKT9yLmNhbGwodCk6cn07dmFyIFc9MDtTLnVuaXF1ZUlkPWZ1bmN0aW9uKHQpe3ZhciBlPSsrVysiIjtyZXR1cm4gdD90K2U6ZX0sUy50ZW1wbGF0ZVNldHRpbmdzPXtldmFsdWF0ZTovPCUoW1xzXFNdKz8pJT4vZyxpbnRlcnBvbGF0ZTovPCU9KFtcc1xTXSs/KSU+L2csZXNjYXBlOi88JS0oW1xzXFNdKz8pJT4vZ307dmFyIEQ9LyguKV4vLEg9eyInIjoiJyIsIlxcIjoiXFwiLCJcciI6InIiLCJcbiI6Im4iLCJcdTIwMjgiOiJ1MjAyOCIsIlx1MjAyOSI6InUyMDI5In0sVT0vXFx8J3xccnxcbnxcdTIwMjh8XHUyMDI5L2csVj1mdW5jdGlvbih0KXtyZXR1cm4iXFwiK0hbdF19O1MudGVtcGxhdGU9ZnVuY3Rpb24odCxlLG4peyFlJiZuJiYoZT1uKSxlPVMuZGVmYXVsdHMoe30sZSxTLnRlbXBsYXRlU2V0dGluZ3MpO3ZhciByPVJlZ0V4cChbKGUuZXNjYXBlfHxEKS5zb3VyY2UsKGUuaW50ZXJwb2xhdGV8fEQpLnNvdXJjZSwoZS5ldmFsdWF0ZXx8RCkuc291cmNlXS5qb2luKCJ8IikrInwkIiwiZyIpLGk9MCxvPSJfX3ArPSciO3QucmVwbGFjZShyLGZ1bmN0aW9uKGUsbixyLHMsdSl7cmV0dXJuIG8rPXQuc2xpY2UoaSx1KS5yZXBsYWNlKFUsViksaT11K2UubGVuZ3RoLG4/bys9IicrXG4oKF9fdD0oIituKyIpKT09bnVsbD8nJzpfLmVzY2FwZShfX3QpKStcbiciOnI/bys9IicrXG4oKF9fdD0oIityKyIpKT09bnVsbD8nJzpfX3QpK1xuJyI6cyYmKG8rPSInO1xuIitzKyJcbl9fcCs9JyIpLGV9KSxvKz0iJztcbiIsZS52YXJpYWJsZXx8KG89IndpdGgob2JqfHx7fSl7XG4iK28rIn1cbiIpLG89InZhciBfX3QsX19wPScnLF9faj1BcnJheS5wcm90b3R5cGUuam9pbixwcmludD1mdW5jdGlvbigpe19fcCs9X19qLmNhbGwoYXJndW1lbnRzLCcnKTt9O1xuIitvKyJyZXR1cm4gX19wO1xuIjt0cnl7dmFyIHM9bmV3IEZ1bmN0aW9uKGUudmFyaWFibGV8fCJvYmoiLCJfIixvKX1jYXRjaCh1KXt0aHJvdyB1LnNvdXJjZT1vLHV9dmFyIGE9ZnVuY3Rpb24odCl7cmV0dXJuIHMuY2FsbCh0aGlzLHQsUyl9LGw9ZS52YXJpYWJsZXx8Im9iaiI7cmV0dXJuIGEuc291cmNlPSJmdW5jdGlvbigiK2wrIil7XG4iK28rIn0iLGF9LFMuY2hhaW49ZnVuY3Rpb24odCl7dmFyIGU9Uyh0KTtyZXR1cm4gZS5fY2hhaW49ITAsZX07dmFyICQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5fY2hhaW4/UyhlKS5jaGFpbigpOmV9O1MubWl4aW49ZnVuY3Rpb24odCl7Uy5lYWNoKFMuZnVuY3Rpb25zKHQpLGZ1bmN0aW9uKGUpe3ZhciBuPVNbZV09dFtlXTtTLnByb3RvdHlwZVtlXT1mdW5jdGlvbigpe3ZhciB0PVt0aGlzLl93cmFwcGVkXTtyZXR1cm4gcC5hcHBseSh0LGFyZ3VtZW50cyksJCh0aGlzLG4uYXBwbHkoUyx0KSl9fSl9LFMubWl4aW4oUyksUy5lYWNoKFsicG9wIiwicHVzaCIsInJldmVyc2UiLCJzaGlmdCIsInNvcnQiLCJzcGxpY2UiLCJ1bnNoaWZ0Il0sZnVuY3Rpb24odCl7dmFyIGU9Zlt0XTtTLnByb3RvdHlwZVt0XT1mdW5jdGlvbigpe3ZhciBuPXRoaXMuX3dyYXBwZWQ7cmV0dXJuIGUuYXBwbHkobixhcmd1bWVudHMpLCJzaGlmdCIhPT10JiYic3BsaWNlIiE9PXR8fDAhPT1uLmxlbmd0aHx8ZGVsZXRlIG5bMF0sJCh0aGlzLG4pfX0pLFMuZWFjaChbImNvbmNhdCIsImpvaW4iLCJzbGljZSJdLGZ1bmN0aW9uKHQpe3ZhciBlPWZbdF07Uy5wcm90b3R5cGVbdF09ZnVuY3Rpb24oKXtyZXR1cm4gJCh0aGlzLGUuYXBwbHkodGhpcy5fd3JhcHBlZCxhcmd1bWVudHMpKX19KSxTLnByb3RvdHlwZS52YWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl93cmFwcGVkfSxTLnByb3RvdHlwZS52YWx1ZU9mPVMucHJvdG90eXBlLnRvSlNPTj1TLnByb3RvdHlwZS52YWx1ZSxTLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiIiK3RoaXMuX3dyYXBwZWR9LHI9W10saT1mdW5jdGlvbigpe3JldHVybiBTfS5hcHBseShlLHIpLCEodm9pZCAwIT09aSYmKHQuZXhwb3J0cz1pKSl9KS5jYWxsKHZvaWQgMCl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXtpZih0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIGU9e307aWYobnVsbCE9dClmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIGVbImRlZmF1bHQiXT10LGV9ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6eyJkZWZhdWx0Ijp0fX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksZS52ZXJzaW9uPWUuaW89ZS4kPWUuYm9uZVZpZXc9ZS52aWV3PWUuc2VsY29sPWUuc2VsZWN0aW9uPWUudXRpbHM9ZS5tZW51PWUubW9kZWw9ZS5tc2E9dm9pZCAwO3ZhciBvPW4oOCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsInNlbGVjdGlvbiIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGkobylbImRlZmF1bHQiXX19KTt2YXIgcz1uKDkpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJzZWxjb2wiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpKHMpWyJkZWZhdWx0Il19fSk7dmFyIHU9bigyKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwidmlldyIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGkodSlbImRlZmF1bHQiXX19KTt2YXIgYT1uKDQpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJib25lVmlldyIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGkoYSlbImRlZmF1bHQiXX19KTt2YXIgbD1uKDUpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCIkIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaShsKVsiZGVmYXVsdCJdfX0pO3ZhciBjPW4oMTI1KSxmPWkoYyksaD1uKDUxKSxkPXIoaCkscD1uKDExMyksZz1yKHApLHY9bigzNyksbT1yKHYpLHk9bigxMCksXz1mdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKHQpe3JldHVybiBmWyJkZWZhdWx0Il0uYXBwbHkodGhpcyx0KX07cmV0dXJuIHQucHJvdG90eXBlPWZbImRlZmF1bHQiXS5wcm90b3R5cGUsbmV3IHQoYXJndW1lbnRzKX07ZVsiZGVmYXVsdCJdPV8sZS5tc2E9ZlsiZGVmYXVsdCJdLGUubW9kZWw9ZCxlLm1lbnU9ZyxlLnV0aWxzPW07dmFyIGI9e3hocjpuKDIxKSxmYXN0YTp5LmZhc3RhLGNsdXN0YWw6eS5jbHVzdGFsLGdmZjp5LmdmZn07ZS5pbz1iO3ZhciB4PSJpbXBvcnRlZCI7eD0iMS4wLjMiLGUudmVyc2lvbj14fSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OnsiZGVmYXVsdCI6dH19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBpPW4oMTIxKSxvPXIoaSkscz1uKDExOSksdT1yKHMpLGE9bigxMjMpLGw9cihhKSxjPW4oMTI0KSxmPXIoYyksaD1uKDExNSksZD1yKGgpLHA9bigxMjIpLGc9cihwKSx2PW4oMTE4KSxtPXIodikseT1uKDExNyksXz1yKHkpLGI9bigxMjApLHg9cihiKSx3PW4oMTE2KSxTPXIodyksaz1uKDExNCksaj1yKGspLE89big0KSxFPU8uZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKHQpe2lmKCF0Lm1zYSl0aHJvdyBuZXcgRXJyb3IoIk5vIG1zYSBpbnN0YW5jZSBwcm92aWRlZC4gUGxlYXNlIHByb3ZpZGUgLm1zYSIpO2lmKHRoaXMubXNhPXQubXNhLHRoaXMubXNhLmcubWVudWNvbmZpZz1uZXcgalsiZGVmYXVsdCJdKHQubWVudSksdGhpcy5hZGRWaWV3KCIxMF9pbXBvcnQiLG5ldyBvWyJkZWZhdWx0Il0oe21vZGVsOnRoaXMubXNhLnNlcXMsZzp0aGlzLm1zYS5nLG1zYTp0aGlzLm1zYX0pKSx0aGlzLmFkZFZpZXcoIjE1X29yZGVyaW5nIixuZXcgZ1siZGVmYXVsdCJdKHttb2RlbDp0aGlzLm1zYS5zZXFzLGc6dGhpcy5tc2EuZ30pKSx0aGlzLmFkZFZpZXcoIjIwX2ZpbHRlciIsbmV3IHVbImRlZmF1bHQiXSh7bW9kZWw6dGhpcy5tc2Euc2VxcyxnOnRoaXMubXNhLmd9KSksdGhpcy5hZGRWaWV3KCIzMF9zZWxlY3Rpb24iLG5ldyBsWyJkZWZhdWx0Il0oe21vZGVsOnRoaXMubXNhLnNlcXMsZzp0aGlzLm1zYS5nfSkpLHRoaXMuYWRkVmlldygiNDBfdmlzIixuZXcgZlsiZGVmYXVsdCJdKHttb2RlbDp0aGlzLm1zYS5zZXFzLGc6dGhpcy5tc2EuZ30pKSx0aGlzLmFkZFZpZXcoIjUwX2NvbG9yIixuZXcgZFsiZGVmYXVsdCJdKHttb2RlbDp0aGlzLm1zYS5zZXFzLGc6dGhpcy5tc2EuZ30pKSx0aGlzLmFkZFZpZXcoIjcwX2V4dHJhIixuZXcgbVsiZGVmYXVsdCJdKHttb2RlbDp0aGlzLm1zYS5zZXFzLGc6dGhpcy5tc2EuZyxtc2E6dGhpcy5tc2F9KSksdGhpcy5hZGRWaWV3KCI4MF9leHBvcnQiLG5ldyBfWyJkZWZhdWx0Il0oe21vZGVsOnRoaXMubXNhLnNlcXMsZzp0aGlzLm1zYS5nLG1zYTp0aGlzLm1zYX0pKSx0aGlzLmFkZFZpZXcoIjkwX2hlbHAiLG5ldyB4WyJkZWZhdWx0Il0oe2c6dGhpcy5tc2EuZ30pKSx0aGlzLm1zYS5nLmNvbmZpZy5nZXQoImRlYnVnIikpcmV0dXJuIHRoaXMuYWRkVmlldygiOTVfZGVidWciLG5ldyBTWyJkZWZhdWx0Il0oe2c6dGhpcy5tc2EuZ30pKX0scmVuZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVuZGVyU3Vidmlld3MoKSx0aGlzLmVsLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCJzbWVudWJhciIpLHRoaXMuZWwuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgicCIpKX19KTtlWyJkZWZhdWx0Il09RX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ImRlZmF1bHQiOnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1uKDExMik7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsImRlZmF1bHRtZW51Iix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcihpKVsiZGVmYXVsdCJdfX0pO3ZhciBvPW4oNik7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIm1lbnVidWlsZGVyIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcihvKVsiZGVmYXVsdCJdfX0pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgcj1uKDEpLk1vZGVsLGk9ci5leHRlbmQoe2NvbnN0cnVjdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuInNtYWxsIj09dCYmKHQ9dGhpcy5zbWFsbCksci5hcHBseSh0aGlzLFt0XSl9LHNtYWxsOnttZW51Rm9udHNpemU6IjEycHgifSxkZWZhdWx0czp7bWVudUZvbnRzaXplOiIxNHB4IixtZW51SXRlbUZvbnRzaXplOiIxNHB4IixtZW51SXRlbUxpbmVIZWlnaHQ6IjE0cHgiLG1lbnVNYXJnaW5MZWZ0OiIzcHgiLG1lbnVQYWRkaW5nOiIzcHggNHB4IDNweCA0cHgifX0pO2VbImRlZmF1bHQiXT1pfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OnsiZGVmYXVsdCI6dH19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBpPW4oNiksbz1yKGkpLHM9big3KSx1PW9bImRlZmF1bHQiXS5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZz10LmcsdGhpcy5lbC5zdHlsZS5kaXNwbGF5PSJpbmxpbmUtYmxvY2siLAp0aGlzLmxpc3RlblRvKHRoaXMuZy5jb2xvcnNjaGVtZSwiY2hhbmdlIixmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlbmRlcigpfSl9LHJlbmRlcjpmdW5jdGlvbigpe3ZhciB0PXRoaXMuc2V0TmFtZSgiQ29sb3Igc2NoZW1lIik7dGhpcy5yZW1vdmVBbGxOb2RlcygpO2Zvcih2YXIgZSxuPXRoaXMuZ2V0Q29sb3JzY2hlbWVzKCkscj0wO3I8bi5sZW5ndGg7cisrKWU9bltyXSx0aGlzLmFkZFNjaGVtZSh0LGUpO3JldHVybiB0aGlzLmdyZXkodCkscy5yZW1vdmVBbGxDaGlsZHModGhpcy5lbCksdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkRE9NKCkpLHRoaXN9LGFkZFNjaGVtZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMscj17fTtyZXR1cm4gdGhpcy5nLmNvbG9yc2NoZW1lLmdldCgic2NoZW1lIik9PT1lLmlkJiYoci5iYWNrZ3JvdW5kQ29sb3I9IiM3N0VEODAiKSx0aGlzLmFkZE5vZGUoZS5uYW1lLGZ1bmN0aW9uKCl7bi5nLmNvbG9yc2NoZW1lLnNldCgic2NoZW1lIixlLmlkKX0se3N0eWxlOnJ9KX0sZ2V0Q29sb3JzY2hlbWVzOmZ1bmN0aW9uKCl7dmFyIHQ9W107cmV0dXJuIHQucHVzaCh7bmFtZToiVGF5bG9yIixpZDoidGF5bG9yIn0pLHQucHVzaCh7bmFtZToiQnVyaWVkIixpZDoiYnVyaWVkIn0pLHQucHVzaCh7bmFtZToiQ2luZW1hIixpZDoiY2luZW1hIn0pLHQucHVzaCh7bmFtZToiQ2x1c3RhbCIsaWQ6ImNsdXN0YWwifSksdC5wdXNoKHtuYW1lOiJDbHVzdGFsMiIsaWQ6ImNsdXN0YWwyIn0pLHQucHVzaCh7bmFtZToiSGVsaXgiLGlkOiJoZWxpeCJ9KSx0LnB1c2goe25hbWU6Ikh5ZHJvcGhvYmljaXR5IixpZDoiaHlkcm8ifSksdC5wdXNoKHtuYW1lOiJMZXNrIixpZDoibGVzayJ9KSx0LnB1c2goe25hbWU6Ik1BRSIsaWQ6Im1hZSJ9KSx0LnB1c2goe25hbWU6Ik51Y2xlb3RpZGUiLGlkOiJudWNsZW90aWRlIn0pLHQucHVzaCh7bmFtZToiUHVyaW5lIixpZDoicHVyaW5lIn0pLHQucHVzaCh7bmFtZToiUElEIixpZDoicGlkIn0pLHQucHVzaCh7bmFtZToiU3RyYW5kIixpZDoic3RyYW5kIn0pLHQucHVzaCh7bmFtZToiVHVybiIsaWQ6InR1cm4ifSksdC5wdXNoKHtuYW1lOiJaYXBwbyIsaWQ6InphcHBvIn0pLHQucHVzaCh7bmFtZToiTm8gY29sb3IiLGlkOiJmb28ifSksdH0sZ3JleTpmdW5jdGlvbih0KXt9fSk7ZVsiZGVmYXVsdCJdPXV9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6eyJkZWZhdWx0Ijp0fX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGk9big2KSxvPXIoaSkscz1vWyJkZWZhdWx0Il0uZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmc9dC5nLHRoaXMuZWwuc3R5bGUuZGlzcGxheT0iaW5saW5lLWJsb2NrIn0scmVuZGVyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gdGhpcy5zZXROYW1lKCJEZWJ1ZyIpLHRoaXMuYWRkTm9kZSgiR2V0IHRoZSBjb2RlIixmdW5jdGlvbigpe3JldHVybiB3aW5kb3cub3BlbigiaHR0cHM6Ly9naXRodWIuY29tL3dpbHpiYWNoL21zYSIpfSksdGhpcy5hZGROb2RlKCJUb2dnbGUgbW91c2VvdmVyIGV2ZW50cyIsZnVuY3Rpb24oKXtyZXR1cm4gdC5nLmNvbmZpZy5zZXQoInJlZ2lzdGVyTW91c2VIb3ZlciIsIXQuZy5jb25maWcuZ2V0KCJyZWdpc3Rlck1vdXNlSG92ZXIiKSksdC5nLm9uQWxsKGZ1bmN0aW9uKCl7cmV0dXJuIGNvbnNvbGUubG9nKGFyZ3VtZW50cyl9KX0pLHRoaXMuYWRkTm9kZSgiTWluaW1pemVkIHdpZHRoIixmdW5jdGlvbigpe3JldHVybiB0Lmcuem9vbWVyLnNldCgiYWxpZ25tZW50V2lkdGgiLDYwMCl9KSx0aGlzLmFkZE5vZGUoIk1pbmltaXplZCBoZWlnaHQiLGZ1bmN0aW9uKCl7cmV0dXJuIHQuZy56b29tZXIuc2V0KCJhbGlnbm1lbnRIZWlnaHQiLDEyMCl9KSx0aGlzLmVsLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRET00oKSksdGhpc319KTtlWyJkZWZhdWx0Il09c30sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ImRlZmF1bHQiOnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1uKDYpLG89cihpKSxzPW4oMTYpLHU9cihzKSxhPW4oMTApLGw9KGEuZmFzdGEud3JpdGUsIuKGqiIpLGM9b1siZGVmYXVsdCJdLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nPXQuZyx0aGlzLm1zYT10Lm1zYSx0aGlzLmVsLnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayJ9LHJlbmRlcjpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuc2V0TmFtZSgiRXhwb3J0IiksdGhpcy5hZGROb2RlKCJTaGFyZSB2aWV3IChVUkwpIitsLGZ1bmN0aW9uKCl7cmV0dXJuIHVbImRlZmF1bHQiXS5zaGFyZUxpbmsodC5tc2EsZnVuY3Rpb24odCl7cmV0dXJuIHdpbmRvdy5vcGVuKHQsIl9ibGFuayIpfSl9KSx0aGlzLmFkZE5vZGUoIlZpZXcgaW4gSmFsdmlldyIsZnVuY3Rpb24oKXt2YXIgZT10LmcuY29uZmlnLmdldCgidXJsIik7cmV0dXJuInVuZGVmaW5lZCI9PXR5cGVvZiBlfHxudWxsPT09ZT9hbGVydCgiU2VxdWVuY2Ugd2VyZW4ndCBpbXBvcnRlZCB2aWEgYW4gVVJMIik6ZS5pbmRleE9mKCJsb2NhbGhvc3QiKT91WyJkZWZhdWx0Il0ucHVibGlzaFdlYih0Lm1zYSxmdW5jdGlvbihlKXtyZXR1cm4gdVsiZGVmYXVsdCJdLm9wZW5JbkphbHZpZXcoZSx0LmcuY29sb3JzY2hlbWUuZ2V0KCJzY2hlbWUiKSl9KTp1WyJkZWZhdWx0Il0ub3BlbkluSmFsdmlldyhlLHQuZy5jb2xvcnNjaGVtZS5nZXQoInNjaGVtZSIpKX0pLHRoaXMuYWRkTm9kZSgiRXhwb3J0IGFsaWdubWVudCAoRkFTVEEpIixmdW5jdGlvbigpe3JldHVybiB1WyJkZWZhdWx0Il0uc2F2ZUFzRmlsZSh0Lm1zYSwiYWxsLmZhc3RhIil9KSx0aGlzLmFkZE5vZGUoIkV4cG9ydCBhbGlnbm1lbnQgKFVSTCkiLGZ1bmN0aW9uKCl7cmV0dXJuIHVbImRlZmF1bHQiXS5wdWJsaXNoV2ViKHQubXNhLGZ1bmN0aW9uKHQpe3JldHVybiB3aW5kb3cub3Blbih0LCJfYmxhbmsiKX0pfSksdGhpcy5hZGROb2RlKCJFeHBvcnQgc2VsZWN0ZWQgc2VxdWVuY2VzIChGQVNUQSkiLGZ1bmN0aW9uKCl7cmV0dXJuIHVbImRlZmF1bHQiXS5zYXZlU2VsZWN0aW9uKHQubXNhLCJzZWxlY3Rpb24uZmFzdGEiKX0pLHRoaXMuYWRkTm9kZSgiRXhwb3J0IGZlYXR1cmVzIChHRkYpIixmdW5jdGlvbigpe3JldHVybiB1WyJkZWZhdWx0Il0uc2F2ZUFubm90cyh0Lm1zYSwiZmVhdHVyZXMuZ2ZmMyIpfSksdGhpcy5hZGROb2RlKCJFeHBvcnQgTVNBIGltYWdlIChQTkcpIixmdW5jdGlvbigpe3JldHVybiB1WyJkZWZhdWx0Il0uc2F2ZUFzSW1nKHQubXNhLCJiaW9qcy1tc2EucG5nIil9KSx0aGlzLmVsLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRET00oKSksdGhpc319KTtlWyJkZWZhdWx0Il09Y30sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ImRlZmF1bHQiOnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1uKDYpLG89cihpKSxzPW4oMzYpLHU9cihzKSxhPW4oMTgpLGw9KHIoYSksbigyMSksb1siZGVmYXVsdCJdLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nPXQuZyx0aGlzLmVsLnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayIsdGhpcy5tc2E9dC5tc2F9LHJlbmRlcjpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5zZXROYW1lKCJFeHRyYXMiKTt2YXIgZT10aGlzLmcuc3RhdHM7cmV0dXJuIHRoaXMubXNhLHRoaXMuYWRkTm9kZSgiQWRkIGNvbnNlbnN1cyBzZXEiLGZ1bmN0aW9uKCl7dmFyIG49ZS5jb25zZW5zdXMoKSxyPW5ldyB1WyJkZWZhdWx0Il0oe3NlcTpuLGlkOiIwYyIsbmFtZToiQ29uc2VudXMifSk7cmV0dXJuIHQubW9kZWwuYWRkKHIpLHQubW9kZWwuc2V0UmVmKHIpLHQubW9kZWwuY29tcGFyYXRvcj1mdW5jdGlvbih0KXtyZXR1cm4hdC5nZXQoInJlZiIpfSx0Lm1vZGVsLnNvcnQoKX0pLHRoaXMuYWRkTm9kZSgiSnVtcCB0byBhIGNvbHVtbiIsZnVuY3Rpb24oKXt2YXIgZT1wcm9tcHQoIkNvbHVtbiIsIjIwIik7cmV0dXJuIGU8MHx8ZT50Lm1vZGVsLmdldE1heExlbmd0aCgpfHxpc05hTihlKT92b2lkIGFsZXJ0KCJpbnZhbGlkIGNvbHVtbiIpOnQuZy56b29tZXIuc2V0TGVmdE9mZnNldChlKX0pLHRoaXMuZWwuYXBwZW5kQ2hpbGQodGhpcy5idWlsZERPTSgpKSx0aGlzfX0pKTtlWyJkZWZhdWx0Il09bH0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ImRlZmF1bHQiOnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1uKDYpLG89cihpKSxzPW9bImRlZmF1bHQiXS5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZz10LmcsdGhpcy5lbC5zdHlsZS5kaXNwbGF5PSJpbmxpbmUtYmxvY2sifSxyZW5kZXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLnNldE5hbWUoIkZpbHRlciIpLHRoaXMuYWRkTm9kZSgiSGlkZSBjb2x1bW5zIGJ5IHRocmVzaG9sZCIsZnVuY3Rpb24oZSl7dmFyIG49cHJvbXB0KCJFbnRlciB0aHJlc2hvbGQgKGluIHBlcmNlbnQpIiwyMCk7bi89MTAwO2Zvcih2YXIgcj10Lm1vZGVsLmdldE1heExlbmd0aCgpLGk9W10sbz10Lmcuc3RhdHMuc2NhbGUodC5nLnN0YXRzLmNvbnNlcnZhdGlvbigpKSxzPXItMSx1PTA7MDxzP3U8PXM6dT49czswPHM/dSsrOnUtLSlvW3VdPG4mJmkucHVzaCh1KTtyZXR1cm4gdC5nLmNvbHVtbnMuc2V0KCJoaWRkZW4iLGkpfSksdGhpcy5hZGROb2RlKCJIaWRlIGNvbHVtbnMgYnkgc2VsZWN0aW9uIixmdW5jdGlvbigpe3ZhciBlPXQuZy5jb2x1bW5zLmdldCgiaGlkZGVuIiksbj1lLmNvbmNhdCh0Lmcuc2VsY29sLmdldEFsbENvbHVtbkJsb2Nrcyh7bWF4TGVuOnQubW9kZWwuZ2V0TWF4TGVuZ3RoKCksd2l0aFBvczohMH0pKTtyZXR1cm4gdC5nLnNlbGNvbC5yZXNldChbXSksdC5nLmNvbHVtbnMuc2V0KCJoaWRkZW4iLG4pfSksdGhpcy5hZGROb2RlKCJIaWRlIGNvbHVtbnMgYnkgZ2FwcyIsZnVuY3Rpb24oKXt2YXIgZT1wcm9tcHQoIkVudGVyIHRocmVzaG9sZCAoaW4gcGVyY2VudCkiLDIwKTtlLz0xMDA7Zm9yKHZhciBuPXQubW9kZWwuZ2V0TWF4TGVuZ3RoKCkscj1bXSxpPW4tMSxvPTA7MDxpP288PWk6bz49aTswPGk/bysrOm8tLSl7dmFyIHM9MCx1PTA7dC5tb2RlbC5lYWNoKGZ1bmN0aW9uKHQpe3JldHVybiItIj09PXQuZ2V0KCJzZXEiKVtvXSYmcysrLHUrK30pLHMvdT5lJiZyLnB1c2gobyl9cmV0dXJuIHQuZy5jb2x1bW5zLnNldCgiaGlkZGVuIixyKX0pLHRoaXMuYWRkTm9kZSgiSGlkZSBzZXFzIGJ5IGlkZW50aXR5IixmdW5jdGlvbigpe3ZhciBlPXByb21wdCgiRW50ZXIgdGhyZXNob2xkIChpbiBwZXJjZW50KSIsMjApO3JldHVybiBlLz0xMDAsdC5tb2RlbC5lYWNoKGZ1bmN0aW9uKHQpe2lmKHQuZ2V0KCJpZGVudGl0eSIpPGUpcmV0dXJuIHQuc2V0KCJoaWRkZW4iLCEwKX0pfSksdGhpcy5hZGROb2RlKCJIaWRlIHNlcXMgYnkgc2VsZWN0aW9uIixmdW5jdGlvbigpe3ZhciBlPXQuZy5zZWxjb2wud2hlcmUoe3R5cGU6InJvdyJ9KSxuPWUubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LmdldCgic2VxSWQiKX0pO3JldHVybiB0Lmcuc2VsY29sLnJlc2V0KFtdKSx0Lm1vZGVsLmVhY2goZnVuY3Rpb24odCl7aWYobi5pbmRleE9mKHQuZ2V0KCJpZCIpKT49MClyZXR1cm4gdC5zZXQoImhpZGRlbiIsITApfSl9KSx0aGlzLmFkZE5vZGUoIkhpZGUgc2VxcyBieSBnYXBzIixmdW5jdGlvbigpe3ZhciBlPXByb21wdCgiRW50ZXIgdGhyZXNob2xkIChpbiBwZXJjZW50KSIsNDApO3JldHVybiB0Lm1vZGVsLmVhY2goZnVuY3Rpb24odCxuKXtpZih0LmdldCgic2VxIikucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIi0iPT09ZT8rK3Q6dm9pZCAwfSwwKT5lKXJldHVybiB0LnNldCgiaGlkZGVuIiwhMCl9KX0pLHRoaXMuYWRkTm9kZSgiUmVzZXQiLGZ1bmN0aW9uKCl7cmV0dXJuIHQuZy5jb2x1bW5zLnNldCgiaGlkZGVuIixbXSksdC5tb2RlbC5lYWNoKGZ1bmN0aW9uKHQpe2lmKHQuZ2V0KCJoaWRkZW4iKSlyZXR1cm4gdC5zZXQoImhpZGRlbiIsITEpfSl9KSx0aGlzLmVsLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRET00oKSksdGhpc319KTtlWyJkZWZhdWx0Il09c30sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ImRlZmF1bHQiOnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1uKDYpLG89cihpKSxzPW9bImRlZmF1bHQiXS5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZz10Lmd9LHJlbmRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNldE5hbWUoIkhlbHAiKSx0aGlzLmFkZE5vZGUoIkFib3V0IHRoZSBwcm9qZWN0IixmdW5jdGlvbigpe3JldHVybiB3aW5kb3cub3BlbigiaHR0cHM6Ly9naXRodWIuY29tL3dpbHpiYWNoL21zYSIpfSksdGhpcy5hZGROb2RlKCJSZXBvcnQgaXNzdWVzIixmdW5jdGlvbigpe3JldHVybiB3aW5kb3cub3BlbigiaHR0cHM6Ly9naXRodWIuY29tL3dpbHpiYWNoL21zYS9pc3N1ZXMiKX0pLHRoaXMuYWRkTm9kZSgiVXNlciBtYW51YWwiLGZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5vcGVuKCJodHRwczovL2dpdGh1Yi5jb20vd2lsemJhY2gvbXNhL3dpa2kvVXNlci1tYW51YWwiKX0pLHRoaXMuZWwuc3R5bGUuZGlzcGxheT0iaW5saW5lLWJsb2NrIix0aGlzLmVsLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRET00oKSksdGhpc319KTtlWyJkZWZhdWx0Il09c30sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ImRlZmF1bHQiOnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1uKDYpLG89cihpKSxzPW4oMTQpLHU9b1siZGVmYXVsdCJdLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nPXQuZyx0aGlzLmVsLnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayIsdGhpcy5tc2E9dC5tc2F9LHJlbmRlcjpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10aGlzLm1zYSxuPXMubWsoImlucHV0Iik7bi50eXBlPSJmaWxlIixuLnN0eWxlLmRpc3BsYXk9Im5vbmUiLG4ubXVsdGlwbGU9ITAsbi5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLGZ1bmN0aW9uKCl7dmFyIHQ9bi5maWxlc3x8W107cmV0dXJuIGUudS5maWxlLmltcG9ydEZpbGVzKHQpfSksdGhpcy5lbC5hcHBlbmRDaGlsZChuKTt2YXIgcj0iKEZhc3RhLCBDbHVzdGFsLCBHRkYsIEphbHZpZXcgZmVhdHVyZXMsIE5ld2ljaykiO3JldHVybiB0aGlzLnNldE5hbWUoIkltcG9ydCIpLHRoaXMuYWRkTm9kZSgiVVJMIixmdW5jdGlvbihlKXt2YXIgbj1wcm9tcHQoIlVSTCAiK3IsImh0dHA6Ly9yb3N0bGFiLm9yZy9+Z29sZGJlcmcvY2x1c3RhbHcyLUkyMDE0MDgxOC0yMTUyNDktMDU1Ni01MzY5OTg3OC1wZy5jbHVzdGFsdyIpO2lmKG4ubGVuZ3RoPjUpcmV0dXJuIHQubXNhLnUuZmlsZS5pbXBvcnRVUkwobixmdW5jdGlvbigpe30pfSksdGhpcy5hZGROb2RlKCJGcm9tIGZpbGUgIityLGZ1bmN0aW9uKCl7cmV0dXJuIG4uY2xpY2soKX0pLHRoaXMuYWRkTm9kZSgiRHJhZyAmIERyb3AiLGZ1bmN0aW9uKCl7cmV0dXJuIGFsZXJ0KCJZZXAuIEp1c3QgZHJhZyAmIGRyb3AgeW91ciBmaWxlICIrcil9KSx0aGlzLmVsLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRET00oKSksdGhpc319KTtlWyJkZWZhdWx0Il09dX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ImRlZmF1bHQiOnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1uKDYpLG89cihpKSxzPW4oNyksdT0i4oaRIixhPSLihpMiLGw9b1siZGVmYXVsdCJdLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nPXQuZyx0aGlzLm9yZGVyPSJJRCIsdGhpcy5lbC5zdHlsZS5kaXNwbGF5PSJpbmxpbmUtYmxvY2sifSxzZXRPcmRlcjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vcmRlcj10LHRoaXMucmVuZGVyKCl9LHJlbmRlcjpmdW5jdGlvbigpe3RoaXMuc2V0TmFtZSgiU29ydGluZyIpLHRoaXMucmVtb3ZlQWxsTm9kZXMoKTtmb3IodmFyIHQsZT10aGlzLmdldENvbXBhcmF0b3JzKCksbj0wO248ZS5sZW5ndGg7bisrKXQ9ZVtuXSx0aGlzLl9hZGROb2RlKHQpO3ZhciByPXRoaXMuYnVpbGRET00oKTtyZXR1cm4gcy5yZW1vdmVBbGxDaGlsZHModGhpcy5lbCksdGhpcy5lbC5hcHBlbmRDaGlsZChyKSx0aGlzfSxfYWRkTm9kZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49dC50ZXh0LHI9e307cmV0dXJuIG49PT10aGlzLm9yZGVyJiYoci5iYWNrZ3JvdW5kQ29sb3I9IiM3N0VEODAiKSx0aGlzLmFkZE5vZGUobixmdW5jdGlvbigpe3JldHVybiBudWxsIT10LnByZWNvZGUmJnQucHJlY29kZSgpLGUubW9kZWwuY29tcGFyYXRvcj10LmNvbXBhcmF0b3IsZS5tb2RlbC5zb3J0KCksZS5zZXRPcmRlcih0LnRleHQpfSx7c3R5bGU6cn0pfSxnZXRDb21wYXJhdG9yczpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1bXTtlLnB1c2goe3RleHQ6IklEICIrdSxjb21wYXJhdG9yOiJpZCJ9KSxlLnB1c2goe3RleHQ6IklEICIrYSxjb21wYXJhdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuLSgiIit0LmdldCgiaWQiKSkubG9jYWxlQ29tcGFyZSgiIitlLmdldCgiaWQiKSxbXSx7bnVtZXJpYzohMH0pfX0pLGUucHVzaCh7dGV4dDoiTGFiZWwgIit1LGNvbXBhcmF0b3I6Im5hbWUifSksZS5wdXNoKHt0ZXh0OiJMYWJlbCAiK2EsY29tcGFyYXRvcjpmdW5jdGlvbih0LGUpe3JldHVybi10LmdldCgibmFtZSIpLmxvY2FsZUNvbXBhcmUoZS5nZXQoIm5hbWUiKSl9fSksZS5wdXNoKHt0ZXh0OiJTZXEgIit1LGNvbXBhcmF0b3I6InNlcSJ9KSxlLnB1c2goe3RleHQ6IlNlcSAiK2EsY29tcGFyYXRvcjpmdW5jdGlvbih0LGUpe3JldHVybi10LmdldCgic2VxIikubG9jYWxlQ29tcGFyZShlLmdldCgic2VxIikpfX0pO3ZhciBuPWZ1bmN0aW9uKCl7cmV0dXJuIHQuaWRlbnQ9dC5nLnN0YXRzLmlkZW50aXR5KCl9LHI9ZnVuY3Rpb24oKXtyZXR1cm4gdC5nYXBzPXt9LHQubW9kZWwuZWFjaChmdW5jdGlvbihlKXt2YXIgbj1lLmF0dHJpYnV0ZXMuc2VxO3JldHVybiB0LmdhcHNbZS5pZF09KG4ucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIi0iPT09ZT8rK3Q6dm9pZCAwfSksMC9uLmxlbmd0aCl9KX07cmV0dXJuIGUucHVzaCh7dGV4dDoiSWRlbnRpdHkgIit1LGNvbXBhcmF0b3I6ZnVuY3Rpb24oZSxuKXt2YXIgcj10LmlkZW50W2UuaWRdLXQuaWRlbnRbbi5pZF07cmV0dXJuIHI+MD8xOnI8MD8tMTowfSxwcmVjb2RlOm59KSxlLnB1c2goe3RleHQ6IklkZW50aXR5ICIrYSxjb21wYXJhdG9yOmZ1bmN0aW9uKGUsbil7dmFyIHI9dC5pZGVudFtlLmlkXS10LmlkZW50W24uaWRdO3JldHVybiByPjA/LTE6cjwwPzE6MH0scHJlY29kZTpufSksZS5wdXNoKHt0ZXh0OiJHYXBzICIrdSxjb21wYXJhdG9yOmZ1bmN0aW9uKGUsbil7dmFyIHI9dC5nYXBzW2UuaWRdLXQuZ2Fwc1tuLmlkXTtyZXR1cm4gcj4wPzE6cjwwPy0xOjB9LHByZWNvZGU6cn0pLGUucHVzaCh7dGV4dDoiR2FwcyAiK2EsY29tcGFyYXRvcjpmdW5jdGlvbihlLG4pe3ZhciByPXQuZ2Fwc1tlLmlkXS10LmdhcHNbbi5pZF07cmV0dXJuIHI8MD8xOnI+MD8tMTowfSxwcmVjb2RlOnJ9KSxlLnB1c2goe3RleHQ6IkNvbnNlbnN1cyB0byB0b3AiLGNvbXBhcmF0b3I6ZnVuY3Rpb24odCl7cmV0dXJuIXQuZ2V0KCJyZWYiKX19KSxlfX0pO2VbImRlZmF1bHQiXT1sfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OnsiZGVmYXVsdCI6dH19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBpPW4oNiksbz1yKGkpLHM9b1siZGVmYXVsdCJdLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nPXQuZyx0aGlzLmVsLnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayJ9LHJlbmRlcjpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuc2V0TmFtZSgiU2VsZWN0aW9uIiksdGhpcy5hZGROb2RlKCJGaW5kIE1vdGlmIChzdXBwb3J0cyBSZWdFeCkiLGZ1bmN0aW9uKCl7dmFyIGU9cHJvbXB0KCJ5b3VyIHNlYXJjaCIsIkQiKTtyZXR1cm4gdC5nLnVzZXIuc2V0KCJzZWFyY2hUZXh0IixlKX0pLHRoaXMuYWRkTm9kZSgiSW52ZXJ0IGNvbHVtbnMiLGZ1bmN0aW9uKCl7cmV0dXJuIHQuZy5zZWxjb2wuaW52ZXJ0Q29sKGZ1bmN0aW9uKCl7dmFyIGU9W10sbj10Lm1vZGVsLmdldE1heExlbmd0aCgpLHI9MDtpZigwPD1uKWZvcig7cjw9bjspZS5wdXNoKHIrKyk7ZWxzZSBmb3IoO3I+PW47KWUucHVzaChyLS0pO3JldHVybiBlfSgpKX0pLHRoaXMuYWRkTm9kZSgiSW52ZXJ0IHJvd3MiLGZ1bmN0aW9uKCl7cmV0dXJuIHQuZy5zZWxjb2wuaW52ZXJ0Um93KHQubW9kZWwucGx1Y2soImlkIikpfSksdGhpcy5hZGROb2RlKCJSZXNldCIsZnVuY3Rpb24oKXtyZXR1cm4gdC5nLnNlbGNvbC5yZXNldCgpfSksdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkRE9NKCkpLHRoaXN9fSk7ZVsiZGVmYXVsdCJdPXN9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6eyJkZWZhdWx0Ijp0fX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGk9big2KSxvPXIoaSkscz1uKDcpLHU9b1siZGVmYXVsdCJdLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nPXQuZyx0aGlzLmVsLnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayIsdGhpcy5saXN0ZW5Ubyh0aGlzLmcudmlzLCJjaGFuZ2UiLHRoaXMucmVuZGVyKX0scmVuZGVyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLnJlbW92ZUFsbE5vZGVzKCksdGhpcy5zZXROYW1lKCJWaXMuZWxlbWVudHMiKTtmb3IodmFyIGUsbj10aGlzLmdldFZpc0VsZW1lbnRzKCkscj0wO3I8bi5sZW5ndGg7cisrKWU9bltyXSx0aGlzLl9hZGRWaXNFbChlKTtyZXR1cm4gdGhpcy5hZGROb2RlKCJSZXNldCIsZnVuY3Rpb24oKXtyZXR1cm4gdC5nLnZpcy5zZXQoImxhYmVscyIsITApLHQuZy52aXMuc2V0KCJzZXF1ZW5jZXMiLCEwKSx0LmcudmlzLnNldCgibWV0YWNlbGwiLCEwKSx0LmcudmlzLnNldCgiY29uc2VydiIsITApLHQuZy52aXMuc2V0KCJsYWJlbElkIiwhMCksdC5nLnZpcy5zZXQoImxhYmVsTmFtZSIsITApLHQuZy52aXMuc2V0KCJsYWJlbENoZWNrYm94IiwhMSksdC5nLnZpcy5zZXQoInNlcWxvZ28iLCExKSx0LmcudmlzLnNldCgiZ2FwSGVhZGVyIiwhMSksdC5nLnZpcy5zZXQoImxlZnRIZWFkZXIiLCEwKSx0LmcudmlzLnNldCgibWV0YUdhcHMiLCEwKSx0LmcudmlzLnNldCgibWV0YUlkZW50aXR5IiwhMCksdC5nLnZpcy5zZXQoIm1ldGFMaW5rcyIsITApfSkscy5yZW1vdmVBbGxDaGlsZHModGhpcy5lbCksdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkRE9NKCkpLHRoaXN9LF9hZGRWaXNFbDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49e307aWYodGhpcy5nLnZpcy5nZXQodC5pZCkpe3ZhciByPSJIaWRlICI7bi5jb2xvcj0icmVkIn1lbHNlIHI9IlNob3cgIixuLmNvbG9yPSJncmVlbiI7cmV0dXJuIHRoaXMuYWRkTm9kZShyK3QubmFtZSxmdW5jdGlvbigpe3JldHVybiBlLmcudmlzLnNldCh0LmlkLCFlLmcudmlzLmdldCh0LmlkKSl9LHtzdHlsZTpufSl9LGdldFZpc0VsZW1lbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9W107cmV0dXJuIHQucHVzaCh7bmFtZToicmVzaWR1ZXMgaW5kaWNlcyIsaWQ6Im1hcmtlcnMifSksdC5wdXNoKHtuYW1lOiJJRC9MYWJlbCIsaWQ6ImxhYmVscyJ9KSx0LnB1c2goe25hbWU6Im1ldGEgaW5mbyAoR2Fwcy9JZGVudCkiLGlkOiJtZXRhY2VsbCJ9KSx0LnB1c2goe25hbWU6Im92ZXJ2aWV3IHBhbmVsIixpZDoib3ZlcnZpZXdib3gifSksdC5wdXNoKHtuYW1lOiJzZXF1ZW5jZSBsb2dvIixpZDoic2VxbG9nbyJ9KSx0LnB1c2goe25hbWU6ImdhcCB3ZWlnaHRzIixpZDoiZ2FwSGVhZGVyIn0pLHQucHVzaCh7bmFtZToiY29uc2VydmF0aW9uIHdlaWdodHMiLGlkOiJjb25zZXJ2In0pLHQucHVzaCh7bmFtZToic2NhbGUgc2xpZGVyIixpZDoic2NhbGVzbGlkZXIifSksdC5wdXNoKHtuYW1lOiJMYWJlbCIsaWQ6ImxhYmVsTmFtZSJ9KSx0LnB1c2goe25hbWU6IklEIixpZDoibGFiZWxJZCJ9KSx0LnB1c2goe25hbWU6ImdhcHMgJSIsaWQ6Im1ldGFHYXBzIn0pLHQucHVzaCh7bmFtZToiaWRlbnRpdHkgc2NvcmUiLGlkOiJtZXRhSWRlbnRpdHkifSksdH19KTtlWyJkZWZhdWx0Il09dX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ImRlZmF1bHQiOnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1uKDM1KSxvPXIoaSkscz1uKDI2KSx1PXIocyksYT1uKDI3KSxsPXIoYSksYz1uKDI4KSxmPXIoYyksaD1uKDI5KSxkPXIoaCkscD1uKDkpLGc9cihwKSx2PW4oMzApLG09cih2KSx5PW4oMzIpLF89cih5KSxiPW4oMzEpLHg9cihiKSx3PW4oMzMpLFM9cih3KSxrPW4oMjUpLGo9cihrKSxPPW4oMTMwKSxFPXIoTyksTT1uKDE3KSx6PXIoTSksQT1uKDQwKSxDPXIoQSksVD1uKDE5KSxJPXIoVCksTj1uKDQpLEw9bigxMyksUj1uKDQ4KSxxPW4oNSksRj1OLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgdCYmbnVsbCE9PXR8fCh0PXt9KSxudWxsPT10LmNvbG9yc2NoZW1lJiYodC5jb2xvcnNjaGVtZT17fSksbnVsbD09dC5jb2x1bW5zJiYodC5jb2x1bW5zPXt9KSxudWxsPT10LmNvbmYmJih0LmNvbmY9e30pLG51bGw9PXQudmlzJiYodC52aXM9e30pLG51bGw9PXQudmlzb3JkZXImJih0LnZpc29yZGVyPXt9KSxudWxsPT10Lnpvb21lciYmKHQuem9vbWVyPXt9KSxudWxsPT10LmNvbnNlcnYmJih0LmNvbnNlcnY9e30pLG51bGw9PXQuc2NhbGUmJih0LnNjYWxlPXt9KSx0aGlzLmc9TC5taXhpbih7fSksdGhpcy5zZXFzPXRoaXMuZy5zZXFzPW5ldyBvWyJkZWZhdWx0Il0odC5zZXFzLHRoaXMuZyksdGhpcy5nLmNvbmZpZz1uZXcgZlsiZGVmYXVsdCJdKHQuY29uZiksdGhpcy5nWyJwYWNrYWdlIl09bmV3IGRbImRlZmF1bHQiXSh0aGlzLmcpLHRoaXMuZy5zZWxjb2w9bmV3IGdbImRlZmF1bHQiXShbXSx7Zzp0aGlzLmd9KSx0aGlzLmcudXNlcj1uZXcgbVsiZGVmYXVsdCJdLHRoaXMuZy52aXM9bmV3IF9bImRlZmF1bHQiXSh0LnZpcyx7bW9kZWw6dGhpcy5zZXFzfSksdGhpcy5nLnZpc29yZGVyPW5ldyB4WyJkZWZhdWx0Il0odC52aXNvcmRlciksdGhpcy5nLnpvb21lcj1uZXcgU1siZGVmYXVsdCJdKHQuem9vbWVyLHtnOnRoaXMuZyxtb2RlbDp0aGlzLnNlcXN9KSx0aGlzLmcuc2NhbGU9bmV3IGpbImRlZmF1bHQiXSh0LnNjYWxlLHtnOnRoaXMuZ30pLHRoaXMuZy5jb25zZXJ2YXRpb25Db25maWc9dC5jb25zZXJ2LCJsb2NhbGhvc3QiPT09d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lJiZ0aGlzLmcuY29uZmlnLnNldCgiZGVidWciLCEwKSx0aGlzLl9sb2FkU2Vxcyh0KSx0aGlzLnU9e30sdGhpcy51LmZpbGU9bmV3IHpbImRlZmF1bHQiXSh0aGlzKSx0aGlzLnUucHJveHk9bmV3IElbImRlZmF1bHQiXSh7Zzp0aGlzLmd9KSx0aGlzLnUudHJlZT1uZXcgQ1siZGVmYXVsdCJdKHRoaXMpLHRoaXMuZy5jb25maWcuZ2V0KCJldmVudEJ1cyIpPT09ITAmJnRoaXMuc3RhcnRFdmVudEJ1cygpLHRoaXMuZy5jb25maWcuZ2V0KCJkcm9wSW1wb3J0Iikpe3ZhciBuPXtkcmFnb3Zlcjp0aGlzLmRyYWdPdmVyLGRyb3A6dGhpcy5kcm9wRmlsZX07dGhpcy5kZWxlZ2F0ZUV2ZW50cyhuKX1yZXR1cm4gdC5pbXBvcnRVUkwmJnRoaXMudS5maWxlLmltcG9ydFVSTCh0LmltcG9ydFVSTCxmdW5jdGlvbigpe3JldHVybiBlLnJlbmRlcigpfSksdC5ib290c3RyYXBNZW51JiYodC5tZW51JiYodGhpcy5tZW51Q29uZmlnPXQubWVudSksdGhpcy5nLmNvbmZpZy5zZXQoImJvb3RzdHJhcE1lbnUiLCEwKSksdGhpcy5kcmF3KCksdGhpcy5tKCl9LF9sb2FkU2VxczpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnNlcXMucGx1Y2soInNlcSIpO3JldHVybiB0aGlzLmcuc3RhdHM9bmV3IFIodGhpcy5zZXFzLHt1c2VHYXBzOiEwfSksdGhpcy5nLnN0YXRzLmFscGhhYmV0U2l6ZT10aGlzLmcuY29uZmlnLmdldCgiYWxwaGFiZXRTaXplIiksdGhpcy5nLmNvbHVtbnM9bmV3IGxbImRlZmF1bHQiXSh0LmNvbHVtbnMsdGhpcy5nLnN0YXRzKSx0aGlzLmcuY29sb3JzY2hlbWU9bmV3IHVbImRlZmF1bHQiXSh0LmNvbG9yc2NoZW1lLGUsdGhpcy5nLnN0YXRzKSx0aGlzLmcuem9vbWVyLnNldEVsKHRoaXMuZWwsdGhpcy5zZXFzKX0saW1wb3J0VVJMOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudS5maWxlLmltcG9ydFVSTC5hcHBseSh0aGlzLnUuZmlsZSxhcmd1bWVudHMpfSxtOmZ1bmN0aW9uIFAoKXt2YXIgUD17fTtyZXR1cm4gUC5tb2RlbD1uKDUxKSxQLnNlbGVjdGlvbj1uKDgpLFAuc2VsY29sPW4oOSksUC52aWV3PW4oMiksUC5ib25lVmlldz1uKDQpLHRoaXMubT1QfSxkcmF3OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0aGlzLnJlbW92ZVZpZXdzKCksdGhpcy5hZGRWaWV3KCJzdGFnZSIsbmV3IEVbImRlZmF1bHQiXSh7bW9kZWw6dGhpcy5zZXFzLGc6dGhpcy5nfSkpLHRoaXMuJGVsLmFkZENsYXNzKCJiaW9qc19tc2FfZGl2IiksdGhpcy5nLmNvbmZpZy5nZXQoImJvb3RzdHJhcE1lbnUiKSl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iiksbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt0aGlzLmVsLnBhcmVudE5vZGU/KHRoaXMuZWwucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobix0aGlzLmVsKSxuLmFwcGVuZENoaWxkKGUpLG4uYXBwZW5kQ2hpbGQodGhpcy5lbCkpOihuLmFwcGVuZENoaWxkKGUpLG4uYXBwZW5kQ2hpbGQodGhpcy5lbCkpO3ZhciByPXtlbDplLG1zYTp0aGlzfTt0aGlzLm1lbnVDb25maWcmJihyLm1lbnU9dGhpcy5tZW51Q29uZmlnKSxuZXcgbXNhLm1lbnUuZGVmYXVsdG1lbnUocikucmVuZGVyKCl9cmV0dXJuIHEod2luZG93KS5vbigicmVzaXplIixmdW5jdGlvbihlKXt2YXIgbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmcuem9vbWVyLmF1dG9SZXNpemUoKX07cmV0dXJuIHNldFRpbWVvdXQobi5iaW5kKHQpLDUpfSl9LGRyYWdPdmVyOmZ1bmN0aW9uKHQpe3JldHVybiB0LnByZXZlbnREZWZhdWx0KCksdC50YXJnZXQuY2xhc3NOYW1lPSJob3ZlciIsITF9LGRyb3BGaWxlOmZ1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKTt2YXIgZT10LnRhcmdldC5maWxlc3x8dC5kYXRhVHJhbnNmZXIuZmlsZXM7cmV0dXJuIHRoaXMudS5maWxlLmltcG9ydEZpbGVzKGUpLCExfSxzdGFydEV2ZW50QnVzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPVsiY29uZmlnIiwiY29sdW1ucyIsImNvbG9yc2NoZW1lIiwic2VsY29sIiwidmlzIiwidmlzb3JkZXIiLCJ6b29tZXIiXTtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIG4scj1bXSxpPTA7aTxlLmxlbmd0aDtpKyspbj1lW2ldLHIucHVzaCh0Ll9wcm94eVRvRyhuKSk7cmV0dXJuIHJ9KCl9LF9wcm94eVRvRzpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5saXN0ZW5Ubyh0aGlzLmdbdF0sImFsbCIsZnVuY3Rpb24oZSxuLHIsaSl7aWYoImNoYW5nZSIhPT1lKXJldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgaSYmbnVsbCE9PWk/dGhpcy5nLnRyaWdnZXIodCsiOiIrZSxyLG4saSk6dGhpcy5nLnRyaWdnZXIodCsiOiIrZSxyLG4pfSl9LHJlbmRlcjpmdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT10aGlzLnNlcXN8fDA9PT10aGlzLnNlcXMubGVuZ3RoLHRoaXMucmVuZGVyU3Vidmlld3MoKSx0aGlzLmcudmlzLnNldCgibG9hZGVkIiwhMCksdGhpc319KTtlWyJkZWZhdWx0Il09Rn0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ImRlZmF1bHQiOnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1uKDEzNCksbz1yKGkpLHM9bigxNDMpLHU9cihzKSxhPW4oNCksbD1hLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0KXt0aGlzLmc9dC5nO3ZhciBlPW5ldyB1WyJkZWZhdWx0Il0oe21vZGVsOnRoaXMubW9kZWwsZzp0aGlzLmd9KTtpZihlLm9yZGVyaW5nPS0xLHRoaXMuYWRkVmlldygibGFiZWxibG9jayIsZSksdGhpcy5nLnZpcy5nZXQoInNlcXVlbmNlcyIpKXt2YXIgbj1uZXcgb1siZGVmYXVsdCJdKHttb2RlbDp0aGlzLm1vZGVsLGc6dGhpcy5nfSk7bi5vcmRlcmluZz0wLHRoaXMuYWRkVmlldygic2VxYmxvY2siLG4pfXJldHVybiB0aGlzLmxpc3RlblRvKHRoaXMuZy56b29tZXIsImNoYW5nZTphbGlnbm1lbnRIZWlnaHQiLHRoaXMuYWRqdXN0SGVpZ2h0KSx0aGlzLmxpc3RlblRvKHRoaXMuZy56b29tZXIsImNoYW5nZTphbGlnbm1lbnRXaWR0aCIsdGhpcy5hZGp1c3RXaWR0aCksdGhpcy5saXN0ZW5Ubyh0aGlzLmcuY29sdW1ucywiY2hhbmdlOmhpZGRlbiIsdGhpcy5hZGp1c3RIZWlnaHQpLHRoaXN9LHJlbmRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlbmRlclN1YnZpZXdzKCksdGhpcy5lbC5jbGFzc05hbWU9ImJpb2pzX21zYV9hbGJvZHkiLHRoaXMuZWwuc3R5bGUud2hpdGVTcGFjZT0ibm93cmFwIix0aGlzLmFkanVzdEhlaWdodCgpLHRoaXMuYWRqdXN0V2lkdGgoKSx0aGlzfSxhZGp1c3RIZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4iYXV0byI9PT10aGlzLmcuem9vbWVyLmdldCgiYWxpZ25tZW50SGVpZ2h0Iik/dGhpcy5lbC5zdHlsZS5oZWlnaHQ9dGhpcy5nLnpvb21lci5nZXQoInJvd0hlaWdodCIpKnRoaXMubW9kZWwubGVuZ3RoKzU6dGhpcy5lbC5zdHlsZS5oZWlnaHQ9dGhpcy5nLnpvb21lci5nZXQoImFsaWdubWVudEhlaWdodCIpfSxhZGp1c3RXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsLnN0eWxlLndpZHRoPXRoaXMuZ2V0V2lkdGgoKX0sZ2V0V2lkdGg6ZnVuY3Rpb24oKXt2YXIgdD0wO3JldHVybiB0Kz10aGlzLmcuem9vbWVyLmdldExlZnRCbG9ja1dpZHRoKCksdGhpcy5nLnZpcy5nZXQoInNlcXVlbmNlcyIpJiYodCs9dGhpcy5nLnpvb21lci5nZXQoImFsaWdubWVudFdpZHRoIikpLHR9fSk7ZVsiZGVmYXVsdCJdPWx9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciByPW4oOCksaT1uKDIpLG89big0Nykscz1uKDUpLHU9aS5leHRlbmQoe2NsYXNzTmFtZToiYmlvanNfbXNhX292ZXJ2aWV3Ym94Iix0YWdOYW1lOiJjYW52YXMiLGluaXRpYWxpemU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZz10LmcsdGhpcy5saXN0ZW5Ubyh0aGlzLmcuem9vbWVyLCJjaGFuZ2U6Ym94UmVjdFdpZHRoIGNoYW5nZTpib3hSZWN0SGVpZ2h0IGNoYW5nZTpvdmVydmlld2JveFBhZGRpbmdUb3AiLHRoaXMucmVyZW5kZXIpLHRoaXMubGlzdGVuVG8odGhpcy5nLnNlbGNvbCwiYWRkIHJlc2V0IGNoYW5nZSIsdGhpcy5yZXJlbmRlciksdGhpcy5saXN0ZW5Ubyh0aGlzLmcuY29sdW1ucywiY2hhbmdlOmhpZGRlbiIsdGhpcy5yZXJlbmRlciksdGhpcy5saXN0ZW5Ubyh0aGlzLmcuY29sb3JzY2hlbWUsImNoYW5nZTpzaG93TG93ZXJDYXNlIix0aGlzLnJlcmVuZGVyKSx0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsImNoYW5nZSIsXy5kZWJvdW5jZSh0aGlzLnJlcmVuZGVyLDUpKSx0aGlzLmNvbG9yPXRoaXMuZy5jb2xvcnNjaGVtZS5nZXRTZWxlY3RlZFNjaGVtZSgpLHRoaXMubGlzdGVuVG8odGhpcy5nLmNvbG9yc2NoZW1lLCJjaGFuZ2U6c2NoZW1lIixmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbG9yPXRoaXMuZy5jb2xvcnNjaGVtZS5nZXRTZWxlY3RlZFNjaGVtZSgpLHRoaXMucmVyZW5kZXIoKX0pLHRoaXMuZHJhZ1N0YXJ0PVtdfSxldmVudHM6e2NsaWNrOiJfb25jbGljayIsbW91c2Vkb3duOiJfb25tb3VzZWRvd24ifSxyZXJlbmRlcjpmdW5jdGlvbigpe2lmKCF0aGlzLmcuY29uZmlnLmdldCgibWFudWFsUmVuZGVyaW5nIikpcmV0dXJuIHRoaXMucmVuZGVyKCl9LHJlbmRlcjpmdW5jdGlvbigpe3RoaXMuX2NyZWF0ZUNhbnZhcygpLHRoaXMuZWwudGV4dENvbnRlbnQ9Im92ZXJ2aWV3Iix0aGlzLmVsLnN0eWxlLm1hcmdpblRvcD10aGlzLmcuem9vbWVyLmdldCgib3ZlcnZpZXdib3hQYWRkaW5nVG9wIiksdGhpcy5jdHguZmlsbFN0eWxlPSIjOTk5OTk5Iix0aGlzLmN0eC5maWxsUmVjdCgwLDAsdGhpcy5lbC53aWR0aCx0aGlzLmVsLmhlaWdodCk7Zm9yKHZhciB0PXRoaXMuZy56b29tZXIuZ2V0KCJib3hSZWN0V2lkdGgiKSxlPXRoaXMuZy56b29tZXIuZ2V0KCJib3hSZWN0SGVpZ2h0Iiksbj10aGlzLmcuY29sdW1ucy5nZXQoImhpZGRlbiIpLHI9dGhpcy5nLmNvbG9yc2NoZW1lLmdldCgic2hvd0xvd2VyQ2FzZSIpLGk9LWUsbz10aGlzLm1vZGVsLmxlbmd0aCxzPTA7czxvO3MrKylpZih0aGlzLm1vZGVsLmF0KHMpKXt2YXIgdT10aGlzLm1vZGVsLmF0KHMpLmdldCgic2VxIiksYT0wO2lmKGkrPWUsdGhpcy5tb2RlbC5hdChzKS5nZXQoImhpZGRlbiIpKXRoaXMuY3R4LmZpbGxTdHlsZT0iZ3JleSIsdGhpcy5jdHguZmlsbFJlY3QoMCxpLHUubGVuZ3RoKnQsZSk7ZWxzZSBmb3IodmFyIGw9MDtsPHUubGVuZ3RoO2wrKyl7dmFyIGM9dVtsXTtyJiYoYz1jLnRvVXBwZXJDYXNlKCkpO3ZhciBmPXRoaXMuY29sb3IuZ2V0Q29sb3IoYyx7cG9zOmx9KTtuLmluZGV4T2YobCk+PTAmJihmPSJncmV5IiksInVuZGVmaW5lZCIhPXR5cGVvZiBmJiZudWxsIT09ZiYmKHRoaXMuY3R4LmZpbGxTdHlsZT1mLHRoaXMuY3R4LmZpbGxSZWN0KGEsaSx0LGUpKSxhKz10fX1yZXR1cm4gdGhpcy5fZHJhd1NlbGVjdGlvbigpfSxfZHJhd1NlbGVjdGlvbjpmdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYoISh0aGlzLmRyYWdTdGFydC5sZW5ndGg+MCl8fHRoaXMucHJvbG9uZ1NlbGVjdGlvbil7dmFyIGU9dGhpcy5nLnpvb21lci5nZXQoImJveFJlY3RXaWR0aCIpLG49dGhpcy5nLnpvb21lci5nZXQoImJveFJlY3RIZWlnaHQiKSxyPW4qdGhpcy5tb2RlbC5sZW5ndGg7dGhpcy5jdHguZmlsbFN0eWxlPSIjNjY2NjY2Iix0aGlzLmN0eC5nbG9iYWxBbHBoYT0uOTtmb3IodmFyIGk9dGhpcy5nLnNlbGNvbC5sZW5ndGgsbz1mdW5jdGlvbihpKXt2YXIgbz10Lmcuc2VsY29sLmF0KGkpO2lmKCFvKXJldHVybiJjb250aW51ZSI7dmFyIHM9dm9pZCAwLHU9dm9pZCAwOyJjb2x1bW4iPT09by5nZXQoInR5cGUiKT90LmN0eC5maWxsUmVjdChlKm8uZ2V0KCJ4U3RhcnQiKSwwLGUqKG8uZ2V0KCJ4RW5kIiktby5nZXQoInhTdGFydCIpKzEpLHIpOiJyb3ciPT09by5nZXQoInR5cGUiKT8ocz10Lm1vZGVsLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdC5nZXQoImlkIik9PT1vLmdldCgic2VxSWQiKX0pWzBdLHU9dC5tb2RlbC5pbmRleE9mKHMpLHQuY3R4LmZpbGxSZWN0KDAsbip1LGUqcy5nZXQoInNlcSIpLmxlbmd0aCxuKSk6InBvcyI9PT1vLmdldCgidHlwZSIpJiYocz10Lm1vZGVsLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdC5nZXQoImlkIik9PT1vLmdldCgic2VxSWQiKX0pWzBdLHU9dC5tb2RlbC5pbmRleE9mKHMpLHQuY3R4LmZpbGxSZWN0KGUqby5nZXQoInhTdGFydCIpLG4qdSxlKihvLmdldCgieEVuZCIpLW8uZ2V0KCJ4U3RhcnQiKSsxKSxuKSl9LHM9MDtzPGk7cysrKW8ocyk7cmV0dXJuIHRoaXMuY3R4Lmdsb2JhbEFscGhhPTF9fSxfb25jbGljazpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nLnRyaWdnZXIoIm1ldGE6Y2xpY2siLHtzZXFJZDp0aGlzLm1vZGVsLmdldCgiaWQiLHtldnQ6dH0pfSl9LF9vbm1vdXNlbW92ZTpmdW5jdGlvbih0KXtpZigwIT09dGhpcy5kcmFnU3RhcnQubGVuZ3RoKXt0aGlzLnJlbmRlcigpLHRoaXMuY3R4LmZpbGxTdHlsZT0iIzY2NjY2NiIsdGhpcy5jdHguZ2xvYmFsQWxwaGE9Ljk7dmFyIGU9dGhpcy5fY2FsY1NlbGVjdGlvbihvLmFicyh0KSk7cmV0dXJuIHRoaXMuY3R4LmZpbGxSZWN0KGVbMF1bMF0sZVsxXVswXSxlWzBdWzFdLWVbMF1bMF0sZVsxXVsxXS1lWzFdWzBdKSx0LnByZXZlbnREZWZhdWx0KCksdC5zdG9wUHJvcGFnYXRpb24oKX19LF9vbm1vdXNlZG93bjpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3JldHVybiB0aGlzLmRyYWdTdGFydD1vLmFicyh0KSx0aGlzLmRyYWdTdGFydFJlbD1vLnJlbCh0KSx0LmN0cmxLZXl8fHQubWV0YUtleT90aGlzLnByb2xvbmdTZWxlY3Rpb249ITA6dGhpcy5wcm9sb25nU2VsZWN0aW9uPSExLHMoZG9jdW1lbnQuYm9keSkub24oIm1vdXNlbW92ZS5vdmVybW92ZSIsZnVuY3Rpb24odCl7cmV0dXJuIGUuX29ubW91c2Vtb3ZlKHQpfSkscyhkb2N1bWVudC5ib2R5KS5vbigibW91c2V1cC5vdmVydXAiLGZ1bmN0aW9uKHQpe3JldHVybiBlLl9vbm1vdXNldXAodCl9KSx0aGlzLmRyYWdTdGFydH0sX2NhbGNTZWxlY3Rpb246ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVt0WzBdLXRoaXMuZHJhZ1N0YXJ0WzBdLHRbMV0tdGhpcy5kcmFnU3RhcnRbMV1dLG49MDtuPD0xO24rKyllW25dPXRoaXMuZHJhZ1N0YXJ0UmVsW25dK2Vbbl07Zm9yKHZhciByPVtbdGhpcy5kcmFnU3RhcnRSZWxbMF0sZVswXV0sW3RoaXMuZHJhZ1N0YXJ0UmVsWzFdLGVbMV1dXSxpPTA7aTw9MTtpKyspcltpXVsxXTxyW2ldWzBdJiYocltpXT1bcltpXVsxXSxyW2ldWzBdXSkscltpXVswXT1NYXRoLm1heChyW2ldWzBdLDApO3JldHVybiByfSxfZW5kU2VsZWN0aW9uOmZ1bmN0aW9uKHQpe2lmKHMoZG9jdW1lbnQuYm9keSkub2ZmKCIub3Zlcm1vdmUiKSxzKGRvY3VtZW50LmJvZHkpLm9mZigiLm92ZXJ1cCIpLDAhPT10aGlzLmRyYWdTdGFydC5sZW5ndGgpe2Zvcih2YXIgZT10aGlzLl9jYWxjU2VsZWN0aW9uKHQpLG49MDtuPD0xO24rKyllWzBdW25dPU1hdGguZmxvb3IoZVswXVtuXS90aGlzLmcuem9vbWVyLmdldCgiYm94UmVjdFdpZHRoIikpO2Zvcih2YXIgbj0wO248PTE7bisrKWVbMV1bbl09TWF0aC5mbG9vcihlWzFdW25dL3RoaXMuZy56b29tZXIuZ2V0KCJib3hSZWN0SGVpZ2h0IikpO2VbMF1bMV09TWF0aC5taW4odGhpcy5tb2RlbC5nZXRNYXhMZW5ndGgoKS0xLGVbMF1bMV0pLGVbMV1bMV09TWF0aC5taW4odGhpcy5tb2RlbC5sZW5ndGgtMSxlWzFdWzFdKTtmb3IodmFyIGk9W10sbz1lWzFdWzBdO288PWVbMV1bMV07bysrKXt2YXIgdT17c2VxSWQ6dGhpcy5tb2RlbC5hdChvKS5nZXQoImlkIikseFN0YXJ0OmVbMF1bMF0seEVuZDplWzBdWzFdfTtpLnB1c2gobmV3IHIucG9zc2VsKHUpKX1yZXR1cm4gdGhpcy5kcmFnU3RhcnQ9W10sdGhpcy5wcm9sb25nU2VsZWN0aW9uP3RoaXMuZy5zZWxjb2wuYWRkKGkpOnRoaXMuZy5zZWxjb2wucmVzZXQoaSksdGhpcy5nLnpvb21lci5zZXRMZWZ0T2Zmc2V0KGVbMF1bMF0pLHRoaXMuZy56b29tZXIuc2V0VG9wT2Zmc2V0KGVbMV1bMF0pfX0sX29ubW91c2V1cDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZW5kU2VsZWN0aW9uKG8uYWJzKHQpKX0sX29ubW91c2VvdXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2VuZFNlbGVjdGlvbihvLmFicyh0KSl9LF9jcmVhdGVDYW52YXM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmcuem9vbWVyLmdldCgiYm94UmVjdFdpZHRoIiksZT10aGlzLmcuem9vbWVyLmdldCgiYm94UmVjdEhlaWdodCIpO3JldHVybiB0aGlzLmVsLmhlaWdodD10aGlzLm1vZGVsLmxlbmd0aCplLHRoaXMuZWwud2lkdGg9dGhpcy5tb2RlbC5nZXRNYXhMZW5ndGgoKSp0LHRoaXMuY3R4PXRoaXMuZWwuZ2V0Q29udGV4dCgiMmQiKSx0aGlzLmVsLnN0eWxlLm92ZXJmbG93PSJhdXRvIix0aGlzLmVsLnN0eWxlLmN1cnNvcj0iY3Jvc3NoYWlyIn19KTtlWyJkZWZhdWx0Il09dX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHI9bigzKSxpPW4oMiksbz1uKDUpLHM9aS5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZz10LmcsdGhpcy5saXN0ZW5Ubyh0aGlzLmcuem9vbWVyLCJjaGFuZ2U6Y29sdW1uV2lkdGgiLHRoaXMucmVuZGVyKSx0aGlzLnRvZ2dsZUNsYXNzPSJtc2EtaGlkZSIsdGhpcy5pc1Zpc2libGU9ITAsdGhpc30sYXR0cmlidXRlczp7ImNsYXNzIjoiYmlvanNfbXNhX3NjYWxlIn0sZXZlbnRzOnsiY2hhbmdlIGlucHV0IjoidXBkYXRlU2xpZGVyIiwiY2xpY2sgYnV0dG9uLm1zYS1idG4tY2xvc2UiOiJoaWRlIiwiY2xpY2sgYnV0dG9uLm1zYS1idG4tb3BlbiI6InNob3ciLCJjbGljayBidXR0b25bZGF0YS1hY3Rpb25dIjoiY2xpY2tCdXR0b24ifSx0ZW1wbGF0ZTooMCxyLnRlbXBsYXRlKSgnXHQ8ZGl2IGNsYXNzPSJtc2Etc2NhbGUtbWluaW1pc2VkIj5cdCAgPGJ1dHRvbiBjbGFzcz0iYnRuIG1zYS1idG4gbXNhLWJ0bi1vcGVuIj5ab29tPC9idXR0b24+XHQ8L2Rpdj5cdDxkaXYgY2xhc3M9Im1zYS1zY2FsZS1tYXhpbWlzZWQiPlx0ICA8YnV0dG9uIGNsYXNzPSJidG4gbXNhLWJ0biBtc2EtYnRuLWNsb3NlIiBzdHlsZT0iZmxvYXQ6cmlnaHQiPiZ0aW1lczsgY2xvc2U8L2J1dHRvbj5cdCAgPGRpdj5cdCAgPGlucHV0IHR5cGU9InJhbmdlIiBcdCAgICBkYXRhLXByb3ZpZGU9InNsaWRlciIgXHQgICAgbWluPSI8JT0gbWluICU+IiBcdCAgICBtYXg9IjwlPSBtYXggJT4iIFx0ICAgIHN0ZXA9IjwlPSBzdGVwICU+IiBcdCAgICB2YWx1ZT0iPCU9IHZhbHVlICU+IiBcdCAgPlx0ICA8L2Rpdj5cdCAgPGRpdiBjbGFzcz0iYnRuZ3JvdXAgbXNhLWJ0bmdyb3VwIj5cdCAgICA8YnV0dG9uIGNsYXNzPSJidG4gbXNhLWJ0biIgZGF0YS1hY3Rpb249InNtYWxsZXIiPjxzcGFuIGNsYXNzPSJnbHlwaGljb24tem9vbS1vdXQiPjwvc3Bhbj4tPC9idXR0b24+XHQgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIG1zYS1idG4iIGRhdGEtYWN0aW9uPSJiaWdnZXIiPjxzcGFuIGNsYXNzPSJnbHlwaGljb24tem9vbS1pbiI+PC9zcGFuPis8L2J1dHRvbj5cdCAgICA8YnV0dG9uIGNsYXNzPSJidG4gbXNhLWJ0biIgZGF0YS1hY3Rpb249InJlc2V0Ij48c3BhbiBjbGFzcz0iZ2x5cGhpY29uLXJlcGVhdCI+PC9zcGFuPnJlc2V0PC9idXR0b24+XHQgIDwvZGl2Plx0PC9kaXY+XHQnKSxyZW5kZXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm1vZGVsLmdldFNpemVSYW5nZSgpLGU9e3ZhbHVlOnRoaXMubW9kZWwuZ2V0U2l6ZSgpLG1pbjp0WzBdLG1heDp0WzFdLHN0ZXA6dGhpcy5tb2RlbC5zdGVwfHwxfTtyZXR1cm4gdGhpcy4kZWwuaHRtbCh0aGlzLnRlbXBsYXRlKGUpKSx0aGlzLmlzVmlzaWJsZT90aGlzLnNob3coKTp0aGlzLmhpZGUoKSx0aGlzfSx1cGRhdGVTbGlkZXI6ZnVuY3Rpb24odCl7dmFyIGU9dC50YXJnZXQsbj1wYXJzZUludChvKGUpLnZhbCgpKTt0aGlzLm1vZGVsLnNldFNpemUobil9LGNsaWNrQnV0dG9uOmZ1bmN0aW9uKHQpe3ZhciBlPXQudGFyZ2V0LG49byhlKS5kYXRhKCJhY3Rpb24iKTtyZXR1cm4gdGhpcy5tb2RlbFtuXSwiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5tb2RlbFtuXSYmdGhpcy5tb2RlbFtuXSgpLHRoaXN9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLmlzVmlzaWJsZT0hMSx0aGlzLiRlbC5maW5kKCIubXNhLXNjYWxlLW1pbmltaXNlZCIpLnJlbW92ZUNsYXNzKHRoaXMudG9nZ2xlQ2xhc3MpLHRoaXMuJGVsLmZpbmQoIi5tc2Etc2NhbGUtbWF4aW1pc2VkIikuYWRkQ2xhc3ModGhpcy50b2dnbGVDbGFzcyl9LHNob3c6ZnVuY3Rpb24oKXt0aGlzLmlzVmlzaWJsZT0hMSx0aGlzLiRlbC5maW5kKCIubXNhLXNjYWxlLW1pbmltaXNlZCIpLmFkZENsYXNzKHRoaXMudG9nZ2xlQ2xhc3MpLHRoaXMuJGVsLmZpbmQoIi5tc2Etc2NhbGUtbWF4aW1pc2VkIikucmVtb3ZlQ2xhc3ModGhpcy50b2dnbGVDbGFzcyl9fSk7ZVsiZGVmYXVsdCJdPXN9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciByPW4oOCksaT1uKDQpLG89bigxNCkscz0obig3KSxpLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nPXQuZyx0aGlzLmxpc3RlblRvKHRoaXMuZy51c2VyLCJjaGFuZ2U6c2VhcmNoVGV4dCIsZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5zZWFyY2goZSksdGhpcy5yZW5kZXIoKX0pLHRoaXMuc2VsPVtdLHRoaXMuc2VsUG9zPTB9LGV2ZW50czp7c2Nyb2xsOiJfc2VuZFNjcm9sbEV2ZW50In0scmVuZGVyOmZ1bmN0aW9uKCl7dGhpcy5yZW5kZXJTdWJ2aWV3cygpLHRoaXMuZWwuY2xhc3NOYW1lPSJiaW9qc19tc2Ffc2VhcmNocmVzdWx0Ijt2YXIgdD10aGlzLmcudXNlci5nZXQoInNlYXJjaFRleHQiKTtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIHQmJm51bGwhPT10JiZ0Lmxlbmd0aD4wJiYoMD09PXRoaXMuc2VsLmxlbmd0aD90aGlzLmVsLnRleHRDb250ZW50PSJubyBzZWxlY3Rpb24gZm91bmQiOih0aGlzLnJlc3VsdEJveD1vLm1rKCJkaXYiKSx0aGlzLnJlc3VsdEJveC5jbGFzc05hbWU9ImJpb2pzX21zYV9zZWFyY2hyZXN1bHRfb3Zib3giLHRoaXMudXBkYXRlUmVzdWx0KCksdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLnJlc3VsdEJveCksdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLmJ1aWxkQnRucygpKSkpLHRoaXN9LHVwZGF0ZVJlc3VsdDpmdW5jdGlvbigpe3ZhciB0PSJzZWFyY2ggcGF0dGVybjogIit0aGlzLmcudXNlci5nZXQoInNlYXJjaFRleHQiKTt0Kz0iLCBzZWxlY3Rpb246ICIrKHRoaXMuc2VsUG9zKzEpO3ZhciBlPXRoaXMuc2VsW3RoaXMuc2VsUG9zXTtyZXR1cm4gdCs9IiAoIix0Kz1lLmdldCgieFN0YXJ0IikrIiAtICIrZS5nZXQoInhFbmQiKSx0Kz0iLCBpZDogIitlLmdldCgic2VxSWQiKSx0Kz0iKSIsdGhpcy5yZXN1bHRCb3gudGV4dENvbnRlbnQ9dH0sYnVpbGRCdG5zOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPW8ubWsoImJ1dHRvbiIpO2UudGV4dENvbnRlbnQ9IlByZXYiLGUuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLGZ1bmN0aW9uKCl7cmV0dXJuIHQubW92ZVNlbCgtMSl9KTt2YXIgbj1vLm1rKCJidXR0b24iKTtuLnRleHRDb250ZW50PSJOZXh0IixuLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixmdW5jdGlvbigpe3JldHVybiB0Lm1vdmVTZWwoMSl9KTt2YXIgcj1vLm1rKCJidXR0b24iKTtyLnRleHRDb250ZW50PSJBbGwiLHIuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLGZ1bmN0aW9uKCl7cmV0dXJuIHQuZy5zZWxjb2wucmVzZXQodC5zZWwpfSk7dmFyIGk9by5taygiZGl2Iik7cmV0dXJuIGkuYXBwZW5kQ2hpbGQoZSksaS5hcHBlbmRDaGlsZChuKSxpLmFwcGVuZENoaWxkKHIpLGkuY2xhc3NOYW1lPSJiaW9qc19tc2Ffc2VhcmNocmVzdWx0X3JvdyIsaX0sbW92ZVNlbDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnNlbFBvcyt0O3JldHVybiBlPDB8fGU+PXRoaXMuc2VsLmxlbmd0aD8tMToodGhpcy5mb2N1cyhlKSx0aGlzLnNlbFBvcz1lLHRoaXMudXBkYXRlUmVzdWx0KCkpfSxmb2N1czpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnNlbFt0XSxuPWUuZ2V0KCJ4U3RhcnQiKTtyZXR1cm4gdGhpcy5nLnpvb21lci5zZXRMZWZ0T2Zmc2V0KG4pLHRoaXMuZy5zZWxjb2wucmVzZXQoW2VdKX0sc2VhcmNoOmZ1bmN0aW9uIHUodCl7dmFyIGUsdT1uZXcgUmVnRXhwKHQsImdpIiksbj1bXSxpPWU9MTAwMDQyO3JldHVybiB0aGlzLm1vZGVsLmVhY2goZnVuY3Rpb24odCl7dmFyIGU9dC5nZXQoInNlcSIpO3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgbyxzPVtdO289dS5leGVjKGUpOyl7dmFyIGE9by5pbmRleCxsPXt4U3RhcnQ6YSx4RW5kOmErb1swXS5sZW5ndGgtMSxzZXFJZDp0LmdldCgiaWQiKX07bi5wdXNoKG5ldyByLnBvc3NlbChsKSkscy5wdXNoKGk9TWF0aC5taW4oYSxpKSl9cmV0dXJuIHN9KCl9KSx0aGlzLmcuc2VsY29sLnJlc2V0KG4pLGk9PT1lJiYoaT0wKSx0aGlzLmcuem9vbWVyLnNldExlZnRPZmZzZXQoaSksdGhpcy5zZWw9bn19KSk7ZVsiZGVmYXVsdCJdPXN9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6eyJkZWZhdWx0Ijp0fX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGk9bigzKSxvPW4oMTI2KSxzPXIobyksdT1uKDEzOCksYT1yKHUpLGw9bigxMjcpLGM9cihsKSxmPW4oMTI5KSxoPXIoZiksZD1uKDEyOCkscD1yKGQpLGc9big0KSx2PWcuZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmc9dC5nLHRoaXMuZHJhdygpLHRoaXMubGlzdGVuVG8odGhpcy5nLnN0YXRzLCJyZXNldCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXJlbmRlcigpfSksdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJjaGFuZ2U6aGlkZGVuIiwoMCxpLmRlYm91bmNlKSh0aGlzLnJlcmVuZGVyLDEwKSksdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJzb3J0Iix0aGlzLnJlcmVuZGVyKSx0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsImFkZCIsZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS5sb2coInNlcSBhZGQiKX0pLHRoaXMubGlzdGVuVG8odGhpcy5nLnZpcywiY2hhbmdlOnNlcXVlbmNlcyIsdGhpcy5yZXJlbmRlciksdGhpcy5saXN0ZW5Ubyh0aGlzLmcudmlzLCJjaGFuZ2U6b3ZlcnZpZXdib3giLHRoaXMucmVyZW5kZXIpLHRoaXMubGlzdGVuVG8odGhpcy5nLnZpc29yZGVyLCJjaGFuZ2UiLHRoaXMucmVyZW5kZXIpLHRoaXMubGlzdGVuVG8odGhpcy5nLnpvb21lciwiY2hhbmdlOmNvbHVtbldpZHRoIix0aGlzLnJlcmVuZGVyKSx0aGlzLmxpc3RlblRvKHRoaXMuZy52aXMsImNoYW5nZTpzY2FsZXNsaWRlciIsdGhpcy5yZXJlbmRlciksdGhpc30sZHJhdzpmdW5jdGlvbigpe2lmKHRoaXMucmVtb3ZlVmlld3MoKSx0aGlzLmcudmlzLmdldCgib3ZlcnZpZXdib3giKSl7dmFyIHQ9bmV3IGNbImRlZmF1bHQiXSh7bW9kZWw6dGhpcy5tb2RlbCxnOnRoaXMuZ30pO3Qub3JkZXJpbmc9dGhpcy5nLnZpc29yZGVyLmdldCgib3ZlcnZpZXdCb3giKSx0aGlzLmFkZFZpZXcoIm92ZXJ2aWV3Qm94Iix0KX12YXIgZT1uZXcgYVsiZGVmYXVsdCJdKHttb2RlbDp0aGlzLm1vZGVsLGc6dGhpcy5nfSk7ZS5vcmRlcmluZz10aGlzLmcudmlzb3JkZXIuZ2V0KCJoZWFkZXJCb3giKSx0aGlzLmFkZFZpZXcoImhlYWRlckJveCIsZSk7dmFyIG49bmV3IGhbImRlZmF1bHQiXSh7bW9kZWw6dGhpcy5tb2RlbCxnOnRoaXMuZ30pO24ub3JkZXJpbmc9dGhpcy5nLnZpc29yZGVyLmdldCgic2VhcmNoQm94IiksdGhpcy5hZGRWaWV3KCJzZWFyY2hib3giLG4pO3ZhciByPW5ldyBzWyJkZWZhdWx0Il0oe21vZGVsOnRoaXMubW9kZWwsZzp0aGlzLmd9KTtpZihyLm9yZGVyaW5nPXRoaXMuZy52aXNvcmRlci5nZXQoImFsaWdubWVudEJvZHkiKSx0aGlzLmFkZFZpZXcoImJvZHkiLHIpLHRoaXMuZy52aXMuZ2V0KCJzY2FsZXNsaWRlciIpKXt2YXIgaT1uZXcgcFsiZGVmYXVsdCJdKHttb2RlbDp0aGlzLmcuc2NhbGUsZzp0aGlzLmd9KTtpLm9yZGVyaW5nPXRoaXMuZy52aXNvcmRlci5nZXQoInNjYWxlU2xpZGVyIiksdGhpcy5hZGRWaWV3KCJzY2FsZVNsaWRlciIsaSl9cmV0dXJuIHRoaXN9LHJlbmRlcjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yZW5kZXJTdWJ2aWV3cygpLHRoaXMuZWwuY2xhc3NOYW1lPSJiaW9qc19tc2Ffc3RhZ2UiLHRoaXN9LHJlcmVuZGVyOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZy5jb25maWcuZ2V0KCJtYW51YWxSZW5kZXJpbmciKSlyZXR1cm4gdGhpcy5kcmF3KCksdGhpcy5yZW5kZXIoKX19KTtlWyJkZWZhdWx0Il09dn0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcj1lW25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsci5rZXkscil9fXJldHVybiBmdW5jdGlvbihlLG4scil7cmV0dXJuIG4mJnQoZS5wcm90b3R5cGUsbiksciYmdChlLHIpLGV9fSgpLG89KG4oMTMpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtyKHRoaXMsdCksdGhpcy5nPWUsdGhpcy5jYWNoZT17fSx0aGlzLmNhY2hlSGVpZ2h0PTAsdGhpcy5jYWNoZVdpZHRoPTB9cmV0dXJuIGkodCxbe2tleToiZ2V0Rm9udFRpbGUiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZT09PXRoaXMuY2FjaGVXaWR0aCYmbj09PXRoaXMuY2FjaGVIZWlnaHR8fCh0aGlzLmNhY2hlSGVpZ2h0PW4sdGhpcy5jYWNoZVdpZHRoPWUsdGhpcy5jYWNoZT17fSksdm9pZCAwPT09dGhpcy5jYWNoZVt0XSYmdGhpcy5jcmVhdGVUaWxlKHQsZSxuKSx0aGlzLmNhY2hlW3RdfX0se2tleToiY3JlYXRlVGlsZSIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXMuY2FjaGVbdF09ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7cmV0dXJuIHIud2lkdGg9ZSxyLmhlaWdodD1uLHRoaXMuY3R4PXIuZ2V0Q29udGV4dCgiMmQiKSx0aGlzLmN0eC5mb250PXRoaXMuZy56b29tZXIuZ2V0KCJyZXNpZHVlRm9udCIpKyJweCBtb25vIix0aGlzLmN0eC50ZXh0QmFzZWxpbmU9Im1pZGRsZSIsdGhpcy5jdHgudGV4dEFsaWduPSJjZW50ZXIiLHRoaXMuY3R4LmZpbGxUZXh0KHQsZS8yLG4vMixlKX19XSksdH0oKSk7ZVsiZGVmYXVsdCJdPW99LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciByPW4oMyksaT1uKDEzKSxvPXtzZXRNYXhTY3JvbGxIZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXhTY3JvbGxIZWlnaHQ9dGhpcy5nLnpvb21lci5nZXRNYXhBbGlnbm1lbnRIZWlnaHQoKS10aGlzLmcuem9vbWVyLmdldCgiYWxpZ25tZW50SGVpZ2h0Iil9LHNldE1heFNjcm9sbFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF4U2Nyb2xsV2lkdGg9dGhpcy5nLnpvb21lci5nZXRNYXhBbGlnbm1lbnRXaWR0aCgpLXRoaXMuZy56b29tZXIuZ2V0QWxpZ25tZW50V2lkdGgoKX19LHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5nPXQsdGhpcy5tb2RlbD1lLHRoaXMubWF4U2Nyb2xsV2lkdGg9MCx0aGlzLm1heFNjcm9sbEhlaWdodD0wLHRoaXMuc2V0TWF4U2Nyb2xsSGVpZ2h0KCksdGhpcy5zZXRNYXhTY3JvbGxXaWR0aCgpLHRoaXMubGlzdGVuVG8odGhpcy5nLnpvb21lciwiY2hhbmdlOnJvd0hlaWdodCIsdGhpcy5zZXRNYXhTY3JvbGxIZWlnaHQpLHRoaXMubGlzdGVuVG8odGhpcy5nLnpvb21lciwiY2hhbmdlOmNvbHVtbldpZHRoIix0aGlzLnNldE1heFNjcm9sbFdpZHRoKSx0aGlzLmxpc3RlblRvKHRoaXMuZy56b29tZXIsImNoYW5nZTphbGlnbm1lbnRXaWR0aCIsdGhpcy5zZXRNYXhTY3JvbGxXaWR0aCksdGhpcy5saXN0ZW5Ubyh0aGlzLmcuem9vbWVyLCJjaGFuZ2U6YWxpZ25tZW50SGVpZ2h0Iix0aGlzLnNldE1heFNjcm9sbEhlaWdodCksdGhpcy5saXN0ZW5Ubyh0aGlzLm1vZGVsLCJhZGQgY2hhbmdlIHJlc2V0IixmdW5jdGlvbigpe3JldHVybiB0aGlzLnNldE1heFNjcm9sbEhlaWdodCgpLHRoaXMuc2V0TWF4U2Nyb2xsV2lkdGgoKX0sdGhpcyksdGhpc307KDAsci5leHRlbmQpKHMucHJvdG90eXBlLG8pLGkubWl4aW4ocy5wcm90b3R5cGUpLGVbImRlZmF1bHQiXT1zfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgcj1uKDMpLGk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5nPXQsdGhpcy5jdHg9ZSx0aGlzfTtfLmV4dGVuZChpLnByb3RvdHlwZSx7X2dldFNlbGVjdGlvbjpmdW5jdGlvbih0KXt2YXIgZT10LmdldCgic2VxIikubGVuZ3RoLG49W10saT10aGlzLmcuc2VsY29sLmdldFNlbEZvclJvdyh0LmdldCgiaWQiKSksbz0oMCxyLmZpbmQpKGksZnVuY3Rpb24odCl7cmV0dXJuInJvdyI9PT10LmdldCgidHlwZSIpfSk7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBvJiZudWxsIT09bylmb3IodmFyIHM9ZS0xLHU9MDt1PD1zO3UrKyluLnB1c2godSk7ZWxzZSBpZihpLmxlbmd0aD4wKWZvcih2YXIgYSxsPTA7bDxpLmxlbmd0aDtsKyspe2E9aVtsXTtmb3IodmFyIGM9YS5nZXQoInhTdGFydCIpLGY9YS5nZXQoInhFbmQiKSxoPWM7aDw9ZjtoKyspbi5wdXNoKGgpfXJldHVybiBufSxfYXBwZW5kU2VsZWN0aW9uOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10Lm1vZGVsLmdldCgic2VxIikscj10aGlzLl9nZXRTZWxlY3Rpb24odC5tb2RlbCksaT10aGlzLl9nZXRQcmV2TmV4dFNlbGVjdGlvbih0Lm1vZGVsKSxvPWlbMF0scz1pWzFdO2lmKHRoaXMuZy56b29tZXIuZ2V0KCJjb2x1bW5XaWR0aCIpLHRoaXMuZy56b29tZXIuZ2V0KCJyb3dIZWlnaHQiKSwwIT09ci5sZW5ndGgpe3ZhciB1PTA7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciBpPVtdLGE9bi5sZW5ndGgtMSxsPWZ1bmN0aW9uKG4pe2kucHVzaChmdW5jdGlvbigpe2lmKHQuaGlkZGVuLmluZGV4T2Yobik+PTApcmV0dXJuIHUrKzt2YXIgaT1uLXU7cmV0dXJuIHIuaW5kZXhPZihuKT49MCYmKDA9PT1pfHxyLmluZGV4T2Yobi0xKTwwKT9lLl9yZW5kZXJTZWxlY3Rpb24oe246bixrOmksc2VsZWN0aW9uOnIsbVByZXZTZWw6byxtTmV4dFNlbDpzLHhaZXJvOnQueFplcm8seVplcm86dC55WmVybyxtb2RlbDp0Lm1vZGVsfSk6dm9pZCAwfSgpKX0sYz0wOzA8YT9jPD1hOmM+PWE7MDxhP2MrKzpjLS0pbChjKTtyZXR1cm4gaX0oKX19LF9yZW5kZXJTZWxlY3Rpb246ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQueFplcm8sbj10LnlaZXJvLHI9dC5uLGk9dC5rLG89dC5zZWxlY3Rpb24scz10Lm1QcmV2U2VsLHU9dC5tTmV4dFNlbCxhPTAsbD10Lm1vZGVsLmdldCgic2VxIikubGVuZ3RoLTEsYz1yOyhyPGw/Yzw9bDpjPj1sKSYmby5pbmRleE9mKGMpPj0wO3I8bD9jKys6Yy0tKWErKzt2YXIgZj10aGlzLmcuem9vbWVyLmdldCgiY29sdW1uV2lkdGgiKSxoPXRoaXMuZy56b29tZXIuZ2V0KCJyb3dIZWlnaHQiKSxkPWYqYSsxLHA9dGhpcy5nLmNvbHVtbnMuZ2V0KCJoaWRkZW4iKTt0aGlzLmN0eC5iZWdpblBhdGgoKTt2YXIgZz10aGlzLmN0eC5saW5lV2lkdGg7dGhpcy5jdHgubGluZVdpZHRoPTM7dmFyIHY9dGhpcy5jdHguc3Ryb2tlU3R5bGU7dGhpcy5jdHguc3Ryb2tlU3R5bGU9IiNGRjAwMDAiLGUrPWkqZjtmb3IodmFyIG09MCx5PWEtMSxfPTA7MDx5P188PXk6Xz49eTswPHk/XysrOl8tLSl7dmFyIGI9citfO3AuaW5kZXhPZihiKT49MHx8KCJ1bmRlZmluZWQiIT10eXBlb2YgcyYmbnVsbCE9PXMmJnMuaW5kZXhPZihiKT49MHx8KHRoaXMuY3R4Lm1vdmVUbyhlK20sbiksCnRoaXMuY3R4LmxpbmVUbyhtK2YrZSxuKSksInVuZGVmaW5lZCIhPXR5cGVvZiB1JiZudWxsIT09dSYmdS5pbmRleE9mKGIpPj0wfHwodGhpcy5jdHgubW92ZVRvKG0rZSxoK24pLHRoaXMuY3R4LmxpbmVUbyhtK2YrZSxoK24pKSxtKz1mKX1yZXR1cm4gdGhpcy5jdHgubW92ZVRvKGUsbiksdGhpcy5jdHgubGluZVRvKGUsaCtuKSx0aGlzLmN0eC5tb3ZlVG8oZStkLG4pLHRoaXMuY3R4LmxpbmVUbyhlK2QsaCtuKSx0aGlzLmN0eC5zdHJva2UoKSx0aGlzLmN0eC5zdHJva2VTdHlsZT12LHRoaXMuY3R4LmxpbmVXaWR0aD1nfSxfZ2V0UHJldk5leHRTZWxlY3Rpb246ZnVuY3Rpb24odCl7dmFyIGU9dC5jb2xsZWN0aW9uLnByZXYodCksbj10LmNvbGxlY3Rpb24ubmV4dCh0KSxyPXZvaWQgMCxpPXZvaWQgMDtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIGUmJm51bGwhPT1lJiYocj10aGlzLl9nZXRTZWxlY3Rpb24oZSkpLCJ1bmRlZmluZWQiIT10eXBlb2YgbiYmbnVsbCE9PW4mJihpPXRoaXMuX2dldFNlbGVjdGlvbihuKSksW3IsaV19fSksZVsiZGVmYXVsdCJdPWl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6eyJkZWZhdWx0Ijp0fX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dmFyIG49W10scj0hMCxpPSExLG89dm9pZCAwO3RyeXtmb3IodmFyIHMsdT10W1N5bWJvbC5pdGVyYXRvcl0oKTshKHI9KHM9dS5uZXh0KCkpLmRvbmUpJiYobi5wdXNoKHMudmFsdWUpLCFlfHxuLmxlbmd0aCE9PWUpO3I9ITApO31jYXRjaChhKXtpPSEwLG89YX1maW5hbGx5e3RyeXshciYmdVsicmV0dXJuIl0mJnVbInJldHVybiJdKCl9ZmluYWxseXtpZihpKXRocm93IG99fXJldHVybiBufXJldHVybiBmdW5jdGlvbihlLG4pe2lmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIGU7aWYoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChlKSlyZXR1cm4gdChlLG4pO3Rocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKX19KCksbz0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sPyJzeW1ib2wiOnR5cGVvZiB0fSxzPW4oMyksdT1uKDEzMSksYT1yKHUpLGw9bigxMzMpLGM9cihsKSxmPW4oMTM1KSxoPXIoZiksZD1uKDEzMikscD1yKGQpLGc9big0KSx2PW4oNDcpLG09big1KSx5PWcuZXh0ZW5kKHt0YWdOYW1lOiJjYW52YXMiLGluaXRpYWxpemU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZz10LmcsdGhpcy5saXN0ZW5Ubyh0aGlzLmcuem9vbWVyLCJjaGFuZ2U6X2FsaWdubWVudFNjcm9sbExlZnQgY2hhbmdlOl9hbGlnbm1lbnRTY3JvbGxUb3AiLGZ1bmN0aW9uKHQsZSxuKXtpZihudWxsPT0oInVuZGVmaW5lZCIhPXR5cGVvZiBuJiZudWxsIT09bj9uLm9yaWdpbjp2b2lkIDApfHwiY2FudmFzc2VxIiE9PW4ub3JpZ2luKXJldHVybiB0aGlzLnJlbmRlcigpfSksdGhpcy5saXN0ZW5Ubyh0aGlzLmcuY29sdW1ucywiY2hhbmdlOmhpZGRlbiIsdGhpcy5yZW5kZXIpLHRoaXMubGlzdGVuVG8odGhpcy5nLnpvb21lciwiY2hhbmdlOmFsaWdubWVudFdpZHRoIGNoYW5nZTphbGlnbm1lbnRIZWlnaHQiLHRoaXMucmVuZGVyKSx0aGlzLmxpc3RlblRvKHRoaXMuZy5jb2xvcnNjaGVtZSwiY2hhbmdlIix0aGlzLnJlbmRlciksdGhpcy5saXN0ZW5Ubyh0aGlzLmcuc2VsY29sLCJyZXNldCBhZGQiLHRoaXMucmVuZGVyKSx0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsInJlc2V0IGFkZCIsdGhpcy5yZW5kZXIpLHRoaXMuZWwuc3R5bGUuZGlzcGxheT0iaW5saW5lLWJsb2NrIix0aGlzLmVsLnN0eWxlLm92ZXJmbG93WD0iaGlkZGVuIix0aGlzLmVsLnN0eWxlLm92ZXJmbG93WT0iaGlkZGVuIix0aGlzLmVsLmNsYXNzTmFtZT0iYmlvanNfbXNhX3NlcWJsb2NrIix0aGlzLmN0eD10aGlzLmVsLmdldENvbnRleHQoIjJkIiksdGhpcy5jYWNoZT1uZXcgYVsiZGVmYXVsdCJdKHRoaXMuZyksdGhpcy5jb29yZHNDYWNoZT1uZXcgcFsiZGVmYXVsdCJdKHRoaXMuZyx0aGlzLm1vZGVsKSx0aGlzLmxpc3RlblRvKHRoaXMuZy56b29tZXIsImNoYW5nZTpyZXNpZHVlRm9udCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jYWNoZT1uZXcgYVsiZGVmYXVsdCJdKHRoaXMuZyksdGhpcy5yZW5kZXIoKX0pLHRoaXMuc2VsPW5ldyBjWyJkZWZhdWx0Il0odGhpcy5nLHRoaXMuY3R4KSx0aGlzLl9zZXRDb2xvcigpLHRoaXMudGhyb3R0bGVUaW1lPTAsdGhpcy50aHJvdHRsZUNvdW50cz0wLG51bGwhPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS53ZWJraXRBcHBlYXJhbmNlP3RoaXMudGhyb3R0bGVkRHJhdz1mdW5jdGlvbigpe3ZhciB0PStuZXcgRGF0ZTtpZih0aGlzLmRyYXcoKSx0aGlzLnRocm90dGxlVGltZSs9K25ldyBEYXRlLXQsdGhpcy50aHJvdHRsZUNvdW50cysrLHRoaXMudGhyb3R0bGVDb3VudHM+MTUpcmV0dXJuIE1hdGguY2VpbCh0aGlzLnRocm90dGxlVGltZS90aGlzLnRocm90dGxlQ291bnRzKSx0aGlzLnRocm90dGxlZERyYXc9dGhpcy5kcmF3fTp0aGlzLnRocm90dGxlZERyYXc9KDAscy50aHJvdHRsZSkodGhpcy50aHJvdHRsZWREcmF3LDMwKSx0aGlzLm1hbmFnZUV2ZW50cygpfSx0aHJvdHRsZWREcmF3OmZ1bmN0aW9uKCl7dmFyIHQ9K25ldyBEYXRlO2lmKHRoaXMuZHJhdygpLHRoaXMudGhyb3R0bGVUaW1lKz0rbmV3IERhdGUtdCx0aGlzLnRocm90dGxlQ291bnRzKyssdGhpcy50aHJvdHRsZUNvdW50cz4xNSl7dmFyIGU9TWF0aC5jZWlsKHRoaXMudGhyb3R0bGVUaW1lL3RoaXMudGhyb3R0bGVDb3VudHMpO3JldHVybiBlKj0xLjIsZT1NYXRoLm1heCgyMCxlKSx0aGlzLnRocm90dGxlZERyYXc9Xy50aHJvdHRsZSh0aGlzLmRyYXcsZSl9fSxtYW5hZ2VFdmVudHM6ZnVuY3Rpb24oKXt2YXIgdD17fTtyZXR1cm4gdC5tb3VzZWRvd249Il9vbm1vdXNlZG93biIsdC50b3VjaHN0YXJ0PSJfb250b3VjaHN0YXJ0Iix0aGlzLmcuY29uZmlnLmdldCgicmVnaXN0ZXJNb3VzZUNsaWNrcyIpJiYodC5kYmxjbGljaz0iX29uY2xpY2siKSx0aGlzLmcuY29uZmlnLmdldCgicmVnaXN0ZXJNb3VzZUhvdmVyIikmJih0Lm1vdXNlaW49Il9vbm1vdXNlaW4iLHQubW91c2VvdXQ9Il9vbm1vdXNlb3V0IiksdC5tb3VzZXdoZWVsPSJfb25tb3VzZXdoZWVsIix0LkRPTU1vdXNlU2Nyb2xsPSJfb25tb3VzZXdoZWVsIix0aGlzLmRlbGVnYXRlRXZlbnRzKHQpLHRoaXMubGlzdGVuVG8odGhpcy5nLmNvbmZpZywiY2hhbmdlOnJlZ2lzdGVyTW91c2VIb3ZlciIsdGhpcy5tYW5hZ2VFdmVudHMpLHRoaXMubGlzdGVuVG8odGhpcy5nLmNvbmZpZywiY2hhbmdlOnJlZ2lzdGVyTW91c2VDbGljayIsdGhpcy5tYW5hZ2VFdmVudHMpLHRoaXMuZHJhZ1N0YXJ0PVtdfSxfc2V0Q29sb3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb2xvcj10aGlzLmcuY29sb3JzY2hlbWUuZ2V0U2VsZWN0ZWRTY2hlbWUoKX0sZHJhdzpmdW5jdGlvbigpe2lmKHRoaXMuZWwud2lkdGg9dGhpcy5lbC53aWR0aCxudWxsIT10aGlzLnNlcURyYXdlciYmdGhpcy5tb2RlbC5sZW5ndGg+MClyZXR1cm4gdGhpcy5zZXFEcmF3ZXIuZHJhd0xldHRlcnMoKSx0aGlzLnNlcURyYXdlci5kcmF3Um93cyh0aGlzLnNlbC5fYXBwZW5kU2VsZWN0aW9uLHRoaXMuc2VsKSx0aGlzLnNlcURyYXdlci5kcmF3Um93cyh0aGlzLmRyYXdGZWF0dXJlcyx0aGlzKX0sZHJhd0ZlYXR1cmVzOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10aGlzLmcuem9vbWVyLmdldCgiY29sdW1uV2lkdGgiKSxyPXRoaXMuZy56b29tZXIuZ2V0KCJyb3dIZWlnaHQiKTtpZih0Lm1vZGVsLmF0dHJpYnV0ZXMuaGVpZ2h0PjEpe3ZhciBpPWZ1bmN0aW9uKCl7dmFyIGk9ZS5jdHg7cmV0dXJuIHQubW9kZWwuYXR0cmlidXRlcy5mZWF0dXJlcy5lYWNoKGZ1bmN0aW9uKGUpe2kuZmlsbFN0eWxlPWUuYXR0cmlidXRlcy5maWxsQ29sb3J8fCJyZWQiO3ZhciBvPWUuYXR0cmlidXRlcy54RW5kLWUuYXR0cmlidXRlcy54U3RhcnQrMSxzPShlLmF0dHJpYnV0ZXMucm93KzEpKnI7cmV0dXJuIGkuZmlsbFJlY3QoZS5hdHRyaWJ1dGVzLnhTdGFydCpuK3QueFplcm8scyt0LnlaZXJvLG4qbyxyKX0pLGkuZmlsbFN0eWxlPSJibGFjayIsaS5mb250PWUuZy56b29tZXIuZ2V0KCJyZXNpZHVlRm9udCIpKyJweCBtb25vIixpLnRleHRCYXNlbGluZT0ibWlkZGxlIixpLnRleHRBbGlnbj0iY2VudGVyIix7djp0Lm1vZGVsLmF0dHJpYnV0ZXMuZmVhdHVyZXMuZWFjaChmdW5jdGlvbihlKXt2YXIgbz1lLmF0dHJpYnV0ZXMueEVuZC1lLmF0dHJpYnV0ZXMueFN0YXJ0KzEscz0oZS5hdHRyaWJ1dGVzLnJvdysxKSpyO3JldHVybiBpLmZpbGxUZXh0KGUuYXR0cmlidXRlcy50ZXh0LHQueFplcm8rZS5hdHRyaWJ1dGVzLnhTdGFydCpuK28vMipuLHQueVplcm8rLjUqcitzKX0pfX0oKTtpZigib2JqZWN0Ij09PSgidW5kZWZpbmVkIj09dHlwZW9mIGk/InVuZGVmaW5lZCI6byhpKSkpcmV0dXJuIGkudn19LHJlbmRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsLnNldEF0dHJpYnV0ZSgiaGVpZ2h0Iix0aGlzLmcuem9vbWVyLmdldCgiYWxpZ25tZW50SGVpZ2h0IikrInB4IiksdGhpcy5lbC5zZXRBdHRyaWJ1dGUoIndpZHRoIix0aGlzLmcuem9vbWVyLmdldEFsaWdubWVudFdpZHRoKCkrInB4IiksdGhpcy5nLnpvb21lci5fY2hlY2tTY3JvbGxpbmcodGhpcy5fY2hlY2tTY3JvbGxpbmcoW3RoaXMuZy56b29tZXIuZ2V0KCJfYWxpZ25tZW50U2Nyb2xsTGVmdCIpLHRoaXMuZy56b29tZXIuZ2V0KCJfYWxpZ25tZW50U2Nyb2xsVG9wIildKSx7aGVhZGVyOiJjYW52YXNzZXEifSksdGhpcy5fc2V0Q29sb3IoKSx0aGlzLnNlcURyYXdlcj1uZXcgaFsiZGVmYXVsdCJdKHRoaXMuZyx0aGlzLmN0eCx0aGlzLm1vZGVsLHt3aWR0aDp0aGlzLmVsLndpZHRoLGhlaWdodDp0aGlzLmVsLmhlaWdodCxjb2xvcjp0aGlzLmNvbG9yLGNhY2hlOnRoaXMuY2FjaGV9KSx0aGlzLnRocm90dGxlZERyYXcoKSx0aGlzfSxfb25tb3VzZW1vdmU6ZnVuY3Rpb24odCxlKXtpZigwIT09dGhpcy5kcmFnU3RhcnQubGVuZ3RoKXt2YXIgbj12LmFicyh0KSxyPVtuWzBdLXRoaXMuZHJhZ1N0YXJ0WzBdLG5bMV0tdGhpcy5kcmFnU3RhcnRbMV1dLGk9dGhpcy5nLnpvb21lci5nZXQoImNhbnZhc0V2ZW50U2NhbGUiKTtlJiYoaT0zKTtmb3IodmFyIG89MDtvPD0xO28rKylyW29dPXJbb10qaTtmb3IodmFyIHM9W3RoaXMuZHJhZ1N0YXJ0U2Nyb2xsWzBdLXJbMF0sdGhpcy5kcmFnU3RhcnRTY3JvbGxbMV0tclsxXV0sdT0wO3U8PTE7dSsrKXNbdV09TWF0aC5yb3VuZChzW3VdKTt2YXIgYT10aGlzLl9jaGVja1Njcm9sbGluZyhzKTt0aGlzLmcuem9vbWVyLl9jaGVja1Njcm9sbGluZyhhLHtvcmlnaW46ImNhbnZhc3NlcSJ9KTtmb3IodmFyIGw9MDtsPD0xO2wrKylhW2xdIT09c1tsXSYmKDA9PT1hW2xdPyh0aGlzLmRyYWdTdGFydFtsXT1uW2xdLHRoaXMuZHJhZ1N0YXJ0U2Nyb2xsW2xdPTApOnRoaXMuZHJhZ1N0YXJ0W2xdPW5bbF0tYVtsXSk7cmV0dXJuIHRoaXMudGhyb3R0bGVkRHJhdygpLG51bGwhPXQucHJldmVudERlZmF1bHQ/KHQucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpKTp2b2lkIDB9fSxfb250b3VjaG1vdmU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX29ubW91c2Vtb3ZlKHQuY2hhbmdlZFRvdWNoZXNbMF0sITApLHQucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpfSxfb25tb3VzZWRvd246ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5kcmFnU3RhcnQ9di5hYnModCksdGhpcy5kcmFnU3RhcnRTY3JvbGw9W3RoaXMuZy56b29tZXIuZ2V0KCJfYWxpZ25tZW50U2Nyb2xsTGVmdCIpLHRoaXMuZy56b29tZXIuZ2V0KCJfYWxpZ25tZW50U2Nyb2xsVG9wIildLG0oZG9jdW1lbnQuYm9keSkub24oIm1vdXNlbW92ZS5vdmVybW92ZSIsZnVuY3Rpb24odCl7cmV0dXJuIGUuX29ubW91c2Vtb3ZlKHQpfSksbShkb2N1bWVudC5ib2R5KS5vbigibW91c2V1cC5vdmVydXAiLGZ1bmN0aW9uKCl7cmV0dXJuIGUuX2NsZWFudXAoKX0pLHQucHJldmVudERlZmF1bHQoKX0sX29udG91Y2hzdGFydDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3JldHVybiB0aGlzLmRyYWdTdGFydD12LmFicyh0LmNoYW5nZWRUb3VjaGVzWzBdKSx0aGlzLmRyYWdTdGFydFNjcm9sbD1bdGhpcy5nLnpvb21lci5nZXQoIl9hbGlnbm1lbnRTY3JvbGxMZWZ0IiksdGhpcy5nLnpvb21lci5nZXQoIl9hbGlnbm1lbnRTY3JvbGxUb3AiKV0sbShkb2N1bWVudC5ib2R5KS5vbigidG91Y2htb3ZlLm92ZXJ0bW92ZSIsZnVuY3Rpb24odCl7cmV0dXJuIGUuX29udG91Y2htb3ZlKHQpfSksbShkb2N1bWVudC5ib2R5KS5vbigidG91Y2hlbmQub3ZlcnRlbmQgdG91Y2hsZWF2ZS5vdmVydGxlYXZlIHRvdWNoY2FuY2VsLm92ZXJ0Y2FuZWwiLGZ1bmN0aW9uKHQpe3JldHVybiBlLl90b3VjaENsZWFudXAodCl9KX0sX29ubW91c2V3aW5vdXQ6ZnVuY3Rpb24odCl7aWYodC50b0VsZW1lbnQ9PT1kb2N1bWVudC5ib2R5LnBhcmVudE5vZGUpcmV0dXJuIHRoaXMuX2NsZWFudXAoKX0sX2NsZWFudXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kcmFnU3RhcnQ9W10sbShkb2N1bWVudC5ib2R5KS5vZmYoIi5vdmVybW92ZSIpLG0oZG9jdW1lbnQuYm9keSkub2ZmKCIub3ZlcnVwIiksbShkb2N1bWVudC5ib2R5KS5vZmYoIi5vdmVyb3V0Iil9LF90b3VjaENsZWFudXA6ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoPjAmJnRoaXMuX29ubW91c2Vtb3ZlKHQuY2hhbmdlZFRvdWNoZXNbMF0sITApLHRoaXMuZHJhZ1N0YXJ0PVtdLG0oZG9jdW1lbnQuYm9keSkub2ZmKCIub3ZlcnRtb3ZlIiksbShkb2N1bWVudC5ib2R5KS5vZmYoIi5vdmVydGVuZCIpLG0oZG9jdW1lbnQuYm9keSkub2ZmKCIub3ZlcnRsZWF2ZSIpLG0oZG9jdW1lbnQuYm9keSkub2ZmKCIub3ZlcnRjYW5jZWwiKX0sX29ubW91c2V3aGVlbDpmdW5jdGlvbih0KXt2YXIgZT12LndoZWVsRGVsdGEodCk7cmV0dXJuIHRoaXMuZy56b29tZXIuc2V0KCJfYWxpZ25tZW50U2Nyb2xsTGVmdCIsdGhpcy5nLnpvb21lci5nZXQoIl9hbGlnbm1lbnRTY3JvbGxMZWZ0IikrZVswXSksdGhpcy5nLnpvb21lci5zZXQoIl9hbGlnbm1lbnRTY3JvbGxUb3AiLHRoaXMuZy56b29tZXIuZ2V0KCJfYWxpZ25tZW50U2Nyb2xsVG9wIikrZVsxXSksdC5wcmV2ZW50RGVmYXVsdCgpfSxfb25jbGljazpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9nZXRDbGlja1Bvcyh0KTtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIGUmJm51bGwhPT1lJiYobnVsbCE9ZS5mZWF0dXJlP3RoaXMuZy50cmlnZ2VyKCJmZWF0dXJlOmNsaWNrIixlKTp0aGlzLmcudHJpZ2dlcigicmVzaWR1ZTpjbGljayIsZSkpLHRoaXMudGhyb3R0bGVkRHJhdygpfSxfb25tb3VzZWluOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2dldENsaWNrUG9zKHQpO3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgZSYmbnVsbCE9PWUmJihudWxsIT1lLmZlYXR1cmU/dGhpcy5nLnRyaWdnZXIoImZlYXR1cmU6bW91c2VpbiIsZSk6dGhpcy5nLnRyaWdnZXIoInJlc2lkdWU6bW91c2VpbiIsZSkpLHRoaXMudGhyb3R0bGVkRHJhdygpfSxfb25tb3VzZW91dDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9nZXRDbGlja1Bvcyh0KTtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIGUmJm51bGwhPT1lJiYobnVsbCE9ZS5mZWF0dXJlP3RoaXMuZy50cmlnZ2VyKCJmZWF0dXJlOm1vdXNlb3V0IixlKTp0aGlzLmcudHJpZ2dlcigicmVzaWR1ZTptb3VzZW91dCIsZSkpLHRoaXMudGhyb3R0bGVkRHJhdygpfSxfZ2V0Q2xpY2tQb3M6ZnVuY3Rpb24odCl7dmFyIGU9di5yZWwodCk7ZVswXSs9dGhpcy5nLnpvb21lci5nZXQoIl9hbGlnbm1lbnRTY3JvbGxMZWZ0Iik7dmFyIG49TWF0aC5mbG9vcihlWzBdL3RoaXMuZy56b29tZXIuZ2V0KCJjb2x1bW5XaWR0aCIpKSxyPXRoaXMuc2VxRHJhd2VyLl9nZXRTZXFGb3JZQ2xpY2soZVsxXSksbz1pKHIsMikscz1vWzBdLHU9b1sxXTtuKz10aGlzLmcuY29sdW1ucy5jYWxjSGlkZGVuQ29sdW1ucyhuKSxzKz10aGlzLm1vZGVsLmNhbGNIaWRkZW5TZXFzKHMpLG49TWF0aC5tYXgoMCxuKSxzPU1hdGgubWF4KDAscyk7dmFyIGE9dGhpcy5tb2RlbC5hdChzKS5nZXQoImlkIik7aWYoISh1PjApKXJldHVybntzZXFJZDphLHJvd1BvczpuLGV2dDp0fTt2YXIgbD10aGlzLm1vZGVsLmF0KHMpLmdldCgiZmVhdHVyZXMiKS5nZXRGZWF0dXJlT25Sb3codS0xLG4pO3JldHVybiAwIT09bC5sZW5ndGg/e3NlcUlkOmEsZmVhdHVyZTpsWzBdLHJvd1BvczpuLGV2dDp0fTp2b2lkIDB9LF9jaGVja1Njcm9sbGluZzpmdW5jdGlvbih0KXtmb3IodmFyIGU9W3RoaXMuY29vcmRzQ2FjaGUubWF4U2Nyb2xsV2lkdGgsdGhpcy5jb29yZHNDYWNoZS5tYXhTY3JvbGxIZWlnaHRdLG49MDtuPD0xO24rKyl0W25dPmVbbl0mJih0W25dPWVbbl0pLHRbbl08MCYmKHRbbl09MCk7cmV0dXJuIHR9fSk7ZVsiZGVmYXVsdCJdPXl9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3ZhciBuPVtdLHI9ITAsaT0hMSxvPXZvaWQgMDt0cnl7Zm9yKHZhciBzLHU9dFtTeW1ib2wuaXRlcmF0b3JdKCk7IShyPShzPXUubmV4dCgpKS5kb25lKSYmKG4ucHVzaChzLnZhbHVlKSwhZXx8bi5sZW5ndGghPT1lKTtyPSEwKTt9Y2F0Y2goYSl7aT0hMCxvPWF9ZmluYWxseXt0cnl7IXImJnVbInJldHVybiJdJiZ1WyJyZXR1cm4iXSgpfWZpbmFsbHl7aWYoaSl0aHJvdyBvfX1yZXR1cm4gbn1yZXR1cm4gZnVuY3Rpb24oZSxuKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBlO2lmKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoZSkpcmV0dXJuIHQoZSxuKTt0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIil9fSgpLGk9bigzKSxvPXt1cGRhdGVDb25maWc6ZnVuY3Rpb24oKXt0aGlzLnJlY3RXaWR0aD10aGlzLmcuem9vbWVyLmdldCgiY29sdW1uV2lkdGgiKSx0aGlzLnJlY3RIZWlnaHQ9dGhpcy5nLnpvb21lci5nZXQoInJvd0hlaWdodCIpfSxkcmF3TGV0dGVyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVwZGF0ZUNvbmZpZygpLHRoaXMuY3R4Lmdsb2JhbEFscGhhPXRoaXMuZy5jb2xvcnNjaGVtZS5nZXQoIm9wYWNpdHkiKSx0aGlzLmRyYXdTZXFzKGZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRyYXdTZXEodCx0aGlzLl9kcmF3UmVjdCl9KSx0aGlzLmN0eC5nbG9iYWxBbHBoYT0xLHRoaXMucmVjdFdpZHRoPj10aGlzLmcuem9vbWVyLmdldCgibWluTGV0dGVyRHJhd1NpemUiKSYmdGhpcy5kcmF3U2VxcyhmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kcmF3U2VxKHQsdGhpcy5fZHJhd0xldHRlcil9KSx0aGlzfSxkcmF3U2VxczpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZy5jb2x1bW5zLmdldCgiaGlkZGVuIik7ZT1lfHx0aGlzO2Zvcih2YXIgaT10aGlzLmdldFN0YXJ0U2VxKCksbz1yKGksMikscz1vWzBdLHU9b1sxXSxhPXM7YTx0aGlzLm1vZGVsLmxlbmd0aDthKyspe3ZhciBsPXRoaXMubW9kZWwuYXQoYSk7aWYoIWwuZ2V0KCJoaWRkZW4iKSYmKHQuY2FsbChlLHttb2RlbDpsLHlQb3M6dSx5OmEsaGlkZGVuOm59KSx1Kz0obC5hdHRyaWJ1dGVzLmhlaWdodHx8MSkqdGhpcy5yZWN0SGVpZ2h0LHU+dGhpcy5oZWlnaHQpKWJyZWFrfX0sZHJhd1Jvd3M6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5kcmF3U2VxcyhmdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5kcmF3Um93KG4sdCxlKX0pfSxkcmF3Um93OmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLmcuem9vbWVyLmdldCgiY29sdW1uV2lkdGgiKSxpPU1hdGgubWF4KDAsTWF0aC5hYnMoTWF0aC5jZWlsKC10aGlzLmcuem9vbWVyLmdldCgiX2FsaWdubWVudFNjcm9sbExlZnQiKS9yKSkpLG89LU1hdGguYWJzKC10aGlzLmcuem9vbWVyLmdldCgiX2FsaWdubWVudFNjcm9sbExlZnQiKSVyKSxzPW8taSpyLHU9dC55UG9zO3JldHVybiBlLmNhbGwobix7bW9kZWw6dC5tb2RlbCx4WmVybzpzLHlaZXJvOnUsaGlkZGVuOnQuaGlkZGVufSl9LGdldFN0YXJ0U2VxOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PU1hdGgubWF4KDAsTWF0aC5mbG9vcih0aGlzLmcuem9vbWVyLmdldCgiX2FsaWdubWVudFNjcm9sbFRvcCIpL3RoaXMucmVjdEhlaWdodCkpKzEsZT0wLG49MDtlPHQmJm48dGhpcy5tb2RlbC5sZW5ndGg7KWUrPXRoaXMubW9kZWwuYXQobikuYXR0cmlidXRlcy5oZWlnaHR8fDEsbisrO3JldHVybltuLTEsLU1hdGgubWF4KDAsdGhpcy5nLnpvb21lci5nZXQoIl9hbGlnbm1lbnRTY3JvbGxUb3AiKS1lKnRoaXMucmVjdEhlaWdodCsodGhpcy5tb2RlbC5hdChuLTEpLmF0dHJpYnV0ZXMuaGVpZ2h0fHwxKSp0aGlzLnJlY3RIZWlnaHQpXX0sX2dldFNlcUZvcllDbGljazpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5nZXRTdGFydFNlcSgpLG49cihlLDIpLGk9blswXSxvPW5bMV0scz1vJXRoaXMucmVjdEhlaWdodCx1PU1hdGgubWF4KDAsTWF0aC5mbG9vcigodC1zKS90aGlzLnJlY3RIZWlnaHQpKSsxLGE9MCxsPWk7YTx1JiZsPHRoaXMubW9kZWwubGVuZ3RoOylhKz10aGlzLm1vZGVsLmF0KGwpLmF0dHJpYnV0ZXMuaGVpZ2h0fHwxLGwrKztyZXR1cm5bbC0xLE1hdGgubWF4KDAsTWF0aC5mbG9vcih0L3RoaXMucmVjdEhlaWdodCktYSsodGhpcy5tb2RlbC5hdChsLTEpLmdldCgiaGVpZ2h0Iil8fDEpKV19LGRyYXdTZXE6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC5tb2RlbC5nZXQoInNlcSIpLHI9dC55UG9zLGk9dGhpcy5yZWN0V2lkdGgsbz10aGlzLnJlY3RIZWlnaHQscz1NYXRoLm1heCgwLE1hdGguYWJzKE1hdGguY2VpbCgtdGhpcy5nLnpvb21lci5nZXQoIl9hbGlnbm1lbnRTY3JvbGxMZWZ0IikvaSkpKSx1PS1NYXRoLmFicygtdGhpcy5nLnpvb21lci5nZXQoIl9hbGlnbm1lbnRTY3JvbGxMZWZ0IiklaSksYT17cmVjdFdpZHRoOmkscmVjdEhlaWdodDpvLHlQb3M6cix5OnQueX0sbD10aGlzLndpZHRoLGM9cztjPG4ubGVuZ3RoO2MrKyl7dmFyIGY9bltjXTtpZihmPWYudG9VcHBlckNhc2UoKSxhLng9YyxhLmM9ZixhLnhQb3M9dSx0LmhpZGRlbi5pbmRleE9mKGMpPDAmJihlKHRoaXMsYSksdSs9aSx1PmwpKWJyZWFrfX0sX2RyYXdSZWN0OmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5jb2xvci5nZXRDb2xvcihlLmMse3BvczplLngseTplLnl9KTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIG4mJm51bGwhPT1uKXJldHVybiB0LmN0eC5maWxsU3R5bGU9bix0LmN0eC5maWxsUmVjdChlLnhQb3MsZS55UG9zLGUucmVjdFdpZHRoLGUucmVjdEhlaWdodCl9LF9kcmF3TGV0dGVyOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuY3R4LmRyYXdJbWFnZSh0LmNhY2hlLmdldEZvbnRUaWxlKGUuYyxlLnJlY3RXaWR0aCxlLnJlY3RIZWlnaHQpLGUueFBvcyxlLnlQb3MsZS5yZWN0V2lkdGgsZS5yZWN0SGVpZ2h0KX19LHM9ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIHRoaXMuZz10LHRoaXMuY3R4PWUsdGhpcy5tb2RlbD1uLHRoaXMud2lkdGg9ci53aWR0aCx0aGlzLmhlaWdodD1yLmhlaWdodCx0aGlzLmNvbG9yPXIuY29sb3IsdGhpcy5jYWNoZT1yLmNhY2hlLHRoaXMucmVjdEhlaWdodD10aGlzLmcuem9vbWVyLmdldCgicm93SGVpZ2h0IiksdGhpcy5yZWN0V2lkdGg9dGhpcy5nLnpvb21lci5nZXQoImNvbHVtbldpZHRoIiksdGhpc307KDAsaS5leHRlbmQpKHMucHJvdG90eXBlLG8pLGVbImRlZmF1bHQiXT1zfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlWyJkZWZhdWx0Il09dCxlfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sPyJzeW1ib2wiOnR5cGVvZiB0fSxvPW4oMTIpLHM9cihvKSx1PW4oMiksYT1uKDcpLGw9dS5leHRlbmQoe2NsYXNzTmFtZToiYmlvanNfbXNhX2NvbnNlcnYiLGluaXRpYWxpemU6ZnVuY3Rpb24odCl7dGhpcy5nPXQuZyx0aGlzLmxpc3RlblRvKHRoaXMuZy56b29tZXIsImNoYW5nZTpzdGVwU2l6ZSBjaGFuZ2U6bGFiZWxXaWR0aCBjaGFuZ2U6Y29sdW1uV2lkdGgiLHRoaXMucmVuZGVyKSx0aGlzLmxpc3RlblRvKHRoaXMuZy52aXMsImNoYW5nZTpsYWJlbHMgY2hhbmdlOm1ldGFjZWxsIix0aGlzLnJlbmRlciksdGhpcy5saXN0ZW5Ubyh0aGlzLmcuY29sdW1ucywiY2hhbmdlOnNjYWxpbmciLHRoaXMucmVuZGVyKSx0aGlzLmxpc3RlblRvKHRoaXMuZy5zdGF0cywicmVzZXQiLHRoaXMucmVuZGVyKTt2YXIgZT1fLmV4dGVuZCh7fSx7ZmlsbENvbG9yOlsiIzY2MCIsIiNmZjAiXSxzdHJva2VDb2xvcjoiIzMzMCIsbWF4SGVpZ2h0OjIwLHJlY3RTdHlsZXI6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdH19LHRoaXMuZy5jb25zZXJ2YXRpb25Db25maWcpO3JldHVybiB0aGlzLmZpbGxDb2xvcj1lLmZpbGxDb2xvcix0aGlzLnN0cm9rZUNvbG9yPWUuc3Ryb2tlQ29sb3IsdGhpcy5tYXhIZWlnaHQ9ZS5tYXhIZWlnaHQsdGhpcy5yZWN0U3R5bGVyPWUucmVjdFN0eWxlcix0aGlzLm1hbmFnZUV2ZW50cygpfSxjb2xvcmVyOmZ1bmN0aW9uIGModCl7dmFyIGU9dGhpcyxjPWZ1bmN0aW9uKCl7cmV0dXJuIm5vbmUifTtpZigic3RyaW5nIj09dHlwZW9mIHQpYz1mdW5jdGlvbigpe3JldHVybiB0fTtlbHNlIGlmKEFycmF5LmlzQXJyYXkodCkpezIhPXQubGVuZ3RoJiZjb25zb2xlLmVycm9yKCJFUlJPUjogY29sb3JSYW5nZSBhcnJheSBzaG91bGQgaGF2ZSBleGFjdGx5IHR3byBlbGVtZW50cyIsdCk7dmFyIG49InVuZGVmaW5lZCIhPXR5cGVvZiBkMyYmISFkMy5zY2FsZSxyPSJ1bmRlZmluZWQiIT10eXBlb2YgZDNfc2NhbGU7bnx8cj8hZnVuY3Rpb24oKXt2YXIgcj1uP2QzLnNjYWxlLmxpbmVhcigpOmQzX3NjYWxlLnNjYWxlTGluZWFyKCksaT1yLmRvbWFpbihbMCxlLm1heEhlaWdodF0pLnJhbmdlKHQpO2M9ZnVuY3Rpb24odCl7cmV0dXJuIGkodC5oZWlnaHQpfX0oKTooY29uc29sZS53YXJuKCJwcm92aWRpbmcgYSBbbWluL21heF0gcmFuZ2UgYXMgaW5wdXQgcmVxdWlyZXMgZDMgdG8gYmUgaW5jbHVkZWQgLSBvbmx5IHVzaW5nIHRoZSBmaXJzdCBjb2xvciIpLGM9ZnVuY3Rpb24oZSl7cmV0dXJuIHRbMF19KX1lbHNlIGNvbnNvbGUud2FybigiZXhwZWN0ZWQgY29sb3JSYW5nZSB0byBiZSAnI3JnYicgb3IgWycjcmdiJywgJyNyZ2InXSIsdCwiKCIrKCJ1bmRlZmluZWQiPT10eXBlb2YgdD8idW5kZWZpbmVkIjppKHQpKSsiKSIpO3JldHVybiBjfSxyZW5kZXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmcuc3RhdHMuc2NhbGUodGhpcy5nLnN0YXRzLmNvbnNlcnZhdGlvbigpKTthLnJlbW92ZUFsbENoaWxkcyh0aGlzLmVsKTt2YXIgZT10aGlzLm1vZGVsLmdldE1heExlbmd0aCgpLG49dGhpcy5nLnpvb21lci5nZXQoImNvbHVtbldpZHRoIikscj10aGlzLm1heEhlaWdodCxpPW4qKGUtdGhpcy5nLmNvbHVtbnMuZ2V0KCJoaWRkZW4iKS5sZW5ndGgpLG89cy5iYXNlKHtoZWlnaHQ6cix3aWR0aDppfSk7by5zdHlsZS5kaXNwbGF5PSJpbmxpbmUtYmxvY2siLG8uc3R5bGUuY3Vyc29yPSJwb2ludGVyIjtmb3IodmFyIHU9KHRoaXMucmVjdERhdGEsdGhpcy5jb2xvcmVyKHRoaXMuZmlsbENvbG9yKSksbD10aGlzLmNvbG9yZXIodGhpcy5zdHJva2VDb2xvciksYz10aGlzLnJlY3RTdHlsZXIsZj10aGlzLmcuem9vbWVyLmdldCgic3RlcFNpemUiKSxoPXRoaXMuZy5jb2x1bW5zLmdldCgiaGlkZGVuIiksZD0wLHA9MDtwPGU7KWlmKGguaW5kZXhPZihwKT49MClwKz1mO2Vsc2V7aT1uKmY7Zm9yKHZhciBnPTAsdj1mLTEsbT0wOzA8dj9tPD12Om0+PXY7MDx2P20rKzptLS0pZys9dFtwXTt2YXIgeT1yKihnL2YpLF89e3g6ZCx5OnIteSxtYXhoZWlnaHQ6cix3aWR0aDppLW4vNCxoZWlnaHQ6eSxyb3dQb3M6cH0sYj1zLnJlY3QoXyk7Yi5zdHlsZS5zdHJva2U9bChfKSxiLnN0eWxlLmZpbGw9dShfKSwiZnVuY3Rpb24iPT10eXBlb2YgYyYmYyhiLF8pLGIucm93UG9zPXAsby5hcHBlbmRDaGlsZChiKSxkKz1pLHArPWZ9cmV0dXJuIHRoaXMuZWwuYXBwZW5kQ2hpbGQobyksdGhpc30sX29uY2xpY2s6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXQudGFyZ2V0LnJvd1BvcyxyPXRoaXMuZy56b29tZXIuZ2V0KCJzdGVwU2l6ZSIpO3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgaT1bXSxvPXItMSxzPTA7MDxvP3M8PW86cz49bzswPG8/cysrOnMtLSlpLnB1c2goZS5nLnRyaWdnZXIoImJhcjpjbGljayIse3Jvd1BvczpuK3MsZXZ0OnR9KSk7cmV0dXJuIGl9KCl9LG1hbmFnZUV2ZW50czpmdW5jdGlvbigpe3ZhciB0PXt9O3JldHVybiB0aGlzLmcuY29uZmlnLmdldCgicmVnaXN0ZXJNb3VzZUNsaWNrcyIpJiYodC5jbGljaz0iX29uY2xpY2siKSx0aGlzLmcuY29uZmlnLmdldCgicmVnaXN0ZXJNb3VzZUhvdmVyIikmJih0Lm1vdXNlaW49Il9vbm1vdXNlaW4iLHQubW91c2VvdXQ9Il9vbm1vdXNlb3V0IiksdGhpcy5kZWxlZ2F0ZUV2ZW50cyh0KSx0aGlzLmxpc3RlblRvKHRoaXMuZy5jb25maWcsImNoYW5nZTpyZWdpc3Rlck1vdXNlSG92ZXIiLHRoaXMubWFuYWdlRXZlbnRzKSx0aGlzLmxpc3RlblRvKHRoaXMuZy5jb25maWcsImNoYW5nZTpyZWdpc3Rlck1vdXNlQ2xpY2siLHRoaXMubWFuYWdlRXZlbnRzKX0sX29ubW91c2VpbjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmcuem9vbWVyLmdldCgic3RlcFNpemUiKnQucm93UG9zKTtyZXR1cm4gdGhpcy5nLnRyaWdnZXIoImJhcjptb3VzZWluIix7cm93UG9zOmUsZXZ0OnR9KX0sX29ubW91c2VvdXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nLnpvb21lci5nZXQoInN0ZXBTaXplIip0LnJvd1Bvcyk7cmV0dXJuIHRoaXMuZy50cmlnZ2VyKCJiYXI6bW91c2VvdXQiLHtyb3dQb3M6ZSxldnQ6dH0pfX0pO2VbImRlZmF1bHQiXT1sfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlWyJkZWZhdWx0Il09dCxlfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1uKDEyKSxvPXIoaSkscz1uKDIpLHU9big3KSxhPXMuZXh0ZW5kKHtjbGFzc05hbWU6ImJpb2pzX21zYV9nYXB2aWV3Iixpbml0aWFsaXplOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmc9dC5nLHRoaXMubGlzdGVuVG8odGhpcy5nLnpvb21lciwiY2hhbmdlOnN0ZXBTaXplIGNoYW5nZTpsYWJlbFdpZHRoIGNoYW5nZTpjb2x1bW5XaWR0aCIsdGhpcy5yZW5kZXIpLHRoaXMubGlzdGVuVG8odGhpcy5nLnZpcywiY2hhbmdlOmxhYmVscyBjaGFuZ2U6bWV0YWNlbGwiLHRoaXMucmVuZGVyKSx0aGlzLmxpc3RlblRvKHRoaXMuZy5jb2x1bW5zLCJjaGFuZ2U6c2NhbGluZyIsdGhpcy5yZW5kZXIpLHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwicmVzZXQiLHRoaXMucmVuZGVyKSx0aGlzLm1hbmFnZUV2ZW50cygpfSxyZW5kZXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmcuc3RhdHMuZ2FwcygpO3UucmVtb3ZlQWxsQ2hpbGRzKHRoaXMuZWwpO3ZhciBlPXRoaXMubW9kZWwuZ2V0TWF4TGVuZ3RoKCksbj10aGlzLmcuem9vbWVyLmdldCgiY29sdW1uV2lkdGgiKSxyPTIwLGk9biooZS10aGlzLmcuY29sdW1ucy5nZXQoImhpZGRlbiIpLmxlbmd0aCkscz1vLmJhc2Uoe2hlaWdodDpyLHdpZHRoOml9KTtzLnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayIscy5zdHlsZS5jdXJzb3I9InBvaW50ZXIiO2Zvcih2YXIgYT10aGlzLmcuem9vbWVyLmdldCgic3RlcFNpemUiKSxsPXRoaXMuZy5jb2x1bW5zLmdldCgiaGlkZGVuIiksYz0wLGY9MDtmPGU7KWlmKGwuaW5kZXhPZihmKT49MClmKz1hO2Vsc2V7aT1uKmE7Zm9yKHZhciBoPTAsZD1hLTEscD0wOzA8ZD9wPD1kOnA+PWQ7MDxkP3ArKzpwLS0paCs9dFtmXTt2YXIgZz1yKihoL2EpLHY9by5yZWN0KHt4OmMseTpyLWcsd2lkdGg6aS1uLzQsaGVpZ2h0Omcsc3R5bGU6InN0cm9rZTpyZWQ7c3Ryb2tlLXdpZHRoOjE7In0pO3Yucm93UG9zPWYscy5hcHBlbmRDaGlsZCh2KSxjKz1pLGYrPWF9cmV0dXJuIHRoaXMuZWwuYXBwZW5kQ2hpbGQocyksdGhpc30sX29uY2xpY2s6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXQudGFyZ2V0LnJvd1BvcyxyPXRoaXMuZy56b29tZXIuZ2V0KCJzdGVwU2l6ZSIpO3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgaT1bXSxvPXItMSxzPTA7MDxvP3M8PW86cz49bzswPG8/cysrOnMtLSlpLnB1c2goZS5nLnRyaWdnZXIoImdhcDpjbGljayIse3Jvd1BvczpuK3MsZXZ0OnR9KSk7cmV0dXJuIGl9KCl9LG1hbmFnZUV2ZW50czpmdW5jdGlvbigpe3ZhciB0PXt9O3JldHVybiB0aGlzLmcuY29uZmlnLmdldCgicmVnaXN0ZXJNb3VzZUNsaWNrcyIpJiYodC5jbGljaz0iX29uY2xpY2siKSx0aGlzLmcuY29uZmlnLmdldCgicmVnaXN0ZXJNb3VzZUhvdmVyIikmJih0Lm1vdXNlaW49Il9vbm1vdXNlaW4iLHQubW91c2VvdXQ9Il9vbm1vdXNlb3V0IiksdGhpcy5kZWxlZ2F0ZUV2ZW50cyh0KSx0aGlzLmxpc3RlblRvKHRoaXMuZy5jb25maWcsImNoYW5nZTpyZWdpc3Rlck1vdXNlSG92ZXIiLHRoaXMubWFuYWdlRXZlbnRzKSx0aGlzLmxpc3RlblRvKHRoaXMuZy5jb25maWcsImNoYW5nZTpyZWdpc3Rlck1vdXNlQ2xpY2siLHRoaXMubWFuYWdlRXZlbnRzKX0sX29ubW91c2VpbjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmcuem9vbWVyLmdldCgic3RlcFNpemUiKnQucm93UG9zKTtyZXR1cm4gdGhpcy5nLnRyaWdnZXIoImdhcDptb3VzZWluIix7cm93UG9zOmUsZXZ0OnR9KX0sX29ubW91c2VvdXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nLnpvb21lci5nZXQoInN0ZXBTaXplIip0LnJvd1Bvcyk7cmV0dXJuIHRoaXMuZy50cmlnZ2VyKCJnYXA6bW91c2VvdXQiLHtyb3dQb3M6ZSxldnQ6dH0pfX0pO2VbImRlZmF1bHQiXT1hfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OnsiZGVmYXVsdCI6dH19T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBpPW4oMTM5KSxvPXIoaSkscz1uKDE0MSksdT1yKHMpLGE9big0KSxsPWEuZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuZz10LmcsdGhpcy5kcmF3KCksdGhpcy5saXN0ZW5Ubyh0aGlzLmcudmlzLCJjaGFuZ2U6bGFiZWxzIGNoYW5nZTptZXRhY2VsbCBjaGFuZ2U6bGVmdEhlYWRlciIsZnVuY3Rpb24oKXtyZXR1cm4gZS5kcmF3KCksZS5yZW5kZXIoKX0pfSxkcmF3OmZ1bmN0aW9uKCl7aWYodGhpcy5yZW1vdmVWaWV3cygpLHRoaXMuZy52aXMuZ2V0KCJsZWZ0SGVhZGVyIikmJih0aGlzLmcudmlzLmdldCgibGFiZWxzIil8fHRoaXMuZy52aXMuZ2V0KCJtZXRhY2VsbCIpKSl7dmFyIHQ9bmV3IG9bImRlZmF1bHQiXSh7bW9kZWw6dGhpcy5tb2RlbCxnOnRoaXMuZ30pO3Qub3JkZXJpbmc9LTUwLHRoaXMuYWRkVmlldygibEhlYWRlciIsdCl9dmFyIGU9bmV3IHVbImRlZmF1bHQiXSh7bW9kZWw6dGhpcy5tb2RlbCxnOnRoaXMuZ30pO3JldHVybiBlLm9yZGVyaW5nPTAsdGhpcy5hZGRWaWV3KCJySGVhZGVyIixlKX0scmVuZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVuZGVyU3Vidmlld3MoKSx0aGlzLmVsLmNsYXNzTmFtZT0iYmlvanNfbXNhX2hlYWRlciJ9fSk7ZVsiZGVmYXVsdCJdPWx9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciByPW4oMTQpLGk9bigyKSxvPW4oNykscz1pLmV4dGVuZCh7Y2xhc3NOYW1lOiJiaW9qc19tc2FfaGVhZGVycyIsaW5pdGlhbGl6ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nPXQuZyx0aGlzLmxpc3RlblRvKHRoaXMuZy52aXMsImNoYW5nZTptZXRhY2VsbCBjaGFuZ2U6bGFiZWxzIix0aGlzLnJlbmRlciksdGhpcy5saXN0ZW5Ubyh0aGlzLmcuem9vbWVyLCJjaGFuZ2U6bGFiZWxXaWR0aCBjaGFuZ2U6bWV0YVdpZHRoIix0aGlzLnJlbmRlcil9LHJlbmRlcjpmdW5jdGlvbigpe28ucmVtb3ZlQWxsQ2hpbGRzKHRoaXMuZWwpO3ZhciB0PTA7cmV0dXJuIHQrPXRoaXMuZy56b29tZXIuZ2V0TGVmdEJsb2NrV2lkdGgoKSx0aGlzLmVsLnN0eWxlLndpZHRoPXQrInB4Iix0aGlzLmcudmlzLmdldCgibGFiZWxzIikmJnRoaXMuZWwuYXBwZW5kQ2hpbGQodGhpcy5sYWJlbERPTSgpKSx0aGlzLmcudmlzLmdldCgibWV0YWNlbGwiKSYmdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLm1ldGFET00oKSksdGhpcy5lbC5zdHlsZS5kaXNwbGF5PSJpbmxpbmUtYmxvY2siLHRoaXMuZWwuc3R5bGUuZm9udFNpemU9dGhpcy5nLnpvb21lci5nZXQoIm1hcmtlckZvbnRzaXplIiksdGhpc30sbGFiZWxET006ZnVuY3Rpb24oKXt2YXIgdD1yLm1rKCJkaXYiKTtpZih0LnN0eWxlLndpZHRoPXRoaXMuZy56b29tZXIuZ2V0TGFiZWxXaWR0aCgpLHQuc3R5bGUuZGlzcGxheT0iaW5saW5lLWJsb2NrIix0aGlzLmcudmlzLmdldCgibGFiZWxDaGVja2JveCIpJiZ0LmFwcGVuZENoaWxkKHRoaXMuYWRkRWwoIi4iLDEwKSksdGhpcy5nLnZpcy5nZXQoImxhYmVsSWQiKSYmdC5hcHBlbmRDaGlsZCh0aGlzLmFkZEVsKCJJRCIsdGhpcy5nLnpvb21lci5nZXQoImxhYmVsSWRMZW5ndGgiKSkpLHRoaXMuZy52aXMuZ2V0KCJsYWJlbFBhcnRpdGlvbiIpJiZ0LmFwcGVuZENoaWxkKHRoaXMuYWRkRWwoInBhcnQiLDE1KSksdGhpcy5nLnZpcy5nZXQoImxhYmVsTmFtZSIpKXt2YXIgZT10aGlzLmFkZEVsKCJMYWJlbCIpO3QuYXBwZW5kQ2hpbGQoZSl9cmV0dXJuIHR9LGFkZEVsOmZ1bmN0aW9uKHQsZSl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpO3JldHVybiBuLnRleHRDb250ZW50PXQsInVuZGVmaW5lZCIhPXR5cGVvZiBlJiZudWxsIT09ZSYmKG4uc3R5bGUud2lkdGg9ZSsicHgiKSxuLnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayIsbn0sbWV0YURPTTpmdW5jdGlvbigpe3ZhciB0PXIubWsoImRpdiIpO3JldHVybiB0LnN0eWxlLndpZHRoPXRoaXMuZy56b29tZXIuZ2V0TWV0YVdpZHRoKCksdC5zdHlsZS5kaXNwbGF5PSJpbmxpbmUtYmxvY2siLHRoaXMuZy52aXMuZ2V0KCJtZXRhR2FwcyIpJiZ0LmFwcGVuZENoaWxkKHRoaXMuYWRkRWwoIkdhcHMiLHRoaXMuZy56b29tZXIuZ2V0KCJtZXRhR2FwV2lkdGgiKSkpLHRoaXMuZy52aXMuZ2V0KCJtZXRhSWRlbnRpdHkiKSYmdC5hcHBlbmRDaGlsZCh0aGlzLmFkZEVsKCJJZGVudCIsdGhpcy5nLnpvb21lci5nZXQoIm1ldGFJZGVudFdpZHRoIikpKSx0fX0pO2VbImRlZmF1bHQiXT1zfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7aWYodCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPXt9O2lmKG51bGwhPXQpZm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlWyJkZWZhdWx0Il09dCxlfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1uKDEyKSxvPXIoaSkscz1uKDIpLHU9big3KSxhPW4oNSksbD1zLmV4dGVuZCh7Y2xhc3NOYW1lOiJiaW9qc19tc2FfbWFya2VyIixpbml0aWFsaXplOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmc9dC5nLHRoaXMubGlzdGVuVG8odGhpcy5nLnpvb21lciwiY2hhbmdlOnN0ZXBTaXplIGNoYW5nZTpsYWJlbFdpZHRoIGNoYW5nZTpjb2x1bW5XaWR0aCBjaGFuZ2U6bWFya2VyU3RlcFNpemUgY2hhbmdlOm1hcmtlckZvbnRzaXplIix0aGlzLnJlbmRlciksdGhpcy5saXN0ZW5Ubyh0aGlzLmcudmlzLCJjaGFuZ2U6bGFiZWxzIGNoYW5nZTptZXRhY2VsbCIsdGhpcy5yZW5kZXIpLHRoaXMubWFuYWdlRXZlbnRzKCl9LHJlbmRlcjpmdW5jdGlvbigpe3UucmVtb3ZlQWxsQ2hpbGRzKHRoaXMuZWwpO3ZhciB0PXRoaXMuZy56b29tZXIuZ2V0KCJtYXJrZXJGb250c2l6ZSIpLGU9dGhpcy5nLnpvb21lci5nZXQoImNvbHVtbldpZHRoIiksbj10aGlzLmcuem9vbWVyLmdldCgic3RlcFNpemUiKSxyPXRoaXMuZy56b29tZXIuZ2V0KCJtYXJrZXJTdGVwU2l6ZSIpLGk9dGhpcy5nLmNvbHVtbnMuZ2V0KCJoaWRkZW4iKTt0aGlzLmVsLnN0eWxlLmZvbnRTaXplPXQ7Zm9yKHZhciBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKSxzPTAsYT10aGlzLm1vZGVsLmdldE1heExlbmd0aCgpLHM9MDtzPGE7cysrKWlmKGkuaW5kZXhPZihzKT49MCl0aGlzLm1hcmtlckhpZGRlbihsLHMsbikscys9bjtlbHNle3ZhciBsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTtsLmNsYXNzTmFtZT0ibXNhLWNvbC1oZWFkZXIiLGwuc3R5bGUud2lkdGg9ZSsicHgiLGwuc3R5bGUuZGlzcGxheT0iaW5saW5lLWJsb2NrIiwocysxKSVyPT09MD9sLnRleHRDb250ZW50PXMrMToocysxKSVuPT09MD9sLnRleHRDb250ZW50PSIuIjpsLnRleHRDb250ZW50PSIgIixsLnJvd1Bvcz1zLG8uYXBwZW5kQ2hpbGQobCl9cmV0dXJuIHRoaXMuZWwuYXBwZW5kQ2hpbGQobyksdGhpc30sbWFya2VySGlkZGVuOmZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9dGhpcyxpPXRoaXMuZy5jb2x1bW5zLmdldCgiaGlkZGVuIikuc2xpY2UoMCkscz1NYXRoLm1heCgwLGUtbiksdT0hMCxsPXM7czxlP2w8PWU6bD49ZTtzPGU/bCsrOmwtLSl1Jj1pLmluZGV4T2YobCk+PTA7aWYoIXUpe2Zvcih2YXIgYz10aGlzLm1vZGVsLmdldE1heExlbmd0aCgpLGY9MCxoPS0xLGU9ZTsoZTxjP2U8PWM6ZT49YykmJihoPj0wfHwoaD1pLmluZGV4T2YoZSkpLGkuaW5kZXhPZihlKT49MCk7ZTxjP2UrKzplLS0pZisrO3ZhciBkPW8uYmFzZSh7aGVpZ2h0OjEwLHdpZHRoOjEwfSk7ZC5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiO3ZhciBwPW8ucG9seWdvbih7cG9pbnRzOiIwLDAgNSw1IDEwLDAiLHN0eWxlOiJmaWxsOmxpbWU7c3Ryb2tlOnB1cnBsZTtzdHJva2Utd2lkdGg6MSJ9KTtyZXR1cm4gYShwKS5vbigiY2xpY2siLGZ1bmN0aW9uKHQpe3JldHVybiBpLnNwbGljZShoLGYpLHIuZy5jb2x1bW5zLnNldCgiaGlkZGVuIixpKX0pLGQuYXBwZW5kQ2hpbGQocCksdC5hcHBlbmRDaGlsZChkKSxkfX0sbWFuYWdlRXZlbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9e307cmV0dXJuIHRoaXMuZy5jb25maWcuZ2V0KCJyZWdpc3Rlck1vdXNlQ2xpY2tzIikmJih0LmNsaWNrPSJfb25jbGljayIpLHRoaXMuZy5jb25maWcuZ2V0KCJyZWdpc3Rlck1vdXNlSG92ZXIiKSYmKHQubW91c2Vpbj0iX29ubW91c2VpbiIsdC5tb3VzZW91dD0iX29ubW91c2VvdXQiKSx0aGlzLmRlbGVnYXRlRXZlbnRzKHQpLHRoaXMubGlzdGVuVG8odGhpcy5nLmNvbmZpZywiY2hhbmdlOnJlZ2lzdGVyTW91c2VIb3ZlciIsdGhpcy5tYW5hZ2VFdmVudHMpLHRoaXMubGlzdGVuVG8odGhpcy5nLmNvbmZpZywiY2hhbmdlOnJlZ2lzdGVyTW91c2VDbGljayIsdGhpcy5tYW5hZ2VFdmVudHMpfSxfb25jbGljazpmdW5jdGlvbih0KXt2YXIgZT10LnRhcmdldC5yb3dQb3Msbj10aGlzLmcuem9vbWVyLmdldCgic3RlcFNpemUiKTtyZXR1cm4gdGhpcy5nLnRyaWdnZXIoImNvbHVtbjpjbGljayIse3Jvd1BvczplLHN0ZXBTaXplOm4sZXZ0OnR9KX0sX29ubW91c2VpbjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmcuem9vbWVyLmdldCgic3RlcFNpemUiKnQucm93UG9zKSxuPXRoaXMuZy56b29tZXIuZ2V0KCJzdGVwU2l6ZSIpO3JldHVybiB0aGlzLmcudHJpZ2dlcigiY29sdW1uOm1vdXNlaW4iLHtyb3dQb3M6ZSxzdGVwU2l6ZTpuLGV2dDp0fSl9LF9vbm1vdXNlb3V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZy56b29tZXIuZ2V0KCJzdGVwU2l6ZSIqdC5yb3dQb3MpLG49dGhpcy5nLnpvb21lci5nZXQoInN0ZXBTaXplIik7cmV0dXJuIHRoaXMuZy50cmlnZ2VyKCJjb2x1bW46bW91c2VvdXQiLHtyb3dQb3M6ZSxzdGVwU2l6ZTpuLGV2dDp0fSl9fSk7ZVsiZGVmYXVsdCJdPWx9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6eyJkZWZhdWx0Ijp0fX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGk9bigxNDApLG89cihpKSxzPW4oMTM2KSx1PXIocyksYT1uKDE0MiksbD1yKGEpLGM9bigxMzcpLGY9cihjKSxoPW4oNCksZD1oLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nPXQuZyx0aGlzLmJsb2NrRXZlbnRzPSExLHRoaXMubGlzdGVuVG8odGhpcy5nLnZpcywiY2hhbmdlOmhlYWRlciIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kcmF3KCksdGhpcy5yZW5kZXIoKX0pLHRoaXMubGlzdGVuVG8odGhpcy5nLnZpcywiY2hhbmdlIix0aGlzLl9zZXRTcGFjZXIpLHRoaXMubGlzdGVuVG8odGhpcy5nLnpvb21lciwiY2hhbmdlOmFsaWdubWVudFdpZHRoIix0aGlzLl9zZXRXaWR0aCksdGhpcy5saXN0ZW5Ubyh0aGlzLmcuem9vbWVyLCJjaGFuZ2U6X2FsaWdubWVudFNjcm9sbExlZnQiLHRoaXMuX2FkanVzdFNjcm9sbGluZ0xlZnQpLHRoaXMubGlzdGVuVG8odGhpcy5nLmNvbHVtbnMsImNoYW5nZTpoaWRkZW4iLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZHJhdygpLHRoaXMucmVuZGVyKCl9KSx0aGlzLmRyYXcoKSx0aGlzLmcudmlzLm9uY2UoImNoYW5nZTpsb2FkZWQiLHRoaXMuX2FkanVzdFNjcm9sbGluZ0xlZnQsdGhpcyl9LGV2ZW50czp7c2Nyb2xsOiJfc2VuZFNjcm9sbEV2ZW50In0sZHJhdzpmdW5jdGlvbigpe2lmKHRoaXMucmVtb3ZlVmlld3MoKSx0aGlzLmcudmlzLmdldCgiY29uc2VydiIpKXt2YXIgdD1uZXcgdVsiZGVmYXVsdCJdKHttb2RlbDp0aGlzLm1vZGVsLGc6dGhpcy5nfSk7dC5vcmRlcmluZz0tMjAsdGhpcy5hZGRWaWV3KCJjb25zZXJ2Iix0KX1pZih0aGlzLmcudmlzLmdldCgibWFya2VycyIpKXt2YXIgZT1uZXcgb1siZGVmYXVsdCJdKHttb2RlbDp0aGlzLm1vZGVsLGc6dGhpcy5nfSk7ZS5vcmRlcmluZz0tMTAsdGhpcy5hZGRWaWV3KCJtYXJrZXIiLGUpfWlmKHRoaXMuZy52aXMuZ2V0KCJzZXFsb2dvIikpe3ZhciBuPW5ldyBsWyJkZWZhdWx0Il0oe21vZGVsOnRoaXMubW9kZWwsZzp0aGlzLmd9KTtuLm9yZGVyaW5nPS0zMCx0aGlzLmFkZFZpZXcoInNlcWxvZ28iLG4pfWlmKHRoaXMuZy52aXMuZ2V0KCJnYXBIZWFkZXIiKSl7dmFyIHI9bmV3IGZbImRlZmF1bHQiXSh7bW9kZWw6dGhpcy5tb2RlbCxnOnRoaXMuZ30pO3JldHVybiByLm9yZGVyaW5nPS0yNSx0aGlzLmFkZFZpZXcoImdhcHZpZXciLHIpfX0scmVuZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVuZGVyU3Vidmlld3MoKSx0aGlzLl9zZXRTcGFjZXIoKSx0aGlzLmVsLmNsYXNzTmFtZT0iYmlvanNfbXNhX3JoZWFkZXIiLHRoaXMuZWwuc3R5bGUub3ZlcmZsb3dYPSJhdXRvIix0aGlzLmVsLnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayIsdGhpcy5fc2V0V2lkdGgoKSx0aGlzLl9hZGp1c3RTY3JvbGxpbmdMZWZ0KCksdGhpc30sX3NlbmRTY3JvbGxFdmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJsb2NrRXZlbnRzfHx0aGlzLmcuem9vbWVyLnNldCgiX2FsaWdubWVudFNjcm9sbExlZnQiLHRoaXMuZWwuc2Nyb2xsTGVmdCx7b3JpZ2luOiJoZWFkZXIifSksdGhpcy5ibG9ja0V2ZW50cz0hMX0sX2FkanVzdFNjcm9sbGluZ0xlZnQ6ZnVuY3Rpb24odCxlLG4pe2lmKG51bGw9PSgidW5kZWZpbmVkIiE9dHlwZW9mIG4mJm51bGwhPT1uP24ub3JpZ2luOnZvaWQgMCl8fCJoZWFkZXIiIT09bi5vcmlnaW4pe3ZhciByPXRoaXMuZy56b29tZXIuZ2V0KCJfYWxpZ25tZW50U2Nyb2xsTGVmdCIpO3JldHVybiB0aGlzLmJsb2NrRXZlbnRzPSEwLHRoaXMuZWwuc2Nyb2xsTGVmdD1yfX0sX3NldFNwYWNlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsLnN0eWxlLm1hcmdpbkxlZnQ9dGhpcy5fZ2V0TGFiZWxXaWR0aCgpKyJweCJ9LF9nZXRMYWJlbFdpZHRoOmZ1bmN0aW9uKCl7dmFyIHQ9MDtyZXR1cm4gdGhpcy5nLnZpcy5nZXQoImxlZnRIZWFkZXIiKXx8KHQrPXRoaXMuZy56b29tZXIuZ2V0TGVmdEJsb2NrV2lkdGgoKSksdH0sX3NldFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWwuc3R5bGUud2lkdGg9dGhpcy5nLnpvb21lci5nZXRBbGlnbm1lbnRXaWR0aCgpKyJweCJ9fSk7ZVsiZGVmYXVsdCJdPWR9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciByPW4oNzQpLGk9bigyKSxvPW4oNykscz1pLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nPXQuZyx0aGlzLmxpc3RlblRvKHRoaXMuZy56b29tZXIsImNoYW5nZTphbGlnbm1lbnRXaWR0aCIsdGhpcy5yZW5kZXIpLHRoaXMubGlzdGVuVG8odGhpcy5nLmNvbG9yc2NoZW1lLCJjaGFuZ2UiLGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nLmNvbG9yc2NoZW1lLmdldFNlbGVjdGVkU2NoZW1lKCk7cmV0dXJuIHRoaXMuc2VxbG9nby5jaGFuZ2VDb2xvcnModCksdGhpcy5yZW5kZXIoKX0pLHRoaXMubGlzdGVuVG8odGhpcy5nLnpvb21lciwiY2hhbmdlOmNvbHVtbldpZHRoIixmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlcWxvZ28uY29sdW1uX3dpZHRoPXRoaXMuZy56b29tZXIuZ2V0KCJjb2x1bW5XaWR0aCIpLHRoaXMucmVuZGVyKCl9KSx0aGlzLmxpc3RlblRvKHRoaXMuZy5zdGF0cywicmVzZXQiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZHJhdygpLHRoaXMucmVuZGVyKCl9KSx0aGlzLmRyYXcoKX0sZHJhdzpmdW5jdGlvbigpe28ucmVtb3ZlQWxsQ2hpbGRzKHRoaXMuZWwpO3ZhciB0PXRoaXMuZy5zdGF0cy5jb25zZXJ2UmVzaWR1ZSh7c2NhbGVkOiEwfSk7dD1fLm1hcCh0LGZ1bmN0aW9uKHQpe3JldHVybiBfLnBpY2sodCxmdW5jdGlvbih0LGUpe3JldHVybiItIiE9PWV9KX0pO3ZhciBlPXthbHBoYWJldDoiYWEiLGhlaWdodEFycjp0fSxuPXRoaXMuZy5jb2xvcnNjaGVtZS5nZXRTZWxlY3RlZFNjaGVtZSgpO3JldHVybiB0aGlzLnNlcWxvZ289bmV3IHIoe21vZGVsOnRoaXMubW9kZWwsZzp0aGlzLmcsZGF0YTplLHlheGlzOiExLHNjcm9sbGVyOiExLHhheGlzOiExLGhlaWdodDoxMDAsY29sdW1uX3dpZHRoOnRoaXMuZy56b29tZXIuZ2V0KCJjb2x1bW5XaWR0aCIpLHBvc2l0aW9uTWFya2VyOiExLHpvb206MSxlbDp0aGlzLmVsLGNvbG9yczpufSl9LHJlbmRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlcWxvZ28ucmVuZGVyKCl9fSk7ZVsiZGVmYXVsdCJdPXN9LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6eyJkZWZhdWx0Ijp0fX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGk9bigxNDQpLG89cihpKSxzPW4oNCksdT1zLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3JldHVybiB0aGlzLmc9dC5nLHRoaXMuZHJhdygpLHRoaXMubGlzdGVuVG8odGhpcy5nLnpvb21lciwiY2hhbmdlOl9hbGlnbm1lbnRTY3JvbGxUb3AiLHRoaXMuX2FkanVzdFNjcm9sbGluZ1RvcCksdGhpcy5nLnZpcy5vbmNlKCJjaGFuZ2U6bG9hZGVkIix0aGlzLl9hZGp1c3RTY3JvbGxpbmdUb3AsdGhpcyksdGhpcy5saXN0ZW5Ubyh0aGlzLmcuem9vbWVyLCJjaGFuZ2U6YWxpZ25tZW50SGVpZ2h0Iix0aGlzLl9zZXRIZWlnaHQpLHRoaXMubGlzdGVuVG8odGhpcy5tb2RlbCwiY2hhbmdlOnJlZmVyZW5jZSIsdGhpcy5kcmF3KSx0aGlzLmxpc3RlblRvKHRoaXMubW9kZWwsInJlc2V0IGFkZCByZW1vdmUiLGZ1bmN0aW9uKCl7cmV0dXJuIGUuZHJhdygpLGUucmVuZGVyKCl9KX0sZHJhdzpmdW5jdGlvbigpe3RoaXMucmVtb3ZlVmlld3MoKTtmb3IodmFyIHQ9MDt0PHRoaXMubW9kZWwubGVuZ3RoO3QrKylpZighdGhpcy5tb2RlbC5hdCh0KS5nZXQoImhpZGRlbiIpKXt2YXIgZT1uZXcgb1siZGVmYXVsdCJdKHttb2RlbDp0aGlzLm1vZGVsLmF0KHQpLGc6dGhpcy5nfSk7ZS5vcmRlcmluZz10LHRoaXMuYWRkVmlldygicm93XyIrdCxlKX19LGV2ZW50czp7c2Nyb2xsOiJfc2VuZFNjcm9sbEV2ZW50In0sX3NlbmRTY3JvbGxFdmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmcuem9vbWVyLnNldCgiX2FsaWdubWVudFNjcm9sbFRvcCIsdGhpcy5lbC5zY3JvbGxUb3Ase29yaWdpbjoibGFiZWwifSl9LF9hZGp1c3RTY3JvbGxpbmdUb3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbC5zY3JvbGxUb3A9dGhpcy5nLnpvb21lci5nZXQoIl9hbGlnbm1lbnRTY3JvbGxUb3AiKX0scmVuZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVuZGVyU3Vidmlld3MoKSx0aGlzLmVsLmNsYXNzTmFtZT0iYmlvanNfbXNhX2xhYmVsYmxvY2siLHRoaXMuZWwuc3R5bGUuZGlzcGxheT0iaW5saW5lLWJsb2NrIix0aGlzLmVsLnN0eWxlLnZlcnRpY2FsQWxpZ249InRvcCIsdGhpcy5lbC5zdHlsZS5vdmVyZmxvd1k9ImF1dG8iLHRoaXMuZWwuc3R5bGUub3ZlcmZsb3dYPSJoaWRkZW4iLHRoaXMuZWwuc3R5bGUuZm9udFNpemU9dGhpcy5nLnpvb21lci5nZXQoImxhYmVsRm9udHNpemUiKSsicHgiLHRoaXMuZWwuc3R5bGUubGluZUhlaWdodD0iIit0aGlzLmcuem9vbWVyLmdldCgibGFiZWxMaW5lSGVpZ2h0IiksdGhpcy5fc2V0SGVpZ2h0KCksdGhpc30sX3NldEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsLnN0eWxlLmhlaWdodD10aGlzLmcuem9vbWVyLmdldCgiYWxpZ25tZW50SGVpZ2h0IikrInB4In19KTtlWyJkZWZhdWx0Il09dX0sZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ImRlZmF1bHQiOnR9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgaT1uKDE0NSksbz1yKGkpLHM9bigxNDYpLHU9cihzKSxhPW4oNCksbD1hLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nPXQuZyx0aGlzLmRyYXcoKSx0aGlzLmxpc3RlblRvKHRoaXMuZy52aXMsImNoYW5nZTpsYWJlbHMiLHRoaXMuZHJhd1IpLHRoaXMubGlzdGVuVG8odGhpcy5nLnZpcywiY2hhbmdlOm1ldGFjZWxsIix0aGlzLmRyYXdSKSx0aGlzLmxpc3RlblRvKHRoaXMuZy56b29tZXIsImNoYW5nZTpyb3dIZWlnaHQiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWwuc3R5bGUuaGVpZ2h0PXRoaXMuZy56b29tZXIuZ2V0KCJyb3dIZWlnaHQiKSsicHgifSksdGhpcy5saXN0ZW5Ubyh0aGlzLmcuc2VsY29sLCJjaGFuZ2UgcmVzZXQgYWRkIix0aGlzLnNldFNlbGVjdGlvbil9LGRyYXc6ZnVuY3Rpb24oKXtpZih0aGlzLnJlbW92ZVZpZXdzKCksdGhpcy5nLnZpcy5nZXQoImxhYmVscyIpJiZ0aGlzLmFkZFZpZXcoImxhYmVscyIsbmV3IG9bImRlZmF1bHQiXSh7bW9kZWw6dGhpcy5tb2RlbCxnOnRoaXMuZ30pKSx0aGlzLmcudmlzLmdldCgibWV0YWNlbGwiKSl7dmFyIHQ9bmV3IHVbImRlZmF1bHQiXSh7bW9kZWw6dGhpcy5tb2RlbCxnOnRoaXMuZ30pO3JldHVybiB0aGlzLmFkZFZpZXcoIm1ldGFjZWxsIix0KX19LGRyYXdSOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZHJhdygpLHRoaXMucmVuZGVyKCl9LHJlbmRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlbmRlclN1YnZpZXdzKCksdGhpcy5lbC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwiYmlvanNfbXNhX2xhYmVscm93IiksdGhpcy5lbC5zdHlsZS5oZWlnaHQ9dGhpcy5nLnpvb21lci5nZXQoInJvd0hlaWdodCIpKih0aGlzLm1vZGVsLmF0dHJpYnV0ZXMuaGVpZ2h0fHwxKSsicHgiLHRoaXMuc2V0U2VsZWN0aW9uKCksdGhpc30sc2V0U2VsZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZy5zZWxjb2wuZ2V0U2VsRm9yUm93KHRoaXMubW9kZWwuaWQpLmxlbmd0aD4wP3RoaXMuZWwuc3R5bGUuZm9udFdlaWdodD0iYm9sZCI6dGhpcy5lbC5zdHlsZS5mb250V2VpZ2h0PSJub3JtYWwifX0pO2VbImRlZmF1bHQiXT1sfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgcj1uKDIpLGk9big3KSxvPXIuZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNlcT10LnNlcSx0aGlzLmc9dC5nLHRoaXMubWFuYWdlRXZlbnRzKCl9LG1hbmFnZUV2ZW50czpmdW5jdGlvbigpe3ZhciB0PXt9O3JldHVybiB0aGlzLmcuY29uZmlnLmdldCgicmVnaXN0ZXJNb3VzZUNsaWNrcyIpJiYodC5jbGljaz0iX29uY2xpY2siKSx0aGlzLmcuY29uZmlnLmdldCgicmVnaXN0ZXJNb3VzZUhvdmVyIikmJih0Lm1vdXNlaW49Il9vbm1vdXNlaW4iLHQubW91c2VvdXQ9Il9vbm1vdXNlb3V0IiksdGhpcy5kZWxlZ2F0ZUV2ZW50cyh0KSx0aGlzLmxpc3RlblRvKHRoaXMuZy5jb25maWcsImNoYW5nZTpyZWdpc3Rlck1vdXNlSG92ZXIiLHRoaXMubWFuYWdlRXZlbnRzKSx0aGlzLmxpc3RlblRvKHRoaXMuZy5jb25maWcsImNoYW5nZTpyZWdpc3Rlck1vdXNlQ2xpY2siLHRoaXMubWFuYWdlRXZlbnRzKSx0aGlzLmxpc3RlblRvKHRoaXMuZy52aXMsImNoYW5nZTpsYWJlbE5hbWUgY2hhbmdlOmxhYmVsSWQgY2hhbmdlOmxhYmVsUGFydGl0aW9uIGNoYW5nZTpsYWJlbENoZWNrYm94Iix0aGlzLnJlbmRlciksdGhpcy5saXN0ZW5Ubyh0aGlzLmcuem9vbWVyLCJjaGFuZ2U6bGFiZWxJZExlbmd0aCBjaGFuZ2U6bGFiZWxOYW1lTGVuZ3RoIGNoYW5nZTpsYWJlbFBhcnRMZW5ndGggY2hhbmdlOmxhYmVsQ2hlY2tMZW5ndGgiLHRoaXMucmVuZGVyKSx0aGlzLmxpc3RlblRvKHRoaXMuZy56b29tZXIsImNoYW5nZTpsYWJlbEZvbnRTaXplIGNoYW5nZTpsYWJlbExpbmVIZWlnaHQgY2hhbmdlOmxhYmVsV2lkdGggY2hhbmdlOnJvd0hlaWdodCIsdGhpcy5yZW5kZXIpfSxyZW5kZXI6ZnVuY3Rpb24oKXtpZihpLnJlbW92ZUFsbENoaWxkcyh0aGlzLmVsKSx0aGlzLmVsLnN0eWxlLndpZHRoPXRoaXMuZy56b29tZXIuZ2V0TGFiZWxXaWR0aCgpKyJweCIsdGhpcy5lbC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwiYmlvanNfbXNhX2xhYmVscyIpLHRoaXMuZy52aXMuZ2V0KCJsYWJlbENoZWNrYm94Iikpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCJjaGVja2JveCIpLHQudmFsdWU9dGhpcy5tb2RlbC5nZXQoImlkIiksdC5uYW1lPSJzZXEiLHQuc3R5bGUud2lkdGg9dGhpcy5nLnpvb21lci5nZXQoImxhYmVsQ2hlY2tMZW5ndGgiKSsicHgiLHRoaXMuZWwuYXBwZW5kQ2hpbGQodCl9aWYodGhpcy5nLnZpcy5nZXQoImxhYmVsSWQiKSl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpLG49dGhpcy5tb2RlbC5nZXQoImlkIik7aXNOYU4obil8fG4rKyxlLnRleHRDb250ZW50PW4sZS5zdHlsZS53aWR0aD10aGlzLmcuem9vbWVyLmdldCgibGFiZWxJZExlbmd0aCIpKyJweCIsZS5zdHlsZS5kaXNwbGF5PSJpbmxpbmUtYmxvY2siLHRoaXMuZWwuYXBwZW5kQ2hpbGQoZSl9aWYodGhpcy5nLnZpcy5nZXQoImxhYmVsUGFydGl0aW9uIikpe3ZhciByPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTtyLnN0eWxlLndpZHRoPXRoaXMuZy56b29tZXIuZ2V0KCJsYWJlbFBhcnRMZW5ndGgiKSsicHgiLHIudGV4dENvbnRlbnQ9dGhpcy5tb2RlbC5nZXQoInBhcnRpdGlvbiIpLHIuc3R5bGUuZGlzcGxheT0iaW5saW5lLWJsb2NrIix0aGlzLmVsLmFwcGVuZENoaWxkKGUpLHRoaXMuZWwuYXBwZW5kQ2hpbGQocil9aWYodGhpcy5nLnZpcy5nZXQoImxhYmVsTmFtZSIpKXt2YXIgbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7by50ZXh0Q29udGVudD10aGlzLm1vZGVsLmdldCgibmFtZSIpLHRoaXMubW9kZWwuZ2V0KCJyZWYiKSYmdGhpcy5nLmNvbmZpZy5nZXQoImhhc1JlZiIpJiYoby5zdHlsZS5mb250V2VpZ2h0PSJib2xkIiksby5zdHlsZS53aWR0aD10aGlzLmcuem9vbWVyLmdldCgibGFiZWxOYW1lTGVuZ3RoIikrInB4Iix0aGlzLmVsLmFwcGVuZENoaWxkKG8pfXJldHVybiB0aGlzLmVsLnN0eWxlLm92ZXJmbG93PXNjcm9sbCx0aGlzLmVsLnN0eWxlLmZvbnRTaXplPXRoaXMuZy56b29tZXIuZ2V0KCJsYWJlbEZvbnRzaXplIikrInB4Iix0aGlzfSxfb25jbGljazpmdW5jdGlvbih0KXt2YXIgZT10aGlzLm1vZGVsLmdldCgiaWQiKTtyZXR1cm4gdGhpcy5nLnRyaWdnZXIoInJvdzpjbGljayIse3NlcUlkOmUsZXZ0OnR9KX0sX29ubW91c2VpbjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLm1vZGVsLmdldCgiaWQiKTtyZXR1cm4gdGhpcy5nLnRyaWdnZXIoInJvdzptb3VzZW91dCIse3NlcUlkOmUsZXZ0OnR9KX0sX29ubW91c2VvdXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5tb2RlbC5nZXQoImlkIik7cmV0dXJuIHRoaXMuZy50cmlnZ2VyKCJyb3c6bW91c2VvdXQiLHtzZXFJZDplLGV2dDp0fSl9fSk7ZVsiZGVmYXVsdCJdPW99LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6eyJkZWZhdWx0Ijp0fX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIGk9bigxMCksbz1uKDYpLHM9cihvKSx1PW4oMyksYT1uKDIpLGw9big3KSxjPWEuZXh0ZW5kKHtjbGFzc05hbWU6ImJpb2pzX21zYV9tZXRhdmlldyIsaW5pdGlhbGl6ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nPXQuZyx0aGlzLmxpc3RlblRvKHRoaXMuZy52aXMsImNoYW5nZTptZXRhY2VsbCIsdGhpcy5yZW5kZXIpLHRoaXMubGlzdGVuVG8odGhpcy5nLnpvb21lciwiY2hhbmdlOm1ldGFXaWR0aCIsdGhpcy5yZW5kZXIpfSxldmVudHM6e2NsaWNrOiJfb25jbGljayIsbW91c2VpbjoiX29ubW91c2VpbiIsbW91c2VvdXQ6Il9vbm1vdXNlb3V0In0scmVuZGVyOmZ1bmN0aW9uKCl7bC5yZW1vdmVBbGxDaGlsZHModGhpcy5lbCksdGhpcy5lbC5zdHlsZS5kaXNwbGF5PSJpbmxpbmUtYmxvY2siO3ZhciB0PXRoaXMuZy56b29tZXIuZ2V0TWV0YVdpZHRoKCk7aWYodGhpcy5lbC5zdHlsZS53aWR0aD10LTEwLHRoaXMuZWwuc3R5bGUucGFkZGluZ1JpZ2h0PTUsdGhpcy5lbC5zdHlsZS5wYWRkaW5nTGVmdD01LHRoaXMuZWwuc3R5bGUuZm9udFNpemU9dGhpcy5nLnpvb21lci5nZXQoImxhYmVsRm9udHNpemUiKS0yKyJweCIsdGhpcy5nLnZpcy5nZXQoIm1ldGFHYXBzIikpe3ZhciBlPXRoaXMubW9kZWwuZ2V0KCJzZXEiKSxuPSgwLHUucmVkdWNlKShlLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIi0iPT09ZT8rK3Q6dm9pZCAwOwp9LDApO249KDEwMCpuL2UubGVuZ3RoKS50b0ZpeGVkKDApKyIlIjt2YXIgcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7ci50ZXh0Q29udGVudD1uLHIuc3R5bGUuZGlzcGxheT0iaW5saW5lLWJsb2NrIixyLnN0eWxlLndpZHRoPTM1LHRoaXMuZWwuYXBwZW5kQ2hpbGQocil9aWYodGhpcy5nLnZpcy5nZXQoIm1ldGFJZGVudGl0eSIpKXt2YXIgbz10aGlzLmcuc3RhdHMuaWRlbnRpdHkoKVt0aGlzLm1vZGVsLmlkXSxhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTt0aGlzLm1vZGVsLmdldCgicmVmIikmJnRoaXMuZy5jb25maWcuZ2V0KCJoYXNSZWYiKT9hLnRleHRDb250ZW50PSJyZWYuIjoidW5kZWZpbmVkIiE9dHlwZW9mIG8mJm51bGwhPT1vJiYoYS50ZXh0Q29udGVudD1vLnRvRml4ZWQoMikpLGEuc3R5bGUuZGlzcGxheT0iaW5saW5lLWJsb2NrIixhLnN0eWxlLndpZHRoPTQwLHRoaXMuZWwuYXBwZW5kQ2hpbGQoYSl9aWYodGhpcy5nLnZpcy5nZXQoIm1ldGFMaW5rcyIpJiZ0aGlzLm1vZGVsLmF0dHJpYnV0ZXMuaWRzKXt2YXIgYz1pLnNlcXMuYnVpbGRMaW5rcyh0aGlzLm1vZGVsLmF0dHJpYnV0ZXMuaWRzKTtpZihPYmplY3Qua2V5cyhjKS5sZW5ndGg+MCl7dmFyIGY9bmV3IHNbImRlZmF1bHQiXSh7bmFtZToi4oaXIn0pO2MuZm9yRWFjaChmdW5jdGlvbih0LGUpe3JldHVybiBmLmFkZE5vZGUoZSxmdW5jdGlvbihlKXtyZXR1cm4gd2luZG93Lm9wZW4odCl9KX0pO3ZhciBoPWYuYnVpbGRET00oKTtyZXR1cm4gaC5zdHlsZS5jdXJzb3I9InBvaW50ZXIiLHRoaXMuZWwuYXBwZW5kQ2hpbGQoaCl9fX0sX29uY2xpY2s6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZy50cmlnZ2VyKCJtZXRhOmNsaWNrIix7c2VxSWQ6dGhpcy5tb2RlbC5nZXQoImlkIix7ZXZ0OnR9KX0pfSxfb25tb3VzZWluOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmcudHJpZ2dlcigibWV0YTptb3VzZWluIix7c2VxSWQ6dGhpcy5tb2RlbC5nZXQoImlkIix7ZXZ0OnR9KX0pfSxfb25tb3VzZW91dDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nLnRyaWdnZXIoIm1ldGE6bW91c2VvdXQiLHtzZXFJZDp0aGlzLm1vZGVsLmdldCgiaWQiLHtldnQ6dH0pfSl9fSk7ZVsiZGVmYXVsdCJdPWN9LGZ1bmN0aW9uKHQsZSl7KGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0IjsidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz90LmV4cG9ydHM9d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZT90LmV4cG9ydHM9ZToidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/dC5leHBvcnRzPXNlbGY6dC5leHBvcnRzPXt9fSkuY2FsbChlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCxlLG4pe2lmKCF1KGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIml0ZXJhdG9yIG11c3QgYmUgYSBmdW5jdGlvbiIpO2FyZ3VtZW50cy5sZW5ndGg8MyYmKG49dGhpcyksIltvYmplY3QgQXJyYXldIj09PWEuY2FsbCh0KT9pKHQsZSxuKToic3RyaW5nIj09dHlwZW9mIHQ/byh0LGUsbik6cyh0LGUsbil9ZnVuY3Rpb24gaSh0LGUsbil7Zm9yKHZhciByPTAsaT10Lmxlbmd0aDtyPGk7cisrKWwuY2FsbCh0LHIpJiZlLmNhbGwobix0W3JdLHIsdCl9ZnVuY3Rpb24gbyh0LGUsbil7Zm9yKHZhciByPTAsaT10Lmxlbmd0aDtyPGk7cisrKWUuY2FsbChuLHQuY2hhckF0KHIpLHIsdCl9ZnVuY3Rpb24gcyh0LGUsbil7Zm9yKHZhciByIGluIHQpbC5jYWxsKHQscikmJmUuY2FsbChuLHRbcl0scix0KX12YXIgdT1uKDUyKTt0LmV4cG9ydHM9cjt2YXIgYT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLGw9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbih0KXtyZXR1cm4gdC5yZXBsYWNlKC9eXHMqfFxzKiQvZywiIil9ZT10LmV4cG9ydHM9bixlLmxlZnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvXlxzKi8sIiIpfSxlLnJpZ2h0PWZ1bmN0aW9uKHQpe3JldHVybiB0LnJlcGxhY2UoL1xzKiQvLCIiKX19LGZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9bigxNDkpLGk9bigxNDgpLG89ZnVuY3Rpb24odCl7cmV0dXJuIltvYmplY3QgQXJyYXldIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX07dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybnt9O3ZhciBlPXt9O3JldHVybiBpKHIodCkuc3BsaXQoIlxuIiksZnVuY3Rpb24odCl7dmFyIG49dC5pbmRleE9mKCI6IiksaT1yKHQuc2xpY2UoMCxuKSkudG9Mb3dlckNhc2UoKSxzPXIodC5zbGljZShuKzEpKTsidW5kZWZpbmVkIj09dHlwZW9mIGVbaV0/ZVtpXT1zOm8oZVtpXSk/ZVtpXS5wdXNoKHMpOmVbaV09W2VbaV0sc119KSxlfX0sZnVuY3Rpb24odCxlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbigpe2Zvcih2YXIgdD17fSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7dmFyIG49YXJndW1lbnRzW2VdO2Zvcih2YXIgaSBpbiBuKXIuY2FsbChuLGkpJiYodFtpXT1uW2ldKX1yZXR1cm4gdH10LmV4cG9ydHM9bjt2YXIgcj1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5fSxmdW5jdGlvbih0LGUsbil7ZT10LmV4cG9ydHM9big4OSkoKSxlLnB1c2goW3QuaWQsIi5iaW9qc19tc2Ffc3RhZ2V7Y3Vyc29yOmRlZmF1bHQ7bGluZS1oZWlnaHQ6bm9ybWFsO2ZvbnQtZmFtaWx5OkhlbHZldGljYX0uYmlvanNfbXNhX3NlcWJsb2Nre2N1cnNvcjptb3ZlfS5iaW9qc19tc2FfbGF5ZXJ7ZGlzcGxheTpibG9jazt3aGl0ZS1zcGFjZTpub3dyYXB9LmJpb2pzX21zYV9sYWJlbHN7Y29sb3I6IzAwMDtkaXNwbGF5OmlubGluZS1ibG9jaztjdXJzb3I6cG9pbnRlcjt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6Y2xpcH0uYmlvanNfbXNhX2hlYWRlciwuYmlvanNfbXNhX2xhYmVsc3t3aGl0ZS1zcGFjZTpub3dyYXA7dGV4dC1hbGlnbjpsZWZ0fS5iaW9qc19tc2FfbGFiZWxyb3c6YmVmb3Jle2NvbnRlbnQ6Jyc7ZGlzcGxheTppbmxpbmUtYmxvY2s7d2lkdGg6MDtoZWlnaHQ6MTAwJTt2ZXJ0aWNhbC1hbGlnbjptaWRkbGV9LmJpb2pzX21zYV9sYWJlbHJvd3toZWlnaHQ6MTAwJX0uYmlvanNfbXNhX2xhYmVsYmxvY2s6Oi13ZWJraXQtc2Nyb2xsYmFyLC5iaW9qc19tc2FfcmhlYWRlcjo6LXdlYmtpdC1zY3JvbGxiYXJ7Ly86bm9uZTt3aWR0aDo3cHg7aGVpZ2h0OjdweH0uYmlvanNfbXNhX2xhYmVsYmxvY2s6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iLC5iaW9qc19tc2FfcmhlYWRlcjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWJ7Ym9yZGVyLXJhZGl1czo0cHg7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC41KTtib3gtc2hhZG93OjAgMCAxcHggaHNsYSgwLDAlLDEwMCUsLjUpfS5iaW9qc19tc2FfbWFya2Vye2NvbG9yOiM5OTk7d2hpdGUtc3BhY2U6bm93cmFwfS5iaW9qc19tc2FfbWFya2VyIC5tc2EtY29sLWhlYWRlcntjdXJzb3I6cG9pbnRlcjt0ZXh0LWFsaWduOmNlbnRlcn0uYmlvanNfbXNhX21hcmtlciAubXNhLWNvbC1oZWFkZXI6aG92ZXJ7Y29sb3I6cmVkfS5zbWVudWJhciAuc21lbnViYXJfYWxpbmt7YmFja2dyb3VuZDojMzQ5OGRiO2JhY2tncm91bmQtaW1hZ2U6LXdlYmtpdC1saW5lYXItZ3JhZGllbnQodG9wLCMzNDk4ZGIsIzI5ODBiOSk7YmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCMzNDk4ZGIsIzI5ODBiOSk7Ym9yZGVyLXJhZGl1czoyOHB4O2ZvbnQtZmFtaWx5OkFyaWFsO2NvbG9yOiNmZmY7cGFkZGluZzozcHggMTBweDttYXJnaW4tbGVmdDoxMHB4O3RleHQtZGVjb3JhdGlvbjpub25lfS5zbWVudWJhcntkaXNwbGF5OmlubGluZS1ibG9ja30uc21lbnViYXIgLnNtZW51YmFyX2FsaW5rOmhvdmVye2N1cnNvcjpwb2ludGVyfS5zbWVudS1kcm9wZG93bntwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4Ojk5OTk5OTk7ZGlzcGxheTpub25lfS5zbWVudS1kcm9wZG93biAuc21lbnUtZHJvcGRvd24tbWVudSwuc21lbnUtZHJvcGRvd24gLnNtZW51LWRyb3Bkb3duLXBhbmVse21pbi13aWR0aDoxNjBweDttYXgtd2lkdGg6MzYwcHg7bGlzdC1zdHlsZTpub25lO2JhY2tncm91bmQ6I2ZmZjtib3JkZXI6MXB4IHNvbGlkICNkZGQ7Ym9yZGVyOjFweCBzb2xpZCByZ2JhKDAsMCwwLC4yKTtib3JkZXItcmFkaXVzOjZweDtib3gtc2hhZG93OjAgNXB4IDEwcHggcmdiYSgwLDAsMCwuMik7b3ZlcmZsb3c6dmlzaWJsZTtwYWRkaW5nOjRweCAwO21hcmdpbjowfS5zbWVudS1kcm9wZG93biAuc21lbnUtZHJvcGRvd24tcGFuZWx7cGFkZGluZzoxMHB4fS5zbWVudS1kcm9wZG93bi5zbWVudS1kcm9wZG93bi1zY3JvbGwgLnNtZW51LWRyb3Bkb3duLW1lbnUsLnNtZW51LWRyb3Bkb3duLnNtZW51LWRyb3Bkb3duLXNjcm9sbCAuc21lbnUtZHJvcGRvd24tcGFuZWx7bWF4LWhlaWdodDozNThweDtvdmVyZmxvdzphdXRvfS5zbWVudS1kcm9wZG93biAuc21lbnUtZHJvcGRvd24tbWVudSBMSXtsaXN0LXN0eWxlOm5vbmU7cGFkZGluZzowO21hcmdpbjowO2xpbmUtaGVpZ2h0OjE4cHh9LnNtZW51LWRyb3Bkb3duIC5zbWVudS1kcm9wZG93bi1tZW51IExBQkVMLC5zbWVudS1kcm9wZG93biAuc21lbnUtZHJvcGRvd24tbWVudSBMSXtkaXNwbGF5OmJsb2NrO2NvbG9yOiM1NTU7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bGluZS1oZWlnaHQ6MThweDtwYWRkaW5nOjNweCAxNXB4O3doaXRlLXNwYWNlOm5vd3JhcH0uc21lbnUtZHJvcGRvd24gLnNtZW51LWRyb3Bkb3duLW1lbnUgTEFCRUw6aG92ZXIsLnNtZW51LWRyb3Bkb3duIC5zbWVudS1kcm9wZG93bi1tZW51IExJOmhvdmVye2JhY2tncm91bmQtY29sb3I6IzA4Yztjb2xvcjojZmZmO2N1cnNvcjpwb2ludGVyfS5zbWVudS1kcm9wZG93biAuc21lbnUtZHJvcGRvd24tbWVudSAuc21lbnUtZHJvcGRvd24tZGl2aWRlcntmb250LXNpemU6MXB4O2JvcmRlci10b3A6MXB4IHNvbGlkICNlNWU1ZTU7cGFkZGluZzowO21hcmdpbjo1cHggMH0uYmlvanNfbXNhX2Rpdntwb3NpdGlvbjpyZWxhdGl2ZX0uYmlvanNfbXNhX3NjYWxle3Bvc2l0aW9uOmFic29sdXRlO2JvdHRvbTowO3JpZ2h0OjA7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JveC1zaGFkb3c6MCAycHggM3B4ICM5OTk7Ym9yZGVyLXJhZGl1czozcHg7bWFyZ2luOjVweCAwIDAgYXV0bztwYWRkaW5nOjVweDt0ZXh0LWFsaWduOmNlbnRlcn0uYmlvanNfbXNhX3NjYWxlIC5tc2EtYnRuZ3JvdXB7bWFyZ2luOjVweCBhdXRvIDB9LmJpb2pzX21zYV9zY2FsZSBbdHlwZT1yYW5nZV17Y3Vyc29yOnBvaW50ZXJ9LmJpb2pzX21zYV9zY2FsZSAubXNhLWJ0bi1jbG9zZXt0ZXh0LWFsaWduOnJpZ2h0O2ZvbnQtc2l6ZTouOGVtO3BhZGRpbmc6MnB4fS5iaW9qc19tc2Ffc2NhbGUgLm1zYS1idG4tb3BlbntiYWNrZ3JvdW5kLWNvbG9yOiNmZmZ9LmJpb2pzX21zYV9zY2FsZSAubXNhLWhpZGV7ZGlzcGxheTpub25lfS5tc2EtYnRue2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZToxLjFlbTtkaXNwbGF5OmlubGluZS1ibG9jaztwYWRkaW5nOjJweCA4cHg7bWFyZ2luLWJvdHRvbTowO2JvcmRlcjoxcHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXJhZGl1czo0cHg7Ym94LXNpemluZzpib3JkZXItYm94fS5tc2EtYnRuOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2RkZH0iLCIiXSl9LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiByKHQsZSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl0saT1kW3IuaWRdO2lmKGkpe2kucmVmcysrO2Zvcih2YXIgbz0wO288aS5wYXJ0cy5sZW5ndGg7bysrKWkucGFydHNbb10oci5wYXJ0c1tvXSk7Zm9yKDtvPHIucGFydHMubGVuZ3RoO28rKylpLnBhcnRzLnB1c2gobChyLnBhcnRzW29dLGUpKX1lbHNle2Zvcih2YXIgcz1bXSxvPTA7bzxyLnBhcnRzLmxlbmd0aDtvKyspcy5wdXNoKGwoci5wYXJ0c1tvXSxlKSk7ZFtyLmlkXT17aWQ6ci5pZCxyZWZzOjEscGFydHM6c319fX1mdW5jdGlvbiBpKHQpe2Zvcih2YXIgZT1bXSxuPXt9LHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIGk9dFtyXSxvPWlbMF0scz1pWzFdLHU9aVsyXSxhPWlbM10sbD17Y3NzOnMsbWVkaWE6dSxzb3VyY2VNYXA6YX07bltvXT9uW29dLnBhcnRzLnB1c2gobCk6ZS5wdXNoKG5bb109e2lkOm8scGFydHM6W2xdfSl9cmV0dXJuIGV9ZnVuY3Rpb24gbyh0LGUpe3ZhciBuPXYoKSxyPV9bXy5sZW5ndGgtMV07aWYoInRvcCI9PT10Lmluc2VydEF0KXI/ci5uZXh0U2libGluZz9uLmluc2VydEJlZm9yZShlLHIubmV4dFNpYmxpbmcpOm4uYXBwZW5kQ2hpbGQoZSk6bi5pbnNlcnRCZWZvcmUoZSxuLmZpcnN0Q2hpbGQpLF8ucHVzaChlKTtlbHNle2lmKCJib3R0b20iIT09dC5pbnNlcnRBdCl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciAnaW5zZXJ0QXQnLiBNdXN0IGJlICd0b3AnIG9yICdib3R0b20nLiIpO24uYXBwZW5kQ2hpbGQoZSl9fWZ1bmN0aW9uIHModCl7dC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpO3ZhciBlPV8uaW5kZXhPZih0KTtlPj0wJiZfLnNwbGljZShlLDEpfWZ1bmN0aW9uIHUodCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtyZXR1cm4gZS50eXBlPSJ0ZXh0L2NzcyIsbyh0LGUpLGV9ZnVuY3Rpb24gYSh0KXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIik7cmV0dXJuIGUucmVsPSJzdHlsZXNoZWV0IixvKHQsZSksZX1mdW5jdGlvbiBsKHQsZSl7dmFyIG4scixpO2lmKGUuc2luZ2xldG9uKXt2YXIgbz15Kys7bj1tfHwobT11KGUpKSxyPWMuYmluZChudWxsLG4sbywhMSksaT1jLmJpbmQobnVsbCxuLG8sITApfWVsc2UgdC5zb3VyY2VNYXAmJiJmdW5jdGlvbiI9PXR5cGVvZiBVUkwmJiJmdW5jdGlvbiI9PXR5cGVvZiBVUkwuY3JlYXRlT2JqZWN0VVJMJiYiZnVuY3Rpb24iPT10eXBlb2YgVVJMLnJldm9rZU9iamVjdFVSTCYmImZ1bmN0aW9uIj09dHlwZW9mIEJsb2ImJiJmdW5jdGlvbiI9PXR5cGVvZiBidG9hPyhuPWEoZSkscj1oLmJpbmQobnVsbCxuKSxpPWZ1bmN0aW9uKCl7cyhuKSxuLmhyZWYmJlVSTC5yZXZva2VPYmplY3RVUkwobi5ocmVmKX0pOihuPXUoZSkscj1mLmJpbmQobnVsbCxuKSxpPWZ1bmN0aW9uKCl7cyhuKX0pO3JldHVybiByKHQpLGZ1bmN0aW9uKGUpe2lmKGUpe2lmKGUuY3NzPT09dC5jc3MmJmUubWVkaWE9PT10Lm1lZGlhJiZlLnNvdXJjZU1hcD09PXQuc291cmNlTWFwKXJldHVybjtyKHQ9ZSl9ZWxzZSBpKCl9fWZ1bmN0aW9uIGModCxlLG4scil7dmFyIGk9bj8iIjpyLmNzcztpZih0LnN0eWxlU2hlZXQpdC5zdHlsZVNoZWV0LmNzc1RleHQ9YihlLGkpO2Vsc2V7dmFyIG89ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaSkscz10LmNoaWxkTm9kZXM7c1tlXSYmdC5yZW1vdmVDaGlsZChzW2VdKSxzLmxlbmd0aD90Lmluc2VydEJlZm9yZShvLHNbZV0pOnQuYXBwZW5kQ2hpbGQobyl9fWZ1bmN0aW9uIGYodCxlKXt2YXIgbj1lLmNzcyxyPWUubWVkaWE7aWYociYmdC5zZXRBdHRyaWJ1dGUoIm1lZGlhIixyKSx0LnN0eWxlU2hlZXQpdC5zdHlsZVNoZWV0LmNzc1RleHQ9bjtlbHNle2Zvcig7dC5maXJzdENoaWxkOyl0LnJlbW92ZUNoaWxkKHQuZmlyc3RDaGlsZCk7dC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShuKSl9fWZ1bmN0aW9uIGgodCxlKXt2YXIgbj1lLmNzcyxyPWUuc291cmNlTWFwO3ImJihuKz0iXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LCIrYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkocikpKSkrIiAqLyIpO3ZhciBpPW5ldyBCbG9iKFtuXSx7dHlwZToidGV4dC9jc3MifSksbz10LmhyZWY7dC5ocmVmPVVSTC5jcmVhdGVPYmplY3RVUkwoaSksbyYmVVJMLnJldm9rZU9iamVjdFVSTChvKX12YXIgZD17fSxwPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiBmdW5jdGlvbigpe3JldHVybiJ1bmRlZmluZWQiPT10eXBlb2YgZSYmKGU9dC5hcHBseSh0aGlzLGFyZ3VtZW50cykpLGV9fSxnPXAoZnVuY3Rpb24oKXtyZXR1cm4vbXNpZSBbNi05XVxiLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpfSksdj1wKGZ1bmN0aW9uKCl7cmV0dXJuIGRvY3VtZW50LmhlYWR8fGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF19KSxtPW51bGwseT0wLF89W107dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7ZT1lfHx7fSwidW5kZWZpbmVkIj09dHlwZW9mIGUuc2luZ2xldG9uJiYoZS5zaW5nbGV0b249ZygpKSwidW5kZWZpbmVkIj09dHlwZW9mIGUuaW5zZXJ0QXQmJihlLmluc2VydEF0PSJib3R0b20iKTt2YXIgbj1pKHQpO3JldHVybiByKG4sZSksZnVuY3Rpb24odCl7Zm9yKHZhciBvPVtdLHM9MDtzPG4ubGVuZ3RoO3MrKyl7dmFyIHU9bltzXSxhPWRbdS5pZF07YS5yZWZzLS0sby5wdXNoKGEpfXQmJnIoaSh0KSxlKTtmb3IodmFyIHM9MDtzPG8ubGVuZ3RoO3MrKyl7dmFyIGE9b1tzXTtpZigwPT09YS5yZWZzKXtmb3IodmFyIGw9MDtsPGEucGFydHMubGVuZ3RoO2wrKylhLnBhcnRzW2xdKCk7ZGVsZXRlIGRbYS5pZF19fX19O3ZhciBiPWZ1bmN0aW9uKCl7dmFyIHQ9W107cmV0dXJuIGZ1bmN0aW9uKGUsbil7cmV0dXJuIHRbZV09bix0LmZpbHRlcihCb29sZWFuKS5qb2luKCJcbiIpfX0oKX0sZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oMTUyKTsic3RyaW5nIj09dHlwZW9mIHImJihyPVtbdC5pZCxyLCIiXV0pLG4oMTUzKShyLHt9KSxyLmxvY2FscyYmKHQuZXhwb3J0cz1yLmxvY2Fscyl9LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiByKHQpe3JldHVybiBuKGkodCkpfWZ1bmN0aW9uIGkodCl7cmV0dXJuIG9bdF18fGZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgZmluZCBtb2R1bGUgJyIrdCsiJy4iKX0oKX12YXIgbz17Ii4vU3RhZ2VTY2FsZSI6MjUsIi4vU3RhZ2VTY2FsZS5qcyI6MjUsIi4vY29sb3JzY2hlbWUiOjI2LCIuL2NvbG9yc2NoZW1lLmpzIjoyNiwiLi9jb2x1bW5zIjoyNywiLi9jb2x1bW5zLmpzIjoyNywiLi9jb25maWciOjI4LCIuL2NvbmZpZy5qcyI6MjgsIi4vcGFja2FnZSI6MjksIi4vcGFja2FnZS5qcyI6MjksIi4vc2VsZWN0aW9uL1NlbGVjdGlvbiI6OCwiLi9zZWxlY3Rpb24vU2VsZWN0aW9uLmpzIjo4LCIuL3NlbGVjdGlvbi9TZWxlY3Rpb25Db2wiOjksIi4vc2VsZWN0aW9uL1NlbGVjdGlvbkNvbC5qcyI6OSwiLi9zZWxlY3Rpb24vaW5kZXgiOjQ5LCIuL3NlbGVjdGlvbi9pbmRleC5qcyI6NDksIi4vdXNlciI6MzAsIi4vdXNlci5qcyI6MzAsIi4vdmlzT3JkZXJpbmciOjMxLCIuL3Zpc09yZGVyaW5nLmpzIjozMSwiLi92aXNpYmlsaXR5IjozMiwiLi92aXNpYmlsaXR5LmpzIjozMiwiLi96b29tZXIiOjMzLCIuL3pvb21lci5qcyI6MzN9O3Iua2V5cz1mdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyhvKX0sci5yZXNvbHZlPWksdC5leHBvcnRzPXIsci5pZD0xNTV9LGZ1bmN0aW9uKHQsZSxuKXtmdW5jdGlvbiByKHQpe3JldHVybiBuKGkodCkpfWZ1bmN0aW9uIGkodCl7cmV0dXJuIG9bdF18fGZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgZmluZCBtb2R1bGUgJyIrdCsiJy4iKX0oKX12YXIgbz17Ii4vYm1hdGgiOjE1LCIuL2JtYXRoLmpzIjoxNSwiLi9leHBvcnRlciI6MTYsIi4vZXhwb3J0ZXIuanMiOjE2LCIuL2ZpbGUiOjE3LCIuL2ZpbGUuanMiOjE3LCIuL2luZGV4IjozNywiLi9pbmRleC5qcyI6MzcsIi4vbG9hZGVyIjoxOCwiLi9sb2FkZXIuanMiOjE4LCIuL3Byb3h5IjoxOSwiLi9wcm94eS5qcyI6MTksIi4vcmVjb2duaXplIjozOCwiLi9yZWNvZ25pemUuanMiOjM4LCIuL3NlcWdlbiI6MzksIi4vc2VxZ2VuLmpzIjozOSwiLi9zdmciOjEyLCIuL3N2Zy5qcyI6MTIsIi4vdHJlZSI6NDAsIi4vdHJlZS5qcyI6NDB9O3Iua2V5cz1mdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyhvKX0sci5yZXNvbHZlPWksdC5leHBvcnRzPXIsci5pZD0xNTZ9XSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPW1zYS5qcy5tYXA="></script>
<script src="data:application/x-javascript;base64,cmVxdWlyZT0oZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyCgp2YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307Cgpwcm9jZXNzLm5leHRUaWNrID0gKGZ1bmN0aW9uICgpIHsKICAgIHZhciBjYW5TZXRJbW1lZGlhdGUgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJwogICAgJiYgd2luZG93LnNldEltbWVkaWF0ZTsKICAgIHZhciBjYW5NdXRhdGlvbk9ic2VydmVyID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcKICAgICYmIHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyOwogICAgdmFyIGNhblBvc3QgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJwogICAgJiYgd2luZG93LnBvc3RNZXNzYWdlICYmIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyCiAgICA7CgogICAgaWYgKGNhblNldEltbWVkaWF0ZSkgewogICAgICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gd2luZG93LnNldEltbWVkaWF0ZShmKSB9OwogICAgfQoKICAgIHZhciBxdWV1ZSA9IFtdOwoKICAgIGlmIChjYW5NdXRhdGlvbk9ic2VydmVyKSB7CiAgICAgICAgdmFyIGhpZGRlbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIHZhciBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHF1ZXVlTGlzdCA9IHF1ZXVlLnNsaWNlKCk7CiAgICAgICAgICAgIHF1ZXVlLmxlbmd0aCA9IDA7CiAgICAgICAgICAgIHF1ZXVlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChmbikgewogICAgICAgICAgICAgICAgZm4oKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CgogICAgICAgIG9ic2VydmVyLm9ic2VydmUoaGlkZGVuRGl2LCB7IGF0dHJpYnV0ZXM6IHRydWUgfSk7CgogICAgICAgIHJldHVybiBmdW5jdGlvbiBuZXh0VGljayhmbikgewogICAgICAgICAgICBpZiAoIXF1ZXVlLmxlbmd0aCkgewogICAgICAgICAgICAgICAgaGlkZGVuRGl2LnNldEF0dHJpYnV0ZSgneWVzJywgJ25vJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcXVldWUucHVzaChmbik7CiAgICAgICAgfTsKICAgIH0KCiAgICBpZiAoY2FuUG9zdCkgewogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24gKGV2KSB7CiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBldi5zb3VyY2U7CiAgICAgICAgICAgIGlmICgoc291cmNlID09PSB3aW5kb3cgfHwgc291cmNlID09PSBudWxsKSAmJiBldi5kYXRhID09PSAncHJvY2Vzcy10aWNrJykgewogICAgICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICBpZiAocXVldWUubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgIHZhciBmbiA9IHF1ZXVlLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICAgICAgZm4oKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sIHRydWUpOwoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gbmV4dFRpY2soZm4pIHsKICAgICAgICAgICAgcXVldWUucHVzaChmbik7CiAgICAgICAgICAgIHdpbmRvdy5wb3N0TWVzc2FnZSgncHJvY2Vzcy10aWNrJywgJyonKTsKICAgICAgICB9OwogICAgfQoKICAgIHJldHVybiBmdW5jdGlvbiBuZXh0VGljayhmbikgewogICAgICAgIHNldFRpbWVvdXQoZm4sIDApOwogICAgfTsKfSkoKTsKCnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7CnByb2Nlc3MuYnJvd3NlciA9IHRydWU7CnByb2Nlc3MuZW52ID0ge307CnByb2Nlc3MuYXJndiA9IFtdOwoKZnVuY3Rpb24gbm9vcCgpIHt9Cgpwcm9jZXNzLm9uID0gbm9vcDsKcHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7CnByb2Nlc3Mub25jZSA9IG5vb3A7CnByb2Nlc3Mub2ZmID0gbm9vcDsKcHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7CnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDsKcHJvY2Vzcy5lbWl0ID0gbm9vcDsKCnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7Cn07CgovLyBUT0RPKHNodHlsbWFuKQpwcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9Owpwcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikgewogICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTsKfTsKCn0se31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgR2VuZXJpY1JlYWRlcjsKCnZhciB4aHIgPSByZXF1aXJlKCdyZXF1ZXN0Jyk7CnZhciB2b3cgPSByZXF1aXJlKCd2b3cnKTsKCm1vZHVsZS5leHBvcnRzID0gR2VuZXJpY1JlYWRlciA9IChmdW5jdGlvbigpIHsKICBmdW5jdGlvbiBHZW5lcmljUmVhZGVyKCkge30KCiAgLy8gcmV0dXJucyBhIHByb21pc2UgaWYgY2FsbGJhY2sgaXMgdW5kZWZpbmVkCiAgR2VuZXJpY1JlYWRlci5yZWFkID0gZnVuY3Rpb24odXJsLCBjYWxsYmFjaykgewogICAgdmFyIG9ucmV0OwogICAgb25yZXQgPSAoZnVuY3Rpb24oX3RoaXMpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uKGVyciwgcmVzcG9uc2UsIHRleHQpIHsKICAgICAgICByZXR1cm4gR2VuZXJpY1JlYWRlci5fb25SZXRyaWV2YWwoZXJyLCB0ZXh0LCBjYWxsYmFjaywgX3RoaXMpOwogICAgICB9OwogICAgfSkodGhpcyk7CgogICAgaWYodHlwZW9mIGNhbGxiYWNrID09PSAidW5kZWZpbmVkIil7CiAgICAgIHZhciBwcm9tID0gdm93LmRlZmVyKCk7CiAgICAgIGNhbGxiYWNrID0gZnVuY3Rpb24oZXJyLCByZXMpewogICAgICAgIGlmKGVycil7CiAgICAgICAgICBwcm9tLnJlamVjdChlcnIpOwogICAgICAgIH1lbHNlewogICAgICAgICAgcHJvbS5yZXNvbHZlKHJlcyk7CiAgICAgICAgfQogICAgICB9OwogICAgICB4aHIodXJsLCBvbnJldCk7CiAgICAgIHJldHVybiBwcm9tLnByb21pc2UoKTsKICAgIH1lbHNlewogICAgICByZXR1cm4geGhyKHVybCwgb25yZXQpOwogICAgfQogIH07CgogIEdlbmVyaWNSZWFkZXIuX29uUmV0cmlldmFsID0gZnVuY3Rpb24oZXJyLCB0ZXh0LCBjYWxsYmFjaywgX3RoaXMpIHsKICAgIHZhciByVGV4dDsKICAgIGlmKHR5cGVvZiBlcnIgIT09ICJ1bmRlZmluZWQiKXsKICAgICAgclRleHQgPSBfdGhpcy5wYXJzZSh0ZXh0KTsKICAgIH0KICAgIHJldHVybiBjYWxsYmFjay5jYWxsKF90aGlzLCBlcnIsIHJUZXh0KTsKICB9OwoKICAvLyBwcm92aWRlIGEgY29udmVuaWVudCBzaG9ydGN1dCB0byBpbmhlcml0CiAgR2VuZXJpY1JlYWRlci5leHRlbmQgPSBmdW5jdGlvbihvYmosIHN0YXRpY3MpewogICAgcmV0dXJuIGV4dGVuZChHZW5lcmljUmVhZGVyLCBvYmosIHN0YXRpY3MpOwogIH07CiAgLy8gTWl4aW4gdXRpbGl0eQogIEdlbmVyaWNSZWFkZXIubWl4aW4gPSBmdW5jdGlvbihwcm90bykgewogICAgdmFyIGV4cG9ydHMgPSBbJ3JlYWQnXTsKICAgIGlmKHR5cGVvZiBwcm90byAhPT0gIm9iamVjdCIpewogICAgICBwcm90byA9IHByb3RvLnByb3RvdHlwZTsKICAgIH0KICAgIGV4cG9ydHMuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7CiAgICAgIHByb3RvW25hbWVdID0gR2VuZXJpY1JlYWRlcltuYW1lXTsKICAgIH0sIHRoaXMpOwogICAgcmV0dXJuIHByb3RvOwogIH07CgogIHJldHVybiBHZW5lcmljUmVhZGVyOwoKfSkoKTsKCn0seyJyZXF1ZXN0Ijo0LCJ2b3ciOjN9XSwzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChwcm9jZXNzLGdsb2JhbCl7Ci8qKgogKiBAbW9kdWxlIHZvdwogKiBAYXV0aG9yIEZpbGF0b3YgRG1pdHJ5IDxkZmlsYXRvdkB5YW5kZXgtdGVhbS5ydT4KICogQHZlcnNpb24gMC40LjExCiAqIEBsaWNlbnNlCiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBhbmQgR1BMIGxpY2Vuc2VzOgogKiAgICogaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHAKICogICAqIGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9ncGwuaHRtbAogKi8KCihmdW5jdGlvbihnbG9iYWwpIHsKCnZhciB1bmRlZiwKICAgIG5leHRUaWNrID0gKGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBmbnMgPSBbXSwKICAgICAgICAgICAgZW5xdWV1ZUZuID0gZnVuY3Rpb24oZm4pIHsKICAgICAgICAgICAgICAgIHJldHVybiBmbnMucHVzaChmbikgPT09IDE7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNhbGxGbnMgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBmbnNUb0NhbGwgPSBmbnMsIGkgPSAwLCBsZW4gPSBmbnMubGVuZ3RoOwogICAgICAgICAgICAgICAgZm5zID0gW107CiAgICAgICAgICAgICAgICB3aGlsZShpIDwgbGVuKSB7CiAgICAgICAgICAgICAgICAgICAgZm5zVG9DYWxsW2krK10oKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgaWYodHlwZW9mIHNldEltbWVkaWF0ZSA9PT0gJ2Z1bmN0aW9uJykgeyAvLyBpZTEwLCBub2RlanMgPj0gMC4xMAogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZm4pIHsKICAgICAgICAgICAgICAgIGVucXVldWVGbihmbikgJiYgc2V0SW1tZWRpYXRlKGNhbGxGbnMpOwogICAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgaWYodHlwZW9mIHByb2Nlc3MgPT09ICdvYmplY3QnICYmIHByb2Nlc3MubmV4dFRpY2spIHsgLy8gbm9kZWpzIDwgMC4xMAogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZm4pIHsKICAgICAgICAgICAgICAgIGVucXVldWVGbihmbikgJiYgcHJvY2Vzcy5uZXh0VGljayhjYWxsRm5zKTsKICAgICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIHZhciBNdXRhdGlvbk9ic2VydmVyID0gZ2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgZ2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7IC8vIG1vZGVybiBicm93c2VycwogICAgICAgIGlmKE11dGF0aW9uT2JzZXJ2ZXIpIHsKICAgICAgICAgICAgdmFyIG51bSA9IDEsCiAgICAgICAgICAgICAgICBub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpOwoKICAgICAgICAgICAgbmV3IE11dGF0aW9uT2JzZXJ2ZXIoY2FsbEZucykub2JzZXJ2ZShub2RlLCB7IGNoYXJhY3RlckRhdGEgOiB0cnVlIH0pOwoKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGZuKSB7CiAgICAgICAgICAgICAgICBlbnF1ZXVlRm4oZm4pICYmIChub2RlLmRhdGEgPSAobnVtICo9IC0xKSk7CiAgICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICBpZihnbG9iYWwucG9zdE1lc3NhZ2UpIHsKICAgICAgICAgICAgdmFyIGlzUG9zdE1lc3NhZ2VBc3luYyA9IHRydWU7CiAgICAgICAgICAgIGlmKGdsb2JhbC5hdHRhY2hFdmVudCkgewogICAgICAgICAgICAgICAgdmFyIGNoZWNrQXN5bmMgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaXNQb3N0TWVzc2FnZUFzeW5jID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdsb2JhbC5hdHRhY2hFdmVudCgnb25tZXNzYWdlJywgY2hlY2tBc3luYyk7CiAgICAgICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoJ19fY2hlY2tBc3luYycsICcqJyk7CiAgICAgICAgICAgICAgICBnbG9iYWwuZGV0YWNoRXZlbnQoJ29ubWVzc2FnZScsIGNoZWNrQXN5bmMpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZihpc1Bvc3RNZXNzYWdlQXN5bmMpIHsKICAgICAgICAgICAgICAgIHZhciBtc2cgPSAnX19wcm9taXNlJyArIE1hdGgucmFuZG9tKCkgKyAnXycgK25ldyBEYXRlLAogICAgICAgICAgICAgICAgICAgIG9uTWVzc2FnZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoZS5kYXRhID09PSBtc2cpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uICYmIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsRm5zKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyPwogICAgICAgICAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgb25NZXNzYWdlLCB0cnVlKSA6CiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsLmF0dGFjaEV2ZW50KCdvbm1lc3NhZ2UnLCBvbk1lc3NhZ2UpOwoKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihmbikgewogICAgICAgICAgICAgICAgICAgIGVucXVldWVGbihmbikgJiYgZ2xvYmFsLnBvc3RNZXNzYWdlKG1zZywgJyonKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7CiAgICAgICAgaWYoJ29ucmVhZHlzdGF0ZWNoYW5nZScgaW4gZG9jLmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpKSB7IC8vIGllNi1pZTgKICAgICAgICAgICAgdmFyIGNyZWF0ZVNjcmlwdCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7CiAgICAgICAgICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHQpOwogICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHQgPSBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgY2FsbEZucygpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIChkb2MuZG9jdW1lbnRFbGVtZW50IHx8IGRvYy5ib2R5KS5hcHBlbmRDaGlsZChzY3JpcHQpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGZuKSB7CiAgICAgICAgICAgICAgICBlbnF1ZXVlRm4oZm4pICYmIGNyZWF0ZVNjcmlwdCgpOwogICAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGZuKSB7IC8vIG9sZCBicm93c2VycwogICAgICAgICAgICBlbnF1ZXVlRm4oZm4pICYmIHNldFRpbWVvdXQoY2FsbEZucywgMCk7CiAgICAgICAgfTsKICAgIH0pKCksCiAgICB0aHJvd0V4Y2VwdGlvbiA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICBuZXh0VGljayhmdW5jdGlvbigpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9KTsKICAgIH0sCiAgICBpc0Z1bmN0aW9uID0gZnVuY3Rpb24ob2JqKSB7CiAgICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbic7CiAgICB9LAogICAgaXNPYmplY3QgPSBmdW5jdGlvbihvYmopIHsKICAgICAgICByZXR1cm4gb2JqICE9PSBudWxsICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnOwogICAgfSwKICAgIHRvU3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZywKICAgIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uKG9iaikgewogICAgICAgIHJldHVybiB0b1N0ci5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEFycmF5XSc7CiAgICB9LAogICAgZ2V0QXJyYXlLZXlzID0gZnVuY3Rpb24oYXJyKSB7CiAgICAgICAgdmFyIHJlcyA9IFtdLAogICAgICAgICAgICBpID0gMCwgbGVuID0gYXJyLmxlbmd0aDsKICAgICAgICB3aGlsZShpIDwgbGVuKSB7CiAgICAgICAgICAgIHJlcy5wdXNoKGkrKyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXM7CiAgICB9LAogICAgZ2V0T2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uKG9iaikgewogICAgICAgIHZhciByZXMgPSBbXTsKICAgICAgICBmb3IodmFyIGkgaW4gb2JqKSB7CiAgICAgICAgICAgIG9iai5oYXNPd25Qcm9wZXJ0eShpKSAmJiByZXMucHVzaChpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlczsKICAgIH0sCiAgICBkZWZpbmVDdXN0b21FcnJvclR5cGUgPSBmdW5jdGlvbihuYW1lKSB7CiAgICAgICAgdmFyIHJlcyA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHsKICAgICAgICAgICAgdGhpcy5uYW1lID0gbmFtZTsKICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKICAgICAgICB9OwoKICAgICAgICByZXMucHJvdG90eXBlID0gbmV3IEVycm9yKCk7CgogICAgICAgIHJldHVybiByZXM7CiAgICB9LAogICAgd3JhcE9uRnVsZmlsbGVkID0gZnVuY3Rpb24ob25GdWxmaWxsZWQsIGlkeCkgewogICAgICAgIHJldHVybiBmdW5jdGlvbih2YWwpIHsKICAgICAgICAgICAgb25GdWxmaWxsZWQuY2FsbCh0aGlzLCB2YWwsIGlkeCk7CiAgICAgICAgfTsKICAgIH07CgovKioKICogQGNsYXNzIERlZmVycmVkCiAqIEBleHBvcnRzIHZvdzpEZWZlcnJlZAogKiBAZGVzY3JpcHRpb24KICogVGhlIGBEZWZlcnJlZGAgY2xhc3MgaXMgdXNlZCB0byBlbmNhcHN1bGF0ZSBuZXdseS1jcmVhdGVkIHByb21pc2Ugb2JqZWN0IGFsb25nIHdpdGggZnVuY3Rpb25zIHRoYXQgcmVzb2x2ZSwgcmVqZWN0IG9yIG5vdGlmeSBpdC4KICovCgovKioKICogQGNvbnN0cnVjdG9yCiAqIEBkZXNjcmlwdGlvbgogKiBZb3UgY2FuIHVzZSBgdm93LmRlZmVyKClgIGluc3RlYWQgb2YgdXNpbmcgdGhpcyBjb25zdHJ1Y3Rvci4KICoKICogYG5ldyB2b3cuRGVmZXJyZWQoKWAgZ2l2ZXMgdGhlIHNhbWUgcmVzdWx0IGFzIGB2b3cuZGVmZXIoKWAuCiAqLwp2YXIgRGVmZXJyZWQgPSBmdW5jdGlvbigpIHsKICAgIHRoaXMuX3Byb21pc2UgPSBuZXcgUHJvbWlzZSgpOwp9OwoKRGVmZXJyZWQucHJvdG90eXBlID0gLyoqIEBsZW5kcyBEZWZlcnJlZC5wcm90b3R5cGUgKi97CiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgcHJvbWlzZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyB7dm93OlByb21pc2V9CiAgICAgKi8KICAgIHByb21pc2UgOiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdGhpcy5fcHJvbWlzZTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBSZXNvbHZlcyB0aGUgY29ycmVzcG9uZGluZyBwcm9taXNlIHdpdGggdGhlIGdpdmVuIGB2YWx1ZWAuCiAgICAgKgogICAgICogQHBhcmFtIHsqfSB2YWx1ZQogICAgICoKICAgICAqIEBleGFtcGxlCiAgICAgKiBgYGBqcwogICAgICogdmFyIGRlZmVyID0gdm93LmRlZmVyKCksCiAgICAgKiAgICAgcHJvbWlzZSA9IGRlZmVyLnByb21pc2UoKTsKICAgICAqCiAgICAgKiBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHsKICAgICAqICAgICAvLyB2YWx1ZSBpcyAiJ3N1Y2Nlc3MnIiBoZXJlCiAgICAgKiB9KTsKICAgICAqCiAgICAgKiBkZWZlci5yZXNvbHZlKCdzdWNjZXNzJyk7CiAgICAgKiBgYGAKICAgICAqLwogICAgcmVzb2x2ZSA6IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgdGhpcy5fcHJvbWlzZS5pc1Jlc29sdmVkKCkgfHwgdGhpcy5fcHJvbWlzZS5fcmVzb2x2ZSh2YWx1ZSk7CiAgICB9LAoKICAgIC8qKgogICAgICogUmVqZWN0cyB0aGUgY29ycmVzcG9uZGluZyBwcm9taXNlIHdpdGggdGhlIGdpdmVuIGByZWFzb25gLgogICAgICoKICAgICAqIEBwYXJhbSB7Kn0gcmVhc29uCiAgICAgKgogICAgICogQGV4YW1wbGUKICAgICAqIGBgYGpzCiAgICAgKiB2YXIgZGVmZXIgPSB2b3cuZGVmZXIoKSwKICAgICAqICAgICBwcm9taXNlID0gZGVmZXIucHJvbWlzZSgpOwogICAgICoKICAgICAqIHByb21pc2UuZmFpbChmdW5jdGlvbihyZWFzb24pIHsKICAgICAqICAgICAvLyByZWFzb24gaXMgIidzb21ldGhpbmcgaXMgd3JvbmcnIiBoZXJlCiAgICAgKiB9KTsKICAgICAqCiAgICAgKiBkZWZlci5yZWplY3QoJ3NvbWV0aGluZyBpcyB3cm9uZycpOwogICAgICogYGBgCiAgICAgKi8KICAgIHJlamVjdCA6IGZ1bmN0aW9uKHJlYXNvbikgewogICAgICAgIGlmKHRoaXMuX3Byb21pc2UuaXNSZXNvbHZlZCgpKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmKHZvdy5pc1Byb21pc2UocmVhc29uKSkgewogICAgICAgICAgICByZWFzb24gPSByZWFzb24udGhlbihmdW5jdGlvbih2YWwpIHsKICAgICAgICAgICAgICAgIHZhciBkZWZlciA9IHZvdy5kZWZlcigpOwogICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KHZhbCk7CiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZSgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5fcHJvbWlzZS5fcmVzb2x2ZShyZWFzb24pOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdGhpcy5fcHJvbWlzZS5fcmVqZWN0KHJlYXNvbik7CiAgICAgICAgfQogICAgfSwKCiAgICAvKioKICAgICAqIE5vdGlmaWVzIHRoZSBjb3JyZXNwb25kaW5nIHByb21pc2Ugd2l0aCB0aGUgZ2l2ZW4gYHZhbHVlYC4KICAgICAqCiAgICAgKiBAcGFyYW0geyp9IHZhbHVlCiAgICAgKgogICAgICogQGV4YW1wbGUKICAgICAqIGBgYGpzCiAgICAgKiB2YXIgZGVmZXIgPSB2b3cuZGVmZXIoKSwKICAgICAqICAgICBwcm9taXNlID0gZGVmZXIucHJvbWlzZSgpOwogICAgICoKICAgICAqIHByb21pc2UucHJvZ3Jlc3MoZnVuY3Rpb24odmFsdWUpIHsKICAgICAqICAgICAvLyB2YWx1ZSBpcyAiJzIwJSciLCAiJzQwJSciIGhlcmUKICAgICAqIH0pOwogICAgICoKICAgICAqIGRlZmVyLm5vdGlmeSgnMjAlJyk7CiAgICAgKiBkZWZlci5ub3RpZnkoJzQwJScpOwogICAgICogYGBgCiAgICAgKi8KICAgIG5vdGlmeSA6IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgdGhpcy5fcHJvbWlzZS5pc1Jlc29sdmVkKCkgfHwgdGhpcy5fcHJvbWlzZS5fbm90aWZ5KHZhbHVlKTsKICAgIH0KfTsKCnZhciBQUk9NSVNFX1NUQVRVUyA9IHsKICAgIFBFTkRJTkcgICA6IDAsCiAgICBSRVNPTFZFRCAgOiAxLAogICAgRlVMRklMTEVEIDogMiwKICAgIFJFSkVDVEVEICA6IDMKfTsKCi8qKgogKiBAY2xhc3MgUHJvbWlzZQogKiBAZXhwb3J0cyB2b3c6UHJvbWlzZQogKiBAZGVzY3JpcHRpb24KICogVGhlIGBQcm9taXNlYCBjbGFzcyBpcyB1c2VkIHdoZW4geW91IHdhbnQgdG8gZ2l2ZSB0byB0aGUgY2FsbGVyIHNvbWV0aGluZyB0byBzdWJzY3JpYmUgdG8sCiAqIGJ1dCBub3QgdGhlIGFiaWxpdHkgdG8gcmVzb2x2ZSBvciByZWplY3QgdGhlIGRlZmVycmVkLgogKi8KCi8qKgogKiBAY29uc3RydWN0b3IKICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzb2x2ZXIgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9kb21lbmljL3Byb21pc2VzLXVud3JhcHBpbmcvYmxvYi9tYXN0ZXIvUkVBRE1FLm1kI3RoZS1wcm9taXNlLWNvbnN0cnVjdG9yIGZvciBkZXRhaWxzLgogKiBAZGVzY3JpcHRpb24KICogWW91IHNob3VsZCB1c2UgdGhpcyBjb25zdHJ1Y3RvciBkaXJlY3RseSBvbmx5IGlmIHlvdSBhcmUgZ29pbmcgdG8gdXNlIGB2b3dgIGFzIERPTSBQcm9taXNlcyBpbXBsZW1lbnRhdGlvbi4KICogSW4gb3RoZXIgY2FzZSB5b3Ugc2hvdWxkIHVzZSBgdm93LmRlZmVyKClgIGFuZCBgZGVmZXIucHJvbWlzZSgpYCBtZXRob2RzLgogKiBAZXhhbXBsZQogKiBgYGBqcwogKiBmdW5jdGlvbiBmZXRjaEpTT04odXJsKSB7CiAqICAgICByZXR1cm4gbmV3IHZvdy5Qcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCwgbm90aWZ5KSB7CiAqICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogKiAgICAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpOwogKiAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7CiAqICAgICAgICAgeGhyLnNlbmQoKTsKICogICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7CiAqICAgICAgICAgICAgIGlmKHhoci5yZXNwb25zZSkgewogKiAgICAgICAgICAgICAgICAgcmVzb2x2ZSh4aHIucmVzcG9uc2UpOwogKiAgICAgICAgICAgICB9CiAqICAgICAgICAgICAgIGVsc2UgewogKiAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoKSk7CiAqICAgICAgICAgICAgIH0KICogICAgICAgICB9OwogKiAgICAgfSk7CiAqIH0KICogYGBgCiAqLwp2YXIgUHJvbWlzZSA9IGZ1bmN0aW9uKHJlc29sdmVyKSB7CiAgICB0aGlzLl92YWx1ZSA9IHVuZGVmOwogICAgdGhpcy5fc3RhdHVzID0gUFJPTUlTRV9TVEFUVVMuUEVORElORzsKCiAgICB0aGlzLl9mdWxmaWxsZWRDYWxsYmFja3MgPSBbXTsKICAgIHRoaXMuX3JlamVjdGVkQ2FsbGJhY2tzID0gW107CiAgICB0aGlzLl9wcm9ncmVzc0NhbGxiYWNrcyA9IFtdOwoKICAgIGlmKHJlc29sdmVyKSB7IC8vIE5PVEU6IHNlZSBodHRwczovL2dpdGh1Yi5jb20vZG9tZW5pYy9wcm9taXNlcy11bndyYXBwaW5nL2Jsb2IvbWFzdGVyL1JFQURNRS5tZAogICAgICAgIHZhciBfdGhpcyA9IHRoaXMsCiAgICAgICAgICAgIHJlc29sdmVyRm5MZW4gPSByZXNvbHZlci5sZW5ndGg7CgogICAgICAgIHJlc29sdmVyKAogICAgICAgICAgICBmdW5jdGlvbih2YWwpIHsKICAgICAgICAgICAgICAgIF90aGlzLmlzUmVzb2x2ZWQoKSB8fCBfdGhpcy5fcmVzb2x2ZSh2YWwpOwogICAgICAgICAgICB9LAogICAgICAgICAgICByZXNvbHZlckZuTGVuID4gMT8KICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlYXNvbikgewogICAgICAgICAgICAgICAgICAgIF90aGlzLmlzUmVzb2x2ZWQoKSB8fCBfdGhpcy5fcmVqZWN0KHJlYXNvbik7CiAgICAgICAgICAgICAgICB9IDoKICAgICAgICAgICAgICAgIHVuZGVmLAogICAgICAgICAgICByZXNvbHZlckZuTGVuID4gMj8KICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHZhbCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzLmlzUmVzb2x2ZWQoKSB8fCBfdGhpcy5fbm90aWZ5KHZhbCk7CiAgICAgICAgICAgICAgICB9IDoKICAgICAgICAgICAgICAgIHVuZGVmKTsKICAgIH0KfTsKClByb21pc2UucHJvdG90eXBlID0gLyoqIEBsZW5kcyBQcm9taXNlLnByb3RvdHlwZSAqLyB7CiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBmdWxmaWxsZWQgcHJvbWlzZSBvciB0aGUgcmVhc29uIGluIGNhc2Ugb2YgcmVqZWN0aW9uLgogICAgICoKICAgICAqIEByZXR1cm5zIHsqfQogICAgICovCiAgICB2YWx1ZU9mIDogZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlOwogICAgfSwKCiAgICAvKioKICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBwcm9taXNlIGlzIHJlc29sdmVkLgogICAgICoKICAgICAqIEByZXR1cm5zIHtCb29sZWFufQogICAgICovCiAgICBpc1Jlc29sdmVkIDogZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1cyAhPT0gUFJPTUlTRV9TVEFUVVMuUEVORElORzsKICAgIH0sCgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgcHJvbWlzZSBpcyBmdWxmaWxsZWQuCiAgICAgKgogICAgICogQHJldHVybnMge0Jvb2xlYW59CiAgICAgKi8KICAgIGlzRnVsZmlsbGVkIDogZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1cyA9PT0gUFJPTUlTRV9TVEFUVVMuRlVMRklMTEVEOwogICAgfSwKCiAgICAvKioKICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkLgogICAgICoKICAgICAqIEByZXR1cm5zIHtCb29sZWFufQogICAgICovCiAgICBpc1JlamVjdGVkIDogZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1cyA9PT0gUFJPTUlTRV9TVEFUVVMuUkVKRUNURUQ7CiAgICB9LAoKICAgIC8qKgogICAgICogQWRkcyByZWFjdGlvbnMgdG8gdGhlIHByb21pc2UuCiAgICAgKgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29uRnVsZmlsbGVkXSBDYWxsYmFjayB0aGF0IHdpbGwgYmUgaW52b2tlZCB3aXRoIGEgcHJvdmlkZWQgdmFsdWUgYWZ0ZXIgdGhlIHByb21pc2UgaGFzIGJlZW4gZnVsZmlsbGVkCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25SZWplY3RlZF0gQ2FsbGJhY2sgdGhhdCB3aWxsIGJlIGludm9rZWQgd2l0aCBhIHByb3ZpZGVkIHJlYXNvbiBhZnRlciB0aGUgcHJvbWlzZSBoYXMgYmVlbiByZWplY3RlZAogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29uUHJvZ3Jlc3NdIENhbGxiYWNrIHRoYXQgd2lsbCBiZSBpbnZva2VkIHdpdGggYSBwcm92aWRlZCB2YWx1ZSBhZnRlciB0aGUgcHJvbWlzZSBoYXMgYmVlbiBub3RpZmllZAogICAgICogQHBhcmFtIHtPYmplY3R9IFtjdHhdIENvbnRleHQgb2YgdGhlIGNhbGxiYWNrcyBleGVjdXRpb24KICAgICAqIEByZXR1cm5zIHt2b3c6UHJvbWlzZX0gQSBuZXcgcHJvbWlzZSwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9wcm9taXNlcy1hcGx1cy9wcm9taXNlcy1zcGVjIGZvciBkZXRhaWxzCiAgICAgKi8KICAgIHRoZW4gOiBmdW5jdGlvbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCwgb25Qcm9ncmVzcywgY3R4KSB7CiAgICAgICAgdmFyIGRlZmVyID0gbmV3IERlZmVycmVkKCk7CiAgICAgICAgdGhpcy5fYWRkQ2FsbGJhY2tzKGRlZmVyLCBvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCwgb25Qcm9ncmVzcywgY3R4KTsKICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZSgpOwogICAgfSwKCiAgICAvKioKICAgICAqIEFkZHMgb25seSBhIHJlamVjdGlvbiByZWFjdGlvbi4gVGhpcyBtZXRob2QgaXMgYSBzaG9ydGhhbmQgZm9yIGBwcm9taXNlLnRoZW4odW5kZWZpbmVkLCBvblJlamVjdGVkKWAuCiAgICAgKgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3RlZCBDYWxsYmFjayB0aGF0IHdpbGwgYmUgY2FsbGVkIHdpdGggYSBwcm92aWRlZCAncmVhc29uJyBhcyBhcmd1bWVudCBhZnRlciB0aGUgcHJvbWlzZSBoYXMgYmVlbiByZWplY3RlZAogICAgICogQHBhcmFtIHtPYmplY3R9IFtjdHhdIENvbnRleHQgb2YgdGhlIGNhbGxiYWNrIGV4ZWN1dGlvbgogICAgICogQHJldHVybnMge3ZvdzpQcm9taXNlfQogICAgICovCiAgICAnY2F0Y2gnIDogZnVuY3Rpb24ob25SZWplY3RlZCwgY3R4KSB7CiAgICAgICAgcmV0dXJuIHRoaXMudGhlbih1bmRlZiwgb25SZWplY3RlZCwgY3R4KTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBBZGRzIG9ubHkgYSByZWplY3Rpb24gcmVhY3Rpb24uIFRoaXMgbWV0aG9kIGlzIGEgc2hvcnRoYW5kIGZvciBgcHJvbWlzZS50aGVuKG51bGwsIG9uUmVqZWN0ZWQpYC4gSXQncyBhbHNvIGFuIGFsaWFzIGZvciBgY2F0Y2hgLgogICAgICoKICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0ZWQgQ2FsbGJhY2sgdG8gYmUgY2FsbGVkIHdpdGggdGhlIHZhbHVlIGFmdGVyIHByb21pc2UgaGFzIGJlZW4gcmVqZWN0ZWQKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbY3R4XSBDb250ZXh0IG9mIHRoZSBjYWxsYmFjayBleGVjdXRpb24KICAgICAqIEByZXR1cm5zIHt2b3c6UHJvbWlzZX0KICAgICAqLwogICAgZmFpbCA6IGZ1bmN0aW9uKG9uUmVqZWN0ZWQsIGN0eCkgewogICAgICAgIHJldHVybiB0aGlzLnRoZW4odW5kZWYsIG9uUmVqZWN0ZWQsIGN0eCk7CiAgICB9LAoKICAgIC8qKgogICAgICogQWRkcyBhIHJlc29sdmluZyByZWFjdGlvbiAoZm9yIGJvdGggZnVsZmlsbG1lbnQgYW5kIHJlamVjdGlvbikuCiAgICAgKgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25SZXNvbHZlZCBDYWxsYmFjayB0aGF0IHdpbGwgYmUgaW52b2tlZCB3aXRoIHRoZSBwcm9taXNlIGFzIGFuIGFyZ3VtZW50LCBhZnRlciB0aGUgcHJvbWlzZSBoYXMgYmVlbiByZXNvbHZlZC4KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbY3R4XSBDb250ZXh0IG9mIHRoZSBjYWxsYmFjayBleGVjdXRpb24KICAgICAqIEByZXR1cm5zIHt2b3c6UHJvbWlzZX0KICAgICAqLwogICAgYWx3YXlzIDogZnVuY3Rpb24ob25SZXNvbHZlZCwgY3R4KSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpcywKICAgICAgICAgICAgY2IgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiBvblJlc29sdmVkLmNhbGwodGhpcywgX3RoaXMpOwogICAgICAgICAgICB9OwoKICAgICAgICByZXR1cm4gdGhpcy50aGVuKGNiLCBjYiwgY3R4KTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBBZGRzIGEgcHJvZ3Jlc3MgcmVhY3Rpb24uCiAgICAgKgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25Qcm9ncmVzcyBDYWxsYmFjayB0aGF0IHdpbGwgYmUgY2FsbGVkIHdpdGggYSBwcm92aWRlZCB2YWx1ZSB3aGVuIHRoZSBwcm9taXNlIGhhcyBiZWVuIG5vdGlmaWVkCiAgICAgKiBAcGFyYW0ge09iamVjdH0gW2N0eF0gQ29udGV4dCBvZiB0aGUgY2FsbGJhY2sgZXhlY3V0aW9uCiAgICAgKiBAcmV0dXJucyB7dm93OlByb21pc2V9CiAgICAgKi8KICAgIHByb2dyZXNzIDogZnVuY3Rpb24ob25Qcm9ncmVzcywgY3R4KSB7CiAgICAgICAgcmV0dXJuIHRoaXMudGhlbih1bmRlZiwgdW5kZWYsIG9uUHJvZ3Jlc3MsIGN0eCk7CiAgICB9LAoKICAgIC8qKgogICAgICogTGlrZSBgcHJvbWlzZS50aGVuYCwgYnV0ICJzcHJlYWRzIiB0aGUgYXJyYXkgaW50byBhIHZhcmlhZGljIHZhbHVlIGhhbmRsZXIuCiAgICAgKiBJdCBpcyB1c2VmdWwgd2l0aCB0aGUgYHZvdy5hbGxgIGFuZCB0aGUgYHZvdy5hbGxSZXNvbHZlZGAgbWV0aG9kcy4KICAgICAqCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25GdWxmaWxsZWRdIENhbGxiYWNrIHRoYXQgd2lsbCBiZSBpbnZva2VkIHdpdGggYSBwcm92aWRlZCB2YWx1ZSBhZnRlciB0aGUgcHJvbWlzZSBoYXMgYmVlbiBmdWxmaWxsZWQKICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvblJlamVjdGVkXSBDYWxsYmFjayB0aGF0IHdpbGwgYmUgaW52b2tlZCB3aXRoIGEgcHJvdmlkZWQgcmVhc29uIGFmdGVyIHRoZSBwcm9taXNlIGhhcyBiZWVuIHJlamVjdGVkCiAgICAgKiBAcGFyYW0ge09iamVjdH0gW2N0eF0gQ29udGV4dCBvZiB0aGUgY2FsbGJhY2tzIGV4ZWN1dGlvbgogICAgICogQHJldHVybnMge3ZvdzpQcm9taXNlfQogICAgICoKICAgICAqIEBleGFtcGxlCiAgICAgKiBgYGBqcwogICAgICogdmFyIGRlZmVyMSA9IHZvdy5kZWZlcigpLAogICAgICogICAgIGRlZmVyMiA9IHZvdy5kZWZlcigpOwogICAgICoKICAgICAqIHZvdy5hbGwoW2RlZmVyMS5wcm9taXNlKCksIGRlZmVyMi5wcm9taXNlKCldKS5zcHJlYWQoZnVuY3Rpb24oYXJnMSwgYXJnMikgewogICAgICogICAgIC8vIGFyZzEgaXMgIjEiLCBhcmcyIGlzICIndHdvJyIgaGVyZQogICAgICogfSk7CiAgICAgKgogICAgICogZGVmZXIxLnJlc29sdmUoMSk7CiAgICAgKiBkZWZlcjIucmVzb2x2ZSgndHdvJyk7CiAgICAgKiBgYGAKICAgICAqLwogICAgc3ByZWFkIDogZnVuY3Rpb24ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIGN0eCkgewogICAgICAgIHJldHVybiB0aGlzLnRoZW4oCiAgICAgICAgICAgIGZ1bmN0aW9uKHZhbCkgewogICAgICAgICAgICAgICAgcmV0dXJuIG9uRnVsZmlsbGVkLmFwcGx5KHRoaXMsIHZhbCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9uUmVqZWN0ZWQsCiAgICAgICAgICAgIGN0eCk7CiAgICB9LAoKICAgIC8qKgogICAgICogTGlrZSBgdGhlbmAsIGJ1dCB0ZXJtaW5hdGVzIGEgY2hhaW4gb2YgcHJvbWlzZXMuCiAgICAgKiBJZiB0aGUgcHJvbWlzZSBoYXMgYmVlbiByZWplY3RlZCwgdGhpcyBtZXRob2QgdGhyb3dzIGl0J3MgInJlYXNvbiIgYXMgYW4gZXhjZXB0aW9uIGluIGEgZnV0dXJlIHR1cm4gb2YgdGhlIGV2ZW50IGxvb3AuCiAgICAgKgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29uRnVsZmlsbGVkXSBDYWxsYmFjayB0aGF0IHdpbGwgYmUgaW52b2tlZCB3aXRoIGEgcHJvdmlkZWQgdmFsdWUgYWZ0ZXIgdGhlIHByb21pc2UgaGFzIGJlZW4gZnVsZmlsbGVkCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25SZWplY3RlZF0gQ2FsbGJhY2sgdGhhdCB3aWxsIGJlIGludm9rZWQgd2l0aCBhIHByb3ZpZGVkIHJlYXNvbiBhZnRlciB0aGUgcHJvbWlzZSBoYXMgYmVlbiByZWplY3RlZAogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29uUHJvZ3Jlc3NdIENhbGxiYWNrIHRoYXQgd2lsbCBiZSBpbnZva2VkIHdpdGggYSBwcm92aWRlZCB2YWx1ZSBhZnRlciB0aGUgcHJvbWlzZSBoYXMgYmVlbiBub3RpZmllZAogICAgICogQHBhcmFtIHtPYmplY3R9IFtjdHhdIENvbnRleHQgb2YgdGhlIGNhbGxiYWNrcyBleGVjdXRpb24KICAgICAqCiAgICAgKiBAZXhhbXBsZQogICAgICogYGBganMKICAgICAqIHZhciBkZWZlciA9IHZvdy5kZWZlcigpOwogICAgICogZGVmZXIucmVqZWN0KEVycm9yKCdJbnRlcm5hbCBlcnJvcicpKTsKICAgICAqIGRlZmVyLnByb21pc2UoKS5kb25lKCk7IC8vIGV4Y2VwdGlvbiB0byBiZSB0aHJvd24KICAgICAqIGBgYAogICAgICovCiAgICBkb25lIDogZnVuY3Rpb24ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIG9uUHJvZ3Jlc3MsIGN0eCkgewogICAgICAgIHRoaXMKICAgICAgICAgICAgLnRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIG9uUHJvZ3Jlc3MsIGN0eCkKICAgICAgICAgICAgLmZhaWwodGhyb3dFeGNlcHRpb24pOwogICAgfSwKCiAgICAvKioKICAgICAqIFJldHVybnMgYSBuZXcgcHJvbWlzZSB0aGF0IHdpbGwgYmUgZnVsZmlsbGVkIGluIGBkZWxheWAgbWlsbGlzZWNvbmRzIGlmIHRoZSBwcm9taXNlIGlzIGZ1bGZpbGxlZCwKICAgICAqIG9yIGltbWVkaWF0ZWx5IHJlamVjdGVkIGlmIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkLgogICAgICoKICAgICAqIEBwYXJhbSB7TnVtYmVyfSBkZWxheQogICAgICogQHJldHVybnMge3ZvdzpQcm9taXNlfQogICAgICovCiAgICBkZWxheSA6IGZ1bmN0aW9uKGRlbGF5KSB7CiAgICAgICAgdmFyIHRpbWVyLAogICAgICAgICAgICBwcm9taXNlID0gdGhpcy50aGVuKGZ1bmN0aW9uKHZhbCkgewogICAgICAgICAgICAgICAgdmFyIGRlZmVyID0gbmV3IERlZmVycmVkKCk7CiAgICAgICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUodmFsKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGRlbGF5KTsKCiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZSgpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgcHJvbWlzZS5hbHdheXMoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7CiAgICAgICAgfSk7CgogICAgICAgIHJldHVybiBwcm9taXNlOwogICAgfSwKCiAgICAvKioKICAgICAqIFJldHVybnMgYSBuZXcgcHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVqZWN0ZWQgaW4gYHRpbWVvdXRgIG1pbGxpc2Vjb25kcwogICAgICogaWYgdGhlIHByb21pc2UgaXMgbm90IHJlc29sdmVkIGJlZm9yZWhhbmQuCiAgICAgKgogICAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVvdXQKICAgICAqIEByZXR1cm5zIHt2b3c6UHJvbWlzZX0KICAgICAqCiAgICAgKiBAZXhhbXBsZQogICAgICogYGBganMKICAgICAqIHZhciBkZWZlciA9IHZvdy5kZWZlcigpLAogICAgICogICAgIHByb21pc2VXaXRoVGltZW91dDEgPSBkZWZlci5wcm9taXNlKCkudGltZW91dCg1MCksCiAgICAgKiAgICAgcHJvbWlzZVdpdGhUaW1lb3V0MiA9IGRlZmVyLnByb21pc2UoKS50aW1lb3V0KDIwMCk7CiAgICAgKgogICAgICogc2V0VGltZW91dCgKICAgICAqICAgICBmdW5jdGlvbigpIHsKICAgICAqICAgICAgICAgZGVmZXIucmVzb2x2ZSgnb2snKTsKICAgICAqICAgICB9LAogICAgICogICAgIDEwMCk7CiAgICAgKgogICAgICogcHJvbWlzZVdpdGhUaW1lb3V0MS5mYWlsKGZ1bmN0aW9uKHJlYXNvbikgewogICAgICogICAgIC8vIHByb21pc2VXaXRoVGltZW91dCB0byBiZSByZWplY3RlZCBpbiA1MG1zCiAgICAgKiB9KTsKICAgICAqCiAgICAgKiBwcm9taXNlV2l0aFRpbWVvdXQyLnRoZW4oZnVuY3Rpb24odmFsdWUpIHsKICAgICAqICAgICAvLyBwcm9taXNlV2l0aFRpbWVvdXQgdG8gYmUgZnVsZmlsbGVkIHdpdGggIidvayciIHZhbHVlCiAgICAgKiB9KTsKICAgICAqIGBgYAogICAgICovCiAgICB0aW1lb3V0IDogZnVuY3Rpb24odGltZW91dCkgewogICAgICAgIHZhciBkZWZlciA9IG5ldyBEZWZlcnJlZCgpLAogICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoCiAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QobmV3IHZvdy5UaW1lZE91dEVycm9yKCd0aW1lZCBvdXQnKSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdGltZW91dCk7CgogICAgICAgIHRoaXMudGhlbigKICAgICAgICAgICAgZnVuY3Rpb24odmFsKSB7CiAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKHZhbCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZ1bmN0aW9uKHJlYXNvbikgewogICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KHJlYXNvbik7CiAgICAgICAgICAgIH0pOwoKICAgICAgICBkZWZlci5wcm9taXNlKCkuYWx3YXlzKGZ1bmN0aW9uKCkgewogICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpOwogICAgICAgIH0pOwoKICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZSgpOwogICAgfSwKCiAgICBfdm93IDogdHJ1ZSwKCiAgICBfcmVzb2x2ZSA6IGZ1bmN0aW9uKHZhbCkgewogICAgICAgIGlmKHRoaXMuX3N0YXR1cyA+IFBST01JU0VfU1RBVFVTLlJFU09MVkVEKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmKHZhbCA9PT0gdGhpcykgewogICAgICAgICAgICB0aGlzLl9yZWplY3QoVHlwZUVycm9yKCdDYW5cJ3QgcmVzb2x2ZSBwcm9taXNlIHdpdGggaXRzZWxmJykpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB0aGlzLl9zdGF0dXMgPSBQUk9NSVNFX1NUQVRVUy5SRVNPTFZFRDsKCiAgICAgICAgaWYodmFsICYmICEhdmFsLl92b3cpIHsgLy8gc2hvcnRwYXRoIGZvciB2b3cuUHJvbWlzZQogICAgICAgICAgICB2YWwuaXNGdWxmaWxsZWQoKT8KICAgICAgICAgICAgICAgIHRoaXMuX2Z1bGZpbGwodmFsLnZhbHVlT2YoKSkgOgogICAgICAgICAgICAgICAgdmFsLmlzUmVqZWN0ZWQoKT8KICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWplY3QodmFsLnZhbHVlT2YoKSkgOgogICAgICAgICAgICAgICAgICAgIHZhbC50aGVuKAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9mdWxmaWxsLAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWplY3QsCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX25vdGlmeSwKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmKGlzT2JqZWN0KHZhbCkgfHwgaXNGdW5jdGlvbih2YWwpKSB7CiAgICAgICAgICAgIHZhciB0aGVuOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgdGhlbiA9IHZhbC50aGVuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoKGUpIHsKICAgICAgICAgICAgICAgIHRoaXMuX3JlamVjdChlKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoaXNGdW5jdGlvbih0aGVuKSkgewogICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcywKICAgICAgICAgICAgICAgICAgICBpc1Jlc29sdmVkID0gZmFsc2U7CgogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICB0aGVuLmNhbGwoCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbCwKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24odmFsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpc1Jlc29sdmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmVzb2x2ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX3Jlc29sdmUodmFsKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihpc1Jlc29sdmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmVzb2x2ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX3JlamVjdChlcnIpOwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbih2YWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9ub3RpZnkodmFsKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaChlKSB7CiAgICAgICAgICAgICAgICAgICAgaXNSZXNvbHZlZCB8fCB0aGlzLl9yZWplY3QoZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB0aGlzLl9mdWxmaWxsKHZhbCk7CiAgICB9LAoKICAgIF9mdWxmaWxsIDogZnVuY3Rpb24odmFsKSB7CiAgICAgICAgaWYodGhpcy5fc3RhdHVzID4gUFJPTUlTRV9TVEFUVVMuUkVTT0xWRUQpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5fc3RhdHVzID0gUFJPTUlTRV9TVEFUVVMuRlVMRklMTEVEOwogICAgICAgIHRoaXMuX3ZhbHVlID0gdmFsOwoKICAgICAgICB0aGlzLl9jYWxsQ2FsbGJhY2tzKHRoaXMuX2Z1bGZpbGxlZENhbGxiYWNrcywgdmFsKTsKICAgICAgICB0aGlzLl9mdWxmaWxsZWRDYWxsYmFja3MgPSB0aGlzLl9yZWplY3RlZENhbGxiYWNrcyA9IHRoaXMuX3Byb2dyZXNzQ2FsbGJhY2tzID0gdW5kZWY7CiAgICB9LAoKICAgIF9yZWplY3QgOiBmdW5jdGlvbihyZWFzb24pIHsKICAgICAgICBpZih0aGlzLl9zdGF0dXMgPiBQUk9NSVNFX1NUQVRVUy5SRVNPTFZFRCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB0aGlzLl9zdGF0dXMgPSBQUk9NSVNFX1NUQVRVUy5SRUpFQ1RFRDsKICAgICAgICB0aGlzLl92YWx1ZSA9IHJlYXNvbjsKCiAgICAgICAgdGhpcy5fY2FsbENhbGxiYWNrcyh0aGlzLl9yZWplY3RlZENhbGxiYWNrcywgcmVhc29uKTsKICAgICAgICB0aGlzLl9mdWxmaWxsZWRDYWxsYmFja3MgPSB0aGlzLl9yZWplY3RlZENhbGxiYWNrcyA9IHRoaXMuX3Byb2dyZXNzQ2FsbGJhY2tzID0gdW5kZWY7CiAgICB9LAoKICAgIF9ub3RpZnkgOiBmdW5jdGlvbih2YWwpIHsKICAgICAgICB0aGlzLl9jYWxsQ2FsbGJhY2tzKHRoaXMuX3Byb2dyZXNzQ2FsbGJhY2tzLCB2YWwpOwogICAgfSwKCiAgICBfYWRkQ2FsbGJhY2tzIDogZnVuY3Rpb24oZGVmZXIsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBvblByb2dyZXNzLCBjdHgpIHsKICAgICAgICBpZihvblJlamVjdGVkICYmICFpc0Z1bmN0aW9uKG9uUmVqZWN0ZWQpKSB7CiAgICAgICAgICAgIGN0eCA9IG9uUmVqZWN0ZWQ7CiAgICAgICAgICAgIG9uUmVqZWN0ZWQgPSB1bmRlZjsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZihvblByb2dyZXNzICYmICFpc0Z1bmN0aW9uKG9uUHJvZ3Jlc3MpKSB7CiAgICAgICAgICAgIGN0eCA9IG9uUHJvZ3Jlc3M7CiAgICAgICAgICAgIG9uUHJvZ3Jlc3MgPSB1bmRlZjsKICAgICAgICB9CgogICAgICAgIHZhciBjYjsKCiAgICAgICAgaWYoIXRoaXMuaXNSZWplY3RlZCgpKSB7CiAgICAgICAgICAgIGNiID0geyBkZWZlciA6IGRlZmVyLCBmbiA6IGlzRnVuY3Rpb24ob25GdWxmaWxsZWQpPyBvbkZ1bGZpbGxlZCA6IHVuZGVmLCBjdHggOiBjdHggfTsKICAgICAgICAgICAgdGhpcy5pc0Z1bGZpbGxlZCgpPwogICAgICAgICAgICAgICAgdGhpcy5fY2FsbENhbGxiYWNrcyhbY2JdLCB0aGlzLl92YWx1ZSkgOgogICAgICAgICAgICAgICAgdGhpcy5fZnVsZmlsbGVkQ2FsbGJhY2tzLnB1c2goY2IpOwogICAgICAgIH0KCiAgICAgICAgaWYoIXRoaXMuaXNGdWxmaWxsZWQoKSkgewogICAgICAgICAgICBjYiA9IHsgZGVmZXIgOiBkZWZlciwgZm4gOiBvblJlamVjdGVkLCBjdHggOiBjdHggfTsKICAgICAgICAgICAgdGhpcy5pc1JlamVjdGVkKCk/CiAgICAgICAgICAgICAgICB0aGlzLl9jYWxsQ2FsbGJhY2tzKFtjYl0sIHRoaXMuX3ZhbHVlKSA6CiAgICAgICAgICAgICAgICB0aGlzLl9yZWplY3RlZENhbGxiYWNrcy5wdXNoKGNiKTsKICAgICAgICB9CgogICAgICAgIGlmKHRoaXMuX3N0YXR1cyA8PSBQUk9NSVNFX1NUQVRVUy5SRVNPTFZFRCkgewogICAgICAgICAgICB0aGlzLl9wcm9ncmVzc0NhbGxiYWNrcy5wdXNoKHsgZGVmZXIgOiBkZWZlciwgZm4gOiBvblByb2dyZXNzLCBjdHggOiBjdHggfSk7CiAgICAgICAgfQogICAgfSwKCiAgICBfY2FsbENhbGxiYWNrcyA6IGZ1bmN0aW9uKGNhbGxiYWNrcywgYXJnKSB7CiAgICAgICAgdmFyIGxlbiA9IGNhbGxiYWNrcy5sZW5ndGg7CiAgICAgICAgaWYoIWxlbikgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgaXNSZXNvbHZlZCA9IHRoaXMuaXNSZXNvbHZlZCgpLAogICAgICAgICAgICBpc0Z1bGZpbGxlZCA9IHRoaXMuaXNGdWxmaWxsZWQoKTsKCiAgICAgICAgbmV4dFRpY2soZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBpID0gMCwgY2IsIGRlZmVyLCBmbjsKICAgICAgICAgICAgd2hpbGUoaSA8IGxlbikgewogICAgICAgICAgICAgICAgY2IgPSBjYWxsYmFja3NbaSsrXTsKICAgICAgICAgICAgICAgIGRlZmVyID0gY2IuZGVmZXI7CiAgICAgICAgICAgICAgICBmbiA9IGNiLmZuOwoKICAgICAgICAgICAgICAgIGlmKGZuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGN0eCA9IGNiLmN0eCwKICAgICAgICAgICAgICAgICAgICAgICAgcmVzOwogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IGN0eD8gZm4uY2FsbChjdHgsIGFyZykgOiBmbihhcmcpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjYXRjaChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlamVjdChlKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpc1Jlc29sdmVkPwogICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKHJlcykgOgogICAgICAgICAgICAgICAgICAgICAgICBkZWZlci5ub3RpZnkocmVzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlzUmVzb2x2ZWQ/CiAgICAgICAgICAgICAgICAgICAgICAgIGlzRnVsZmlsbGVkPwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShhcmcpIDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlamVjdChhcmcpIDoKICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXIubm90aWZ5KGFyZyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0KfTsKCi8qKiBAbGVuZHMgUHJvbWlzZSAqLwp2YXIgc3RhdGljTWV0aG9kcyA9IHsKICAgIC8qKgogICAgICogQ29lcmNlcyB0aGUgZ2l2ZW4gYHZhbHVlYCB0byBhIHByb21pc2UsIG9yIHJldHVybnMgdGhlIGB2YWx1ZWAgaWYgaXQncyBhbHJlYWR5IGEgcHJvbWlzZS4KICAgICAqCiAgICAgKiBAcGFyYW0geyp9IHZhbHVlCiAgICAgKiBAcmV0dXJucyB7dm93OlByb21pc2V9CiAgICAgKi8KICAgIGNhc3QgOiBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgIHJldHVybiB2b3cuY2FzdCh2YWx1ZSk7CiAgICB9LAoKICAgIC8qKgogICAgICogUmV0dXJucyBhIHByb21pc2UsIHRoYXQgd2lsbCBiZSBmdWxmaWxsZWQgb25seSBhZnRlciBhbGwgdGhlIGl0ZW1zIGluIGBpdGVyYWJsZWAgYXJlIGZ1bGZpbGxlZC4KICAgICAqIElmIGFueSBvZiB0aGUgYGl0ZXJhYmxlYCBpdGVtcyBnZXRzIHJlamVjdGVkLCB0aGVuIHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQuCiAgICAgKgogICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGl0ZXJhYmxlCiAgICAgKiBAcmV0dXJucyB7dm93OlByb21pc2V9CiAgICAgKi8KICAgIGFsbCA6IGZ1bmN0aW9uKGl0ZXJhYmxlKSB7CiAgICAgICAgcmV0dXJuIHZvdy5hbGwoaXRlcmFibGUpOwogICAgfSwKCiAgICAvKioKICAgICAqIFJldHVybnMgYSBwcm9taXNlLCB0aGF0IHdpbGwgYmUgZnVsZmlsbGVkIG9ubHkgd2hlbiBhbnkgb2YgdGhlIGl0ZW1zIGluIGBpdGVyYWJsZWAgYXJlIGZ1bGZpbGxlZC4KICAgICAqIElmIGFueSBvZiB0aGUgYGl0ZXJhYmxlYCBpdGVtcyBnZXRzIHJlamVjdGVkLCB0aGVuIHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQuCiAgICAgKgogICAgICogQHBhcmFtIHtBcnJheX0gaXRlcmFibGUKICAgICAqIEByZXR1cm5zIHt2b3c6UHJvbWlzZX0KICAgICAqLwogICAgcmFjZSA6IGZ1bmN0aW9uKGl0ZXJhYmxlKSB7CiAgICAgICAgcmV0dXJuIHZvdy5hbnlSZXNvbHZlZChpdGVyYWJsZSk7CiAgICB9LAoKICAgIC8qKgogICAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCBoYXMgYWxyZWFkeSBiZWVuIHJlc29sdmVkIHdpdGggdGhlIGdpdmVuIGB2YWx1ZWAuCiAgICAgKiBJZiBgdmFsdWVgIGlzIGEgcHJvbWlzZSwgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBoYXZlIGB2YWx1ZWAncyBzdGF0ZS4KICAgICAqCiAgICAgKiBAcGFyYW0geyp9IHZhbHVlCiAgICAgKiBAcmV0dXJucyB7dm93OlByb21pc2V9CiAgICAgKi8KICAgIHJlc29sdmUgOiBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgIHJldHVybiB2b3cucmVzb2x2ZSh2YWx1ZSk7CiAgICB9LAoKICAgIC8qKgogICAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCBoYXMgYWxyZWFkeSBiZWVuIHJlamVjdGVkIHdpdGggdGhlIGdpdmVuIGByZWFzb25gLgogICAgICoKICAgICAqIEBwYXJhbSB7Kn0gcmVhc29uCiAgICAgKiBAcmV0dXJucyB7dm93OlByb21pc2V9CiAgICAgKi8KICAgIHJlamVjdCA6IGZ1bmN0aW9uKHJlYXNvbikgewogICAgICAgIHJldHVybiB2b3cucmVqZWN0KHJlYXNvbik7CiAgICB9Cn07Cgpmb3IodmFyIHByb3AgaW4gc3RhdGljTWV0aG9kcykgewogICAgc3RhdGljTWV0aG9kcy5oYXNPd25Qcm9wZXJ0eShwcm9wKSAmJgogICAgICAgIChQcm9taXNlW3Byb3BdID0gc3RhdGljTWV0aG9kc1twcm9wXSk7Cn0KCnZhciB2b3cgPSAvKiogQGV4cG9ydHMgdm93ICovIHsKICAgIERlZmVycmVkIDogRGVmZXJyZWQsCgogICAgUHJvbWlzZSA6IFByb21pc2UsCgogICAgLyoqCiAgICAgKiBDcmVhdGVzIGEgbmV3IGRlZmVycmVkLiBUaGlzIG1ldGhvZCBpcyBhIGZhY3RvcnkgbWV0aG9kIGZvciBgdm93OkRlZmVycmVkYCBjbGFzcy4KICAgICAqIEl0J3MgZXF1aXZhbGVudCB0byBgbmV3IHZvdy5EZWZlcnJlZCgpYC4KICAgICAqCiAgICAgKiBAcmV0dXJucyB7dm93OkRlZmVycmVkfQogICAgICovCiAgICBkZWZlciA6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBuZXcgRGVmZXJyZWQoKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBTdGF0aWMgZXF1aXZhbGVudCB0byBgcHJvbWlzZS50aGVuYC4KICAgICAqIElmIGB2YWx1ZWAgaXMgbm90IGEgcHJvbWlzZSwgdGhlbiBgdmFsdWVgIGlzIHRyZWF0ZWQgYXMgYSBmdWxmaWxsZWQgcHJvbWlzZS4KICAgICAqCiAgICAgKiBAcGFyYW0geyp9IHZhbHVlCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25GdWxmaWxsZWRdIENhbGxiYWNrIHRoYXQgd2lsbCBiZSBpbnZva2VkIHdpdGggYSBwcm92aWRlZCB2YWx1ZSBhZnRlciB0aGUgcHJvbWlzZSBoYXMgYmVlbiBmdWxmaWxsZWQKICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvblJlamVjdGVkXSBDYWxsYmFjayB0aGF0IHdpbGwgYmUgaW52b2tlZCB3aXRoIGEgcHJvdmlkZWQgcmVhc29uIGFmdGVyIHRoZSBwcm9taXNlIGhhcyBiZWVuIHJlamVjdGVkCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25Qcm9ncmVzc10gQ2FsbGJhY2sgdGhhdCB3aWxsIGJlIGludm9rZWQgd2l0aCBhIHByb3ZpZGVkIHZhbHVlIGFmdGVyIHRoZSBwcm9taXNlIGhhcyBiZWVuIG5vdGlmaWVkCiAgICAgKiBAcGFyYW0ge09iamVjdH0gW2N0eF0gQ29udGV4dCBvZiB0aGUgY2FsbGJhY2tzIGV4ZWN1dGlvbgogICAgICogQHJldHVybnMge3ZvdzpQcm9taXNlfQogICAgICovCiAgICB3aGVuIDogZnVuY3Rpb24odmFsdWUsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBvblByb2dyZXNzLCBjdHgpIHsKICAgICAgICByZXR1cm4gdm93LmNhc3QodmFsdWUpLnRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIG9uUHJvZ3Jlc3MsIGN0eCk7CiAgICB9LAoKICAgIC8qKgogICAgICogU3RhdGljIGVxdWl2YWxlbnQgdG8gYHByb21pc2UuZmFpbGAuCiAgICAgKiBJZiBgdmFsdWVgIGlzIG5vdCBhIHByb21pc2UsIHRoZW4gYHZhbHVlYCBpcyB0cmVhdGVkIGFzIGEgZnVsZmlsbGVkIHByb21pc2UuCiAgICAgKgogICAgICogQHBhcmFtIHsqfSB2YWx1ZQogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3RlZCBDYWxsYmFjayB0aGF0IHdpbGwgYmUgaW52b2tlZCB3aXRoIGEgcHJvdmlkZWQgcmVhc29uIGFmdGVyIHRoZSBwcm9taXNlIGhhcyBiZWVuIHJlamVjdGVkCiAgICAgKiBAcGFyYW0ge09iamVjdH0gW2N0eF0gQ29udGV4dCBvZiB0aGUgY2FsbGJhY2sgZXhlY3V0aW9uCiAgICAgKiBAcmV0dXJucyB7dm93OlByb21pc2V9CiAgICAgKi8KICAgIGZhaWwgOiBmdW5jdGlvbih2YWx1ZSwgb25SZWplY3RlZCwgY3R4KSB7CiAgICAgICAgcmV0dXJuIHZvdy53aGVuKHZhbHVlLCB1bmRlZiwgb25SZWplY3RlZCwgY3R4KTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBTdGF0aWMgZXF1aXZhbGVudCB0byBgcHJvbWlzZS5hbHdheXNgLgogICAgICogSWYgYHZhbHVlYCBpcyBub3QgYSBwcm9taXNlLCB0aGVuIGB2YWx1ZWAgaXMgdHJlYXRlZCBhcyBhIGZ1bGZpbGxlZCBwcm9taXNlLgogICAgICoKICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUKICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVzb2x2ZWQgQ2FsbGJhY2sgdGhhdCB3aWxsIGJlIGludm9rZWQgd2l0aCB0aGUgcHJvbWlzZSBhcyBhbiBhcmd1bWVudCwgYWZ0ZXIgdGhlIHByb21pc2UgaGFzIGJlZW4gcmVzb2x2ZWQuCiAgICAgKiBAcGFyYW0ge09iamVjdH0gW2N0eF0gQ29udGV4dCBvZiB0aGUgY2FsbGJhY2sgZXhlY3V0aW9uCiAgICAgKiBAcmV0dXJucyB7dm93OlByb21pc2V9CiAgICAgKi8KICAgIGFsd2F5cyA6IGZ1bmN0aW9uKHZhbHVlLCBvblJlc29sdmVkLCBjdHgpIHsKICAgICAgICByZXR1cm4gdm93LndoZW4odmFsdWUpLmFsd2F5cyhvblJlc29sdmVkLCBjdHgpOwogICAgfSwKCiAgICAvKioKICAgICAqIFN0YXRpYyBlcXVpdmFsZW50IHRvIGBwcm9taXNlLnByb2dyZXNzYC4KICAgICAqIElmIGB2YWx1ZWAgaXMgbm90IGEgcHJvbWlzZSwgdGhlbiBgdmFsdWVgIGlzIHRyZWF0ZWQgYXMgYSBmdWxmaWxsZWQgcHJvbWlzZS4KICAgICAqCiAgICAgKiBAcGFyYW0geyp9IHZhbHVlCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvblByb2dyZXNzIENhbGxiYWNrIHRoYXQgd2lsbCBiZSBpbnZva2VkIHdpdGggYSBwcm92aWRlZCB2YWx1ZSBhZnRlciB0aGUgcHJvbWlzZSBoYXMgYmVlbiBub3RpZmllZAogICAgICogQHBhcmFtIHtPYmplY3R9IFtjdHhdIENvbnRleHQgb2YgdGhlIGNhbGxiYWNrIGV4ZWN1dGlvbgogICAgICogQHJldHVybnMge3ZvdzpQcm9taXNlfQogICAgICovCiAgICBwcm9ncmVzcyA6IGZ1bmN0aW9uKHZhbHVlLCBvblByb2dyZXNzLCBjdHgpIHsKICAgICAgICByZXR1cm4gdm93LndoZW4odmFsdWUpLnByb2dyZXNzKG9uUHJvZ3Jlc3MsIGN0eCk7CiAgICB9LAoKICAgIC8qKgogICAgICogU3RhdGljIGVxdWl2YWxlbnQgdG8gYHByb21pc2Uuc3ByZWFkYC4KICAgICAqIElmIGB2YWx1ZWAgaXMgbm90IGEgcHJvbWlzZSwgdGhlbiBgdmFsdWVgIGlzIHRyZWF0ZWQgYXMgYSBmdWxmaWxsZWQgcHJvbWlzZS4KICAgICAqCiAgICAgKiBAcGFyYW0geyp9IHZhbHVlCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25GdWxmaWxsZWRdIENhbGxiYWNrIHRoYXQgd2lsbCBiZSBpbnZva2VkIHdpdGggYSBwcm92aWRlZCB2YWx1ZSBhZnRlciB0aGUgcHJvbWlzZSBoYXMgYmVlbiBmdWxmaWxsZWQKICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvblJlamVjdGVkXSBDYWxsYmFjayB0aGF0IHdpbGwgYmUgaW52b2tlZCB3aXRoIGEgcHJvdmlkZWQgcmVhc29uIGFmdGVyIHRoZSBwcm9taXNlIGhhcyBiZWVuIHJlamVjdGVkCiAgICAgKiBAcGFyYW0ge09iamVjdH0gW2N0eF0gQ29udGV4dCBvZiB0aGUgY2FsbGJhY2tzIGV4ZWN1dGlvbgogICAgICogQHJldHVybnMge3ZvdzpQcm9taXNlfQogICAgICovCiAgICBzcHJlYWQgOiBmdW5jdGlvbih2YWx1ZSwgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIGN0eCkgewogICAgICAgIHJldHVybiB2b3cud2hlbih2YWx1ZSkuc3ByZWFkKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBjdHgpOwogICAgfSwKCiAgICAvKioKICAgICAqIFN0YXRpYyBlcXVpdmFsZW50IHRvIGBwcm9taXNlLmRvbmVgLgogICAgICogSWYgYHZhbHVlYCBpcyBub3QgYSBwcm9taXNlLCB0aGVuIGB2YWx1ZWAgaXMgdHJlYXRlZCBhcyBhIGZ1bGZpbGxlZCBwcm9taXNlLgogICAgICoKICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUKICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvbkZ1bGZpbGxlZF0gQ2FsbGJhY2sgdGhhdCB3aWxsIGJlIGludm9rZWQgd2l0aCBhIHByb3ZpZGVkIHZhbHVlIGFmdGVyIHRoZSBwcm9taXNlIGhhcyBiZWVuIGZ1bGZpbGxlZAogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29uUmVqZWN0ZWRdIENhbGxiYWNrIHRoYXQgd2lsbCBiZSBpbnZva2VkIHdpdGggYSBwcm92aWRlZCByZWFzb24gYWZ0ZXIgdGhlIHByb21pc2UgaGFzIGJlZW4gcmVqZWN0ZWQKICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvblByb2dyZXNzXSBDYWxsYmFjayB0aGF0IHdpbGwgYmUgaW52b2tlZCB3aXRoIGEgcHJvdmlkZWQgdmFsdWUgYWZ0ZXIgdGhlIHByb21pc2UgaGFzIGJlZW4gbm90aWZpZWQKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbY3R4XSBDb250ZXh0IG9mIHRoZSBjYWxsYmFja3MgZXhlY3V0aW9uCiAgICAgKi8KICAgIGRvbmUgOiBmdW5jdGlvbih2YWx1ZSwgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIG9uUHJvZ3Jlc3MsIGN0eCkgewogICAgICAgIHZvdy53aGVuKHZhbHVlKS5kb25lKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBvblByb2dyZXNzLCBjdHgpOwogICAgfSwKCiAgICAvKioKICAgICAqIENoZWNrcyB3aGV0aGVyIHRoZSBnaXZlbiBgdmFsdWVgIGlzIGEgcHJvbWlzZS1saWtlIG9iamVjdAogICAgICoKICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUKICAgICAqIEByZXR1cm5zIHtCb29sZWFufQogICAgICoKICAgICAqIEBleGFtcGxlCiAgICAgKiBgYGBqcwogICAgICogdm93LmlzUHJvbWlzZSgnc29tZXRoaW5nJyk7IC8vIHJldHVybnMgZmFsc2UKICAgICAqIHZvdy5pc1Byb21pc2Uodm93LmRlZmVyKCkucHJvbWlzZSgpKTsgLy8gcmV0dXJucyB0cnVlCiAgICAgKiB2b3cuaXNQcm9taXNlKHsgdGhlbiA6IGZ1bmN0aW9uKCkgeyB9KTsgLy8gcmV0dXJucyB0cnVlCiAgICAgKiBgYGAKICAgICAqLwogICAgaXNQcm9taXNlIDogZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICByZXR1cm4gaXNPYmplY3QodmFsdWUpICYmIGlzRnVuY3Rpb24odmFsdWUudGhlbik7CiAgICB9LAoKICAgIC8qKgogICAgICogQ29lcmNlcyB0aGUgZ2l2ZW4gYHZhbHVlYCB0byBhIHByb21pc2UsIG9yIHJldHVybnMgdGhlIGB2YWx1ZWAgaWYgaXQncyBhbHJlYWR5IGEgcHJvbWlzZS4KICAgICAqCiAgICAgKiBAcGFyYW0geyp9IHZhbHVlCiAgICAgKiBAcmV0dXJucyB7dm93OlByb21pc2V9CiAgICAgKi8KICAgIGNhc3QgOiBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgIHJldHVybiB2YWx1ZSAmJiAhIXZhbHVlLl92b3c/CiAgICAgICAgICAgIHZhbHVlIDoKICAgICAgICAgICAgdm93LnJlc29sdmUodmFsdWUpOwogICAgfSwKCiAgICAvKioKICAgICAqIFN0YXRpYyBlcXVpdmFsZW50IHRvIGBwcm9taXNlLnZhbHVlT2ZgLgogICAgICogSWYgYHZhbHVlYCBpcyBub3QgYSBwcm9taXNlLCB0aGVuIGB2YWx1ZWAgaXMgdHJlYXRlZCBhcyBhIGZ1bGZpbGxlZCBwcm9taXNlLgogICAgICoKICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUKICAgICAqIEByZXR1cm5zIHsqfQogICAgICovCiAgICB2YWx1ZU9mIDogZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICByZXR1cm4gdmFsdWUgJiYgaXNGdW5jdGlvbih2YWx1ZS52YWx1ZU9mKT8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7CiAgICB9LAoKICAgIC8qKgogICAgICogU3RhdGljIGVxdWl2YWxlbnQgdG8gYHByb21pc2UuaXNGdWxmaWxsZWRgLgogICAgICogSWYgYHZhbHVlYCBpcyBub3QgYSBwcm9taXNlLCB0aGVuIGB2YWx1ZWAgaXMgdHJlYXRlZCBhcyBhIGZ1bGZpbGxlZCBwcm9taXNlLgogICAgICoKICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUKICAgICAqIEByZXR1cm5zIHtCb29sZWFufQogICAgICovCiAgICBpc0Z1bGZpbGxlZCA6IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIHZhbHVlICYmIGlzRnVuY3Rpb24odmFsdWUuaXNGdWxmaWxsZWQpPyB2YWx1ZS5pc0Z1bGZpbGxlZCgpIDogdHJ1ZTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBTdGF0aWMgZXF1aXZhbGVudCB0byBgcHJvbWlzZS5pc1JlamVjdGVkYC4KICAgICAqIElmIGB2YWx1ZWAgaXMgbm90IGEgcHJvbWlzZSwgdGhlbiBgdmFsdWVgIGlzIHRyZWF0ZWQgYXMgYSBmdWxmaWxsZWQgcHJvbWlzZS4KICAgICAqCiAgICAgKiBAcGFyYW0geyp9IHZhbHVlCiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0KICAgICAqLwogICAgaXNSZWplY3RlZCA6IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIHZhbHVlICYmIGlzRnVuY3Rpb24odmFsdWUuaXNSZWplY3RlZCk/IHZhbHVlLmlzUmVqZWN0ZWQoKSA6IGZhbHNlOwogICAgfSwKCiAgICAvKioKICAgICAqIFN0YXRpYyBlcXVpdmFsZW50IHRvIGBwcm9taXNlLmlzUmVzb2x2ZWRgLgogICAgICogSWYgYHZhbHVlYCBpcyBub3QgYSBwcm9taXNlLCB0aGVuIGB2YWx1ZWAgaXMgdHJlYXRlZCBhcyBhIGZ1bGZpbGxlZCBwcm9taXNlLgogICAgICoKICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUKICAgICAqIEByZXR1cm5zIHtCb29sZWFufQogICAgICovCiAgICBpc1Jlc29sdmVkIDogZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICByZXR1cm4gdmFsdWUgJiYgaXNGdW5jdGlvbih2YWx1ZS5pc1Jlc29sdmVkKT8gdmFsdWUuaXNSZXNvbHZlZCgpIDogdHJ1ZTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IGhhcyBhbHJlYWR5IGJlZW4gcmVzb2x2ZWQgd2l0aCB0aGUgZ2l2ZW4gYHZhbHVlYC4KICAgICAqIElmIGB2YWx1ZWAgaXMgYSBwcm9taXNlLCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGhhdmUgYHZhbHVlYCdzIHN0YXRlLgogICAgICoKICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUKICAgICAqIEByZXR1cm5zIHt2b3c6UHJvbWlzZX0KICAgICAqLwogICAgcmVzb2x2ZSA6IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgdmFyIHJlcyA9IHZvdy5kZWZlcigpOwogICAgICAgIHJlcy5yZXNvbHZlKHZhbHVlKTsKICAgICAgICByZXR1cm4gcmVzLnByb21pc2UoKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IGhhcyBhbHJlYWR5IGJlZW4gZnVsZmlsbGVkIHdpdGggdGhlIGdpdmVuIGB2YWx1ZWAuCiAgICAgKiBJZiBgdmFsdWVgIGlzIGEgcHJvbWlzZSwgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSBmdWxmaWxsZWQgd2l0aCB0aGUgZnVsZmlsbC9yZWplY3Rpb24gdmFsdWUgb2YgYHZhbHVlYC4KICAgICAqCiAgICAgKiBAcGFyYW0geyp9IHZhbHVlCiAgICAgKiBAcmV0dXJucyB7dm93OlByb21pc2V9CiAgICAgKi8KICAgIGZ1bGZpbGwgOiBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgIHZhciBkZWZlciA9IHZvdy5kZWZlcigpLAogICAgICAgICAgICBwcm9taXNlID0gZGVmZXIucHJvbWlzZSgpOwoKICAgICAgICBkZWZlci5yZXNvbHZlKHZhbHVlKTsKCiAgICAgICAgcmV0dXJuIHByb21pc2UuaXNGdWxmaWxsZWQoKT8KICAgICAgICAgICAgcHJvbWlzZSA6CiAgICAgICAgICAgIHByb21pc2UudGhlbihudWxsLCBmdW5jdGlvbihyZWFzb24pIHsKICAgICAgICAgICAgICAgIHJldHVybiByZWFzb247CiAgICAgICAgICAgIH0pOwogICAgfSwKCiAgICAvKioKICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgaGFzIGFscmVhZHkgYmVlbiByZWplY3RlZCB3aXRoIHRoZSBnaXZlbiBgcmVhc29uYC4KICAgICAqIElmIGByZWFzb25gIGlzIGEgcHJvbWlzZSwgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCB3aXRoIHRoZSBmdWxmaWxsL3JlamVjdGlvbiB2YWx1ZSBvZiBgcmVhc29uYC4KICAgICAqCiAgICAgKiBAcGFyYW0geyp9IHJlYXNvbgogICAgICogQHJldHVybnMge3ZvdzpQcm9taXNlfQogICAgICovCiAgICByZWplY3QgOiBmdW5jdGlvbihyZWFzb24pIHsKICAgICAgICB2YXIgZGVmZXIgPSB2b3cuZGVmZXIoKTsKICAgICAgICBkZWZlci5yZWplY3QocmVhc29uKTsKICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZSgpOwogICAgfSwKCiAgICAvKioKICAgICAqIEludm9rZXMgdGhlIGdpdmVuIGZ1bmN0aW9uIGBmbmAgd2l0aCBhcmd1bWVudHMgYGFyZ3NgCiAgICAgKgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4KICAgICAqIEBwYXJhbSB7Li4uKn0gW2FyZ3NdCiAgICAgKiBAcmV0dXJucyB7dm93OlByb21pc2V9CiAgICAgKgogICAgICogQGV4YW1wbGUKICAgICAqIGBgYGpzCiAgICAgKiB2YXIgcHJvbWlzZTEgPSB2b3cuaW52b2tlKGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgKiAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAqICAgICB9LCAnb2snKSwKICAgICAqICAgICBwcm9taXNlMiA9IHZvdy5pbnZva2UoZnVuY3Rpb24oKSB7CiAgICAgKiAgICAgICAgIHRocm93IEVycm9yKCk7CiAgICAgKiAgICAgfSk7CiAgICAgKgogICAgICogcHJvbWlzZTEuaXNGdWxmaWxsZWQoKTsgLy8gdHJ1ZQogICAgICogcHJvbWlzZTEudmFsdWVPZigpOyAvLyAnb2snCiAgICAgKiBwcm9taXNlMi5pc1JlamVjdGVkKCk7IC8vIHRydWUKICAgICAqIHByb21pc2UyLnZhbHVlT2YoKTsgLy8gaW5zdGFuY2Ugb2YgRXJyb3IKICAgICAqIGBgYAogICAgICovCiAgICBpbnZva2UgOiBmdW5jdGlvbihmbiwgYXJncykgewogICAgICAgIHZhciBsZW4gPSBNYXRoLm1heChhcmd1bWVudHMubGVuZ3RoIC0gMSwgMCksCiAgICAgICAgICAgIGNhbGxBcmdzOwogICAgICAgIGlmKGxlbikgeyAvLyBvcHRpbWl6YXRpb24gZm9yIFY4CiAgICAgICAgICAgIGNhbGxBcmdzID0gQXJyYXkobGVuKTsKICAgICAgICAgICAgdmFyIGkgPSAwOwogICAgICAgICAgICB3aGlsZShpIDwgbGVuKSB7CiAgICAgICAgICAgICAgICBjYWxsQXJnc1tpKytdID0gYXJndW1lbnRzW2ldOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gdm93LnJlc29sdmUoY2FsbEFyZ3M/CiAgICAgICAgICAgICAgICBmbi5hcHBseShnbG9iYWwsIGNhbGxBcmdzKSA6CiAgICAgICAgICAgICAgICBmbi5jYWxsKGdsb2JhbCkpOwogICAgICAgIH0KICAgICAgICBjYXRjaChlKSB7CiAgICAgICAgICAgIHJldHVybiB2b3cucmVqZWN0KGUpOwogICAgICAgIH0KICAgIH0sCgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSwgdGhhdCB3aWxsIGJlIGZ1bGZpbGxlZCBvbmx5IGFmdGVyIGFsbCB0aGUgaXRlbXMgaW4gYGl0ZXJhYmxlYCBhcmUgZnVsZmlsbGVkLgogICAgICogSWYgYW55IG9mIHRoZSBgaXRlcmFibGVgIGl0ZW1zIGdldHMgcmVqZWN0ZWQsIHRoZSBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQuCiAgICAgKgogICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGl0ZXJhYmxlCiAgICAgKiBAcmV0dXJucyB7dm93OlByb21pc2V9CiAgICAgKgogICAgICogQGV4YW1wbGUKICAgICAqIHdpdGggYXJyYXk6CiAgICAgKiBgYGBqcwogICAgICogdmFyIGRlZmVyMSA9IHZvdy5kZWZlcigpLAogICAgICogICAgIGRlZmVyMiA9IHZvdy5kZWZlcigpOwogICAgICoKICAgICAqIHZvdy5hbGwoW2RlZmVyMS5wcm9taXNlKCksIGRlZmVyMi5wcm9taXNlKCksIDNdKQogICAgICogICAgIC50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgKiAgICAgICAgICAvLyB2YWx1ZSBpcyAiWzEsIDIsIDNdIiBoZXJlCiAgICAgKiAgICAgfSk7CiAgICAgKgogICAgICogZGVmZXIxLnJlc29sdmUoMSk7CiAgICAgKiBkZWZlcjIucmVzb2x2ZSgyKTsKICAgICAqIGBgYAogICAgICoKICAgICAqIEBleGFtcGxlCiAgICAgKiB3aXRoIG9iamVjdDoKICAgICAqIGBgYGpzCiAgICAgKiB2YXIgZGVmZXIxID0gdm93LmRlZmVyKCksCiAgICAgKiAgICAgZGVmZXIyID0gdm93LmRlZmVyKCk7CiAgICAgKgogICAgICogdm93LmFsbCh7IHAxIDogZGVmZXIxLnByb21pc2UoKSwgcDIgOiBkZWZlcjIucHJvbWlzZSgpLCBwMyA6IDMgfSkKICAgICAqICAgICAudGhlbihmdW5jdGlvbih2YWx1ZSkgewogICAgICogICAgICAgICAgLy8gdmFsdWUgaXMgInsgcDEgOiAxLCBwMiA6IDIsIHAzIDogMyB9IiBoZXJlCiAgICAgKiAgICAgfSk7CiAgICAgKgogICAgICogZGVmZXIxLnJlc29sdmUoMSk7CiAgICAgKiBkZWZlcjIucmVzb2x2ZSgyKTsKICAgICAqIGBgYAogICAgICovCiAgICBhbGwgOiBmdW5jdGlvbihpdGVyYWJsZSkgewogICAgICAgIHZhciBkZWZlciA9IG5ldyBEZWZlcnJlZCgpLAogICAgICAgICAgICBpc1Byb21pc2VzQXJyYXkgPSBpc0FycmF5KGl0ZXJhYmxlKSwKICAgICAgICAgICAga2V5cyA9IGlzUHJvbWlzZXNBcnJheT8KICAgICAgICAgICAgICAgIGdldEFycmF5S2V5cyhpdGVyYWJsZSkgOgogICAgICAgICAgICAgICAgZ2V0T2JqZWN0S2V5cyhpdGVyYWJsZSksCiAgICAgICAgICAgIGxlbiA9IGtleXMubGVuZ3RoLAogICAgICAgICAgICByZXMgPSBpc1Byb21pc2VzQXJyYXk/IFtdIDoge307CgogICAgICAgIGlmKCFsZW4pIHsKICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShyZXMpOwogICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZSgpOwogICAgICAgIH0KCiAgICAgICAgdmFyIGkgPSBsZW47CiAgICAgICAgdm93Ll9mb3JFYWNoKAogICAgICAgICAgICBpdGVyYWJsZSwKICAgICAgICAgICAgZnVuY3Rpb24odmFsdWUsIGlkeCkgewogICAgICAgICAgICAgICAgcmVzW2tleXNbaWR4XV0gPSB2YWx1ZTsKICAgICAgICAgICAgICAgIGlmKCEtLWkpIHsKICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKHJlcyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRlZmVyLnJlamVjdCwKICAgICAgICAgICAgZGVmZXIubm90aWZ5LAogICAgICAgICAgICBkZWZlciwKICAgICAgICAgICAga2V5cyk7CgogICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlKCk7CiAgICB9LAoKICAgIC8qKgogICAgICogUmV0dXJucyBhIHByb21pc2UsIHRoYXQgd2lsbCBiZSBmdWxmaWxsZWQgb25seSBhZnRlciBhbGwgdGhlIGl0ZW1zIGluIGBpdGVyYWJsZWAgYXJlIHJlc29sdmVkLgogICAgICoKICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBpdGVyYWJsZQogICAgICogQHJldHVybnMge3ZvdzpQcm9taXNlfQogICAgICoKICAgICAqIEBleGFtcGxlCiAgICAgKiBgYGBqcwogICAgICogdmFyIGRlZmVyMSA9IHZvdy5kZWZlcigpLAogICAgICogICAgIGRlZmVyMiA9IHZvdy5kZWZlcigpOwogICAgICoKICAgICAqIHZvdy5hbGxSZXNvbHZlZChbZGVmZXIxLnByb21pc2UoKSwgZGVmZXIyLnByb21pc2UoKV0pLnNwcmVhZChmdW5jdGlvbihwcm9taXNlMSwgcHJvbWlzZTIpIHsKICAgICAqICAgICBwcm9taXNlMS5pc1JlamVjdGVkKCk7IC8vIHJldHVybnMgdHJ1ZQogICAgICogICAgIHByb21pc2UxLnZhbHVlT2YoKTsgLy8gcmV0dXJucyAiJ2Vycm9yJyIKICAgICAqICAgICBwcm9taXNlMi5pc0Z1bGZpbGxlZCgpOyAvLyByZXR1cm5zIHRydWUKICAgICAqICAgICBwcm9taXNlMi52YWx1ZU9mKCk7IC8vIHJldHVybnMgIidvayciCiAgICAgKiB9KTsKICAgICAqCiAgICAgKiBkZWZlcjEucmVqZWN0KCdlcnJvcicpOwogICAgICogZGVmZXIyLnJlc29sdmUoJ29rJyk7CiAgICAgKiBgYGAKICAgICAqLwogICAgYWxsUmVzb2x2ZWQgOiBmdW5jdGlvbihpdGVyYWJsZSkgewogICAgICAgIHZhciBkZWZlciA9IG5ldyBEZWZlcnJlZCgpLAogICAgICAgICAgICBpc1Byb21pc2VzQXJyYXkgPSBpc0FycmF5KGl0ZXJhYmxlKSwKICAgICAgICAgICAga2V5cyA9IGlzUHJvbWlzZXNBcnJheT8KICAgICAgICAgICAgICAgIGdldEFycmF5S2V5cyhpdGVyYWJsZSkgOgogICAgICAgICAgICAgICAgZ2V0T2JqZWN0S2V5cyhpdGVyYWJsZSksCiAgICAgICAgICAgIGkgPSBrZXlzLmxlbmd0aCwKICAgICAgICAgICAgcmVzID0gaXNQcm9taXNlc0FycmF5PyBbXSA6IHt9OwoKICAgICAgICBpZighaSkgewogICAgICAgICAgICBkZWZlci5yZXNvbHZlKHJlcyk7CiAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlKCk7CiAgICAgICAgfQoKICAgICAgICB2YXIgb25SZXNvbHZlZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgLS1pIHx8IGRlZmVyLnJlc29sdmUoaXRlcmFibGUpOwogICAgICAgICAgICB9OwoKICAgICAgICB2b3cuX2ZvckVhY2goCiAgICAgICAgICAgIGl0ZXJhYmxlLAogICAgICAgICAgICBvblJlc29sdmVkLAogICAgICAgICAgICBvblJlc29sdmVkLAogICAgICAgICAgICBkZWZlci5ub3RpZnksCiAgICAgICAgICAgIGRlZmVyLAogICAgICAgICAgICBrZXlzKTsKCiAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2UoKTsKICAgIH0sCgogICAgYWxsUGF0aWVudGx5IDogZnVuY3Rpb24oaXRlcmFibGUpIHsKICAgICAgICByZXR1cm4gdm93LmFsbFJlc29sdmVkKGl0ZXJhYmxlKS50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgaXNQcm9taXNlc0FycmF5ID0gaXNBcnJheShpdGVyYWJsZSksCiAgICAgICAgICAgICAgICBrZXlzID0gaXNQcm9taXNlc0FycmF5PwogICAgICAgICAgICAgICAgICAgIGdldEFycmF5S2V5cyhpdGVyYWJsZSkgOgogICAgICAgICAgICAgICAgICAgIGdldE9iamVjdEtleXMoaXRlcmFibGUpLAogICAgICAgICAgICAgICAgcmVqZWN0ZWRQcm9taXNlcywgZnVsZmlsbGVkUHJvbWlzZXMsCiAgICAgICAgICAgICAgICBsZW4gPSBrZXlzLmxlbmd0aCwgaSA9IDAsIGtleSwgcHJvbWlzZTsKCiAgICAgICAgICAgIGlmKCFsZW4pIHsKICAgICAgICAgICAgICAgIHJldHVybiBpc1Byb21pc2VzQXJyYXk/IFtdIDoge307CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHdoaWxlKGkgPCBsZW4pIHsKICAgICAgICAgICAgICAgIGtleSA9IGtleXNbaSsrXTsKICAgICAgICAgICAgICAgIHByb21pc2UgPSBpdGVyYWJsZVtrZXldOwogICAgICAgICAgICAgICAgaWYodm93LmlzUmVqZWN0ZWQocHJvbWlzZSkpIHsKICAgICAgICAgICAgICAgICAgICByZWplY3RlZFByb21pc2VzIHx8IChyZWplY3RlZFByb21pc2VzID0gaXNQcm9taXNlc0FycmF5PyBbXSA6IHt9KTsKICAgICAgICAgICAgICAgICAgICBpc1Byb21pc2VzQXJyYXk/CiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdGVkUHJvbWlzZXMucHVzaChwcm9taXNlLnZhbHVlT2YoKSkgOgogICAgICAgICAgICAgICAgICAgICAgICByZWplY3RlZFByb21pc2VzW2tleV0gPSBwcm9taXNlLnZhbHVlT2YoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYoIXJlamVjdGVkUHJvbWlzZXMpIHsKICAgICAgICAgICAgICAgICAgICAoZnVsZmlsbGVkUHJvbWlzZXMgfHwgKGZ1bGZpbGxlZFByb21pc2VzID0gaXNQcm9taXNlc0FycmF5PyBbXSA6IHt9KSlba2V5XSA9IHZvdy52YWx1ZU9mKHByb21pc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZihyZWplY3RlZFByb21pc2VzKSB7CiAgICAgICAgICAgICAgICB0aHJvdyByZWplY3RlZFByb21pc2VzOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gZnVsZmlsbGVkUHJvbWlzZXM7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIC8qKgogICAgICogUmV0dXJucyBhIHByb21pc2UsIHRoYXQgd2lsbCBiZSBmdWxmaWxsZWQgaWYgYW55IG9mIHRoZSBpdGVtcyBpbiBgaXRlcmFibGVgIGlzIGZ1bGZpbGxlZC4KICAgICAqIElmIGFsbCBvZiB0aGUgYGl0ZXJhYmxlYCBpdGVtcyBnZXQgcmVqZWN0ZWQsIHRoZSBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgKHdpdGggdGhlIHJlYXNvbiBvZiB0aGUgZmlyc3QgcmVqZWN0ZWQgaXRlbSkuCiAgICAgKgogICAgICogQHBhcmFtIHtBcnJheX0gaXRlcmFibGUKICAgICAqIEByZXR1cm5zIHt2b3c6UHJvbWlzZX0KICAgICAqLwogICAgYW55IDogZnVuY3Rpb24oaXRlcmFibGUpIHsKICAgICAgICB2YXIgZGVmZXIgPSBuZXcgRGVmZXJyZWQoKSwKICAgICAgICAgICAgbGVuID0gaXRlcmFibGUubGVuZ3RoOwoKICAgICAgICBpZighbGVuKSB7CiAgICAgICAgICAgIGRlZmVyLnJlamVjdChFcnJvcigpKTsKICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2UoKTsKICAgICAgICB9CgogICAgICAgIHZhciBpID0gMCwgcmVhc29uOwogICAgICAgIHZvdy5fZm9yRWFjaCgKICAgICAgICAgICAgaXRlcmFibGUsCiAgICAgICAgICAgIGRlZmVyLnJlc29sdmUsCiAgICAgICAgICAgIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIGkgfHwgKHJlYXNvbiA9IGUpOwogICAgICAgICAgICAgICAgKytpID09PSBsZW4gJiYgZGVmZXIucmVqZWN0KHJlYXNvbik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRlZmVyLm5vdGlmeSwKICAgICAgICAgICAgZGVmZXIpOwoKICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZSgpOwogICAgfSwKCiAgICAvKioKICAgICAqIFJldHVybnMgYSBwcm9taXNlLCB0aGF0IHdpbGwgYmUgZnVsZmlsbGVkIG9ubHkgd2hlbiBhbnkgb2YgdGhlIGl0ZW1zIGluIGBpdGVyYWJsZWAgaXMgZnVsZmlsbGVkLgogICAgICogSWYgYW55IG9mIHRoZSBgaXRlcmFibGVgIGl0ZW1zIGdldHMgcmVqZWN0ZWQsIHRoZSBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQuCiAgICAgKgogICAgICogQHBhcmFtIHtBcnJheX0gaXRlcmFibGUKICAgICAqIEByZXR1cm5zIHt2b3c6UHJvbWlzZX0KICAgICAqLwogICAgYW55UmVzb2x2ZWQgOiBmdW5jdGlvbihpdGVyYWJsZSkgewogICAgICAgIHZhciBkZWZlciA9IG5ldyBEZWZlcnJlZCgpLAogICAgICAgICAgICBsZW4gPSBpdGVyYWJsZS5sZW5ndGg7CgogICAgICAgIGlmKCFsZW4pIHsKICAgICAgICAgICAgZGVmZXIucmVqZWN0KEVycm9yKCkpOwogICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZSgpOwogICAgICAgIH0KCiAgICAgICAgdm93Ll9mb3JFYWNoKAogICAgICAgICAgICBpdGVyYWJsZSwKICAgICAgICAgICAgZGVmZXIucmVzb2x2ZSwKICAgICAgICAgICAgZGVmZXIucmVqZWN0LAogICAgICAgICAgICBkZWZlci5ub3RpZnksCiAgICAgICAgICAgIGRlZmVyKTsKCiAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2UoKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBTdGF0aWMgZXF1aXZhbGVudCB0byBgcHJvbWlzZS5kZWxheWAuCiAgICAgKiBJZiBgdmFsdWVgIGlzIG5vdCBhIHByb21pc2UsIHRoZW4gYHZhbHVlYCBpcyB0cmVhdGVkIGFzIGEgZnVsZmlsbGVkIHByb21pc2UuCiAgICAgKgogICAgICogQHBhcmFtIHsqfSB2YWx1ZQogICAgICogQHBhcmFtIHtOdW1iZXJ9IGRlbGF5CiAgICAgKiBAcmV0dXJucyB7dm93OlByb21pc2V9CiAgICAgKi8KICAgIGRlbGF5IDogZnVuY3Rpb24odmFsdWUsIGRlbGF5KSB7CiAgICAgICAgcmV0dXJuIHZvdy5yZXNvbHZlKHZhbHVlKS5kZWxheShkZWxheSk7CiAgICB9LAoKICAgIC8qKgogICAgICogU3RhdGljIGVxdWl2YWxlbnQgdG8gYHByb21pc2UudGltZW91dGAuCiAgICAgKiBJZiBgdmFsdWVgIGlzIG5vdCBhIHByb21pc2UsIHRoZW4gYHZhbHVlYCBpcyB0cmVhdGVkIGFzIGEgZnVsZmlsbGVkIHByb21pc2UuCiAgICAgKgogICAgICogQHBhcmFtIHsqfSB2YWx1ZQogICAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVvdXQKICAgICAqIEByZXR1cm5zIHt2b3c6UHJvbWlzZX0KICAgICAqLwogICAgdGltZW91dCA6IGZ1bmN0aW9uKHZhbHVlLCB0aW1lb3V0KSB7CiAgICAgICAgcmV0dXJuIHZvdy5yZXNvbHZlKHZhbHVlKS50aW1lb3V0KHRpbWVvdXQpOwogICAgfSwKCiAgICBfZm9yRWFjaCA6IGZ1bmN0aW9uKHByb21pc2VzLCBvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCwgb25Qcm9ncmVzcywgY3R4LCBrZXlzKSB7CiAgICAgICAgdmFyIGxlbiA9IGtleXM/IGtleXMubGVuZ3RoIDogcHJvbWlzZXMubGVuZ3RoLAogICAgICAgICAgICBpID0gMDsKCiAgICAgICAgd2hpbGUoaSA8IGxlbikgewogICAgICAgICAgICB2b3cud2hlbigKICAgICAgICAgICAgICAgIHByb21pc2VzW2tleXM/IGtleXNbaV0gOiBpXSwKICAgICAgICAgICAgICAgIHdyYXBPbkZ1bGZpbGxlZChvbkZ1bGZpbGxlZCwgaSksCiAgICAgICAgICAgICAgICBvblJlamVjdGVkLAogICAgICAgICAgICAgICAgb25Qcm9ncmVzcywKICAgICAgICAgICAgICAgIGN0eCk7CiAgICAgICAgICAgICsraTsKICAgICAgICB9CiAgICB9LAoKICAgIFRpbWVkT3V0RXJyb3IgOiBkZWZpbmVDdXN0b21FcnJvclR5cGUoJ1RpbWVkT3V0JykKfTsKCnZhciBkZWZpbmVBc0dsb2JhbCA9IHRydWU7CmlmKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gJ29iamVjdCcpIHsKICAgIG1vZHVsZS5leHBvcnRzID0gdm93OwogICAgZGVmaW5lQXNHbG9iYWwgPSBmYWxzZTsKfQoKaWYodHlwZW9mIG1vZHVsZXMgPT09ICdvYmplY3QnICYmIGlzRnVuY3Rpb24obW9kdWxlcy5kZWZpbmUpKSB7CiAgICBtb2R1bGVzLmRlZmluZSgndm93JywgZnVuY3Rpb24ocHJvdmlkZSkgewogICAgICAgIHByb3ZpZGUodm93KTsKICAgIH0pOwogICAgZGVmaW5lQXNHbG9iYWwgPSBmYWxzZTsKfQoKaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgZGVmaW5lKGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSkgewogICAgICAgIG1vZHVsZS5leHBvcnRzID0gdm93OwogICAgfSk7CiAgICBkZWZpbmVBc0dsb2JhbCA9IGZhbHNlOwp9CgpkZWZpbmVBc0dsb2JhbCAmJiAoZ2xvYmFsLnZvdyA9IHZvdyk7Cgp9KSh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJz8gd2luZG93IDogZ2xvYmFsKTsKCn0pLmNhbGwodGhpcyxyZXF1aXJlKCdfcHJvY2VzcycpLHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDoge30pCn0seyJfcHJvY2VzcyI6MX1dLDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CnZhciB3aW5kb3cgPSByZXF1aXJlKCJnbG9iYWwvd2luZG93IikKdmFyIG9uY2UgPSByZXF1aXJlKCJvbmNlIikKdmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCJpcy1mdW5jdGlvbiIpCnZhciBwYXJzZUhlYWRlcnMgPSByZXF1aXJlKCJwYXJzZS1oZWFkZXJzIikKdmFyIHh0ZW5kID0gcmVxdWlyZSgieHRlbmQiKQoKbW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVYSFIKY3JlYXRlWEhSLlhNTEh0dHBSZXF1ZXN0ID0gd2luZG93LlhNTEh0dHBSZXF1ZXN0IHx8IG5vb3AKY3JlYXRlWEhSLlhEb21haW5SZXF1ZXN0ID0gIndpdGhDcmVkZW50aWFscyIgaW4gKG5ldyBjcmVhdGVYSFIuWE1MSHR0cFJlcXVlc3QoKSkgPyBjcmVhdGVYSFIuWE1MSHR0cFJlcXVlc3QgOiB3aW5kb3cuWERvbWFpblJlcXVlc3QKCmZvckVhY2hBcnJheShbImdldCIsICJwdXQiLCAicG9zdCIsICJwYXRjaCIsICJoZWFkIiwgImRlbGV0ZSJdLCBmdW5jdGlvbihtZXRob2QpIHsKICAgIGNyZWF0ZVhIUlttZXRob2QgPT09ICJkZWxldGUiID8gImRlbCIgOiBtZXRob2RdID0gZnVuY3Rpb24odXJpLCBvcHRpb25zLCBjYWxsYmFjaykgewogICAgICAgIG9wdGlvbnMgPSBpbml0UGFyYW1zKHVyaSwgb3B0aW9ucywgY2FsbGJhY2spCiAgICAgICAgb3B0aW9ucy5tZXRob2QgPSBtZXRob2QudG9VcHBlckNhc2UoKQogICAgICAgIHJldHVybiBfY3JlYXRlWEhSKG9wdGlvbnMpCiAgICB9Cn0pCgpmdW5jdGlvbiBmb3JFYWNoQXJyYXkoYXJyYXksIGl0ZXJhdG9yKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaXRlcmF0b3IoYXJyYXlbaV0pCiAgICB9Cn0KCmZ1bmN0aW9uIGlzRW1wdHkob2JqKXsKICAgIGZvcih2YXIgaSBpbiBvYmopewogICAgICAgIGlmKG9iai5oYXNPd25Qcm9wZXJ0eShpKSkgcmV0dXJuIGZhbHNlCiAgICB9CiAgICByZXR1cm4gdHJ1ZQp9CgpmdW5jdGlvbiBpbml0UGFyYW1zKHVyaSwgb3B0aW9ucywgY2FsbGJhY2spIHsKICAgIHZhciBwYXJhbXMgPSB1cmkKCiAgICBpZiAoaXNGdW5jdGlvbihvcHRpb25zKSkgewogICAgICAgIGNhbGxiYWNrID0gb3B0aW9ucwogICAgICAgIGlmICh0eXBlb2YgdXJpID09PSAic3RyaW5nIikgewogICAgICAgICAgICBwYXJhbXMgPSB7dXJpOnVyaX0KICAgICAgICB9CiAgICB9IGVsc2UgewogICAgICAgIHBhcmFtcyA9IHh0ZW5kKG9wdGlvbnMsIHt1cmk6IHVyaX0pCiAgICB9CgogICAgcGFyYW1zLmNhbGxiYWNrID0gY2FsbGJhY2sKICAgIHJldHVybiBwYXJhbXMKfQoKZnVuY3Rpb24gY3JlYXRlWEhSKHVyaSwgb3B0aW9ucywgY2FsbGJhY2spIHsKICAgIG9wdGlvbnMgPSBpbml0UGFyYW1zKHVyaSwgb3B0aW9ucywgY2FsbGJhY2spCiAgICByZXR1cm4gX2NyZWF0ZVhIUihvcHRpb25zKQp9CgpmdW5jdGlvbiBfY3JlYXRlWEhSKG9wdGlvbnMpIHsKICAgIHZhciBjYWxsYmFjayA9IG9wdGlvbnMuY2FsbGJhY2sKICAgIGlmKHR5cGVvZiBjYWxsYmFjayA9PT0gInVuZGVmaW5lZCIpewogICAgICAgIHRocm93IG5ldyBFcnJvcigiY2FsbGJhY2sgYXJndW1lbnQgbWlzc2luZyIpCiAgICB9CiAgICBjYWxsYmFjayA9IG9uY2UoY2FsbGJhY2spCgogICAgZnVuY3Rpb24gcmVhZHlzdGF0ZWNoYW5nZSgpIHsKICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHsKICAgICAgICAgICAgbG9hZEZ1bmMoKQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBnZXRCb2R5KCkgewogICAgICAgIC8vIENocm9tZSB3aXRoIHJlcXVlc3RUeXBlPWJsb2IgdGhyb3dzIGVycm9ycyBhcnJvdW5kIHdoZW4gZXZlbiB0ZXN0aW5nIGFjY2VzcyB0byByZXNwb25zZVRleHQKICAgICAgICB2YXIgYm9keSA9IHVuZGVmaW5lZAoKICAgICAgICBpZiAoeGhyLnJlc3BvbnNlKSB7CiAgICAgICAgICAgIGJvZHkgPSB4aHIucmVzcG9uc2UKICAgICAgICB9IGVsc2UgaWYgKHhoci5yZXNwb25zZVR5cGUgPT09ICJ0ZXh0IiB8fCAheGhyLnJlc3BvbnNlVHlwZSkgewogICAgICAgICAgICBib2R5ID0geGhyLnJlc3BvbnNlVGV4dCB8fCB4aHIucmVzcG9uc2VYTUwKICAgICAgICB9CgogICAgICAgIGlmIChpc0pzb24pIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGJvZHkgPSBKU09OLnBhcnNlKGJvZHkpCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYm9keQogICAgfQoKICAgIHZhciBmYWlsdXJlUmVzcG9uc2UgPSB7CiAgICAgICAgICAgICAgICBib2R5OiB1bmRlZmluZWQsCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7fSwKICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IDAsCiAgICAgICAgICAgICAgICBtZXRob2Q6IG1ldGhvZCwKICAgICAgICAgICAgICAgIHVybDogdXJpLAogICAgICAgICAgICAgICAgcmF3UmVxdWVzdDogeGhyCiAgICAgICAgICAgIH0KCiAgICBmdW5jdGlvbiBlcnJvckZ1bmMoZXZ0KSB7CiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRUaW1lcikKICAgICAgICBpZighKGV2dCBpbnN0YW5jZW9mIEVycm9yKSl7CiAgICAgICAgICAgIGV2dCA9IG5ldyBFcnJvcigiIiArIChldnQgfHwgIlVua25vd24gWE1MSHR0cFJlcXVlc3QgRXJyb3IiKSApCiAgICAgICAgfQogICAgICAgIGV2dC5zdGF0dXNDb2RlID0gMAogICAgICAgIGNhbGxiYWNrKGV2dCwgZmFpbHVyZVJlc3BvbnNlKQogICAgfQoKICAgIC8vIHdpbGwgbG9hZCB0aGUgZGF0YSAmIHByb2Nlc3MgdGhlIHJlc3BvbnNlIGluIGEgc3BlY2lhbCByZXNwb25zZSBvYmplY3QKICAgIGZ1bmN0aW9uIGxvYWRGdW5jKCkgewogICAgICAgIGlmIChhYm9ydGVkKSByZXR1cm4KICAgICAgICB2YXIgc3RhdHVzCiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRUaW1lcikKICAgICAgICBpZihvcHRpb25zLnVzZVhEUiAmJiB4aHIuc3RhdHVzPT09dW5kZWZpbmVkKSB7CiAgICAgICAgICAgIC8vSUU4IENPUlMgR0VUIHN1Y2Nlc3NmdWwgcmVzcG9uc2UgZG9lc24ndCBoYXZlIGEgc3RhdHVzIGZpZWxkLCBidXQgYm9keSBpcyBmaW5lCiAgICAgICAgICAgIHN0YXR1cyA9IDIwMAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN0YXR1cyA9ICh4aHIuc3RhdHVzID09PSAxMjIzID8gMjA0IDogeGhyLnN0YXR1cykKICAgICAgICB9CiAgICAgICAgdmFyIHJlc3BvbnNlID0gZmFpbHVyZVJlc3BvbnNlCiAgICAgICAgdmFyIGVyciA9IG51bGwKCiAgICAgICAgaWYgKHN0YXR1cyAhPT0gMCl7CiAgICAgICAgICAgIHJlc3BvbnNlID0gewogICAgICAgICAgICAgICAgYm9keTogZ2V0Qm9keSgpLAogICAgICAgICAgICAgICAgc3RhdHVzQ29kZTogc3RhdHVzLAogICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7fSwKICAgICAgICAgICAgICAgIHVybDogdXJpLAogICAgICAgICAgICAgICAgcmF3UmVxdWVzdDogeGhyCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycyl7IC8vcmVtZW1iZXIgeGhyIGNhbiBpbiBmYWN0IGJlIFhEUiBmb3IgQ09SUyBpbiBJRQogICAgICAgICAgICAgICAgcmVzcG9uc2UuaGVhZGVycyA9IHBhcnNlSGVhZGVycyh4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpCiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBlcnIgPSBuZXcgRXJyb3IoIkludGVybmFsIFhNTEh0dHBSZXF1ZXN0IEVycm9yIikKICAgICAgICB9CiAgICAgICAgY2FsbGJhY2soZXJyLCByZXNwb25zZSwgcmVzcG9uc2UuYm9keSkKCiAgICB9CgogICAgdmFyIHhociA9IG9wdGlvbnMueGhyIHx8IG51bGwKCiAgICBpZiAoIXhocikgewogICAgICAgIGlmIChvcHRpb25zLmNvcnMgfHwgb3B0aW9ucy51c2VYRFIpIHsKICAgICAgICAgICAgeGhyID0gbmV3IGNyZWF0ZVhIUi5YRG9tYWluUmVxdWVzdCgpCiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIHhociA9IG5ldyBjcmVhdGVYSFIuWE1MSHR0cFJlcXVlc3QoKQogICAgICAgIH0KICAgIH0KCiAgICB2YXIga2V5CiAgICB2YXIgYWJvcnRlZAogICAgdmFyIHVyaSA9IHhoci51cmwgPSBvcHRpb25zLnVyaSB8fCBvcHRpb25zLnVybAogICAgdmFyIG1ldGhvZCA9IHhoci5tZXRob2QgPSBvcHRpb25zLm1ldGhvZCB8fCAiR0VUIgogICAgdmFyIGJvZHkgPSBvcHRpb25zLmJvZHkgfHwgb3B0aW9ucy5kYXRhIHx8IG51bGwKICAgIHZhciBoZWFkZXJzID0geGhyLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgfHwge30KICAgIHZhciBzeW5jID0gISFvcHRpb25zLnN5bmMKICAgIHZhciBpc0pzb24gPSBmYWxzZQogICAgdmFyIHRpbWVvdXRUaW1lcgoKICAgIGlmICgianNvbiIgaW4gb3B0aW9ucykgewogICAgICAgIGlzSnNvbiA9IHRydWUKICAgICAgICBoZWFkZXJzWyJhY2NlcHQiXSB8fCBoZWFkZXJzWyJBY2NlcHQiXSB8fCAoaGVhZGVyc1siQWNjZXB0Il0gPSAiYXBwbGljYXRpb24vanNvbiIpIC8vRG9uJ3Qgb3ZlcnJpZGUgZXhpc3RpbmcgYWNjZXB0IGhlYWRlciBkZWNsYXJlZCBieSB1c2VyCiAgICAgICAgaWYgKG1ldGhvZCAhPT0gIkdFVCIgJiYgbWV0aG9kICE9PSAiSEVBRCIpIHsKICAgICAgICAgICAgaGVhZGVyc1siY29udGVudC10eXBlIl0gfHwgaGVhZGVyc1siQ29udGVudC1UeXBlIl0gfHwgKGhlYWRlcnNbIkNvbnRlbnQtVHlwZSJdID0gImFwcGxpY2F0aW9uL2pzb24iKSAvL0Rvbid0IG92ZXJyaWRlIGV4aXN0aW5nIGFjY2VwdCBoZWFkZXIgZGVjbGFyZWQgYnkgdXNlcgogICAgICAgICAgICBib2R5ID0gSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5qc29uKQogICAgICAgIH0KICAgIH0KCiAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gcmVhZHlzdGF0ZWNoYW5nZQogICAgeGhyLm9ubG9hZCA9IGxvYWRGdW5jCiAgICB4aHIub25lcnJvciA9IGVycm9yRnVuYwogICAgLy8gSUU5IG11c3QgaGF2ZSBvbnByb2dyZXNzIGJlIHNldCB0byBhIHVuaXF1ZSBmdW5jdGlvbi4KICAgIHhoci5vbnByb2dyZXNzID0gZnVuY3Rpb24gKCkgewogICAgICAgIC8vIElFIG11c3QgZGllCiAgICB9CiAgICB4aHIub250aW1lb3V0ID0gZXJyb3JGdW5jCiAgICB4aHIub3BlbihtZXRob2QsIHVyaSwgIXN5bmMsIG9wdGlvbnMudXNlcm5hbWUsIG9wdGlvbnMucGFzc3dvcmQpCiAgICAvL2hhcyB0byBiZSBhZnRlciBvcGVuCiAgICBpZighc3luYykgewogICAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSAhIW9wdGlvbnMud2l0aENyZWRlbnRpYWxzCiAgICB9CiAgICAvLyBDYW5ub3Qgc2V0IHRpbWVvdXQgd2l0aCBzeW5jIHJlcXVlc3QKICAgIC8vIG5vdCBzZXR0aW5nIHRpbWVvdXQgb24gdGhlIHhociBvYmplY3QsIGJlY2F1c2Ugb2Ygb2xkIHdlYmtpdHMgZXRjLiBub3QgaGFuZGxpbmcgdGhhdCBjb3JyZWN0bHkKICAgIC8vIGJvdGggbnBtJ3MgcmVxdWVzdCBhbmQganF1ZXJ5IDEueCB1c2UgdGhpcyBraW5kIG9mIHRpbWVvdXQsIHNvIHRoaXMgaXMgYmVpbmcgY29uc2lzdGVudAogICAgaWYgKCFzeW5jICYmIG9wdGlvbnMudGltZW91dCA+IDAgKSB7CiAgICAgICAgdGltZW91dFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICBhYm9ydGVkPXRydWUvL0lFOSBtYXkgc3RpbGwgY2FsbCByZWFkeXN0YXRlY2hhbmdlCiAgICAgICAgICAgIHhoci5hYm9ydCgidGltZW91dCIpCiAgICAgICAgICAgIHZhciBlID0gbmV3IEVycm9yKCJYTUxIdHRwUmVxdWVzdCB0aW1lb3V0IikKICAgICAgICAgICAgZS5jb2RlID0gIkVUSU1FRE9VVCIKICAgICAgICAgICAgZXJyb3JGdW5jKGUpCiAgICAgICAgfSwgb3B0aW9ucy50aW1lb3V0ICkKICAgIH0KCiAgICBpZiAoeGhyLnNldFJlcXVlc3RIZWFkZXIpIHsKICAgICAgICBmb3Ioa2V5IGluIGhlYWRlcnMpewogICAgICAgICAgICBpZihoZWFkZXJzLmhhc093blByb3BlcnR5KGtleSkpewogICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoa2V5LCBoZWFkZXJzW2tleV0pCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuaGVhZGVycyAmJiAhaXNFbXB0eShvcHRpb25zLmhlYWRlcnMpKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJIZWFkZXJzIGNhbm5vdCBiZSBzZXQgb24gYW4gWERvbWFpblJlcXVlc3Qgb2JqZWN0IikKICAgIH0KCiAgICBpZiAoInJlc3BvbnNlVHlwZSIgaW4gb3B0aW9ucykgewogICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSBvcHRpb25zLnJlc3BvbnNlVHlwZQogICAgfQoKICAgIGlmICgiYmVmb3JlU2VuZCIgaW4gb3B0aW9ucyAmJgogICAgICAgIHR5cGVvZiBvcHRpb25zLmJlZm9yZVNlbmQgPT09ICJmdW5jdGlvbiIKICAgICkgewogICAgICAgIG9wdGlvbnMuYmVmb3JlU2VuZCh4aHIpCiAgICB9CgogICAgeGhyLnNlbmQoYm9keSkKCiAgICByZXR1cm4geGhyCgoKfQoKZnVuY3Rpb24gbm9vcCgpIHt9Cgp9LHsiZ2xvYmFsL3dpbmRvdyI6NSwiaXMtZnVuY3Rpb24iOjYsIm9uY2UiOjcsInBhcnNlLWhlYWRlcnMiOjEwLCJ4dGVuZCI6MTF9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewppZiAodHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIpIHsKICAgIG1vZHVsZS5leHBvcnRzID0gd2luZG93Owp9IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiKSB7CiAgICBtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbDsKfSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIpewogICAgbW9kdWxlLmV4cG9ydHMgPSBzZWxmOwp9IGVsc2UgewogICAgbW9kdWxlLmV4cG9ydHMgPSB7fTsKfQoKfSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDoge30pCn0se31dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IGlzRnVuY3Rpb24KCnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcKCmZ1bmN0aW9uIGlzRnVuY3Rpb24gKGZuKSB7CiAgdmFyIHN0cmluZyA9IHRvU3RyaW5nLmNhbGwoZm4pCiAgcmV0dXJuIHN0cmluZyA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJyB8fAogICAgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJyAmJiBzdHJpbmcgIT09ICdbb2JqZWN0IFJlZ0V4cF0nKSB8fAogICAgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmCiAgICAgLy8gSUU4IGFuZCBiZWxvdwogICAgIChmbiA9PT0gd2luZG93LnNldFRpbWVvdXQgfHwKICAgICAgZm4gPT09IHdpbmRvdy5hbGVydCB8fAogICAgICBmbiA9PT0gd2luZG93LmNvbmZpcm0gfHwKICAgICAgZm4gPT09IHdpbmRvdy5wcm9tcHQpKQp9OwoKfSx7fV0sNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzID0gb25jZQoKb25jZS5wcm90byA9IG9uY2UoZnVuY3Rpb24gKCkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGdW5jdGlvbi5wcm90b3R5cGUsICdvbmNlJywgewogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIG9uY2UodGhpcykKICAgIH0sCiAgICBjb25maWd1cmFibGU6IHRydWUKICB9KQp9KQoKZnVuY3Rpb24gb25jZSAoZm4pIHsKICB2YXIgY2FsbGVkID0gZmFsc2UKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgaWYgKGNhbGxlZCkgcmV0dXJuCiAgICBjYWxsZWQgPSB0cnVlCiAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKQogIH0KfQoKfSx7fV0sODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnaXMtZnVuY3Rpb24nKQoKbW9kdWxlLmV4cG9ydHMgPSBmb3JFYWNoCgp2YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nCnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkKCmZ1bmN0aW9uIGZvckVhY2gobGlzdCwgaXRlcmF0b3IsIGNvbnRleHQpIHsKICAgIGlmICghaXNGdW5jdGlvbihpdGVyYXRvcikpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpdGVyYXRvciBtdXN0IGJlIGEgZnVuY3Rpb24nKQogICAgfQoKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMykgewogICAgICAgIGNvbnRleHQgPSB0aGlzCiAgICB9CgogICAgaWYgKHRvU3RyaW5nLmNhbGwobGlzdCkgPT09ICdbb2JqZWN0IEFycmF5XScpCiAgICAgICAgZm9yRWFjaEFycmF5KGxpc3QsIGl0ZXJhdG9yLCBjb250ZXh0KQogICAgZWxzZSBpZiAodHlwZW9mIGxpc3QgPT09ICdzdHJpbmcnKQogICAgICAgIGZvckVhY2hTdHJpbmcobGlzdCwgaXRlcmF0b3IsIGNvbnRleHQpCiAgICBlbHNlCiAgICAgICAgZm9yRWFjaE9iamVjdChsaXN0LCBpdGVyYXRvciwgY29udGV4dCkKfQoKZnVuY3Rpb24gZm9yRWFjaEFycmF5KGFycmF5LCBpdGVyYXRvciwgY29udGV4dCkgewogICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoYXJyYXksIGkpKSB7CiAgICAgICAgICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgYXJyYXlbaV0sIGksIGFycmF5KQogICAgICAgIH0KICAgIH0KfQoKZnVuY3Rpb24gZm9yRWFjaFN0cmluZyhzdHJpbmcsIGl0ZXJhdG9yLCBjb250ZXh0KSB7CiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc3RyaW5nLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgLy8gbm8gc3VjaCB0aGluZyBhcyBhIHNwYXJzZSBzdHJpbmcuCiAgICAgICAgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBzdHJpbmcuY2hhckF0KGkpLCBpLCBzdHJpbmcpCiAgICB9Cn0KCmZ1bmN0aW9uIGZvckVhY2hPYmplY3Qob2JqZWN0LCBpdGVyYXRvciwgY29udGV4dCkgewogICAgZm9yICh2YXIgayBpbiBvYmplY3QpIHsKICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGspKSB7CiAgICAgICAgICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqZWN0W2tdLCBrLCBvYmplY3QpCiAgICAgICAgfQogICAgfQp9Cgp9LHsiaXMtZnVuY3Rpb24iOjZ9XSw5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKCmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHRyaW07CgpmdW5jdGlvbiB0cmltKHN0cil7CiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXHMqfFxzKiQvZywgJycpOwp9CgpleHBvcnRzLmxlZnQgPSBmdW5jdGlvbihzdHIpewogIHJldHVybiBzdHIucmVwbGFjZSgvXlxzKi8sICcnKTsKfTsKCmV4cG9ydHMucmlnaHQgPSBmdW5jdGlvbihzdHIpewogIHJldHVybiBzdHIucmVwbGFjZSgvXHMqJC8sICcnKTsKfTsKCn0se31dLDEwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIHRyaW0gPSByZXF1aXJlKCd0cmltJykKICAsIGZvckVhY2ggPSByZXF1aXJlKCdmb3ItZWFjaCcpCiAgLCBpc0FycmF5ID0gZnVuY3Rpb24oYXJnKSB7CiAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJnKSA9PT0gJ1tvYmplY3QgQXJyYXldJzsKICAgIH0KCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGhlYWRlcnMpIHsKICBpZiAoIWhlYWRlcnMpCiAgICByZXR1cm4ge30KCiAgdmFyIHJlc3VsdCA9IHt9CgogIGZvckVhY2goCiAgICAgIHRyaW0oaGVhZGVycykuc3BsaXQoJ1xuJykKICAgICwgZnVuY3Rpb24gKHJvdykgewogICAgICAgIHZhciBpbmRleCA9IHJvdy5pbmRleE9mKCc6JykKICAgICAgICAgICwga2V5ID0gdHJpbShyb3cuc2xpY2UoMCwgaW5kZXgpKS50b0xvd2VyQ2FzZSgpCiAgICAgICAgICAsIHZhbHVlID0gdHJpbShyb3cuc2xpY2UoaW5kZXggKyAxKSkKCiAgICAgICAgaWYgKHR5cGVvZihyZXN1bHRba2V5XSkgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICByZXN1bHRba2V5XSA9IHZhbHVlCiAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5KHJlc3VsdFtrZXldKSkgewogICAgICAgICAgcmVzdWx0W2tleV0ucHVzaCh2YWx1ZSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0W2tleV0gPSBbIHJlc3VsdFtrZXldLCB2YWx1ZSBdCiAgICAgICAgfQogICAgICB9CiAgKQoKICByZXR1cm4gcmVzdWx0Cn0KfSx7ImZvci1lYWNoIjo4LCJ0cmltIjo5fV0sMTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewptb2R1bGUuZXhwb3J0cyA9IGV4dGVuZAoKdmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTsKCmZ1bmN0aW9uIGV4dGVuZCgpIHsKICAgIHZhciB0YXJnZXQgPSB7fQoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXQoKICAgICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7CiAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgewogICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIHJldHVybiB0YXJnZXQKfQoKfSx7fV0sMTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKgogKiBtc2Etc2VxdG9vbHMKICogaHR0cHM6Ly9naXRodWIuY29tL2dyZWVuaWZ5L21zYS1zZXF0b29scwogKgogKiBDb3B5cmlnaHQgKGMpIDIwMTQgZ3JlZW5pZnkKICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLgogKi8KCnZhciBzdCA9IHt9Owptb2R1bGUuZXhwb3J0cyA9IHN0OwoKLy8gZXh0cmFjdCBJRHMgYW5kIHB1c2ggdGhlbSB0byB0aGUgbWV0YSBkaWN0CnN0LmdldE1ldGEgPSBmdW5jdGlvbihsYWJlbCkgewogIGlmIChzdC5jb250YWlucyhsYWJlbCwgInwiKSkgewogICAgdmFyIGlkZW50aWZpZXJzID0gbGFiZWwuc3BsaXQoInwiKTsKICAgIHZhciBrID0gMDsKICAgIHZhciBkYXRhYmFzZSwgZGF0YWJhc2VJRDsKICAgIHZhciBtZXRhID0ge307CiAgICB3aGlsZSAoayA8IGlkZW50aWZpZXJzLmxlbmd0aCAtIDEpIHsKICAgICAgZGF0YWJhc2UgPSBpZGVudGlmaWVyc1trXTsKICAgICAgZGF0YWJhc2VJRCA9IGlkZW50aWZpZXJzW2sgKyAxXTsKICAgICAgbWV0YVtkYXRhYmFzZV0gPSBkYXRhYmFzZUlEOwogICAgICBrICs9IDI7CiAgICB9CiAgICAvLyBhc3N1bWUgdGhlIGxhc3QgZW50cnkgaXMgdGhlIGxhYmVsCiAgICB2YXIgbmFtZSA9IGlkZW50aWZpZXJzW2lkZW50aWZpZXJzLmxlbmd0aCAtIDFdOwogICAgLy8gY2hlY2sgd2hldGhlciB0aGVyZSBpcyBhIHVuaXByb3QgaWQKICAgIGlmIChuYW1lLmluZGV4T2YoIj0iKSA+PSAwICYmIG5hbWUuaW5kZXhPZigiT1MiKSA+PSAwKSB7CiAgICAgIHZhciBkcyA9IHt9OwogICAgICB2YXIgZGV0YWlscyA9IG5hbWUuc3BsaXQoIiAiKTsKICAgICAgZHMuZW4gPSBkZXRhaWxzWzBdOwogICAgICBkZXRhaWxzID0gZGV0YWlscy5zcGxpY2UoMSk7CiAgICAgIHZhciBuYW1lTGVuZ3RoID0gZmluZFNlcEluQXJyKGRldGFpbHMsICI9Iik7CiAgICAgIHZhciBkZXRhaWxzVG1wID0gZGV0YWlscy5zcGxpY2UobmFtZUxlbmd0aCAtIDEpOwogICAgICBuYW1lID0gZGV0YWlscy5qb2luKCIgIik7CiAgICAgIGRldGFpbHMgPSBkZXRhaWxzVG1wOwogICAgICBrID0gMDsKICAgICAgdmFyIGJsb2NrID0gW107CiAgICAgIGRldGFpbHMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgYmxvY2sucHVzaChpdGVtKTsKICAgICAgICBpZiAoaXRlbS5pbmRleE9mKCI9IikgPj0gMCkgewogICAgICAgICAgc3RyVG9EaWN0KGJsb2NrLmpvaW4oIiAiKSwgIj0iLCBkcyk7CiAgICAgICAgICBibG9jayA9IFtdOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiB7CiAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICBpZHM6IG1ldGEsCiAgICAgICAgZGV0YWlsczogZHMKICAgICAgfTsKICAgIH0KICAgIHJldHVybiB7CiAgICAgIG5hbWU6IG5hbWUsCiAgICAgIGlkczogbWV0YQogICAgfTsKICB9CiAgcmV0dXJuIHsKICAgIG5hbWU6IGxhYmVsCiAgfTsKfTsKCnZhciBmaW5kU2VwSW5BcnIgPSBmdW5jdGlvbihhcnIsIHNlcCkgewogIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmdodDsgaSsrKSB7CiAgICBpZiAoYXJyW2ldLmluZGV4T2YoaSkpIHsKICAgICAgcmV0dXJuIGk7CiAgICB9CiAgfQogIHJldHVybiBhcnIubGVuZ3RoIC0gMTsKfTsKCnZhciBzdHJUb0RpY3QgPSBmdW5jdGlvbihzdHIsIHNlcCwgdG9Kb2luKSB7CiAgdG9Kb2luID0gdG9Kb2luIHx8IHt9OwogIHZhciBlbnRyaWVzID0gc3RyLnNwbGl0KHNlcCk7CiAgdG9Kb2luW2VudHJpZXNbMF0udG9Mb3dlckNhc2UoKV0gPSBlbnRyaWVzWzFdOwogIHJldHVybiB0b0pvaW47Cn07Cgp2YXIgaWRlbnREQiA9IHsKICAic3AiOiB7CiAgICBsaW5rOiAiaHR0cDovL3d3dy51bmlwcm90Lm9yZy8lcyIsCiAgICBuYW1lOiAiVW5pcHJvdCIKICB9LAogICJ0ciI6IHsKICAgIGxpbms6ICJodHRwOi8vd3d3LnVuaXByb3Qub3JnLyVzIiwKICAgIG5hbWU6ICJUcmVtYmwiCiAgfSwKICAiZ2IiOiB7CiAgICBsaW5rOiAiaHR0cDovL3d3dy5uY2JpLm5sbS5uaWguZ292L251Y2NvcmUvJXMiLAogICAgbmFtZTogIkdlbmJhbmsiCiAgfSwKICAicGRiIjogewogICAgbGluazogImh0dHA6Ly93d3cucmNzYi5vcmcvcGRiL2V4cGxvcmUvZXhwbG9yZS5kbz9zdHJ1Y3R1cmVJZD0lcyIsCiAgICBuYW1lOiAiUERCIgogIH0KfTsKCnN0LmJ1aWxkTGlua3MgPSBmdW5jdGlvbihtZXRhKSB7CiAgdmFyIGxpbmtzID0ge307CiAgbWV0YSA9IG1ldGEgfHwge307CiAgT2JqZWN0LmtleXMobWV0YSkuZm9yRWFjaChmdW5jdGlvbihpZCkgewogICAgaWYgKGlkIGluIGlkZW50REIpIHsKICAgICAgdmFyIGVudHJ5ID0gaWRlbnREQltpZF07CiAgICAgIHZhciBsaW5rID0gZW50cnkubGluay5yZXBsYWNlKCIlcyIsIG1ldGFbaWRdKTsKICAgICAgbGlua3NbZW50cnkubmFtZV0gPSBsaW5rOwogICAgfQogIH0pOwogIHJldHVybiBsaW5rczsKfTsKCgovLyBzZWFyY2ggZm9yIGEgdGV4dApzdC5jb250YWlucyA9IGZ1bmN0aW9uKHRleHQsIHNlYXJjaCkgewogIHJldHVybiAnJy5pbmRleE9mLmNhbGwodGV4dCwgc2VhcmNoLCAwKSAhPT0gLTE7Cn07CgovLyBzcGxpdCBhZnRlciBlLmcuIDgwIGNoYXJzCnN0LnNwbGl0TkNoYXJzID0gZnVuY3Rpb24odHh0LCBudW0pIHsKICB2YXIgaSwgX3JlZjsKICBudW0gPSBudW0gfHwgODA7CiAgdmFyIHJlc3VsdCA9IFtdOwogIGZvciAoaSA9IDAsIF9yZWYgPSB0eHQubGVuZ3RoIC0gMTsgaSA8PSBfcmVmOyBpICs9IG51bSkgewogICAgcmVzdWx0LnB1c2godHh0LnN1YnN0cihpLCBudW0pKTsKICB9CiAgcmV0dXJuIHJlc3VsdDsKfTsKCnN0LnJldmVyc2UgPSBmdW5jdGlvbihzZXEpIHsKICByZXR1cm4gc2VxLnNwbGl0KCcnKS5yZXZlcnNlKCkuam9pbignJyk7Cn0KCnN0LmNvbXBsZW1lbnQgPSBmdW5jdGlvbihzZXEpIHsKICB2YXIgbmV3U2VxID0gc2VxICsgIiI7CiAgdmFyIHJlcGxhY2VtZW50cyA9IFsKICAgIC8vIGNnCiAgICBbL2cvZywgIjAiXSwKICAgIFsvYy9nLCAiMSJdLAogICAgWy8wL2csICJjIl0sCiAgICBbLzEvZywgImciXSwKICAgIC8vIENHCiAgICBbL0cvZywgIjAiXSwKICAgIFsvQy9nLCAiMSJdLAogICAgWy8wL2csICJDIl0sCiAgICBbLzEvZywgIkciXSwKICAgIC8vIGF0CiAgICBbL2EvZywgIjAiXSwKICAgIFsvdC9nLCAiMSJdLAogICAgWy8wL2csICJ0Il0sCiAgICBbLzEvZywgImEiXSwKICAgIC8vIEFUCiAgICBbL0EvZywgIjAiXSwKICAgIFsvVC9nLCAiMSJdLAogICAgWy8wL2csICJUIl0sCiAgICBbLzEvZywgIkEiXSwKICBdOwoKICBmb3IodmFyIHJlcCBpbiByZXBsYWNlbWVudHMpewogICAgbmV3U2VxID0gbmV3U2VxLnJlcGxhY2UocmVwbGFjZW1lbnRzW3JlcF1bMF0sIHJlcGxhY2VtZW50c1tyZXBdWzFdKTsKICB9CiAgcmV0dXJuIG5ld1NlcTsKfQoKc3QucmV2ZXJzZUNvbXBsZW1lbnQgPSBmdW5jdGlvbihzZXEpewogIHJldHVybiBzdC5yZXZlcnNlKHN0LmNvbXBsZW1lbnQoc2VxKSk7Cn0KCnN0Lm1vZGVsID0gZnVuY3Rpb24gU2VxKHNlcSwgbmFtZSwgaWQpIHsKICB0aGlzLnNlcSA9IHNlcTsKICB0aGlzLm5hbWUgPSBuYW1lOwogIHRoaXMuaWQgPSBpZDsKICB0aGlzLmlkcyA9IHt9Owp9OwoKfSx7fV0sImJpb2pzLWlvLWZhc3RhIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS45LjAKdmFyIEZhc3RhLCBHZW5lcmljUmVhZGVyLCBzdDsKCkdlbmVyaWNSZWFkZXIgPSByZXF1aXJlKCJiaW9qcy1pby1wYXJzZXIiKTsKCnN0ID0gcmVxdWlyZSgibXNhLXNlcXRvb2xzIik7Cgptb2R1bGUuZXhwb3J0cyA9IEZhc3RhID0gewogIHBhcnNlOiBmdW5jdGlvbih0ZXh0KSB7CiAgICB2YXIgY3VycmVudFNlcSwga2V5cywgbGFiZWwsIGxpbmUsIG9iaiwgc2VxcywgX2ksIF9sZW47CiAgICBzZXFzID0gW107CiAgICBpZiAoIXRleHQgfHwgdGV4dC5sZW5ndGggPT09IDApIHsKICAgICAgcmV0dXJuIFtdOwogICAgfQogICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0ZXh0KSAhPT0gJ1tvYmplY3QgQXJyYXldJykgewogICAgICB0ZXh0ID0gdGV4dC5zcGxpdCgiXG4iKTsKICAgIH0KICAgIGZvciAoX2kgPSAwLCBfbGVuID0gdGV4dC5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICBsaW5lID0gdGV4dFtfaV07CiAgICAgIGlmIChsaW5lWzBdID09PSAiPiIgfHwgbGluZVswXSA9PT0gIjsiKSB7CiAgICAgICAgbGFiZWwgPSBsaW5lLnNsaWNlKDEpOwogICAgICAgIG9iaiA9IHN0LmdldE1ldGEobGFiZWwpOwogICAgICAgIGxhYmVsID0gb2JqLm5hbWU7CiAgICAgICAgY3VycmVudFNlcSA9IG5ldyBzdC5tb2RlbCgiIiwgbGFiZWwsIHNlcXMubGVuZ3RoKTsKICAgICAgICBjdXJyZW50U2VxLmlkcyA9IG9iai5pZHMgfHwge307CiAgICAgICAga2V5cyA9IE9iamVjdC5rZXlzKGN1cnJlbnRTZXEuaWRzKTsKICAgICAgICBpZiAoa2V5cy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBjdXJyZW50U2VxLmlkID0gY3VycmVudFNlcS5pZHNba2V5c1swXV07CiAgICAgICAgfQogICAgICAgIGN1cnJlbnRTZXEuZGV0YWlscyA9IG9iai5kZXRhaWxzIHx8IHt9OwogICAgICAgIHNlcXMucHVzaChjdXJyZW50U2VxKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjdXJyZW50U2VxLnNlcSArPSBsaW5lOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gc2VxczsKICB9LAogIHdyaXRlOiBmdW5jdGlvbihzZXFzLCBhY2Nlc3MpIHsKICAgIHZhciBzZXEsIHRleHQsIF9pLCBfbGVuOwogICAgdGV4dCA9ICIiOwogICAgZm9yIChfaSA9IDAsIF9sZW4gPSBzZXFzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgIHNlcSA9IHNlcXNbX2ldOwogICAgICBpZiAoYWNjZXNzICE9IG51bGwpIHsKICAgICAgICBzZXEgPSBhY2Nlc3Moc2VxKTsKICAgICAgfQogICAgICB0ZXh0ICs9ICI+IiArIHNlcS5uYW1lICsgIlxuIjsKICAgICAgdGV4dCArPSAoc3Quc3BsaXROQ2hhcnMoc2VxLnNlcSwgODApKS5qb2luKCJcbiIpOwogICAgICB0ZXh0ICs9ICJcbiI7CiAgICB9CiAgICByZXR1cm4gdGV4dDsKICB9Cn07CgpHZW5lcmljUmVhZGVyLm1peGluKEZhc3RhKTsKCn0seyJiaW9qcy1pby1wYXJzZXIiOjIsIm1zYS1zZXF0b29scyI6MTJ9XX0se30sW10pOwo="></script>
<script src="data:application/x-javascript;base64,SFRNTFdpZGdldHMud2lkZ2V0KHsKCiAgbmFtZTogJ21zYVInLAoKICB0eXBlOiAnb3V0cHV0JywKCiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oZWwsIHdpZHRoLCBoZWlnaHQpIHsKCiAgICB2YXIgcm9vdERpdiA9IGVsOwoKICAgIHJldHVybiB7CiAgICAgIG1zYTogbXNhLAogICAgICBlbDogcm9vdERpdiwKICAgICAgcGFyc2U6IHJlcXVpcmUoImJpb2pzLWlvLWZhc3RhIikucGFyc2UKICAgIH07CiAgfSwKCiAgcmVuZGVyVmFsdWU6IGZ1bmN0aW9uKGVsLCB4LCBpbnN0YW5jZSkgewogICAgdmFyIG9wdHMgPSB4LmNvbmZpZzsKICAgIG9wdHMuZWwgPSBpbnN0YW5jZS5lbDsKICAgIG9wdHMuc2VxcyA9IGluc3RhbmNlLnBhcnNlKHguYWxpZ25tZW50KTsKCiAgICAvLyBpbml0IG1zYQogICAgdmFyIG0gPSBpbnN0YW5jZS5tc2Eob3B0cyk7CiAgICB2YXIgdGVzdCA9IG0uZy5jb2xvcnNjaGVtZS5zZXQoInNjaGVtZSIsICJudWNsZW90aWRlIik7CgogICAgaWYoeC5tZW51KXsKICAgICAgLy8gdGhlIG1lbnUgaXMgaW5kZXBlbmRlbnQgdG8gdGhlIE1TQSBjb250YWluZXIKICAgICAgdmFyIG1lbnVPcHRzID0ge307CiAgICAgIG1lbnVPcHRzLmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RpdicpOwogICAgICBtZW51T3B0cy5tc2EgPSBtOwogICAgICBtZW51T3B0cy5tZW51ID0gInNtYWxsIjsKICAgICAgdmFyIGRlZk1lbnUgPSBuZXcgbXNhLm1lbnUuZGVmYXVsdG1lbnUobWVudU9wdHMpOwogICAgICBtLmFkZFZpZXcoIm1lbnUiLCBkZWZNZW51KTsKICAgIH0KCiAgICAvLyBzYXZlIG1zYSBpbnN0YW5jZSB0byB3aW5kb3cgb2JqZWN0IHNvIGl0IGNhbiBiZSBoYWNrZWQgdXNpbmcgc2hpbnlqcwogICAgaWYoeC5mZWF0dXJlcyl7CiAgICAgIHZhciBmZWF0dXJlcyA9IHsKICAgICAgICBjb25maWc6IHsKICAgICAgICAgIHR5cGU6ICJnZmYzIgogICAgICAgIH0sCiAgICAgICAgc2Vxczoge30KICAgICAgfTsKCiAgICAgIGZvcih2YXIgaT0wOyBpPHguZmVhdHVyZXMubGVuZ3RoOyBpKyspewogICAgICAgIGlmKGZlYXR1cmVzLnNlcXNbeC5mZWF0dXJlc1tpXS5zZXFOYW1lXSA9PT0gdW5kZWZpbmVkIHx8IGZlYXR1cmVzLnNlcXNbeC5mZWF0dXJlc1tpXS5zZXFOYW1lXSA9PT0gbnVsbCl7CiAgICAgICAgICBmZWF0dXJlcy5zZXFzW3guZmVhdHVyZXNbaV0uc2VxTmFtZV0gPSBbXTsKICAgICAgICB9CiAgICAgICAgZmVhdHVyZXMuc2Vxc1t4LmZlYXR1cmVzW2ldLnNlcU5hbWVdLnB1c2goewogICAgICAgICAgYXR0cmlidXRlczogewogICAgICAgICAgICBDb2xvcjogIiM0Mjg1ZjQiLAogICAgICAgICAgICBOYW1lOiAic2dSTkEiCiAgICAgICAgICB9LAogICAgICAgICAgZW5kOiB4LmZlYXR1cmVzW2ldLmVuZCwKICAgICAgICAgIGZlYXR1cmU6ICJnZW5lIiwKICAgICAgICAgIHN0YXJ0OiB4LmZlYXR1cmVzW2ldLnN0YXJ0CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIG0uc2Vxcy5hZGRGZWF0dXJlcyhmZWF0dXJlcyk7CiAgICB9CgogICAgLy8gY2FsbCByZW5kZXIgYXQgdGhlIGVuZCB0byBkaXNwbGF5IHRoZSB3aG9sZSBNU0EKICAgIG0ucmVuZGVyKCk7CiAgfSwKCiAgcmVzaXplOiBmdW5jdGlvbihlbCwgd2lkdGgsIGhlaWdodCwgaW5zdGFuY2UpIHsKCiAgfQoKfSk7Cg=="></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">Using msaR</h1>
<h4 class="author"><em>Zach Charlop-Powers</em></h4>
<h4 class="date"><em>2016-12-05</em></h4>



<div id="basic-usage" class="section level2">
<h2>Basic Usage</h2>
<p>msaR is a an <a href="https://github.com/ramnathv/htmlwidgets">htmlwidgets</a> wrapper of the <a href="https://github.com/wilzbach/msa">BioJS MSA viewer</a> javascript library. msa will pass alignments to the BioJS MSA and has a convenience funtion that will handle the following formats:</p>
<ol style="list-style-type: decimal">
<li>A character string which is interpreted to be a fastafile (opened by <code>ape::read.dna</code>)</li>
<li>A DNAbin class object (ape)</li>
<li>An XStringSet (Biostrings) including DNAStringSet, RNAStringSet, AAStringSet, and BStringSet</li>
<li>An XMultiple Alignment (Biostings) including DNAMultipleAlignment,RNAMultipleAlignment, andAAMultipleAlignment</li>
</ol>
<p>Any of these types of objects can be passed to msaR to create an html widget:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(msaR)

<span class="co"># read some sequences from a Multiple sequence alignment file.</span>
seqfile &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;sequences&quot;</span>,<span class="st">&quot;AHBA.aln&quot;</span>, <span class="dt">package=</span><span class="st">&quot;msaR&quot;</span>)

<span class="co"># display the MSA.</span>
<span class="kw">msaR</span>(seqfile, <span class="dt">menu=</span>F, <span class="dt">overviewbox =</span> F)</code></pre></div>
<div id="htmlwidget-2cab52476a40bd3033cc" style="width:288px;height:288px;" class="msaR html-widget"></div>
<script type="application/json" data-for="htmlwidget-2cab52476a40bd3033cc">{"x":{"alignment":">Hygrocin_AHBA\n--atg--------------------------------------------------------agcaatgatgtgcgactgcga-------tccgagctgcccgcatggccgcagtacggcgacgaggagcgcgaggccctcatccgggctctggatcaggggcaatggtggcgtatcgggggcggtgaggtcgacgccttcgaggcggagttcgccgcggcccatgggagcgagcacgccctggcggtcaccaatgggacgcatgcgctggagctcgccctcgaagtgctcggggtcggcaccgactccgaggtgatcgttcccgcgttcaccttcatctcgtcctcgcaggcggctcagcggctgggcgcggtggccgtgcccgtggacgtggacccggacacgtactgcatcgatccctcggcggtcgaggcagccatcggcccgaaaacccgcgcgatcatgccggtgcacatggcgggccagatgtgcgacatggacgcgctgggcaagctgtccgccgactcgggggtgccgctgatccaggacgcggcccatgcgcacggtgcgcggtggcgcggtcagaaggtcggtgagctgggctcggtcgccgcgttcagcttccagaacggaaagctgatgacggccggtgagggcggcgccgtgctcttccccgatgccgagatgtacgagaggggcttcgtccggcacagctgtggacgtccgcgcaccgaccgcggctacttccaccgcacctcgggctccaacttccggctgaacgagttctccgcatccgtactgcgcgcccaactcgcccgcctggacggccagatcaccacgcgtgagcagcgctggccggtgctgagccggctgctcgccgaaatccccggtgtggtaccgcagtcgcgcgacgaccgcggtgaccgcaatccgcactacatggcgatgttccgggtgccgggcatcaccgaggagcgccgcgcgaaggtcgtcgacaccctcatcgagcgcggggtgcccgcgtttgtcgcgttccgcgcggtctaccgtacggacgccttctgggaggtcgcggcgccggatctgacggtggacgaactcgcccgccgctgcccgcactccgaggcgctcacccgcgactgcctttggctgcaccaccgggtgctgctgggcagcgaggagcagatgcacgaagtggccgccgtcgtcgccgatgtgctcgcgggcgcatga\n>Macbecin_AHBA\n--atg-----------------------------------------------------------agcaattctccggacgca----ggcatcgagttcccggcctggccgcagcacgacgacgccgagcgcacggccctgctgcgcgcgctggaccagggccagtggtggcgggtcggcggcagcgaggtcgacgagttcgagcgcgagttcgccgagtaccacggcgcgggccacgcgctcgccgtcaccaacgggacgcacgcgctggagctggcgctccaggtgctcgacgtgggccccggcgccgaggtgatcgtgcccgccttcaccttcatctcgtcctcgcaggccgtgcagcgcctcggcgcggtcgccgtgcccgtggacgtcgaccccgacacctactgcctggacgtcgccgccgccgaggccgccgtcacctcccgcacctcggcgatcatgcccgtgcacatggcgggccagttcgccgacatggaccggctggacaagctgtccacgagcaccggcgtgccggtcctgcaggacgccgcccacgcccacggcgcccactggcgcggcaagcgggtcggcgagctcgggtcgatcgccacgttcagcttccagaacggcaagctgatgacggcgggcgagggcggggccgtgctgttcgaggacgaggcccagtgggagaaggcgttcgtcctgcacagctgcggcaggcccaagggcgaccgcggctacttccacctcacctcgggctcgaacttccggatgaacgagttctccgccgccgtgctgcgcgcccagctcggcaggctggactcgcagatcgcgaccaggcaggcccgctggccggtgctgtccgcgctgctggcggggatcgacggcgtcgtgccgcagaccgtcgacccgcgcagcgaccgcaacccgagctacatggcgatgttccggatgcccggcgtcaccgaggagcggcgcaacgcggtggtggacgagctggtgcggcgcgggatcccggcgttcatggcgttccgggcggtctaccgcacccaggcgttctgggagaccggcgcgcccgacctgaccaccgaggagctggccgcccggtgcccggtgtcggaggagatcacccgcgactgcgtgtggctgcaccaccgggtgctgctgggcaccgaggagcagctgcaccggcttgccgccgtcgtggccgacgtggtcgcgggcgcgtga\n>Ansatrienin_AHBA\n--gtg--------------------------------------------------------cacctgaaggccccgcagaag-------ctggagttccccgcctggccgcagttcgactcgaccgagcgcgaggccctgctgcgcacgctcgacagcggccggtggtggcggatcaccggggacgaggtcgtctcgttcgagcgggagttcgcgcaggcccacggcgcccggcacgcgctcgccgtcaccacgggcacgcacgccctcgaactcgtcctggaggtcatgggcgccgggcctggcaccgaggtgatcgtgcccgcgttcaccttcatctcctcctcgcaggccgcccagcggctcggcgcggtcgtcgtccccgtcgacgtcgacccggacacctactgcgtcgacccggccgccgtgcgggccgcgatcaccgagcgcaccagggcgatcatgcccgtgcacatggcgggccagctcgccgacatggacgcgctgcgcgccctgtccgccgagaccggcgtcccgctgctccaggacgccgcgcacgcccacggcgcgcggtggcgcggcgagcccctcggcgcgctcggctcgatcgccgccttcagcttccagaacggcaagctgatgaccgcgggcgagggcggcgccgtgctgctcccggacggggaccagcacgaggaggcgttcctgcgccacgcctgcgggcgcccgctcgccgaccgggcctaccaccaccgcacggccgggtcgaacttccgcatgaacgagttctccgccgcgctgctgcgcgcccagctcggcaggctccagcagcagaccgacgtgcgcgagcggcactggcccgtgctgtcgcggctgctcgccgaggtgcccggcgtcgtcccgcaggggaccgacccgcgctgcgaccgcaacccgcactacatggccatgttccaggtccccggcatcggcgaggagcgccgcgcccgcctggtcgacgcgctggtcgagcgcggagtcccggcgttcgccgggttccgcgcgatctaccgcaccgccgcgttctgggagcgcgccgcccccgacaccacggtggacgccctcgcccgcgcctgcccggtcacggaagcgctcagcagcgactgcgtgtggctgcaccaccgggtgctgctgggggcggaggagcagatgccgctggtggcggaggccgtcgcctgcgcgctggaggaggcctga\n>Ansamitocin_AHBA\n--gtg--------------------------------------------------------cacctgaaggccccgcagaag-------ctggagttccccgcctggccgcagttcgactcgaccgagcgcgaggccctgctgcgcacgctcgacagcggccggtggtggcggatcaccggggacgaggtcgtctcgttcgagcgggagttcgcgcaggcccacggcgcccggcacgcgctcgccgtcaccacgggcacgcacgccctcgaactcgtcctggaggtcatgggcgccgggcctggcaccgaggtgatcgtgcccgcgttcaccttcatctcctcctcgcaggccgcccagcggctcggcgcggtcgtcgtccccgtcgacgtcgacccggacacctactgcgtcgacccggccgccgtgcgggccgcgatcaccgagcgcaccagggcgatcatgcccgtgcacatggcgggccagctcgccgacatggacgcgctgcgcgccctgtccgccgagaccggcgtcccgctgctccaggacgccgcgcacgcccacggcgcgcggtggcgcggcgagcccctcggcgcgctcggctcgatcgccgccttcagcttccagaacggcaagctgatgaccgcgggcgagggcggcgccgtgctgctcccggacggggaccagcacgaggaggcgttcctgcgccacgcctgcgggcgcccgctcgccgaccgggcctaccaccaccgcacggccgggtcgaacttccgcatgaacgagttctccgccgcgctgctgcgcgcccagctcggcaggctccagcagcagaccgacgtgcgcgagcggcactggcccgtgctgtcgcggctgctcgccgaggtgcccggcgtcgtcccgcaggggaccgacccgcgctgcgaccgcaacccgcactacatggccatgttccaggtccccggcatcggcgaggagcgccgcgcccgcctggtcgacgcgctggtcgagcgcggagtcccggcgttcgccgggttccgcgcgatctaccgcaccgccgcgttctgggagcgcgccgcccccgacaccacggtggacgccctcgcccgcgcctgcccggtcacggaagcgctcagcagcgactgcgtgtggctgcaccaccgggtgctgctgggggcggaggagcagatgccgctggtggcggaggccgtcgcctgcgcgctggaggaggcctga\n>Divergolide_AHBA\n--atgacgagaggttttcaccctggttatcgtgcgggccgagaatcattcgaggagggctggcgaacaatgctggacaaggaactcgacctggatttcccggcgtggccgcagtacgacgacaccgagcgtgccgggctcgtccgtgccctggagcagggacagtggtggcgtatcggcggcagtgaggtggacgagttcgagcgcgagttcgccgaggcgaacggtgccccgcacgcgctcgcggtgacgaccggcacgcacgccctggaactggcactgcaggtgctcggcgtcggccccggcaccgaggtcgtcgtgccggcgttcaccttcatctcgtcgtcgcaggccgcgcagcgactgggcgcggtggccgtcccggtcgacgtcgacctggacacgtactgcctggaccccgaggcggtggcggcggcgatcacgccgcgcaccgcggcgatcatgccggtgcacatggccggtcagatctgcgacatggacgccctcggcaagctgtcggcggactccggcgtcccgctgctgcacgacgccgcgcacgcgcacggcgggcggtggcgcgaccagggcgtgtcggcgctgggcacgatggcggcgttcagcttccagaacggcaagctgatgaccgcgggcgagggcggcgcggtcaccttcccggacagcgagcagtacgagacggcgttcctccggcacagctgcggccgcccccgcacggaccgcacctaccggcaccagacctccggctccaacttccggatgaacgagttcaccgcgagcgtgctgcgcgcccaactggcccggctcgacggccagatcgacacccgggagcagcgctggccggtgctggccggacaactcgcgcggatcacgggcgtgctgccgcaggccaccgacgaccggtgcacccgcaacccgcactacatggccatgttccgggtgcccggcatctccgaacagcagcgcaacgaactggtcgacgcgctggtggcccgcggcctgccggccttcgcggcgttccgcgcgatccatcgcaccaaggcgttctgggagaccggggcgcccgacgaaccggtcgaggcgatcgcccggcggtgcccgaacagcgaggcgctgtccaccgactgcgtctggctgcaccaccggaccctgctcggcaccgaggagcagatgcacgccgtcgccgaggtcgtctccgacgcgctggcggcgtcgtga\n>Rubradirin_AHBA\n--atg--------------------------------------------------------------agtccgcgaccgagg-------ccgacctttccggattggccgcaattcgatgacaccgaacgccgagctcttgatcgtgcgctgtcccagggccagtggtggcgcatgggtggcagcgaggtggacagcttcgagcgggagttcgccggataccacggtgcccaccacgccctcgccgtcaccaacggcacgcacgcgctggagctcgccctgcaggtgctgggtgcgggaccgggcaccgaagtgatcgtgccggcgttcaccttcatctcctcgtcccaggccgctcagcggatcggggccgtcgccgtgccggtggacgtcgatccggagacctacaacatcgacgcgaccgccaccgccgaggcgatcacaccgcggacccgggtgatcatgccggtgcacatggcgggtctcatggccgacatggacgcactggacaagctcgcctccgatgccggcgtccggatccttcaggacgcggcccacgcgcacggtgcccggtggcggggcaagcgcgtgggcgagctgggctcgatcgcggcgttcagcttccagaacggcaagctgatgaccgcgggcgagggcggcgcggtgctgttcttggacccggacgactacgagaaggcattcctgcatcactcctgcggccggccgcgcaccgaccgcaactatcaccaccaggtggccggcaccaacatgcggatgaacgagttctcggccgccgtcctgcgcgctcagctgggccgcctcgacggccagatcgagctgcgcgagcagcggtggcggttgctgtcgcagctcttggcccagatccccggcgtccggccgcagggcggtgatgcgcgggccgaccggaatccgcactacatggcgatgttccggcttcccggctggtcggaggagcgtcgcaacctcctcgtcgatcgcctggtcgacgcggggatcccggcgttcgcgggcttccgcgccatctaccgcaccgcggcgttctgggagaccggcgcacccgaggagtccgtcgacgcggtcgccaagcggtgccccaacgccgacgcgatcagccaggactgcgtctggctgcaccaccgcaccctgctcgcgtcggagcaggctctcaccgacaccgccgccatcgtggccgaccaggtggccgccggatga\n>Napthomycin_AHBA\n--atg--------------------------------------------------------------aacgcgcgaccggca-------ccggaattcccgaagtggccgcagtacgacgacgaagagcggaccggactgatccgggccctggaacaaggccagtggtggcgcatgggcggggaggaagtcgactccttcgagcgtgagttcgccgacttccacggcgccccgcacgccctggccgtcaccaacggcacccaggccctcgaactcgccctccaggtgctgggcgtcggtccggggaccgaggtcatcgtgccggccttcaccttcatctcctcctcccaggccgcccagcgcatcggcgcggtcgccgtccccgtcgacgtcgacccgggcacgtacaacatcgacgtcgccgcggccgccgccgccgtcaccccgcgcacccgggcgatcatgcccgtgcacatggccggtctgccggccgacatggacgccctcggcaagctcgccgccgacaccggcgtatcgatcgtgcaggacgcggcccacgcccagggcgcccgctggcagggcaagcgggtcggcgaactcggttcggtcgccgtgttctccttccagaacggcaagttgatgaccgccggtgagggcggcgccgtcctgttccccgacagcggcctgcacgaggcggcgttcctgcggcacagctgcggtcggccgcgtaccgaccgccactaccggcacgaggtcgcgggcaccaacatgcggctcaacgagttctccgccgccgtgctgcgcgcccagctgcgccgcctgcccgcccagaccgaactgcgcgacaagcggtgggcgctgctgtcccggctgctcggcgccatcgacggcgtcgtaccgcagagcggtgacgcccgcgccgaccagaacacgcactacatggcgatgttccgggtccccggcatctccgaggagacccgtaacgcgctggtcgaccggctggtcgacgccgggctgcccgccttcgccgcgttccgcgccatccaccgcaccgacgccttctgggaggtcggcgcccccgacgagaccgtggagcagatcgccgagcgctgcccgaacaccgaggccatcagcgacgactgcgtctggctgcaccaccgggtgctcctcgccgaggagcgggacctggagatcacggccgagatcatcgcggacgcagtggccgccatatga\n>Neoansalactam_AHBA\nacatg--------------------------------------------------------------aacgcgcgacggacg-------ccagagttccccacctggccgcagtacgacgacggcgagcgcaccggcctgatccgggccctggagcagggccagtggtggcgcatgggaggctcggaggtggactccttcgagagtgagttcgcggacttccacggtgccccacacgctttggccgtcaccaacggcacccacgccctggagttggcgttgcagtgtctgggcgtcgggccgggcaccgaggtcatcgtgccggccttcaccttcatctcctcctcccaggccgctcagcggctgggagcggttgccgtccccgtcgacgtcgatctcgatacctacaacatcgacgtggctgccgcggcttccgccgtcacccccctcaccaaggcgatcatgcctgtgcacatggcggggctcatcgccgacatggacgcgctcggcgaactctccgccgacaccggtgtgcctcttctccaggacgccgcccacgcacacggtgcccgctggcagggcaaacgggtgggcgagttgggtacggtcgcctcgttcagcttccagaacggcaagctgatgaccgccggcgagggcggtgcgctgctcctgcccgacgaggagacctacgaggccgcgttcctgcggcacagttgtggccggtcacgtaccgaccgccgatacatgcaccagaccgccggcaccaacatgcggctcaacgagttctccgcggccgtgctccgcgcccagctgggccgcctcgacgcccagatcacgctccgcgatcagcgctggacgctgctgtcccggctgctcggtgagatcgacggcgtcgtaccccagggcagcgacccgcgcgccgaccggaactcccactacatggcgatgttccggatccccggcatatccgaggaggcccgcaacgccctcgtcgacacgctcgtcgaggccggcctgcccgccttcgccgccttccgggcgatctaccgcaccgacgcgttctgggagacggccgcgcccgacaccaccgtcgacaagctcgccgaaagctgcccgcacaccgaggcgatcagcaccgactgcatctggctgcaccatcgagtgctgctcgcctcggaggaggccctccacaccacagccgagatcatcgccgacgccgtggccgcacggtga\n>Ansalactam_AHBA\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------gcgccgcgcatgctttggccgtcaccaacggcacccatgccctggaactggcgctgcagtgtctgggtgtcggtccgggcacggaggtcatcgtgccggccttcactttcatctcctcgtcccaggccgctcagcggctcggcgcggtcgccgtccccgtcgacgtcgatctcgacacgtacaacatcgacgtggctgccgcggcggccgccgtcacccctcgcaccagggtgatcatgcccgtgcacatggcggggctcatcgctgacatggacgcgctcgacaagctctccgcggacaccggcgtgcccgtgctgcaggacgccgcccacgcgcacggtgcccgatggcagggcaaacgggtgggcgagttgggcacggtcgccaccttcagcttccagaacggcaagctgatgaccgccggcgagggtggtgccctgctcttccccgacgaggagacgtacgaggccgccttcctgcggcacagctgtggccggccgcgcaccgaccgccactacatgcaccagaccgccggcaccaacatgcggctcaacgagttctctgcctccgtgctccgcgcccaactgagccgcctcgacgcccagctcacgctgcgcgatgagcgctggacactgctgtcccggctgctcggcaagatcgacggcgtcgtaccccaggggggcgatgcgcgcgcc------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n>Arifamycini\n--atg--------------------------------------------------------------aacgcacgacaggcg-------cccgaattcccccaatggccgcagtacgacgacgcagagcgggacggcctgatccgtgcgctggagcagggccagtggtggcgcatgggcggcagcgaggtggacgcgttcgagcacgagttcgccgcgcaccacggcgccgcgcacgcgctggcggccaccaccgggacgcacgcgctcgaactcgccctgcagtgcatgggcgtcgggccgggcaccgaggtgatcgtgccggccttcaccttcatctcctcctcccaggcggcccagcggctcggcgcggtcgcggtcccggtcgacgtcgacgccggcacctacaacctcgacccggcggcggtctccgccgccctcaccccccgcacccgcgtgatcatgccggtgcacatggccgggctcatggcggacatggacgcgctcggcaagatctccgccgagtccggggtgccgctgctgcaggacgccgcgcacgcccacggcgcgcgctggcaggggcggcgcgtcggcgagctcggcggcgtcgcggcgttcagcttccagaacggcaaactgatgaccgcgggcgagggcggcgcggtgctgttcccggacggcgacatgtacgagacggcgttcctgcgccacagttgcggccgcccccgggacgaccgccgctacttccaccggatcgcgggctccaacctgcggatgaacgagttctcggcggcggtgctgcgggcccagctgcgccgcctcgacgagcagatcgcggtccgggacgagcgctggaagctgctgtccccgctgctcgcgcggatcgacggcgtcgtcccgcaggcggacgacgtgcgcgccgaccggcactcgcactacatggcgatgttccgcgtccccgggatcaccgaggagcggcgcaacgccctcgtcgaccgcctcgtcgccgccggcgtgcccgcgttcgccgcgttccgcgcgatccaccgcaccgaggcgttctgggagatcggggcgcccgcggagacgccggacgcgatcggggagcgctgccccaacaccgaggccatcagccgcgactgcgtctggctgcaccaccgcgtcctgctggcgggggagccggagatccgcgccgccgccgagatcatcgccgacctcgtggcctccgcatga\n>Chaxamycin_AHBA\n--atg--------------------------------------------------------------aacgcgcgacaggca-------ccagaattcccccgctggcctcagtacgacgagaccgagcgggacggcctgatccgtgcgctggaacagggccagtggtggcgcatgggcggcgacgaggtcgactccttcgagcgggagttcgccgagcaccacggcgccccccacgcgctggcggtcaccaacggcacccacgcgctggaactcgccctgcaatgcctgggcgtcggcccgggcaccgaagtcatcgtgccggccttcaccttcatctcctcctcgcaggccgcccagcggctcggcgccgtcgccgtccccgtcgacgtccacccggacacctactgcatcgacgccgccgcggtcgccgccgccgtcaccccccgcacccgcgccatcatgccggtgcacatggccgggctcatcgcggacatggacgccctggcgaagatctccgccgacaccggggtccccctgctccaggacgccgctcacgcccacggtgcccgctggcagggcaaacgcgtcggtgaactgggcagcgtcgccgcgttcagcttccagaacggcaagctgatgaccgccggcgagggcggcgccctcctcttcccggacacggagctgtacgaggcggcgttcctgcggcacagctgcggccgcccccgcgacgaccgccgctacctgcaccgcaccgcgggctccaacctgcgcatgaacgagttctccgcggccgtgctgcgcgcccagctgagccgcctcgaccagcagatcgccctgcgggaggagcgctggaccctgctgtcccggctgctcgccgccatcgacggcgtcgtcccgcagggcggcgacgtgcgcgtggaccgcaagtcgcactacatggcgatgttccgggtccccggcctcggcgaggagcggcgcaacgccctggtcgaccggctcgtggaggcgggcctgcccgcgttcgccgcgttccgcgcgatctaccgcaccgacgccttctgggagatcggcgcacccgacgagacccccgacgccatcgccgcccgctgcccccacaccgaagccatcagccaggactgcgtctggctgcaccaccgcgtcctgctcgccggggaagcggagatgcacgccaccgccgagatcatcgccgacctcgtggcccgcgcgtga","config":{"vis":{"conserv":false,"overviewbox":false,"seqlogo":true,"sequences":true,"markers":true,"metacell":false,"gapHeader":false,"leftHeader":true,"labels":true,"labelName":true,"labelId":true,"labelPartition":false,"labelCheckbox":false,"metaGaps":true,"metaIdentity":true,"metaLinks":true},"conf":{"dropImport":true,"registerMouseHover":false,"registerMouseClicks":true,"eventBus":true,"alphabetSize":20,"debug":false,"hasRef":false,"manualRendering":false},"colorscheme":{"scheme":"taylor","colorBackground":true,"showLowerCase":true,"opacity":0.6},"zoomer":{"menuFontsize":"12px","autoResize":true,"alignmentWidth":"auto","alignmentHeight":225,"columnWidth":15,"rowHeight":15,"textVisible":true,"labelIdLength":30,"labelNameLength":100,"labelPartLength":15,"labelCheckLength":15,"labelFontsize":13,"labelLineHeight":"13px","markerFontsize":"10px","stepSize":1,"markerStepSize":2,"markerHeight":20,"residueFont":"13","canvasEventScale":1,"boxRectHeight":2,"boxRectWidth":2,"overviewboxPaddingTop":10,"metaGapWidth":35,"metaIdentWidth":40,"metaLinksWidth":25},"menu":{"menuFontsize":"14px","menuItemFontsize":"14px","menuItemLineHeight":"14px","menuMarginLeft":"3px","menuPadding":"3px 4px 3px 4px"}},"menu":false,"features":null},"evals":[],"jsHooks":[]}</script>
</div>
<div id="customized-msas" class="section level2">
<h2>Customized MSAs</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">msaR</span>(seqfile, <span class="dt">menu=</span>F, <span class="dt">overviewbox =</span> F)</code></pre></div>
<div id="htmlwidget-434eca8e7ee355a5f13f" style="width:288px;height:288px;" class="msaR html-widget"></div>
<script type="application/json" data-for="htmlwidget-434eca8e7ee355a5f13f">{"x":{"alignment":">Hygrocin_AHBA\n--atg--------------------------------------------------------agcaatgatgtgcgactgcga-------tccgagctgcccgcatggccgcagtacggcgacgaggagcgcgaggccctcatccgggctctggatcaggggcaatggtggcgtatcgggggcggtgaggtcgacgccttcgaggcggagttcgccgcggcccatgggagcgagcacgccctggcggtcaccaatgggacgcatgcgctggagctcgccctcgaagtgctcggggtcggcaccgactccgaggtgatcgttcccgcgttcaccttcatctcgtcctcgcaggcggctcagcggctgggcgcggtggccgtgcccgtggacgtggacccggacacgtactgcatcgatccctcggcggtcgaggcagccatcggcccgaaaacccgcgcgatcatgccggtgcacatggcgggccagatgtgcgacatggacgcgctgggcaagctgtccgccgactcgggggtgccgctgatccaggacgcggcccatgcgcacggtgcgcggtggcgcggtcagaaggtcggtgagctgggctcggtcgccgcgttcagcttccagaacggaaagctgatgacggccggtgagggcggcgccgtgctcttccccgatgccgagatgtacgagaggggcttcgtccggcacagctgtggacgtccgcgcaccgaccgcggctacttccaccgcacctcgggctccaacttccggctgaacgagttctccgcatccgtactgcgcgcccaactcgcccgcctggacggccagatcaccacgcgtgagcagcgctggccggtgctgagccggctgctcgccgaaatccccggtgtggtaccgcagtcgcgcgacgaccgcggtgaccgcaatccgcactacatggcgatgttccgggtgccgggcatcaccgaggagcgccgcgcgaaggtcgtcgacaccctcatcgagcgcggggtgcccgcgtttgtcgcgttccgcgcggtctaccgtacggacgccttctgggaggtcgcggcgccggatctgacggtggacgaactcgcccgccgctgcccgcactccgaggcgctcacccgcgactgcctttggctgcaccaccgggtgctgctgggcagcgaggagcagatgcacgaagtggccgccgtcgtcgccgatgtgctcgcgggcgcatga\n>Macbecin_AHBA\n--atg-----------------------------------------------------------agcaattctccggacgca----ggcatcgagttcccggcctggccgcagcacgacgacgccgagcgcacggccctgctgcgcgcgctggaccagggccagtggtggcgggtcggcggcagcgaggtcgacgagttcgagcgcgagttcgccgagtaccacggcgcgggccacgcgctcgccgtcaccaacgggacgcacgcgctggagctggcgctccaggtgctcgacgtgggccccggcgccgaggtgatcgtgcccgccttcaccttcatctcgtcctcgcaggccgtgcagcgcctcggcgcggtcgccgtgcccgtggacgtcgaccccgacacctactgcctggacgtcgccgccgccgaggccgccgtcacctcccgcacctcggcgatcatgcccgtgcacatggcgggccagttcgccgacatggaccggctggacaagctgtccacgagcaccggcgtgccggtcctgcaggacgccgcccacgcccacggcgcccactggcgcggcaagcgggtcggcgagctcgggtcgatcgccacgttcagcttccagaacggcaagctgatgacggcgggcgagggcggggccgtgctgttcgaggacgaggcccagtgggagaaggcgttcgtcctgcacagctgcggcaggcccaagggcgaccgcggctacttccacctcacctcgggctcgaacttccggatgaacgagttctccgccgccgtgctgcgcgcccagctcggcaggctggactcgcagatcgcgaccaggcaggcccgctggccggtgctgtccgcgctgctggcggggatcgacggcgtcgtgccgcagaccgtcgacccgcgcagcgaccgcaacccgagctacatggcgatgttccggatgcccggcgtcaccgaggagcggcgcaacgcggtggtggacgagctggtgcggcgcgggatcccggcgttcatggcgttccgggcggtctaccgcacccaggcgttctgggagaccggcgcgcccgacctgaccaccgaggagctggccgcccggtgcccggtgtcggaggagatcacccgcgactgcgtgtggctgcaccaccgggtgctgctgggcaccgaggagcagctgcaccggcttgccgccgtcgtggccgacgtggtcgcgggcgcgtga\n>Ansatrienin_AHBA\n--gtg--------------------------------------------------------cacctgaaggccccgcagaag-------ctggagttccccgcctggccgcagttcgactcgaccgagcgcgaggccctgctgcgcacgctcgacagcggccggtggtggcggatcaccggggacgaggtcgtctcgttcgagcgggagttcgcgcaggcccacggcgcccggcacgcgctcgccgtcaccacgggcacgcacgccctcgaactcgtcctggaggtcatgggcgccgggcctggcaccgaggtgatcgtgcccgcgttcaccttcatctcctcctcgcaggccgcccagcggctcggcgcggtcgtcgtccccgtcgacgtcgacccggacacctactgcgtcgacccggccgccgtgcgggccgcgatcaccgagcgcaccagggcgatcatgcccgtgcacatggcgggccagctcgccgacatggacgcgctgcgcgccctgtccgccgagaccggcgtcccgctgctccaggacgccgcgcacgcccacggcgcgcggtggcgcggcgagcccctcggcgcgctcggctcgatcgccgccttcagcttccagaacggcaagctgatgaccgcgggcgagggcggcgccgtgctgctcccggacggggaccagcacgaggaggcgttcctgcgccacgcctgcgggcgcccgctcgccgaccgggcctaccaccaccgcacggccgggtcgaacttccgcatgaacgagttctccgccgcgctgctgcgcgcccagctcggcaggctccagcagcagaccgacgtgcgcgagcggcactggcccgtgctgtcgcggctgctcgccgaggtgcccggcgtcgtcccgcaggggaccgacccgcgctgcgaccgcaacccgcactacatggccatgttccaggtccccggcatcggcgaggagcgccgcgcccgcctggtcgacgcgctggtcgagcgcggagtcccggcgttcgccgggttccgcgcgatctaccgcaccgccgcgttctgggagcgcgccgcccccgacaccacggtggacgccctcgcccgcgcctgcccggtcacggaagcgctcagcagcgactgcgtgtggctgcaccaccgggtgctgctgggggcggaggagcagatgccgctggtggcggaggccgtcgcctgcgcgctggaggaggcctga\n>Ansamitocin_AHBA\n--gtg--------------------------------------------------------cacctgaaggccccgcagaag-------ctggagttccccgcctggccgcagttcgactcgaccgagcgcgaggccctgctgcgcacgctcgacagcggccggtggtggcggatcaccggggacgaggtcgtctcgttcgagcgggagttcgcgcaggcccacggcgcccggcacgcgctcgccgtcaccacgggcacgcacgccctcgaactcgtcctggaggtcatgggcgccgggcctggcaccgaggtgatcgtgcccgcgttcaccttcatctcctcctcgcaggccgcccagcggctcggcgcggtcgtcgtccccgtcgacgtcgacccggacacctactgcgtcgacccggccgccgtgcgggccgcgatcaccgagcgcaccagggcgatcatgcccgtgcacatggcgggccagctcgccgacatggacgcgctgcgcgccctgtccgccgagaccggcgtcccgctgctccaggacgccgcgcacgcccacggcgcgcggtggcgcggcgagcccctcggcgcgctcggctcgatcgccgccttcagcttccagaacggcaagctgatgaccgcgggcgagggcggcgccgtgctgctcccggacggggaccagcacgaggaggcgttcctgcgccacgcctgcgggcgcccgctcgccgaccgggcctaccaccaccgcacggccgggtcgaacttccgcatgaacgagttctccgccgcgctgctgcgcgcccagctcggcaggctccagcagcagaccgacgtgcgcgagcggcactggcccgtgctgtcgcggctgctcgccgaggtgcccggcgtcgtcccgcaggggaccgacccgcgctgcgaccgcaacccgcactacatggccatgttccaggtccccggcatcggcgaggagcgccgcgcccgcctggtcgacgcgctggtcgagcgcggagtcccggcgttcgccgggttccgcgcgatctaccgcaccgccgcgttctgggagcgcgccgcccccgacaccacggtggacgccctcgcccgcgcctgcccggtcacggaagcgctcagcagcgactgcgtgtggctgcaccaccgggtgctgctgggggcggaggagcagatgccgctggtggcggaggccgtcgcctgcgcgctggaggaggcctga\n>Divergolide_AHBA\n--atgacgagaggttttcaccctggttatcgtgcgggccgagaatcattcgaggagggctggcgaacaatgctggacaaggaactcgacctggatttcccggcgtggccgcagtacgacgacaccgagcgtgccgggctcgtccgtgccctggagcagggacagtggtggcgtatcggcggcagtgaggtggacgagttcgagcgcgagttcgccgaggcgaacggtgccccgcacgcgctcgcggtgacgaccggcacgcacgccctggaactggcactgcaggtgctcggcgtcggccccggcaccgaggtcgtcgtgccggcgttcaccttcatctcgtcgtcgcaggccgcgcagcgactgggcgcggtggccgtcccggtcgacgtcgacctggacacgtactgcctggaccccgaggcggtggcggcggcgatcacgccgcgcaccgcggcgatcatgccggtgcacatggccggtcagatctgcgacatggacgccctcggcaagctgtcggcggactccggcgtcccgctgctgcacgacgccgcgcacgcgcacggcgggcggtggcgcgaccagggcgtgtcggcgctgggcacgatggcggcgttcagcttccagaacggcaagctgatgaccgcgggcgagggcggcgcggtcaccttcccggacagcgagcagtacgagacggcgttcctccggcacagctgcggccgcccccgcacggaccgcacctaccggcaccagacctccggctccaacttccggatgaacgagttcaccgcgagcgtgctgcgcgcccaactggcccggctcgacggccagatcgacacccgggagcagcgctggccggtgctggccggacaactcgcgcggatcacgggcgtgctgccgcaggccaccgacgaccggtgcacccgcaacccgcactacatggccatgttccgggtgcccggcatctccgaacagcagcgcaacgaactggtcgacgcgctggtggcccgcggcctgccggccttcgcggcgttccgcgcgatccatcgcaccaaggcgttctgggagaccggggcgcccgacgaaccggtcgaggcgatcgcccggcggtgcccgaacagcgaggcgctgtccaccgactgcgtctggctgcaccaccggaccctgctcggcaccgaggagcagatgcacgccgtcgccgaggtcgtctccgacgcgctggcggcgtcgtga\n>Rubradirin_AHBA\n--atg--------------------------------------------------------------agtccgcgaccgagg-------ccgacctttccggattggccgcaattcgatgacaccgaacgccgagctcttgatcgtgcgctgtcccagggccagtggtggcgcatgggtggcagcgaggtggacagcttcgagcgggagttcgccggataccacggtgcccaccacgccctcgccgtcaccaacggcacgcacgcgctggagctcgccctgcaggtgctgggtgcgggaccgggcaccgaagtgatcgtgccggcgttcaccttcatctcctcgtcccaggccgctcagcggatcggggccgtcgccgtgccggtggacgtcgatccggagacctacaacatcgacgcgaccgccaccgccgaggcgatcacaccgcggacccgggtgatcatgccggtgcacatggcgggtctcatggccgacatggacgcactggacaagctcgcctccgatgccggcgtccggatccttcaggacgcggcccacgcgcacggtgcccggtggcggggcaagcgcgtgggcgagctgggctcgatcgcggcgttcagcttccagaacggcaagctgatgaccgcgggcgagggcggcgcggtgctgttcttggacccggacgactacgagaaggcattcctgcatcactcctgcggccggccgcgcaccgaccgcaactatcaccaccaggtggccggcaccaacatgcggatgaacgagttctcggccgccgtcctgcgcgctcagctgggccgcctcgacggccagatcgagctgcgcgagcagcggtggcggttgctgtcgcagctcttggcccagatccccggcgtccggccgcagggcggtgatgcgcgggccgaccggaatccgcactacatggcgatgttccggcttcccggctggtcggaggagcgtcgcaacctcctcgtcgatcgcctggtcgacgcggggatcccggcgttcgcgggcttccgcgccatctaccgcaccgcggcgttctgggagaccggcgcacccgaggagtccgtcgacgcggtcgccaagcggtgccccaacgccgacgcgatcagccaggactgcgtctggctgcaccaccgcaccctgctcgcgtcggagcaggctctcaccgacaccgccgccatcgtggccgaccaggtggccgccggatga\n>Napthomycin_AHBA\n--atg--------------------------------------------------------------aacgcgcgaccggca-------ccggaattcccgaagtggccgcagtacgacgacgaagagcggaccggactgatccgggccctggaacaaggccagtggtggcgcatgggcggggaggaagtcgactccttcgagcgtgagttcgccgacttccacggcgccccgcacgccctggccgtcaccaacggcacccaggccctcgaactcgccctccaggtgctgggcgtcggtccggggaccgaggtcatcgtgccggccttcaccttcatctcctcctcccaggccgcccagcgcatcggcgcggtcgccgtccccgtcgacgtcgacccgggcacgtacaacatcgacgtcgccgcggccgccgccgccgtcaccccgcgcacccgggcgatcatgcccgtgcacatggccggtctgccggccgacatggacgccctcggcaagctcgccgccgacaccggcgtatcgatcgtgcaggacgcggcccacgcccagggcgcccgctggcagggcaagcgggtcggcgaactcggttcggtcgccgtgttctccttccagaacggcaagttgatgaccgccggtgagggcggcgccgtcctgttccccgacagcggcctgcacgaggcggcgttcctgcggcacagctgcggtcggccgcgtaccgaccgccactaccggcacgaggtcgcgggcaccaacatgcggctcaacgagttctccgccgccgtgctgcgcgcccagctgcgccgcctgcccgcccagaccgaactgcgcgacaagcggtgggcgctgctgtcccggctgctcggcgccatcgacggcgtcgtaccgcagagcggtgacgcccgcgccgaccagaacacgcactacatggcgatgttccgggtccccggcatctccgaggagacccgtaacgcgctggtcgaccggctggtcgacgccgggctgcccgccttcgccgcgttccgcgccatccaccgcaccgacgccttctgggaggtcggcgcccccgacgagaccgtggagcagatcgccgagcgctgcccgaacaccgaggccatcagcgacgactgcgtctggctgcaccaccgggtgctcctcgccgaggagcgggacctggagatcacggccgagatcatcgcggacgcagtggccgccatatga\n>Neoansalactam_AHBA\nacatg--------------------------------------------------------------aacgcgcgacggacg-------ccagagttccccacctggccgcagtacgacgacggcgagcgcaccggcctgatccgggccctggagcagggccagtggtggcgcatgggaggctcggaggtggactccttcgagagtgagttcgcggacttccacggtgccccacacgctttggccgtcaccaacggcacccacgccctggagttggcgttgcagtgtctgggcgtcgggccgggcaccgaggtcatcgtgccggccttcaccttcatctcctcctcccaggccgctcagcggctgggagcggttgccgtccccgtcgacgtcgatctcgatacctacaacatcgacgtggctgccgcggcttccgccgtcacccccctcaccaaggcgatcatgcctgtgcacatggcggggctcatcgccgacatggacgcgctcggcgaactctccgccgacaccggtgtgcctcttctccaggacgccgcccacgcacacggtgcccgctggcagggcaaacgggtgggcgagttgggtacggtcgcctcgttcagcttccagaacggcaagctgatgaccgccggcgagggcggtgcgctgctcctgcccgacgaggagacctacgaggccgcgttcctgcggcacagttgtggccggtcacgtaccgaccgccgatacatgcaccagaccgccggcaccaacatgcggctcaacgagttctccgcggccgtgctccgcgcccagctgggccgcctcgacgcccagatcacgctccgcgatcagcgctggacgctgctgtcccggctgctcggtgagatcgacggcgtcgtaccccagggcagcgacccgcgcgccgaccggaactcccactacatggcgatgttccggatccccggcatatccgaggaggcccgcaacgccctcgtcgacacgctcgtcgaggccggcctgcccgccttcgccgccttccgggcgatctaccgcaccgacgcgttctgggagacggccgcgcccgacaccaccgtcgacaagctcgccgaaagctgcccgcacaccgaggcgatcagcaccgactgcatctggctgcaccatcgagtgctgctcgcctcggaggaggccctccacaccacagccgagatcatcgccgacgccgtggccgcacggtga\n>Ansalactam_AHBA\n---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------gcgccgcgcatgctttggccgtcaccaacggcacccatgccctggaactggcgctgcagtgtctgggtgtcggtccgggcacggaggtcatcgtgccggccttcactttcatctcctcgtcccaggccgctcagcggctcggcgcggtcgccgtccccgtcgacgtcgatctcgacacgtacaacatcgacgtggctgccgcggcggccgccgtcacccctcgcaccagggtgatcatgcccgtgcacatggcggggctcatcgctgacatggacgcgctcgacaagctctccgcggacaccggcgtgcccgtgctgcaggacgccgcccacgcgcacggtgcccgatggcagggcaaacgggtgggcgagttgggcacggtcgccaccttcagcttccagaacggcaagctgatgaccgccggcgagggtggtgccctgctcttccccgacgaggagacgtacgaggccgccttcctgcggcacagctgtggccggccgcgcaccgaccgccactacatgcaccagaccgccggcaccaacatgcggctcaacgagttctctgcctccgtgctccgcgcccaactgagccgcctcgacgcccagctcacgctgcgcgatgagcgctggacactgctgtcccggctgctcggcaagatcgacggcgtcgtaccccaggggggcgatgcgcgcgcc------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n>Arifamycini\n--atg--------------------------------------------------------------aacgcacgacaggcg-------cccgaattcccccaatggccgcagtacgacgacgcagagcgggacggcctgatccgtgcgctggagcagggccagtggtggcgcatgggcggcagcgaggtggacgcgttcgagcacgagttcgccgcgcaccacggcgccgcgcacgcgctggcggccaccaccgggacgcacgcgctcgaactcgccctgcagtgcatgggcgtcgggccgggcaccgaggtgatcgtgccggccttcaccttcatctcctcctcccaggcggcccagcggctcggcgcggtcgcggtcccggtcgacgtcgacgccggcacctacaacctcgacccggcggcggtctccgccgccctcaccccccgcacccgcgtgatcatgccggtgcacatggccgggctcatggcggacatggacgcgctcggcaagatctccgccgagtccggggtgccgctgctgcaggacgccgcgcacgcccacggcgcgcgctggcaggggcggcgcgtcggcgagctcggcggcgtcgcggcgttcagcttccagaacggcaaactgatgaccgcgggcgagggcggcgcggtgctgttcccggacggcgacatgtacgagacggcgttcctgcgccacagttgcggccgcccccgggacgaccgccgctacttccaccggatcgcgggctccaacctgcggatgaacgagttctcggcggcggtgctgcgggcccagctgcgccgcctcgacgagcagatcgcggtccgggacgagcgctggaagctgctgtccccgctgctcgcgcggatcgacggcgtcgtcccgcaggcggacgacgtgcgcgccgaccggcactcgcactacatggcgatgttccgcgtccccgggatcaccgaggagcggcgcaacgccctcgtcgaccgcctcgtcgccgccggcgtgcccgcgttcgccgcgttccgcgcgatccaccgcaccgaggcgttctgggagatcggggcgcccgcggagacgccggacgcgatcggggagcgctgccccaacaccgaggccatcagccgcgactgcgtctggctgcaccaccgcgtcctgctggcgggggagccggagatccgcgccgccgccgagatcatcgccgacctcgtggcctccgcatga\n>Chaxamycin_AHBA\n--atg--------------------------------------------------------------aacgcgcgacaggca-------ccagaattcccccgctggcctcagtacgacgagaccgagcgggacggcctgatccgtgcgctggaacagggccagtggtggcgcatgggcggcgacgaggtcgactccttcgagcgggagttcgccgagcaccacggcgccccccacgcgctggcggtcaccaacggcacccacgcgctggaactcgccctgcaatgcctgggcgtcggcccgggcaccgaagtcatcgtgccggccttcaccttcatctcctcctcgcaggccgcccagcggctcggcgccgtcgccgtccccgtcgacgtccacccggacacctactgcatcgacgccgccgcggtcgccgccgccgtcaccccccgcacccgcgccatcatgccggtgcacatggccgggctcatcgcggacatggacgccctggcgaagatctccgccgacaccggggtccccctgctccaggacgccgctcacgcccacggtgcccgctggcagggcaaacgcgtcggtgaactgggcagcgtcgccgcgttcagcttccagaacggcaagctgatgaccgccggcgagggcggcgccctcctcttcccggacacggagctgtacgaggcggcgttcctgcggcacagctgcggccgcccccgcgacgaccgccgctacctgcaccgcaccgcgggctccaacctgcgcatgaacgagttctccgcggccgtgctgcgcgcccagctgagccgcctcgaccagcagatcgccctgcgggaggagcgctggaccctgctgtcccggctgctcgccgccatcgacggcgtcgtcccgcagggcggcgacgtgcgcgtggaccgcaagtcgcactacatggcgatgttccgggtccccggcctcggcgaggagcggcgcaacgccctggtcgaccggctcgtggaggcgggcctgcccgcgttcgccgcgttccgcgcgatctaccgcaccgacgccttctgggagatcggcgcacccgacgagacccccgacgccatcgccgcccgctgcccccacaccgaagccatcagccaggactgcgtctggctgcaccaccgcgtcctgctcgccggggaagcggagatgcacgccaccgccgagatcatcgccgacctcgtggcccgcgcgtga","config":{"vis":{"conserv":false,"overviewbox":false,"seqlogo":true,"sequences":true,"markers":true,"metacell":false,"gapHeader":false,"leftHeader":true,"labels":true,"labelName":true,"labelId":true,"labelPartition":false,"labelCheckbox":false,"metaGaps":true,"metaIdentity":true,"metaLinks":true},"conf":{"dropImport":true,"registerMouseHover":false,"registerMouseClicks":true,"eventBus":true,"alphabetSize":20,"debug":false,"hasRef":false,"manualRendering":false},"colorscheme":{"scheme":"taylor","colorBackground":true,"showLowerCase":true,"opacity":0.6},"zoomer":{"menuFontsize":"12px","autoResize":true,"alignmentWidth":"auto","alignmentHeight":225,"columnWidth":15,"rowHeight":15,"textVisible":true,"labelIdLength":30,"labelNameLength":100,"labelPartLength":15,"labelCheckLength":15,"labelFontsize":13,"labelLineHeight":"13px","markerFontsize":"10px","stepSize":1,"markerStepSize":2,"markerHeight":20,"residueFont":"13","canvasEventScale":1,"boxRectHeight":2,"boxRectWidth":2,"overviewboxPaddingTop":10,"metaGapWidth":35,"metaIdentWidth":40,"metaLinksWidth":25},"menu":{"menuFontsize":"14px","menuItemFontsize":"14px","menuItemLineHeight":"14px","menuMarginLeft":"3px","menuPadding":"3px 4px 3px 4px"}},"menu":false,"features":null},"evals":[],"jsHooks":[]}</script>
</div>
<div id="use-as-a-shiny-widget" class="section level2">
<h2>Use as a Shiny widget</h2>
<p>msaR can be used as a widget with the <a href="http://shiny.rstudio.com/">Shiny</a> web application framework.</p>
<p>In ui.R</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">msaROutput</span>(<span class="st">&quot;msa&quot;</span>, <span class="dt">width=</span><span class="st">&quot;100%&quot;</span>)</code></pre></div>
<p>In server.R</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">output$msa &lt;-<span class="st"> </span><span class="kw">renderMsaR</span>(
  <span class="kw">msaR</span>(seqfile)
)</code></pre></div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
